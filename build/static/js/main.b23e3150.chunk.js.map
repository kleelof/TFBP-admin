{"version":3,"sources":["store/store.ts","models/User.ts","store/auth/authReducer.ts","store/auth/authActions.ts","config.js","services/axiosApi.ts","components/menu/MenuItems.tsx","services/Service.ts","services/AuthService.ts","components/nav/Navigation.tsx","services/DeliveryDayService.ts","models/ModelBase.ts","models/DeliveryDayModel.ts","helpers/MomentHelper.ts","helpers/helpers.ts","components/delivery/DeliveryDays.tsx","components/widgets/loading_icon_button/LoadingIconButton.tsx","components/overlays/LoadingOverlay.tsx","components/widgets/page_selector/PageSelector.tsx","components/delivery/Deliveries.tsx","services/MenuItemService.ts","services/DeliveryDayItemService.ts","components/widgets/inputWidget/InputWidget.tsx","components/widgets/searchWidget/SearchWidget.tsx","models/MenuItemModel.ts","models/DeliveryDayItemModel.ts","components/delivery/DeliveryMenuItemOptionsComponent.tsx","components/delivery/DeliveryDayItemComponent.tsx","components/delivery/DeliveryDayComponent.tsx","components/menu/NewMenuItem.tsx","components/menu/MenuItemEdit.tsx","components/widgets/imageUploader/ImageUploader.tsx","components/menu/Menu.tsx","components/authentication/Login.tsx","services/OrderService.ts","components/order/Orders.tsx","services/OrderItemService.ts","components/order/Export.tsx","models/OrderModel.ts","services/APIActionService.ts","components/order/OrderEmail.tsx","components/order/OrderEdit.tsx","models/Coupon.ts","services/CouponService.ts","components/coupon/CouponComponent.tsx","components/coupon/Coupons.tsx","components/delivery/DeliveryDuplicate.tsx","components/coupon/CouponAdd.tsx","models/MailingListModel.ts","services/MailingListService.ts","components/mail/MailingListEntry.tsx","components/mail/MailingList.tsx","services/MailTemplateService.ts","models/MailTemplate.ts","components/mail/MailTemplateComponent.tsx","components/mail/MailTemplates.tsx","services/DeliveryWindowService.ts","models/DeliveryWindowModel.ts","components/mail/MailMassMailer.tsx","components/mail/Mail.tsx","services/NewsletterService.ts","components/newsletter/NewslettersNewsletter.tsx","models/Newsletter.ts","components/newsletter/NewsletterAdd.tsx","components/newsletter/Newsletters.tsx","components/newsletter/NewsletterEdit.tsx","constants.ts","components/browser_tool/BrowserDay.tsx","components/browser_tool/BrowserTool.tsx","components/widgets/email_widget/EmailWidget.tsx","components/browser_tool/BrowserWindowTools.tsx","components/browser_tool/BrowserFullDay.tsx","components/delivery_windows/DeliveryWindowsWindow.tsx","components/delivery_windows/DeliveryWindows.tsx","services/ZoneService.ts","components/delivery_windows/DeliveryWindowEdit.tsx","models/ZoneModel.ts","models/ZipcodeModel.ts","components/zone/ZoneCode.tsx","services/ZipService.ts","components/widgets/spinnerButton/SpinnerButton.tsx","components/zone/ZoneTool.tsx","components/zone/Zones.tsx","models/RouteModel.ts","services/RouteStopService.ts","components/delivery_planner/RouteOrganizerEntry.tsx","services/RouteService.ts","components/delivery_planner/RouteOrganizer.tsx","components/delivery_planner/DeliveryPlanner.tsx","services/OperatorService.ts","models/OperatorModel.ts","components/profile/Profile.tsx","App.tsx","serviceWorker.ts","index.tsx","assets/menu_icon.png","assets/loader.gif","assets/save_checkmark.png"],"names":["actions","User","id","username","email","defaultState","loggedIn","user","operator_token","rootReducer","combineReducers","authReducer","state","action","type","LOGIN","LOGOUT","window","localStorage","removeItem","store","createStore","applyMiddleware","thunk","dispatchLogin","dispatch","login","config","API_URL","OPERATOR_TOKEN","RESULTS_PER_PAGE","UPLOADS_PATH","axiosInstance","axios","create","baseURL","timeout","headers","getItem","interceptors","response","use","a","error","originalRequest","status","refresh_token","post","refresh","setItem","data","access","defaults","console","log","Promise","reject","ItemsModes","Service","_service_url","appName","view","buildSearchQuery","search","searchField","page","params","pagedSearchResults","pageNumber","searchColumn","_get","path","resolve","get","then","resp","catch","err","content","patch","delete","this","DTO","useFormData","multipartFormPost","_post","_delete","querizeObject","date","startDate","endDate","formData","FormData","Object","keys","forEach","key","append","_patch","object","map","join","multipartFormUpdate","authenticate","password","logout","viewPath","updatePassword","current_password","new_password","user_id","validateToken","refreshToken","Navigation","props","useState","doLogin","showDropdown","setShowDropdown","useDispatch","history","useHistory","navigateToPage","pathname","closeNav","push","to","className","onClick","attachDeliveryWindow","day","detachDeliveryWindow","duplicateDeliveryDay","deliveryDay","start_date","end_date","ModelBase","created_at","DeliveryDay","day_items","asDateSlug","useUTC","moment","utc","format","asFullDate","asFullDateTime","dateTime","asShortDate","asShortDateTime","days","months","spicy","proteins","convertToTwelveHour","twentyFourHourTime","parts","split","hour","parseInt","amPm","toString","extractCartItemDescription","cartItem","description","menu_item","name","protein","length","formatDeliveryWindow","excludeDate","windowText","momentHelper","start_time","end_time","sortOrderItemsByDate","orderItems","sortedItems","item","cart_item","delivery_date","sortDeliveryDayItemsByCategory","items","en","ap","si","de","category","groupMenuItemsByCategory","sort","groupedItems","compareMenuItemsByName","ia","ib","DeliveryDays","style","whiteSpace","helpers","src","image","alt","LoadingIconButton","undefined","outerClass","btnClass","disabled","label","busy","LoadingOverlay","loadingAnimation","React","Component","PageSelector","numPages","Math","ceil","numItems","getRangeOfChoices","start","end","selected","choices","x","text","currentPage","unshift","choice","gotoPage","choiceClicked","Deliveries","loading","deliveryDays","creatingDeliveryDay","editId","paginationCount","componentDidMount","changePages","setState","deliveryDayService","dto","results","count","createDeliveryDay","alert","add","updateData","e","target","value","deliveries","b","onChange","InputWidget","timer","lastSavedValue","componentWillReceiveProps","initialValue","handleOnKeyPress","keyCode","sendUpdate","updateValue","resetTimer","defaultUpdateValue","onUpdate","clearInterval","clearTimeout","setTimeout","onBlur","onKeyDown","required","placeholder","SearchWidget","onclick","event","close","itemSelected","doSearch","service","MenuItem","price","allergens","active","DeliveryDayItemDTO","delivery_day","sold_out","DeliveryDayItem","getDTOxxx","DeliveryMenuItemOptions","remove","confirm","saving","deliveryDayItemService","deliveryDayItem","refreshItems","save","update","parseFloat","checked","DeliveryDayItemComponent","DeliveryDayComponent","menuItems","deliveryWindows","match","refreshDay","menuItemService","NewMenuItem","setName","setCategory","open","setOpen","defaultValue","newMenuItem","ItemModes","MenuItems","useParams","setMenuItems","useEffect","menuType","random","toLowerCase","ImageUploader","fileElement","reloadAttempted","imageURL","loadImage","componentDidUpdate","clearImage","preventDefault","hasImage","newImageLoaded","url","toDataURL","document","getElementById","loadingImage","onInputChanged","files","readFile","file","size","maxSizeInMb","maximumSizeInMb","result","currentImage","dataURL","click","reader","FileReader","onload","replace","readAsDataURL","xhr","XMLHttpRequest","onloadend","responseType","send","ref","input","accept","allowedFileTypes","uploadPrompt","MenuItemEdit","temporaryImage","menuItem","loaded","viewingServings","hasBeenUpdated","allergenSelected","checkboxesToString","code","indexOf","splice","final","substr","onNewImageLoaded","proteinSelected","menuItemDTO","updateMenuItem","updateOptions","saveBtnDisabled","rows","allergen","goBack","Menu","component","MenuEdit","Login","loggingIn","authService","auth","href","connect","bindActionCreators","getCompletedOrders","Orders","orders","orderStatuses","changePage","searchPattern","orderService","order","index","deliveryDates","orderItem","quantity","contact_name","public_id","phone_number","order_status","getCompleted","Export","pullDate","pullType","loadData","loadOrderItems","loadOrders","orderItemService","print","fileContent","filter","street_address","unit","city","zip","bb","Blob","createElement","download","URL","createObjectURL","DeliveryTagsDisplay","notes","PrepDisplay","condensedList","dish","spicy_text","dishCount","Order","uuid","nonce","tip","square_payment","OrderDTO","cart_items","coupon","getTimeZones","sendWeeklyEmails","sendSupportEmail","subject","body","payload","sendMassMail","OrderEmail","submit","submitting","adminService","include_order","toggleIncludeOrder","OrderEdit","updating","updatesPending","returnToOrders","saveUpdates","orderedItems","htmlFor","JSON","stringify","Coupon","mode","calculation_type","expire","start_value","current_value","remaining_uses","expire_date","Date","setDate","getDate","CouponComponent","setCoupon","deactivating","setDeactivating","couponService","couponUpdated","toFixed","Coupons","coupons","addingCoupon","c","addCoupon","DeliveryDuplicate","duplicating","datesAreValid","duplicate","CouponAdd","cancel","finally","MailingListModel","MailingListEntry","checkDTO","setCode","setActive","setEmail","setSaving","mailingListService","MailingList","addNewEntry","newEmail","newCode","entry","mailingList","get_template_by_slug","slug","MailTemplate","options","MailTemplateComponent","template","templateSlug","mailTemplateService","originalText","MailTemplates","listWithCounts","targetDate","retrieveOrders","deliveryWindowId","retrieveRoute","addZone","zoneId","removeZone","DeliveryWindow","zones","MailMassMailer","who","message","deliveryDate","includeSamples","all","deliveryWindowService","values","deliveryWindow","option","goodToSend","sendMail","confirmMessage","Mail","release","newsletterId","send_email","sendEmailSample","NewslettersNewsletter","newsletter","title","release_date","Newsletter","NewsletterAdd","creating","newsletterService","newsLetter","withRouter","Newsletters","newsLetters","setNewsLetters","setLoading","newsletters","NewsletterEdit","releasing","saveNewsletter","nl","sendTestEmail","sendingEmail","saveDisabled","titlePresent","contentPresent","pythonDays","BrowserDay","countsData","setCountsData","toISOString","slice","today","hasWindows","deliveryCount","order_count","dish_count","BrowserTool","month","getMonth","year","getFullYear","viewDay","changeMonth","week","daysInMonth","dateNdx","getDay","weeks","EmailWidget","setMessage","sending","setSending","sendEmail","apiActionsService","prompt","finished","BrowserWindowTools","downloadDeliverySpreadsheet","emailingComplete","y","printDocument","showLoading","email_type","entity_id","target_date","MomentHelper","BrowserFullDay","counts","documentToPrint","toUTCString","DeliveryWindowsWindow","runText","DeliveryWindows","setShowLoading","setDeliveryWindows","newWindow","setNewWindow","addingWindow","setAddingWindow","DeliveryWindowEdit","setWindow","setDisabled","setZones","selectedZone","setSelectedZone","deleting","setDeleting","zoneService","zone","Zone","zip_codes","Zipcode","ZoneCode","removeCode","SpinnerButton","checkmark","ZoneTool","codes","setCodes","setNewCode","zoneName","setZoneName","setUpdating","zipService","tcode","Zones","newZone","setNewZone","Route","delivery_window","stops","route_status","started_at","finished_at","at_stop","stop","alertDelivery","delivered","en_route","RouteOrganizerEntry","setStop","loadButtonActive","setLoadButtonActive","openMap","current_index","route","eta","subtract","stop_status","delivered_at","routeStopService","s","canMoveUp","moveStop","canMoveDown","commitRoute","completeRoute","startRoute","updateStopOrder","stopIds","stop_ids","RouteOrganizer","loadingButtonInUse","routeService","extractStopsFromRoute","moveEntry","direction","currentNdx","routeUpdated","optimize","saveChanges","updateRoute","canOptimize","DeliveryPlanner","setRoute","firstBuild","handleApiLoaded","imap","imaps","bootstrapURLKeys","center","lat","lng","zoom","yesIWantToUseGoogleMapApiInternals","maps","zoomControlOptions","position","ControlPosition","RIGHT_CENTER","ZoomControlStyle","SMALL","mapTypeControlOptions","TOP_RIGHT","mapTypeControl","onGoogleApiLoaded","leg","parse","end_location","Marker","fontSize","color","fontWeight","getMe","Operator","token","is_active","phone","page_name","page_slug","zip_code","self_hosted","domain","support_email","timezone","ordering_cutoff_time","upcoming_delivery_notification_time","upcoming_delivery_days_notification_time","auto_notify_upcoming_deliveries","storefront_template","max_future_delivery_windows_time","Profile","operator","setOperator","errors","setErrors","hasUpdates","setHasUpdates","timeZones","setTimeZones","updatingPassword","setUpdatingPassword","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","savingPassword","setSavingPassword","operatorService","actionsService","updateOperator","op","initial","field","passwordErrors","data-toggle","data-target","aria-labelledby","data-parent","min","App","connecting","openNav","width","PrivateRoute","rest","render","menuIcon","Boolean","location","hostname","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.b23e3150.chunk.js","sourcesContent":["import { createStore, combineReducers, applyMiddleware } from \"redux\";\nimport thunk, { ThunkMiddleware } from \"redux-thunk\";\n\nimport { AuthActionTypes } from './auth/authActions';\nimport { authReducer } from './auth/authReducer';\n\nexport enum actions {\n    LOGIN,\n    LOGOUT\n};\n\nexport type AppActions = AuthActionTypes;\n\nexport const rootReducer = combineReducers({authReducer});\n\nexport type AppState = ReturnType<typeof rootReducer>; \n\nexport const store = createStore(\n    rootReducer,\n    applyMiddleware( \n        thunk as ThunkMiddleware<AppState, AppActions>)\n)","export default class User {\n\n    id!: number;\n    username!: string;\n    email!: string;\n}","import { AuthActionTypes } from \"./authActions\";\nimport User from \"../../models/User\";\nimport { actions } from \"../store\";\n\nexport interface AuthState {\n    loggedIn: boolean\n    user: User,\n    operator_token: string\n}\n\nconst defaultState: AuthState = {\n    loggedIn: false,\n    user: new User(),\n    operator_token: ''\n}\n\nconst authReducer = (\n    state = defaultState,\n    action: AuthActionTypes\n): AuthState => {\n    switch(action.type) {\n        case actions.LOGIN:\n            state.user = action.user\n            state.operator_token = action.operator_token\n            state.loggedIn = true;\n            return {...state};\n    \n        case actions.LOGOUT:\n            state.loggedIn = false;\n            window.localStorage.removeItem('access_token');\n            window.localStorage.removeItem('refresh_token');\n            return {...state};\n    }\n    return state;\n}\n\nexport { authReducer };","import { actions } from '../store';\nimport { Dispatch } from 'react';\nimport User from '../../models/User';\n\ninterface Login { type: typeof actions.LOGIN, user: User, operator_token: string };\nexport const login = (user: User, operator_token: string): AuthActionTypes => ({ type: actions.LOGIN, user, operator_token });\nexport const dispatchLogin = (user: User, operator_token: string) => {\n    return(dispatch: Dispatch<AuthActionTypes>) => {\n        dispatch(login(user, operator_token));\n    }\n}\n\ninterface Logout { type: typeof actions.LOGOUT };\nexport const logout = (): AuthActionTypes => ({ type: actions.LOGOUT });\nexport const dispatchLogout = () => {\n    return(dispatch: Dispatch<AuthActionTypes>) => {\n        dispatch(logout());\n    }\n}\n\nexport type AuthActionTypes = Login | Logout;\n","const dev = {\n    API_URL: \"http://localhost:8000\",\n    OPERATOR_TOKEN: '8efedf49-db0e-4afe-9a96-2989fe599220',\n    RESULTS_PER_PAGE: 25,\n    UPLOADS_PATH: '/uploads'\n}\n\nconst prod = {\n    API_URL: \"https://www.pearako.com\",\n    OPERATOR_TOKEN: '8500f3e1-0282-4d09-a752-6756d188f584',\n    RESULTS_PER_PAGE: 25,\n    UPLOADS_PATH: '/uploads'\n}\n\nconst test = {\n    API_URL: \"\",\n    OPERATOR_TOKEN: '',\n    RESULTS_PER_PAGE: 25,\n    UPLOADS_PATH: ''\n}\n\nexport const config = process.env.NODE_ENV === 'development' ? dev : process.env.NODE_ENV === 'test' ? test : prod;","import axios from 'axios';\nimport { config } from '../config';\n\nconst axiosInstance = axios.create({\n    baseURL: config.API_URL,\n    timeout: 0,\n    headers: {\n        'Authorization': \"JWT \" + window.localStorage.getItem('access_token'),\n        'Content-Type': 'application/json',\n        'accept': 'application/json',\n        'operator-token': window.localStorage.getItem('operator_token')\n    }\n});\n\naxiosInstance.interceptors.response.use(\n    response => response,\n    async error => {\n      const originalRequest = error.config;\n        if (error.response.status === 401) { // && error.response.statusText === \"Unauthorized\"\n            const refresh_token = window.localStorage.getItem('refresh_token');\n            try {\n                const response = await axiosInstance.post('/api/core/auth/token/refresh/', { refresh: refresh_token });\n                window.localStorage.setItem('access_token', response.data.access);\n                window.localStorage.setItem('refresh_token', response.data.refresh);\n                axiosInstance.defaults.headers['Authorization'] = \"JWT \" + response.data.access;\n                originalRequest.headers['Authorization'] = \"JWT \" + response.data.access;\n                return axiosInstance(originalRequest);\n            }\n            catch (err) {\n                console.log(err);\n            }\n        }\n      return Promise.reject(error);\n  }\n);\nexport default axiosInstance","import React, { useEffect, useState } from 'react';\nimport MenuItem from '../../models/MenuItemModel';\nimport { useParams, Link } from 'react-router-dom';\nimport menuItemService from '../../services/MenuItemService';\nimport {config} from '../../config';\nimport './menu.scss';\nimport {NewMenuItem} from \"./NewMenuItem\";\n\nexport const MenuItemCategories: any = {\n    en: 'Entrees',\n    ap: 'Appetizers',\n    si: 'Sides',\n    de: 'Desserts'\n}\n\nexport enum ItemsModes {\n    menu,\n    deliveryDay\n}\n\nexport const MenuItems = (): React.ReactElement => {\n    const params: any = useParams();\n    const [menuItems, setMenuItems] = useState<MenuItem[]>([])\n\n    useEffect(() => {\n        menuItemService.search<MenuItem[]>(params.category, 'category')\n            .then((items: MenuItem[]) => {\n                setMenuItems(items);\n            })\n            .catch( err => {window.alert('Unable To Load Menu Items')})\n        return () => {\n        }\n    }, [params.category])\n\n    const sortedItems: MenuItem[] = menuItems.sort((a: MenuItem, b: MenuItem) => a.name > b.name ? 1 : -1);\n\n    const menuType: string = params.category === 'en' ?\n                            'entree'\n                            :\n                            params.category === 'ap' ?\n                                'appetizer'\n                                :\n                                params.category === 'si' ?\n                                    'side'\n                                    :\n                                    'dessert'\n    return(\n        <div className=\"row menu_items mt-3\">\n            <div className='col-12 menu__title'>\n                <h3>\n                    { menuType }s\n                </h3>\n                <hr/>\n            </div>\n            <div className=\"col-12 col-md-4\">\n                <NewMenuItem key={Math.random().toString()} />\n            </div>\n            <div className='d-none d-md-block col-md-8'></div>\n            <div className='col-12'>\n                <hr/>\n            </div>\n            {\n                sortedItems.sort((a: MenuItem, b: MenuItem) =>\n                                    a.name.toLowerCase() > b.name.toLowerCase() ?\n                                        1 : a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 0 )\n                            .map((item: MenuItem) => {\n                    return(\n                        <div className=\"col-6 col-md-3 menu_items__item\" key={`mi_${item.id}`}>\n                            <Link className=\"row\" to={`/dashboard/menu/edit/${item.id}/`}>\n                                    <div className=\"col-12 menu_items__menuitem_name no_wrap_text\">{item.name}</div>\n                                    <div className=\"col-12\">\n                                        <div className='menu_items__image'>\n                                            <img src={`${config.API_URL + config.UPLOADS_PATH}/${item.image}`} alt={item.name}/>\n                                        </div>\n                                    </div>\n                            </Link>\n                        </div>\n                    )\n                })\n            }\n        </div>\n    )\n}","import { config } from '../config.js';\nimport axiosInstance from './axiosApi';\nimport PagedResultsDTO from \"../dto/PagedResultsDTO\";\n\ninterface AxiosResponse {\n    data: any\n}\n\nexport default class Service {\n    protected _service_url: string = config.API_URL;\n    protected appName: string = \"\";\n    protected view: string = \"\";\n\n    public get viewPath(): string {\n        return `${this.appName}/${this.view}`;\n    }\n\n    public _get<T>(path: string): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            axiosInstance.get(`${this._service_url}/api/${path}`)\n                .then ((resp: AxiosResponse) => {\n                    resolve(resp.data);\n                })\n                .catch( err => reject(err))\n        })\n    }\n\n    public _post<T>(path: string, content: any, headers?: any): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            axiosInstance.post(`${this._service_url}/api/${path}`, content, headers)\n                .then((resp:AxiosResponse) => {\n                    resolve(resp.data);\n                })\n                .catch( err => reject(err))\n        })\n    }\n\n    public _patch<T>(path: string, content: any, headers?: any): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            axiosInstance.patch(`${this._service_url}/api/${path}`, content, headers)\n                .then((resp: AxiosResponse) => {\n                    resolve(resp.data)\n                })\n                .catch( err => reject(err));\n        })\n    }\n\n    public _delete<T>(path: string): Promise<T> {\n        return axiosInstance.delete(`${this._service_url}/api/${path}`)\n    }\n\n    public add<T>(DTO: T, useFormData: boolean = false): Promise<T> {\n        if (useFormData){\n            return this.multipartFormPost<T>(DTO);\n        } else {\n            return this._post<T>(`${this.appName}/${this.view}/`, DTO);\n        }\n    }\n\n    private buildSearchQuery = (search: string = '', searchField: string = '', page: number = 0 ): string => {\n        let params: string = `?`;\n        if (search !== '')\n            params += `search=${search}`;\n        if (searchField !== '')\n            params += `&search_field=${searchField}`;\n        if (page !== 0)\n            params += `&page=${page}`;\n        return params;\n    }\n\n    public delete<T>(id: number): Promise<T> {\n        return this._delete<T>(`${this.appName}/${this.view}/${id}/`);\n    }\n\n    public get<T>(id: number | null = null, params: {} = {}): Promise<T> {\n        if (id !== null) {\n            return this._get(`${this.appName}/${this.view}/${id}/${this.querizeObject(params)}`);\n        } else {\n            return this._get(`${this.appName}/${this.view}/?${this.querizeObject(params)}`);\n        }\n    }\n\n    public getByDate<T>(date: string): Promise<T> {\n        return this._get<T>(`${this.appName}/${this.view}/get_by_date/?date=${date}`);\n    }\n\n    public getByDateRange<T>(startDate?: string, endDate?: string): Promise<T> {\n        let path: string = `${this.appName}/${this.view}/get_by_date_range/?`;\n        if (startDate) path += `start_date=${startDate}&`;\n        if (endDate) path += `end_date=${endDate}`; \n        return this._get<T>(path);\n    }\n\n    public multipartFormPost<T>(content: any): Promise<T> {\n        const formData: FormData = new FormData();\n        Object.keys(content).forEach( key => {\n            formData.append(key, content[key]);\n        })\n        console.log(formData);\n        return this._post<T>(`${this.appName}/${this.view}/`, formData, {headers: {'Content-Type': 'multipart/form-data'}});\n    }\n\n    public multipartFormUpdate<T>(id: number, content: any): Promise<T> {\n        const formData: FormData = new FormData();\n        Object.keys(content).forEach( key => {\n            formData.append(key, content[key]);\n        })\n        console.log(formData);\n        return this._patch<T>(`${this.appName}/${this.view}/${id}/`, formData, {headers: {'Content-Type': 'multipart/form-data'}});\n    }\n\n    public search<T>(search: string, searchColumn: string = ''): Promise<T> {\n        return this._get(`${this.appName}/${this.view}/${this.buildSearchQuery(search, searchColumn)}`);\n    }\n\n    public pagedSearchResults = (pageNumber: number = 1, search: string = '', searchColumn: string = ''): Promise<PagedResultsDTO> => {\n         return this._get(`${this.appName}/${this.view}/${this.buildSearchQuery(search, searchColumn, pageNumber)}`);\n    }\n\n    private querizeObject(object: any): String {\n        return Object.keys(object).map(key => key + '=' + object[key]).join('&')\n    }\n\n    public softDelete<T>(id: number): Promise<T> {\n        return this._get(`${this.appName}/${this.view}/soft_delete/${id}/`);\n    }\n\n    public update<T>(id: number, DTO: T, useFormData:boolean = false): Promise<T> {\n        if (useFormData){\n            return this.multipartFormUpdate<T>(id, DTO);\n        } else {\n            return this._patch<T>(`${this.appName}/${this.view}/${id}/`, DTO);\n        }\n    }\n}","import Service from \"./Service\";\n\nimport AuthenticateDTO from \"../dto/AuthenticateDTO\";\nimport User from \"../models/User\";\n\nclass AuthService extends Service {\n    appName = 'core';\n    view = 'auth';\n\n    public authenticate = (email: string, password: string): Promise<AuthenticateDTO> => {\n        this.logout();\n        \n        return new Promise<AuthenticateDTO>((resolve, reject) => {\n            this._post(`${this.viewPath}/authenticate/`, {email, password})\n            .then( (resp: any) => {console.log(resp);\n                if (resp.operator_token !== null) {\n                    window.localStorage.setItem('access_token', resp.access);\n                    window.localStorage.setItem('refresh_token', resp.refresh);\n                    window.localStorage.setItem('operator_token', resp.operator_token)\n                    resolve(resp);\n                } else {\n                    reject (resp);\n                }\n            })\n            .catch( (resp: any) => reject(resp))\n        })\n    }\n\n    public logout = (): void => {\n        window.localStorage.removeItem('access_token');\n        window.localStorage.removeItem('refresh_token');\n        window.localStorage.removeItem('user_id');\n        window.localStorage.removeItem('username');\n    }\n\n    public updatePassword = (user: User, current_password: string, new_password: string): Promise<any> => {\n        return this._post(`${this.appName}/${this.view}/update_password/`, {\n            current_password, new_password, user_id: user.id\n        })\n    }\n\n    public validateToken = (refreshToken: string): Promise<User> => {\n        return new Promise<User>((resolve, reject) => {\n            this._get<User>(`${this.viewPath}/user`)\n            .then((user: User) => {\n                resolve(user);\n            })\n            .catch( err => reject(err))\n        })\n    }\n}\n\nexport default new AuthService();","import React, {useState} from 'react';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { AppState, actions } from '../../store/store';\nimport './navigation.scss';\n\ninterface Props {\n    closeNav: () => void\n}\n\nexport const Navigation = (props: Props): React.ReactElement => {\n    const [doLogin, setDoLogin] = useState(false);\n    const [showDropdown, setShowDropdown] = useState(');')\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const navigateToPage = (pathname: string): void => {\n        props.closeNav();\n        history.push({pathname})\n    }\n\n    const logout = (): void => {\n        dispatch({type: actions.LOGOUT});\n    }\n\n    if (doLogin)\n        return <Redirect to=\"/dashboard/login\" />\n\n    return (\n        <div className=\"navigation\">\n            <ul className=\"\">\n                <li onClick={() => navigateToPage(\"/dashboard/browser\")}>\n                    dashboard\n                </li>\n                <li onClick={() => navigateToPage(\"/dashboard/profile\")}>\n                    profile\n                </li>\n                <li onClick={() => setShowDropdown('menu')}>\n                    menu\n                    <ul className={`sidenav__dropdown sidenav__dropdown--${showDropdown === 'menu' ? 'open' : 'close'}`}>\n                        <li onClick={() => navigateToPage(\"/dashboard/menu/en\")}>\n                            entrees\n                        </li>\n                        <li onClick={() => navigateToPage(\"/dashboard/menu/ap\")}>\n                            appetizers\n                        </li>\n                        <li onClick={() => navigateToPage(\"/dashboard/menu/si\")}>\n                            sides\n                        </li>\n                        <li onClick={() => navigateToPage(\"/dashboard/menu/de\")}>\n                            desserts\n                        </li>\n                    </ul>\n                </li>\n                <li onClick={() => setShowDropdown('delivery')}>\n                    delivery\n                    <ul className={`sidenav__dropdown sidenav__dropdown--${showDropdown === 'delivery' ? 'open' : 'close'}`}>\n                        <li onClick={() => navigateToPage(\"/dashboard/deliveries\")}>\n                            menus\n                        </li>\n                        <li onClick={() => navigateToPage(\"/dashboard/delivery_window\")}>\n                            windows\n                        </li>\n                        <li onClick={() => navigateToPage(\"/dashboard/zone\")}>\n                            zones\n                        </li>\n                    </ul>\n                </li>\n                <li onClick={() => navigateToPage(\"/dashboard/coupons\")}>\n                    coupons\n                </li>\n                <li onClick={() => setShowDropdown('mail')}>\n                    mail\n                    <ul className={`sidenav__dropdown sidenav__dropdown--${showDropdown === 'mail' ? 'open' : 'close'}`}>\n                        <li onClick={() => navigateToPage(\"/dashboard/mail/mass_mailer\")}>\n                            mass mailer\n                        </li>\n                        <li onClick={() => navigateToPage(\"/dashboard/mail/list\")}>\n                            mailing list\n                        </li>\n                    </ul>\n                </li>\n                <li onClick={() => navigateToPage(\"/dashboard/newsletter\")}>\n                    newsletters\n                </li>\n                <li onClick={() => navigateToPage(\"/dashboard/orders\")}>\n                    orders\n                </li>\n            </ul>\n            <span className=\"navigation__login text-center\">\n                <button className=\"btn btn-sm btn-outline-danger\" onClick={logout}>Logout</button>\n            </span>\n        </div>\n    )\n\n}","import Service from './Service';\nimport DeliveryDay from '../models/DeliveryDayModel';\nimport DeliveryWindow from '../models/DeliveryWindowModel';\n\nclass DeliveryDayService extends Service {\n    appName = \"dashboard\";\n    view = \"delivery_day\";\n\n    public attachDeliveryWindow = (day: DeliveryDay, window: DeliveryWindow): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/attach_delivery_window/${day.id}/${window.id}/`)\n    }\n\n    public detachDeliveryWindow = (day: DeliveryDay, window: DeliveryWindow): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/detach_delivery_window/${day.id}/${window.id}/`)\n    }\n\n    public duplicateDeliveryDay = (deliveryDay: DeliveryDay, start_date: string, end_date: string): Promise<DeliveryDay> => {\n        return this._get<DeliveryDay>(`${this.appName}/${this.view}/duplicate/?date=${start_date}&end_date=${end_date}&delivery_day=${deliveryDay.id}`);\n    }\n}\n\nexport default new DeliveryDayService();","export default class ModelBase {\n\n    public id: number = -1;\n    public created_at!: string;\n    \n}","import DeliveryDayItem from \"./DeliveryDayItemModel\";\nimport ModelBase from \"./ModelBase\";\nimport { DeliveryWindowDTO } from \"./DeliveryWindowModel\";\n\nexport default class DeliveryDay extends ModelBase {\n\n    public date!: string;\n    public end_date!: string;\n    public day_items!: DeliveryDayItem[];\n    //public delivery_windows!: DeliveryWindow[];\n\n    constructor(date?: string, id?: number, end_date?: string, day_items?: DeliveryDayItem[]) {\n        super();\n\n        this.id = id || -1;\n        this.date = date || '';\n        this.end_date = end_date || '';\n        this.day_items = day_items || []\n    }\n}\n\nexport class DeliveryDayDTO  {\n    public delivery_day: DeliveryDay = new DeliveryDay();\n    public windows: DeliveryWindowDTO[] = [];\n};\n\nexport type DeliveryDaysDTO = {zip_valid: boolean, delivery_days: DeliveryDay[]} ","import moment from 'moment';\n\nclass MomentHelper {\n\n    public asDateSlug = (date: any, useUTC: boolean = false): string => {\n        if (useUTC) {\n            return moment(date).utc().format('YYYY-MM-DD');\n        } else {\n            return moment(date).format('YYYY-MM-DD');\n        }\n    }\n\n    public asFullDate = (date: any): string => {\n        return moment(date).utc().format('dddd MMMM D, YYYY');\n    }\n\n    public asFullDateTime = (dateTime: any): string => {\n        return moment(dateTime).format('dddd MMMM D, YYYY h:mm a')\n    }\n\n    public asShortDate = (date: any): string => {\n        return moment(date).utc().format('MMM D YYYY');\n    }\n\n    public asShortDateTime = (dateTime: any): string => {\n        return moment(dateTime).format('MMM D YYYY h:mm a')\n    }\n}\n\nexport default new MomentHelper();","import OrderItem from \"../models/OrderItemModel\";\nimport DeliveryDayItem from \"../models/DeliveryDayItemModel\";\nimport CartItem from \"../models/CartItemModel\";\nimport MenuItem from \"../models/MenuItemModel\";\nimport {DeliveryWindowDTO} from \"../models/DeliveryWindowModel\";\nimport momentHelper from './MomentHelper';\n\nexport type OrderedItems = {[key: string]: any[]};\n\nclass Helpers { \n\n    private days: string[] = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    private months: string[] = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    private spicy: string[] = [\"not spicy\", \"mild spicy\", \"spicy\"];\n    private proteins: {[key: string]: string} = {\n        'pork': 'Pork',\n        'chicken': 'Chicken',\n        'beef' : ' Beef',\n        'tofu' : ' Tofu',\n        'veg' : 'Vegetable',\n        'vekan' : 'Vegan',\n        'shrimp' : 'Shrimp'\n    };\n\n    public convertToTwelveHour = (twentyFourHourTime: string): string => {\n        let parts: string[] = twentyFourHourTime.split(':');\n        let hour: number = parseInt(parts[0]);\n        let amPm: string = ' am';\n        if (hour > 11) {\n            amPm = ' pm';\n            hour -= hour > 12 ? 12 : 0;\n        }\n\n        if (hour === 0) hour = 12;\n\n        return `${hour.toString()}:${parts[1]}${amPm}`;\n    }\n\n     /*\n        Returns a string ex; Pad-Tai with Chicken, mild spicy\n    */\n    public extractCartItemDescription = (cartItem: CartItem): string => {\n        let description: string = cartItem.menu_item.name;\n        description += cartItem.protein === null || cartItem.protein === \"\" || cartItem.menu_item.proteins.split(':').length < 2 ?\n                    \"\" : \n                    cartItem.protein === 'vekan' ?\n                    ' vegan' : ` with ${this.proteins[cartItem.protein]}`\n\n        description += cartItem.menu_item.spicy === true ?\n        `, ${this.spicy[cartItem.spicy]}` : \"\"\n\n        return description;\n    }\n\n    public formatDeliveryWindow = (window: DeliveryWindowDTO, excludeDate: boolean = false, splitLines: boolean = false): string => {\n        let windowText: string = excludeDate ? \"\" :\n            `${momentHelper.asFullDate(window.date)} ${window.window.start_time !== window.window.end_time ? 'between ' : 'at '}`;\n\n        windowText += this.convertToTwelveHour(window.window.start_time);\n\n        return windowText += window.window.start_time !== window.window.end_time ?\n                ` and ${this.convertToTwelveHour(window.window.end_time)}` : ''\n    }\n\n\n    /*\n        Returns AA of orderItems sorted by their delivery dates\n        The correct date order in the AA is not guaranteed. Use .keys(AA).sort() when iterrating.\n    */\n\n    public sortOrderItemsByDate = (orderItems: OrderItem[]): OrderedItems => {\n        let sortedItems: OrderedItems = {};\n        orderItems.forEach((item: OrderItem) => {\n            if (!(item.cart_item.delivery_date in sortedItems))\n                sortedItems[item.cart_item.delivery_date] = [];\n\n            sortedItems[item.cart_item.delivery_date].push(item);\n        })\n\n        return  sortedItems;\n    }\n\n    public sortDeliveryDayItemsByCategory = (items: DeliveryDayItem[]): DeliveryDayItem[] => {\n        let sortedItems: OrderedItems = {\n            en: [],\n            ap: [],\n            si: [],\n            de: [],\n        };\n        if (items) items.forEach((item: DeliveryDayItem) => sortedItems[item.menu_item.category].push(item))\n        return [...sortedItems['en'], ...sortedItems['ap'], ...sortedItems['si'], ...sortedItems['de']];\n    }\n\n    public groupMenuItemsByCategory = (items: MenuItem[], sort: boolean = true): OrderedItems => {\n        let groupedItems: OrderedItems = {\n            en: [],\n            ap: [],\n            si: [],\n            de: [],\n        };\n        items.forEach((item: MenuItem) => groupedItems[item.category].push(item));\n\n        if (sort) {//TODO: Add sorting\n            groupedItems['en'].sort(this.compareMenuItemsByName)\n        }\n        return groupedItems;\n    }\n\n    private compareMenuItemsByName(ia: MenuItem, ib: MenuItem) {\n        if (ia.name < ib.name) return -1;\n        if (ib.name < ia.name) return 1;\n        return 0\n    }\n}\n\nexport default new Helpers();","/*\n    Lists each individual DeliveryDays in the delivery menus page\n */\nimport React from 'react';\nimport DeliveryDay from '../../models/DeliveryDayModel';\nimport momentHelper from '../../helpers/MomentHelper';\nimport helpers from '../../helpers/helpers';\nimport DeliveryDayItem from '../../models/DeliveryDayItemModel';\nimport { config } from '../../config';\nimport { useHistory } from 'react-router-dom';\n\nimport './delivery.scss';\n\ninterface Props {\n    deliveryDay: DeliveryDay\n}\n\nexport const DeliveryDays = (props: Props): React.ReactElement => {\n    const history = useHistory();\n\n    return(\n        <div className=\"row delivery_days\" key={`days_${props.deliveryDay.id}`}>\n            <div className='delivery_days__inner'>\n                <div className=\"col-12 delivery_days__date\">\n                    {momentHelper.asFullDate(props.deliveryDay.date)} -\n                </div>\n                <div className=\"col-12 col-md-6 delivery_days__end_date\">\n                    {momentHelper.asFullDate(props.deliveryDay.end_date)}\n                </div>\n                <div className=\"col-12\" style={{whiteSpace: \"nowrap\"}}>\n                    <div className=\"delivery_days__menu_items\">\n                        {\n                            helpers.sortDeliveryDayItemsByCategory(props.deliveryDay.day_items).map((item: DeliveryDayItem) =>\n                                    <div className=\"delivery_days__item\" key={`ddi_${item.id}`}>\n                                        <small>{item.menu_item.name}</small>\n                                        <div className='delivery_days__item_img'>\n                                            <img\n                                                src={`${config.API_URL + config.UPLOADS_PATH}/${item.menu_item.image}`}\n                                                alt={item.menu_item.name} />\n                                        </div>\n                                    </div>\n                            )\n                        }\n                    </div>\n                </div>\n                <div className=\"col-12 mt-3 text-center\">\n                    <button\n                        className=\"btn btn-sm btn-outline-success\"\n                        onClick={()=> {history.push({pathname: `/dashboard/delivery/edit/${props.deliveryDay.id}/`})}}>\n                            edit\n                        </button>\n                    <button\n                        className=\"btn btn-sm btn-outline-warning ml-2\"\n                        onClick={()=> {history.push({pathname: `/dashboard/delivery/duplicate/${props.deliveryDay.id}`})}}>\n                            duplicate\n                        </button>\n                </div>\n            </div>\n        </div>\n    )\n}","import React, {useState} from 'react';\n\nimport './loading_icon_button.scss';\ninterface Props {\n    label: string,\n    onClick: any,\n    busy: boolean,\n    btnClass?: string,\n    disabled?: boolean,\n    outerClass?: string\n}\n\nexport const LoadingIconButton = (props: Props): React.ReactElement => {\n\n    return (\n        <div className={`loading_icon_button ${props.outerClass !== undefined ? props.outerClass : ''}`}>\n            <button\n                className={\n                    `${props.btnClass !== undefined ? props.btnClass : ''}`\n                }\n                onClick={props.onClick}\n                disabled={props.disabled !== undefined ? props.disabled : false}\n            >{props.label}</button>\n            {props.busy &&\n                <div className='loading_icon_button__loader_layer'>\n                    <div className='loading_icon_button__loader'></div>\n                </div>\n            }\n        </div>\n    )\n}","import React from 'react';\n\nimport loadingAnimation from '../../assets/loader.gif'\nimport './overlays.scss';\n\nexport default class LoadingOverlay extends React.Component<any, any> {\n\n    //TODO: Add ability to override CSS. ex; change BG color/transparency\n\n    public render() {\n        return(\n            <div className=\"loading-overlay\">\n                <img src={loadingAnimation} alt=\"loadingIcon\"/>\n            </div>\n        )\n    }\n}","import React, {useState} from 'react';\nimport { config } from '../../../config';\n\nimport './page_selector.scss';\n\ninterface Props {\n    numItems: number,\n    currentPage:number,\n    gotoPage: (pageNumber: number) => void\n}\n\ntype Choice = {\n    text: string,\n    type: string\n}\n\nexport const PageSelector = (props: Props): React.ReactElement => {\n    const numPages: number = Math.ceil(props.numItems / config.RESULTS_PER_PAGE);\n\n    if (numPages < 2)\n        return(<div></div>)\n\n    const getRangeOfChoices = (start: number, end: number, selected: number): Choice[] => {\n        const choices: Choice[] = [];\n        for (let x: number = start; x <= end; x ++)\n            choices.push({\n                text: x.toString(),\n                type: selected === x ? 'selected' : 'selectable'\n            })\n        return choices;\n    }\n\n    const choiceClicked = (choice: Choice): void => {\n        if (choice.type === 'selected')\n            return\n\n        const page: number = choice.type === 'selectable' ? parseInt(choice.text) : props.currentPage;\n\n        props.gotoPage(\n            choice.type === 'selectable' ? page :\n                            choice.type === 'move_back' ? page - 8 > 0 ? page - 8 : 1 :\n                                page + 8 <= numPages? page + 8 : numPages\n        )\n    }\n\n    let choices: Choice[] = [];\n    if (numPages < 10){\n        choices = getRangeOfChoices(1, numPages, props.currentPage);\n    } else {\n        if (props.currentPage < 9) {\n            choices = getRangeOfChoices(1, 8, props.currentPage);\n            choices.push({text: '>', type: 'move_forward'});\n        } else if (numPages - props.currentPage < 9) {\n            const t = numPages - props.currentPage;\n            choices = getRangeOfChoices(numPages - 7, numPages, props.currentPage);\n            choices.unshift({text: '<', type: 'move_back'});\n        } else {\n            choices = getRangeOfChoices(props.currentPage - 3, props.currentPage + 3, props.currentPage)\n            choices.unshift({text: '<', type: 'move_back'});\n            choices.push({text: '>', type: 'move_forward'});\n        }\n    }\n\n    return(\n        <div className='page_selector'>\n            {\n                choices.map((choice:Choice) => {\n                    return(\n                        <div className={`page_selector__item page_selector__item--${choice.type}`}\n                             onClick={() => choiceClicked(choice)}\n                        >\n                            {choice.text}\n                        </div>\n                    )\n                    }\n                )\n            }\n        </div>\n    )\n}","/*\n    Handles listing DeliveryDayComponent\n */\nimport React from 'react';\nimport {format} from 'date-fns';\nimport deliveryDayService from '../../services/DeliveryDayService';\n\nimport './delivery.scss';\nimport { Redirect } from 'react-router-dom';\nimport DeliveryDay from '../../models/DeliveryDayModel';\n\nimport { DeliveryDays } from './DeliveryDays';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport couponService from \"../../services/CouponService\";\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport Coupon from \"../../models/Coupon\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\n\ninterface State {\n    loading: boolean,\n    deliveryDays: DeliveryDay[],\n    startDate: string,\n    endDate: string,\n    creatingDeliveryDay: boolean,\n    editId: number,\n    currentPage: number,\n    paginationCount: number\n}\n\nexport default class Deliveries extends React.Component<any, State> {\n\n    state = {\n        loading: true,\n        deliveryDays: [],\n        startDate: \"\",\n        endDate: \"\",\n        creatingDeliveryDay: false,\n        editId: 0,\n        currentPage: 0,\n        paginationCount: 0\n    }\n\n    public componentDidMount = (): void => {\n        this.changePages(1);\n    }\n\n    private changePages = (pageNumber: number): void => {\n        this.setState({currentPage: pageNumber, loading: true});\n\n        deliveryDayService.pagedSearchResults(pageNumber)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({\n                    deliveryDays: dto.results as DeliveryDay[],\n                    loading: false,\n                    paginationCount: dto.count\n                })\n                }\n            )\n            .catch( err => console.log(err))\n    }\n\n    private createDeliveryDay = (): void => {\n        if (this.state.startDate > this.state.endDate) {\n            window.alert('End date must be after start date');\n            return;\n        }\n\n        this.setState({creatingDeliveryDay: true})\n        deliveryDayService.add<DeliveryDay>(new DeliveryDay(this.state.startDate, -1, this.state.endDate))\n            .then((deliveryDay: DeliveryDay) => {\n                this.setState({\n                    editId: deliveryDay.id, \n                    startDate: \"\",\n                    creatingDeliveryDay: false}) \n            }) \n            .catch( err => window.alert(\"Unable to create week\"))\n            .then(() => this.setState({creatingDeliveryDay: false}))\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    public render() {\n        if (this.state.loading)\n            return <LoadingOverlay />\n\n        if (this.state.editId !== 0)\n            return <Redirect to={`delivery/edit/${this.state.editId}`} />\n        \n        const deliveries: DeliveryDay[] = this.state.deliveryDays;\n        deliveries.sort((a,b) => (a.date > b.date) ? -1 : ((b.date > a.date) ? 1 : 0));\n\n        return(\n            <div className=\"row weeks\">\n                <div className={'col-12'}>\n                    <h3>delivery menus</h3>\n                    <hr/>\n                </div>\n                <div className=\"col-12\">\n                    <h5>create delivery menu</h5>\n                    <input\n                        type=\"date\"\n                        id=\"startDate\"\n                        value={this.state.startDate}\n                        disabled={this.state.creatingDeliveryDay}\n                        onChange={this.updateData} />\n\n                    <input\n                        className={'ml-2'}\n                        type=\"date\"\n                        id=\"endDate\"\n                        value={this.state.endDate}\n                        disabled={this.state.creatingDeliveryDay}\n                        onChange={this.updateData} />\n\n                    <LoadingIconButton\n                        label='create'\n                        busy={this.state.creatingDeliveryDay}\n                        btnClass=\"btn btn-sm btn-outline-success\"\n                        outerClass='ml-2 mt-2 mt-m-0'\n                        onClick={this.createDeliveryDay}\n                        disabled={this.state.creatingDeliveryDay}\n                        />\n                    <PageSelector numItems={this.state.paginationCount} currentPage={this.state.currentPage} gotoPage={this.changePages} />\n                    <hr/>\n                </div>\n                {\n                    deliveries.map((deliveryDay: DeliveryDay) =>\n                        <div className=\"col-12 col-md-6 deliveries__delivery_days\" key={`dd_${deliveryDay.id}`}>\n                            <DeliveryDays \n                                deliveryDay={deliveryDay}\n                                key={`dd_${deliveryDay.id}`}/>\n                        </div>\n                    )\n                }\n            </div>\n        )\n    }\n}","import Service from './Service';\nimport MenuItem from '../models/MenuItemModel';\n\nclass MenuItemService extends Service {\n    appName = \"dashboard\";\n    view = \"menu_item\";\n}\n\nexport default new MenuItemService();","import Service from './Service';\n\nclass DeliveryDayItemService extends Service {\n    appName = \"dashboard\";\n    view = \"delivery_day_item\";\n}\n\nexport default new DeliveryDayItemService();","/*\n    Provides an INPUT field.\n    Provides updated text when:\n        The user has stopped typing for 750ms, hits 'ENTER' or the INPUT field loses focus\n        The text has changed since last time an update was sent\n    <InputWidget    initialValue: starting value\n                    defaultUpdateValue: if the INPUT field is empty, this value will be returned instead.\n                    onUpdate: callback when there is new text\n                    placeholder: text for PLACEHOLDER property on INPUT\n                    type: text | textarea\n    returns     id: value of ID sent through props\n                value: string\n */\n\nimport React, {Component} from 'react';\n\ninterface Props {\n    id: string,\n    type: string, // 'textarea', 'text'\n    onUpdate: any,\n    required?: boolean,\n    initialValue?: any,\n    placeholder?: string,\n    defaultUpdateValue?: any\n}\n\ninterface State {\n    value: string\n}\n\n//todo: get type='number' to work\n\nexport default class InputWidget extends Component<Props, State> {\n    \n    private timer: any;\n    private lastSavedValue: string | null = null;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            value: props.initialValue ? props.initialValue : \"\"\n        }\n\n        this.lastSavedValue = props.initialValue;\n    };\n\n    public componentWillReceiveProps = (props: Props) => {\n        if (props.initialValue !== this.props.initialValue) {\n            this.setState({value: props.initialValue});\n            this.lastSavedValue = props.initialValue\n        }\n    }\n\n    private handleOnKeyPress = (e: any) => {\n        if (e.keyCode === 13) this.sendUpdate();\n    };\n\n    private updateValue = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        this.setState({value: e.target.value});\n        this.resetTimer();\n    };\n\n    private sendUpdate = () => {\n        if (this.lastSavedValue !== this.state.value) {\n            this.lastSavedValue = this.state.value;\n            let value = (this.props.defaultUpdateValue !== '' && this.props.initialValue === '') ?\n                this.props.defaultUpdateValue : this.state.value;\n            this.props.onUpdate(this.props.id, value);\n            clearInterval(this.timer);\n        }\n    };\n\n    private resetTimer = () => {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(this.sendUpdate, 750)\n    };\n\n    public render() {\n        if (this.props.type === 'textarea') {\n            return (\n                <div className={'row input_widget_textarea'}>\n                    <div className={'col-12'}>\n                        <textarea\n                            className = {'form-control iw'}\n                            id = {this.props.id}\n                            value = {this.state.value}\n                            onBlur = {() => this.sendUpdate()}\n                            onChange = {(e) =>this.updateValue(e)}\n                            onKeyDown = {(e) => this.handleOnKeyPress(e)}\n                            required = {(this.props.required)? this.props.required : false}\n                        />\n                    </div>\n                </div>\n            )\n        } else {\n            return (\n                <div className={'row input_widget_input'}>\n                    <div className={'col-12'}>\n                        <input\n                            className={'form-control iw'}\n                            id={this.props.id}\n                            placeholder={this.props.placeholder}\n                            value={this.state.value}\n                            onBlur={() => this.sendUpdate()}\n                            onChange={(e) => this.updateValue(e)}\n                            onKeyDown={(e) => this.handleOnKeyPress(e)}/>\n                    </div>\n                </div>\n            )\n        }\n\n    }\n}","import React from 'react';\nimport InputWidget from '../inputWidget/InputWidget';\nimport Service from '../../../services/Service';\n\nimport {config} from '../../../config';\nimport './search_widget.scss';\n\ninterface Props {\n    service: Service,\n    itemSelected: (item: any) => void\n}\n\ninterface State {\n    items: any[]\n}\n\nexport default class SearchWidget extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n    \n        this.state = {\n            items: []\n        }  \n    }\n\n    public componentDidMount = (): void => {\n        window.onclick = function(event: any) {\n            this.close()\n        }\n    }\n\n    private itemSelected = (item: any): void => {\n        this.setState({items: []});\n        this.props.itemSelected(item);\n    }\n\n    private doSearch = (id: string, text: string): void => {\n        this.props.service.search<any[]>(text)\n            .then((items: any[]) => this.setState({items}))\n            .catch( err => {})\n    }\n\n    public render() {\n        return(\n            <div className=\"row search_widget\">\n                <div className=\"col-12\">\n                    <InputWidget\n                        id='search_widget__InputWidget'\n                        type=\"\"\n                        initialValue=''\n                        onUpdate={this.doSearch}\n                        placeholder='Enter Menu Item to Add'\n                        defaultUpdateValue={''}\n                    />\n                </div>\n                { this.state.items.length > 0 &&\n                    <div className=\"col-12 search_widget_results\">\n                        <div className=\"search_widget_results__content\">\n                            {\n                                this.state.items.map((item: any) => {\n                                    return(\n                                        <div className=\"row result\"\n                                            onClick={() => this.itemSelected(item)}>\n                                            <div className=\"col-9 result__name\">\n                                                {item.name}\n                                            </div>\n                                            {/*\n                                            <div className=\"col-3\">\n                                                <img src={`${config.API_URL + config.UPLOADS_PATH}/${item.image}`} alt={item.name}/>\n                                            </div>\n                                            */}\n                                        </div>\n                                    )\n                                })\n                            }\n                        </div>\n                    </div>\n                }   \n            </div>\n        )\n    }\n}","import ModelBase from \"./ModelBase\";\n\nexport default class MenuItem {\n\n    public id!: number;\n    public name: string = \"\";\n    public description: string = \"\";\n    public proteins: string = \"\";\n    public allergens: string = \"\";\n    public price: number = 0;\n    public image: string = \"\";\n    public active!: boolean;\n    public spicy!: boolean;\n    public category: string = 'en';\n\n    constructor(\n        id: number = -1,\n        name: string = '',\n        description: string = '',\n        category: string = 'en',\n        price: number = 10,\n        proteins: string = \"\",\n        allergens: string = \"\",\n        spicy: boolean = false\n        ) \n        {\n            this.id = id;\n            this.name = name;\n            this.description = description;\n            this.category = category;\n            this.price = price;\n            this.proteins = proteins;\n            this.allergens = allergens;\n            this.spicy = spicy;\n        }\n}\n\nexport class MenuItemDTO {\n\n    public id!: number;\n    public name: string = \"\";\n    public description: string = \"\";\n    public proteins: string = \"\";\n    public allergens: string = \"\";\n    public price: number = 0;\n    public image!: File | string | null;\n    public active!: boolean;\n    public spicy: boolean = false;\n    public category: string = 'en';\n}","import ModelBase from './ModelBase';\nimport MenuItem from './MenuItemModel';\nimport DeliveryDay from './DeliveryDayModel';\n\nexport class DeliveryDayItemDTO extends ModelBase {\n    public sold_out: boolean = false;\n    public price: number = 0;\n    public menu_item!: number;\n    public delivery_day!: number;\n\n    constructor(delivery_day: number, menu_item: number, sold_out: boolean, price: number) {\n        super();\n        this.delivery_day = delivery_day;\n        this.menu_item = menu_item;\n        this.sold_out = sold_out;\n        this.price = price;\n    }\n}\n\nexport default class DeliveryDayItem extends ModelBase {\n\n    public sold_out: boolean = false;\n    public price: number = 0;\n    public menu_item!: MenuItem;\n    public delivery_day!: DeliveryDay;\n\n    constructor(delivery_day?: DeliveryDay, menu_item?: MenuItem, sold_out?: boolean, price?: number) {\n        super();\n\n        this.delivery_day = delivery_day || new DeliveryDay();\n        this.menu_item = menu_item || new MenuItem();\n        this.sold_out = sold_out || false;\n        this.price = price || 0;\n    }\n\n    public getDTOxxx = (): DeliveryDayItemDTO => {\n        return new DeliveryDayItemDTO(this.delivery_day.id, this.menu_item.id, this.sold_out, this.price);\n    }\n}","import React from 'react';\nimport deliveryDayItemService from '../../services/DeliveryDayItemService';\nimport DeliveryDayItem, { DeliveryDayItemDTO } from '../../models/DeliveryDayItemModel';\n\nimport './delivery.scss';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\ninterface Props {\n    deliveryDayItem: DeliveryDayItem,\n    refreshItems: () => {}\n}\n\ninterface State {\n    deliveryDayItem: DeliveryDayItem,\n    saving: boolean,\n    active: boolean\n}\n\nexport default class DeliveryMenuItemOptions extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            deliveryDayItem: props.deliveryDayItem,\n            saving: false,\n            active: props.deliveryDayItem.id ? true : false \n        }\n    }\n\n    private remove = (): void => {\n        if (!window.confirm(\"Are you sure you want to remove this menu item?\")) return;\n\n        this.setState({saving: true});\n        deliveryDayItemService.delete(this.state.deliveryDayItem.id)\n            .then( resp => this.setState({\n                deliveryDayItem: new DeliveryDayItem(this.state.deliveryDayItem.delivery_day, this.state.deliveryDayItem.menu_item, false, 0),\n                active: false,\n                saving: false\n            }, () => this.props.refreshItems()))\n            .catch( resp => window.alert(\"Unable to deactivate\"));\n    }\n\n    private save = (): void => {\n        this.setState({saving: true});\n        deliveryDayItemService.update<DeliveryDayItem>(this.state.deliveryDayItem.id, this.state.deliveryDayItem)\n            .then((item: DeliveryDayItem) => this.setState({deliveryDayItem: item, saving: false}))\n            .catch( resp => window.alert(\"Unable to update\"))\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        let deliveryDayItem: DeliveryDayItem = this.state.deliveryDayItem\n        switch (e.target.id) {\n            case 'active': this.setState({active: !this.state.active}); break;\n            case 'sold_out': deliveryDayItem.sold_out = !deliveryDayItem.sold_out; break;\n            case 'price': deliveryDayItem.price = parseFloat(e.target.value)\n        }\n        this.setState({deliveryDayItem});\n    }\n\n    public render() {\n        return(\n            <div className=\"row delivery_item_options\">\n                <div className=\"col-12\"><hr/></div>\n                <div className=\"col-4\">\n                    <input\n                        type=\"number\"\n                        id=\"price\"\n                        value={this.state.deliveryDayItem.price}\n                        onChange={this.updateData}\n                        disabled={this.state.saving || !this.state.active}\n                        className=\"form-control delivery_item_options__price\"/>\n                </div>\n                <div className=\" col-8 mt-3\">\n                    <span className=\"mr-2\">Sold Out:</span>\n                    <input\n                        id=\"sold_out\"\n                        checked={this.state.deliveryDayItem.sold_out} \n                        onChange={this.updateData}\n                        disabled={this.state.saving || !this.state.active}\n                        type=\"checkbox\"/> \n                </div>\n                <div className=\"col-12 text-center mt-3\">\n                    <LoadingIconButton\n                        label='save'\n                        onClick={this.save}\n                        busy={this.state.saving}\n                        btnClass='btn btn-sm btn-outline-success'\n                        disabled={this.state.saving || !this.state.active}\n                        />\n\n                    <button\n                        className=\"btn btn-sm btn-danger ml-3\"\n                        disabled={this.state.saving}\n                        onClick={this.remove}>\n                        Remove</button>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport DeliveryDayItem from '../../models/DeliveryDayItemModel';\nimport {config} from '../../config';\nimport DeliveryDayItemOptionsComponent from './DeliveryMenuItemOptionsComponent';\n\ninterface Props {\n    item: DeliveryDayItem,\n    refreshItems: () => void\n}\n\nexport const DeliveryDayItemComponent = (props:Props) => {\n    return(\n        <div className=\"row delivery_day_item\">\n            <div className={'col-12'}>\n                <div className={'row delivery_day_item__inner'}>\n                    <div className=\"col-12 delivery_day_item__name\">{props.item.menu_item.name}</div>\n                    <div className=\"col-12\">\n                        <div className='delivery_day_item__img'>\n                            <img\n                                src={`${config.API_URL + config.UPLOADS_PATH}/${props.item.menu_item.image}`}\n                                alt={props.item.menu_item.name}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"col-12\">\n                        <DeliveryDayItemOptionsComponent deliveryDayItem={props.item} refreshItems={async () => props.refreshItems()} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}","/*\n    Mange MenuItems in DelliveryDay\n */\nimport React from 'react';\n\nimport {MenuItemDTO} from '../../models/MenuItemModel';\nimport DeliveryDay from '../../models/DeliveryDayModel';\nimport MenuItem from '../../models/MenuItemModel';\nimport menuItemService from '../../services/MenuItemService';\nimport deliveryDayItemService from '../../services/DeliveryDayItemService';\nimport deliveryDayService from '../../services/DeliveryDayService';\nimport momentHelper from '../../helpers/MomentHelper';\nimport DeliveryWindow from '../../models/DeliveryWindowModel';\nimport SearchWidget from '../widgets/searchWidget/SearchWidget';\nimport DeliveryDayItem, { DeliveryDayItemDTO } from '../../models/DeliveryDayItemModel';\nimport { DeliveryDayItemComponent } from './DeliveryDayItemComponent';\nimport './delivery.scss';\nimport { Link } from 'react-router-dom';\n\ninterface State {\n    loading: boolean,   //TODO: FINISH ADDING LOAD ALL MENU ITEMS, have MenuItems confirm if \n    menuItems: MenuItemDTO[],\n    deliveryDay: DeliveryDay,\n    deliveryWindows: DeliveryWindow[]\n}\n\nexport default class DeliveryDayComponent extends React.Component<any, State> {\n\n    state ={\n        loading: true,\n        menuItems: [],\n        deliveryDay: new DeliveryDay(\"\"),\n        deliveryWindows: []\n    }\n\n    public componentDidMount = (): void => {\n        const { match: { params } } = this.props;\n        this.refreshDay(params.id);\n    }\n\n    private itemSelected = (item: MenuItem) => {\n        deliveryDayItemService.add(new DeliveryDayItemDTO(this.state.deliveryDay.id, item.id, false, item.price))\n            .then((item: any) => {\n                const deliveryDay: DeliveryDay = this.state.deliveryDay;\n                deliveryDay.day_items.unshift(item);\n                this.setState({deliveryDay});\n                console.log(deliveryDay);\n            })\n            .catch( err => window.alert('unable to add menu item'))\n    }\n\n    private refreshDay = (id: number): void => {\n        deliveryDayService.get<DeliveryDay>(id)\n            .then((deliveryDay: DeliveryDay) => {\n                this.setState({deliveryDay, loading: false})\n            })\n            .catch( err => window.alert(\"Unable to load week\"))\n    }\n    \n    public render() {\n        if (this.state.loading)\n            return <div>Loading...</div>\n\n        return(\n            <div className=\"row delivery_day_component\">\n                <div className={\"col-12 mb-2\"}>\n                    <Link className={'btn btn-sm btn-outline-info'} to={'/dashboard/deliveries'}>return to delivery menus</Link>\n                </div>\n                <div className=\"col-12 col-md-6\">\n                    <h5>\n                        <div>{momentHelper.asFullDate(this.state.deliveryDay.date)} -</div>\n                        <div>{momentHelper.asFullDate(this.state.deliveryDay.end_date)}</div>\n                    </h5>\n                    <hr/>\n                </div>\n                <div className=\"col-12 col-md-6 delivery_day_component__search_widget mb-2\">\n                    <SearchWidget service={menuItemService} itemSelected={this.itemSelected} />\n                </div>\n                    {\n                        this.state.deliveryDay.day_items.map((item: DeliveryDayItem) => {\n                            return (\n                                <div className=\"col-12 col-md-3\" key={`dd_${item.id}`}>\n                                    <div className=\"row\">\n                                        <div className=\"col-12\">\n                                            <DeliveryDayItemComponent item={item} refreshItems={() => this.refreshDay(this.state.deliveryDay.id)}/>\n                                        </div>\n                                    </div>\n                                </div>\n                            )\n                        })\n                    }\n            </div>\n        )\n    }\n}","import React, { Fragment, useEffect } from 'react';\nimport { useState } from 'react';\n\nimport './menu.scss';\nimport { useHistory } from 'react-router-dom';\nimport menuItemService from '../../services/MenuItemService';\nimport MenuItem from '../../models/MenuItemModel';\n\nexport const NewMenuItem = (): React.ReactElement => {\n    const [name, setName] = useState<string>('');\n    const [category, setCategory] = useState<string>('en');\n    const [open, setOpen] = useState<boolean>(false);\n\n    const history = useHistory();\n\n    const createNewMenuItem = (): void => {\n        menuItemService.add<MenuItem>({name, category} as any)\n            .then((newMenuItem: MenuItem) => {\n                history.push({pathname: `/dashboard/menu/edit/${newMenuItem.id}/`});\n                setName('');\n                setCategory('en');\n            })\n            .catch( err => window.alert('unable to add new menu item'))\n    }\n\n    return(\n        <div className=\"row new_menu_item mt-3\">\n            {\n                open === false ?\n                    <div className=\"col-12 new_menu_item__add_link\" onClick={()=> setOpen(true)}>\n                        + add new menu item\n                    </div>\n                    :\n                    <Fragment>\n                        <div className=\"col-12\">\n                            <input type=\"text\" className=\"form-control\" id='new_menu_item__name'\n                                value={name} placeholder='New Menu Item Name'\n                                onChange={(e: any)=> setName(e.target.value)}/>\n                        </div>\n                        <div className=\"col-12 mt-1\">\n                            <select className=\"form-control\" defaultValue={category}\n                                onChange={(e) => setCategory(e.target.value)}>\n                                <option value=\"en\">Entree</option>\n                                <option value=\"ap\">Appetizer</option>\n                                <option value=\"si\">Side Item</option>\n                                <option value=\"de\">Dessert</option>\n                            </select>\n                        </div>\n                        <div className=\"col-12 mt-1 text-center\">\n                            <button className=\"btn btn-outline-success new_menu_item__submit\"\n                                disabled={name === \"\"} onClick={()=> createNewMenuItem()}>\n                                Add New Item</button>\n                        </div>\n                    </Fragment>\n            }\n        </div>\n    )\n}","import React from 'react';\n\nimport MenuItem, {MenuItemDTO} from '../../models/MenuItemModel';\nimport menuItemService from '../../services/MenuItemService';\nimport ImageUploader from '../widgets/imageUploader/ImageUploader';\nimport {RouteComponentProps} from 'react-router-dom';\n\nimport './menu.scss';\nimport LoadingOverlay from '../overlays/LoadingOverlay';\nimport {config} from \"../../config\";\n\ninterface Props extends RouteComponentProps {\n    match: any;\n}\n\ninterface State {\n    menuItem: MenuItemDTO,\n    loaded: boolean,\n    saving: boolean,\n    viewingServings: boolean,\n    hasBeenUpdated: boolean\n}\n\nexport enum ItemModes {\n    add,\n    edit,\n    view,\n    deliveryDay\n}\n\nexport default class MenuItemEdit extends React.Component<Props, State> {\n\n    private temporaryImage: File | null = null;\n\n    state = {\n        menuItem: new MenuItem(),\n        loaded: false,\n        saving: false,\n        viewingServings: false,\n        hasBeenUpdated: false\n    } \n\n    private allergenSelected = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        let menuItem: MenuItemDTO = this.state.menuItem;\n        menuItem.allergens = this.checkboxesToString(menuItem.allergens, e.target.id)\n        this.setState({menuItem});\n    }\n\n    public componentDidMount = (): void => {\n        const { match: { params } } = this.props;\n\n        menuItemService.get<MenuItem>(params.id)\n            .then((menuItem: MenuItem) => {\n                this.setState({menuItem, loaded: true})\n            })\n            .catch( err => window.alert('Unable to load menu item'))\n    }\n\n    private checkboxesToString = (items: string, code: string): string => {\n        if (items === null) items= \"\";\n\n        let parts: string[] = items.split(':')\n        console.log(parts, items);\n        if (parts.indexOf(code) !== -1) {// delete if it exists\n            parts.splice(parts.indexOf(code), 1);\n        } else {\n            parts.push(code);\n        }\n\n        const final: string = parts.join(':');\n        return (final.substr(0, 1)) === ':' ? final.substr(1) : final;\n    }\n\n    private onNewImageLoaded = (file: File | null) => {\n        this.temporaryImage = file;\n\n        if (file === null){\n            let menuItem: MenuItemDTO = this.state.menuItem;\n            menuItem.image = null;\n            this.setState({menuItem});\n        }\n\n        this.setState({hasBeenUpdated: true});\n    }\n\n    private proteinSelected = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        let menuItem: MenuItemDTO = this.state.menuItem;\n        menuItem.proteins = this.checkboxesToString(menuItem.proteins, e.target.id);\n        this.setState({menuItem});\n    }\n\n    private save = (): void => {\n        this.setState({saving: true});\n        let menuItem: MenuItemDTO = this.state.menuItem;\n\n        if (this.temporaryImage){\n            menuItem.image = this.temporaryImage;\n        } else if (typeof menuItem.image === 'string') {\n            delete menuItem.image;\n        }\n         menuItemService.update<MenuItemDTO>(menuItem.id, menuItem, menuItem.image !== null && typeof menuItem.image !== 'string')\n                .then((menuItemDTO: MenuItemDTO) => {\n                    this.setState({\n                        menuItem: menuItem,\n                        saving: false,\n                        hasBeenUpdated: false\n                    });\n                    // if (this.props.itemAdded) this.props.itemAdded(menuItemDTO);\n                })\n    }\n\n    private updateMenuItem = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>): void => {\n        let menuItem: any = this.state.menuItem;\n        menuItem[e.target.name] = e.target.value;\n        this.setState({menuItem});\n    }\n\n    private updateOptions = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        let menuItem: MenuItemDTO = this.state.menuItem;\n        switch(e.target.id) {\n            case 'spicy':\n                menuItem.spicy = !menuItem.spicy\n                this.setState({menuItem})\n                break;\n            case 'price':\n                menuItem.price = parseFloat(e.target.value);\n                this.setState({menuItem});\n                break;\n        }\n    }\n\n    public render() {//TODO: fix saveBtnDisabled\n\n        if (!this.state.loaded)\n            return <LoadingOverlay />\n\n        const saveBtnDisabled: boolean = this.state.saving; // || this.props.mode === ItemModes.view\n        const disabled: boolean = false;// this.props.mode === ItemModes.view || this.props.mode === ItemModes.deliveryDay\n\n\n        const allergens: any[] = [\n            { name: 'Milk', code: 'milk' },\n            { name: 'Soy', code: 'soy'},\n            { name: 'Shellfish', code: 'shell'},\n            { name: 'Egg', code: 'egg'},\n            { name: 'Fish', code: 'fish'},\n            { name: 'Nuts', code: 'nuts'},\n            { name: 'Peanuts', code: 'peanut'},\n            { name: 'Wheat', code: 'wheat'}\n        ]\n\n        const proteins: any[] = [\n            { name: 'Pork', code: 'pork'},\n            { name: 'Chicken', code: 'chicken'},\n            { name: 'Beef', code: 'beef' },\n            { name: 'Tofu', code: 'tofu'},\n            { name: 'Veggie', code: 'veg'},\n            { name: 'Vegan', code: 'vekan'},\n            { name: 'Shrimp', code: 'shrimp'}\n        ]\n        \n        return (\n            <div className=\"row menuedititem mt-3\">\n                <div className=\"col-12 col-md-6 menuedititem__header\">\n                    \n                </div>\n                <div className=\"col-12 menuedititem__inner p-3\">\n                    <div className=\"row\">\n                        <div className=\"col-12 col-md-6\">\n                            <div className=\"row\">\n                                <div className=\"col-12 menuedititem__imagearea menuedititem__area\">\n                                    <ImageUploader\n                                        id={`image_uploader__menuItem-${this.state.menuItem.id}`}\n                                        imageURL={this.state.menuItem.image !== null ? config.API_URL + config.UPLOADS_PATH + '/' + this.state.menuItem.image : ''}\n                                        newImageLoaded={this.onNewImageLoaded}\n                                        maximumSizeInMb={100}\n                                        allowedFileTypes=\".jpg,.png,.jpeg\"\n                                        disabled={disabled}\n                                        />\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"col-12 col-md-6\">\n                            <div className=\"row\">\n                                <div className=\"col-12 mt-1 mt-md-0\">\n                                    <input\n                                        id='menuedititem__name' \n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        placeholder=\"Meal Name\"\n                                        name=\"name\"\n                                        value={this.state.menuItem.name}\n                                        onChange={this.updateMenuItem}\n                                        disabled={disabled}\n                                        />\n                                </div>\n                                <div className=\"col-12 mt-1\">\n                                    <textarea \n                                        className=\"form-control\"\n                                        rows={2}\n                                        placeholder=\"Description\"\n                                        name=\"description\"\n                                        value={this.state.menuItem.description}\n                                        onChange={this.updateMenuItem}\n                                        disabled={disabled}\n                                        ></textarea>\n                                </div>\n                                <div className=\"col-12 mt-1\">\n                                    Category:\n                                    <select\n                                        name=\"category\"\n                                        className=\"form-control\"\n                                        defaultValue={this.state.menuItem.category}\n                                        disabled={disabled}\n                                        onChange={this.updateMenuItem}> \n                                        <option value=\"en\">Entree</option>\n                                        <option value=\"ap\">Apetizer</option>\n                                        <option value=\"si\">Side Item</option>\n                                        <option value=\"de\">Dessert</option>\n                                    </select>\n                                </div>\n                                <div className=\"col-12 mt-1\">\n                                    Price:\n                                    <input type=\"text\" name=\"price\" className=\"form-control\" value={this.state.menuItem.price}\n                                        disabled={disabled} onChange={this.updateMenuItem} />\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"col-12\">\n                            <div className=\"row\">\n                                <div className=\"col-12 col-md-6 mt-2\">\n                                    <h5>Allergens:</h5>\n                                        {\n                                            allergens.map((allergen: any) =>\n                                                <div className=\"menuedititem__checker\" key={allergen.code}>\n                                                    <input\n                                                        type=\"checkbox\"\n                                                        id={allergen.code}\n                                                        checked={this.state.menuItem.allergens.indexOf(allergen.code) !== -1}\n                                                        onChange={this.allergenSelected}/>\n                                                    <span>{allergen.name}</span>\n                                                </div>\n                                            )\n                                        }\n                                </div>\n                                <div className=\"col-12 col-md-6 mt-2\">\n                                    <h5>Proteins:</h5>\n                                        {\n                                            proteins.map((protein: any) =>\n\n\n                                                <div className=\"menuedititem__checker\" key={protein.code}>\n                                                    <input\n                                                        type=\"checkbox\"\n                                                        id={protein.code}\n                                                        checked={this.state.menuItem.proteins.indexOf(protein.code) > -1}\n                                                        onChange={this.proteinSelected}/>\n                                                    <span>{protein.name}</span>\n                                                </div>\n\n                                            )\n                                        }\n                                </div>\n                                <div className=\"col-12 col-md-6 mt-2\">\n                                    <hr/>\n                                    <div className=\"menuedititem__checker\">\n                                        <input\n                                            type=\"checkbox\"\n                                            id=\"spicy\"\n                                            checked={this.state.menuItem.spicy}\n                                            onChange={this.updateOptions}\n                                            />\n                                            <span>Spicy</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"col-12 menuedititem__controls_area menuedititem__area text-center mt-2\">\n                            <hr/>\n                            <button\n                                className=\"btn btn-outline-info\"\n                                disabled={saveBtnDisabled}\n                                onClick={() => this.props.history.goBack()}\n                                >back to menu</button>\n\n                            <button \n                                className=\"btn btn-outline-success\"\n                                disabled={saveBtnDisabled} \n                                onClick={this.save}\n                                >save</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\n\nimport './image_uploader.scss';\n\ninterface Props {\n    id: string;\n    imageURL: string; \n    newImageLoaded(file: File | null): void;\n    uploadPrompt?: string,\n    allowedFileTypes?: string,\n    maximumSizeInMb?: number,\n    disabled?: boolean\n}\n\ninterface State {\n    hasImage: boolean,\n    currentImage: File | null,\n    loadingImage: boolean\n}\n\nexport default class ImageUploader extends React.Component<Props, State> {\n\n    private fileElement: HTMLInputElement | null = null;\n    private reloadAttempted: boolean = true;\n\n    constructor(props: Props) {\n        super(props);\n        \n        this.state = {\n            hasImage: props.imageURL !== \"\" && props.imageURL !== null ? true : false,\n            currentImage: null,\n            loadingImage: props.imageURL !== \"\" && props.imageURL !== null ? true : false\n        }\n    }\n\n    public componentDidMount = (): void => {\n        if (this.props.imageURL) {\n            this.loadImage(this.props.imageURL);\n        }\n    }\n\n    public componentDidUpdate = (props: Props): void => {\n    }\n\n    private toDataURL(url: any): Promise<string> {\n\n        return new Promise((resolve, reject) => {\n            var xhr = new XMLHttpRequest();\n            xhr.onload = function() {\n                if (xhr.response.type !== \"text/html\") {\n                    var reader = new FileReader();\n                    reader.onloadend = function() {\n                        resolve(reader.result?.toString());\n                    }\n                    reader.readAsDataURL(xhr.response);\n                } else {\n                    reject();\n                } \n                \n            };\n            xhr.open('GET', url);\n            xhr.responseType = 'blob';\n            xhr.send();\n        })\n    }\n\n    private clearImage = (e: React.MouseEvent<HTMLElement>): void => {\n        if (this.props.disabled) return;\n\n        e.preventDefault();\n        this.setState({\n            hasImage: false\n        });\n\n        this.props.newImageLoaded(null);\n    }\n\n    private loadImage = (url: string): void => {\n        this.toDataURL(url)\n            .then( (data: string) => {\n                (window.document.getElementById(this.props.id) as HTMLImageElement).src=data;\n                this.setState({loadingImage: false})\n            })\n            .catch( err => {\n                window.setTimeout(()=>{\n                    if (this.reloadAttempted) {\n                        this.setState({\n                            loadingImage: false,\n                            hasImage: false\n                        })\n                    } else {\n                        this.reloadAttempted = true;\n                        this.loadImage(url);\n                    }\n                }, 3000);\n            })\n    }\n\n    private onInputChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            this.readFile(e.target.files[0])\n            .then((resp: any) => {\n                console.log(resp.file.size);\n                const maxSizeInMb: number = this.props.maximumSizeInMb ? this.props.maximumSizeInMb : 2;\n                if (resp.file.size > maxSizeInMb * 1048576) {\n                    window.alert(`Maximum File Size is ${maxSizeInMb}Mb`);\n                    return;\n                } else {\n                    (window.document.getElementById(this.props.id) as HTMLImageElement).src=resp.result;\n                    this.setState({currentImage: resp.dataURL, hasImage: true})\n                    this.props.newImageLoaded(resp.file)\n                }\n                \n            }) \n        }\n    }\n\n    private open = () => {\n        if (!this.props.disabled)\n            this.fileElement?.click();\n    }\n\n    private readFile= (file: File) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = function (e: any) {\n                let dataURL = e.target.result;\n                dataURL = dataURL.replace(\";base64\", `;name=${file.name};base64`);\n                resolve({file, dataURL, result:e.target.result});\n            };\n          reader.readAsDataURL(file);\n        });\n    }\n\n    public render() {\n        return(\n            <div className={`image_uploader ${this.props.disabled ? '' : 'image_uploader--active'}`}>\n                <div \n                    className=\"inner\"\n                    onClick={this.open}\n                    > \n                    <img \n                        src={\"\"}\n                        alt=\"question\"\n                        id={this.props.id}\n                        className={this.state.hasImage? \"\" : \"hidden\"}\n                        />\n                    <input\n                        type=\"file\"\n                        id=\"xxx\"\n                        ref={input => this.fileElement = input}\n                        onChange={this.onInputChanged}\n                        accept={this.props.allowedFileTypes ? this.props.allowedFileTypes : \"\"}\n                    >\n                    </input>\n                    {(!this.state.hasImage && !this.props.disabled) &&\n                        <div className={`no-image image_uploader-overlay`}>\n                            <span>{ this.props.uploadPrompt || \"Click to  Upload Image\"}</span>\n                        </div>\n                    }\n                </div>\n                {(this.state.hasImage && !this.props.disabled) &&\n                    <div \n                        className=\"remove-btn\"\n                        onClick={this.clearImage}\n                        >X</div>\n                }\n                {this.state.loadingImage &&\n                    <div className=\"loading-image image_uploader-overlay\">\n                        <span>Loading Image...</span>\n                    </div>\n                }\n            </div>\n        )\n    }\n}","import React, {useEffect, useState} from 'react';\nimport MenuItem, {MenuItemDTO} from '../../models/MenuItemModel'; \nimport menuItemService from '../../services/MenuItemService';\nimport LoadingOverlay from '../overlays/LoadingOverlay';\nimport { Switch, Route, useParams } from 'react-router-dom';\nimport { MenuItems } from './MenuItems';\nimport MenuEdit from './MenuItemEdit';\nimport {SubNavigation, NavItem} from '../nav/SubNavigation';\nimport { NewMenuItem } from './NewMenuItem'; \n\nexport const Menu = (): React.ReactElement => {\n\n    return(\n        <div className=\"row menu\">\n            <div className=\"col-12\">\n                <Switch>\n                    <Route path=\"/dashboard/menu/edit/:id/\" component={MenuEdit} />\n                    <Route path=\"/dashboard/menu/:category/\" component={MenuItems} />\n                </Switch>\n            </div>\n        </div>\n    )\n}","import React from 'react';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\n\nimport './authentication.css';\nimport authService from '../../services/AuthService';\nimport { Redirect } from 'react-router-dom';\nimport User from '../../models/User';\nimport AuthenticateDTO from '../../dto/AuthenticateDTO';\nimport { AppActions, AppState } from '../../store/store';\nimport { dispatchLogin } from '../../store/auth/authActions';\nimport { AuthState } from '../../store/auth/authReducer';\n\ninterface LinkStateProps {\n    auth: AuthState\n}\n\ninterface LinkDispatchProps {\n    login: (user: User, operator_token: string) => void\n}\n\ntype Props = LinkStateProps & LinkDispatchProps\n\ninterface State {\n    email: string,\n    password: string,\n    loggingIn: boolean\n}\n\nclass Login extends React.Component<Props, State> {\n\n    state = {\n        email: \"\",\n        password: \"\",\n        loggingIn: false\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    private login = (): void => {\n        if (this.state.email === \"\" || this.state.password === \"\") return;\n\n        authService.authenticate(this.state.email, this.state.password)\n            .then( (dto: AuthenticateDTO) => {\n                console.log(dto);\n                this.props.login(dto.user, dto.operator_token);\n            })\n            .catch((err: any) => {\n                window.alert(\"Invalid Credentials\");\n            });\n    }\n\n    public render() {\n        if (this.props.auth.loggedIn) \n            return <Redirect to=\"/dashboard/menu\" />\n        \n        return(\n            <div className=\"row justify-content-center\" id=\"login-panel\">\n                <div className=\"class-12 class-md-6\">\n                    <div className=\"wrapper fadeInDown\">\n                        <div id=\"formContent\">\n                            <div className=\"fadeIn first\">\n                                <h5>Welcome to the Operator Dashboard!</h5>\n                            </div>\n\n                            <form>\n                                <input\n                                    type=\"text\"\n                                    className=\"fadeIn second\"\n                                    id=\"email\"\n                                    placeholder=\"email\"\n                                    value={this.state.email}\n                                    onChange={this.updateData}\n                                    />\n                                <input\n                                    type=\"password\" \n                                    className=\"fadeIn third\"\n                                    id=\"password\"\n                                    placeholder=\"password\"\n                                    value={this.state.password}\n                                    onChange={this.updateData}\n                                    />\n                                <input \n                                    type=\"button\"\n                                    className=\"fadeIn fourth\"\n                                    value=\"Log In\"\n                                    onClick={this.login}\n                                    />\n                            </form>\n\n                            <div id=\"formFooter\">\n                                <a className=\"underlineHover\" href=\"/\">Forgot Password?</a>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state: AppState): LinkStateProps => ({auth: state.authReducer})\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>): LinkDispatchProps => ({\n    login: bindActionCreators(dispatchLogin, dispatch)\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)","import Service from './Service';\nimport Order from '../models/OrderModel';\n\nclass OrderService extends Service {\n    appName=\"dashboard\";\n    view=\"order\";\n\n    public getCompletedOrders = (date: string): Promise<Order[]> => {\n        return this._get<Order[]>(`${this.appName}/${this.view}/get_completed/?date=${date}`);\n    }\n}\n\nexport default new OrderService();","import React, { Fragment } from 'react';\nimport Order from '../../models/OrderModel';\n\nimport orderService from '../../services/OrderService';\nimport OrderItem from '../../models/OrderItemModel';\nimport helpers from '../../helpers/helpers';\nimport momentHelper from '../../helpers/MomentHelper';\nimport { Redirect } from 'react-router-dom';\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\nimport InputWidget from \"../widgets/inputWidget/InputWidget\";\n\ninterface State {\n    loading: boolean,\n    orders: Order[],\n    editId: number,\n    startDate: string,\n    endDate: string,\n    currentPage: number,\n    paginationCount: number\n}\n\nexport default class Orders extends React.Component<any, State> {\n\n    state = {\n        loading: false,\n        orders: [],\n        editId: 0,\n        startDate: '',\n        endDate: '',\n        currentPage: 0,\n        paginationCount: 0\n    }\n\n    private orderStatuses: string[] = ['canceled', 'pending', 'paid'];\n\n    public componentDidMount = (): void => {\n        this.changePage(1);\n    }\n\n    private changePage = (pageNumber: number, searchPattern?: string): void => {\n        this.setState({loading: true, currentPage: pageNumber});\n\n        orderService.pagedSearchResults(pageNumber, searchPattern)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({\n                    orders: dto.results as Order[],\n                    loading: false,\n                    paginationCount: dto.count\n                })\n            })\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    public render() {\n        if (this.state.editId > 0)\n            return <Redirect to={`/dashboard/orders/edit/${this.state.editId}`} /> \n\n        return(\n            <div className=\"row orders\">\n                <div className=\"col-12\">\n                    <div className=\"row\">\n                        <div className='col-12'>\n                            <InputWidget\n                                id='orders_search_input'\n                                type='text'\n                                onUpdate={(id: string, searchPattern: string) => this.changePage(this.state.currentPage, searchPattern)}\n                                />\n                            <PageSelector\n                                numItems={this.state.paginationCount}\n                                currentPage={this.state.currentPage}\n                                gotoPage={this.changePage}\n                                />\n                        </div>\n                    </div>\n                    {this.state.loading &&\n                        <LoadingOverlay />\n                    }\n                    {!this.state.loading &&\n                        this.state.orders.length === 0 ?\n                            <div>No Orders Found</div>\n                            :\n                            <table className={'table'}>\n                                <thead>\n                                    <tr>\n                                        <th>Name</th>\n                                        <th className='d-none d-md-block'>Order ID</th>\n                                        <th>Contact</th>\n                                        <th className='d-none d-md-block'>Date</th>\n                                        <th>Status</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {\n                                        this.state.orders\n                                            .map((order: Order, index: number) => {\n                                                let menuItemCount: number = 0;\n                                                let total: number = 0;\n                                                let deliveryDates: string[] = [];\n                                                order.items.forEach((orderItem: OrderItem) => {\n                                                    menuItemCount += orderItem.cart_item.quantity;\n                                                    total += orderItem.cart_item.quantity * orderItem.cart_item.price;\n                                                    if (deliveryDates.indexOf(orderItem.cart_item.delivery_date) === -1)\n                                                        deliveryDates.push(orderItem.cart_item.delivery_date);\n                                                })\n\n                                                return (\n                                                    <tr key={order.id} className={index % 2 ? '' : 'orders-line-highlight'}\n                                                        onClick={()=> this.setState({editId: order.id})}>\n                                                        <td>{order.contact_name}</td>\n                                                        <td className='d-none d-md-block'>{order.public_id}</td>\n                                                        <td>{order.email}<br/>{order.phone_number}</td>\n                                                        <td className='d-none d-md-block'>{momentHelper.asFullDate(order.created_at)}</td>\n\n                                                        <td className={`order-status-${order.order_status}`}>\n                                                            {this.orderStatuses[order.order_status]}\n                                                        </td>\n                                                    </tr>\n                                                )\n                                        })\n                                    }\n                                </tbody>\n                            </table>\n                    }\n                </div> \n            </div>\n        )\n    }\n}","import Service from './Service';\nimport OrderItem from '../models/OrderItemModel';\n\nclass OrderItemService extends Service{\n\n    appName = 'dashboard';\n    view = 'order_item';\n\n    public getCompleted = (date: string): Promise<OrderItem[]> => {\n        return this._get<OrderItem[]>(`${this.appName}/${this.view}/get_completed/?date=${date}`)\n    }\n}\n\nexport default new OrderItemService();","import React, { Fragment } from 'react';\n\nimport orderItemService from '../../services/OrderItemService';\nimport orderService from '../../services/OrderService';\nimport OrderItem from '../../models/OrderItemModel';\n\nimport './order.scss';\nimport Order from '../../models/OrderModel';\nimport helpers from '../../helpers/helpers';\n\ninterface State {\n    pullDate: string,\n    orderItems: OrderItem[],\n    pullType: string,\n    orders: Order[]\n}\n\nexport default class Export extends React.Component<any, State> {\n\n    state = {\n        pullDate: \"\",\n        orderItems: [],\n        pullType: \"route\",\n        orders: []\n    }\n\n    public componentDidMount = (): void => {\n        /*\n        orderItemService.getByDate('2020-06-16')\n            .then((prepListItems: OrderItem[]) => {\n                if (prepListItems.length === 0) {\n                    window.alert('There are not prep items for this day');\n                    return;\n                }\n                //this.setState({prepListItems})\n            })\n            .catch( err => window.alert('Unable to display prep list'));\n            */\n    }\n\n    private loadData = (): void => {\n        if (this.state.pullType === 'prep') {\n            this.loadOrderItems();\n        } else {\n            this.loadOrders();\n        }\n    }\n\n    private loadOrderItems = (): void => {\n        orderItemService.getCompleted(this.state.pullDate)\n            .then((orderItems: OrderItem[]) => {\n                if (orderItems.length === 0) {\n                    window.alert('There are not items for this day');\n                    return;\n                }\n                this.setState({orderItems}, ()=> window.print())\n            })\n            .catch( err => window.alert('Unable to display'));\n    }\n\n    private loadOrders = (): void => {\n        orderService.getCompletedOrders(this.state.pullDate)\n            .then((orders: Order[]) => {\n                if (orders.length === 0) {\n                    window.alert('There are not items for this day');\n                    return;\n                }\n\n                if (this.state.pullType === 'route') {\n                    let fileContent: string = \"Address line 1\\tAddress line 2\\tCity\\tState\\tZip\\tName\\tEmail Address\\tPhone Number\\tExternal ID\\tOrder Count\\tDriver\\n\";\n                    let orderItems: OrderItem[] = [];\n\n                    orders.forEach((order: Order) => {\n                        orderItems = order.items.filter((orderItem: OrderItem) => orderItem.cart_item.delivery_date === this.state.pullDate);\n                        if (orderItems.length > 0) {\n                            fileContent += `${order.street_address}\\t${order.unit}\\t${order.city}\\tCA\\t${order.zip}\\t${order.contact_name}\\t${order.email}\\t${order.phone_number}\\t${order.public_id}\\t${orderItems.length}\\tLee\\n`;\n                        }\n                    })\n                    \n                    var bb = new Blob([fileContent ], { type: 'text/plain' });\n                    var a = document.createElement('a');\n                    a.download = `delivery_route_${this.state.pullDate}.tsv`;\n                    a.href = window.URL.createObjectURL(bb);\n                    a.click();\n                } else {\n                    this.setState({orders},()=> window.print())\n                }\n            })\n            .catch( err => window.alert(err));\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    public render() {\n        return(\n            <div className=\"row\">\n                <div className=\"col-12 col-md-6 export-panel\">\n                    <select id=\"pullType\" className=\"control-form\" onChange={this.updateData} defaultValue={this.state.pullType}>\n                        <option value=\"prep\">Prep List</option>\n                        <option value=\"delivery_tags\">Delivery Tags</option>\n                        <option value=\"route\">Route CSV</option>\n                    </select>\n                    <br/><br/>\n                    Select a date: \n                    <input type=\"date\" id=\"pullDate\" className=\"form-control\"\n                            value={this.state.pullDate} onChange={this.updateData}/>\n                    <button className=\"btn btn-outline-success mt-2\" onClick={this.loadData}>Print</button>\n                </div>\n                {(this.state.orderItems.length + this.state.orders.length > 0) &&\n                    <div className=\"col-12 print-sheet\">\n                        {\n                            this.state.pullType === 'prep' ?\n                                <PrepDisplay orderItems={this.state.orderItems} date={this.state.pullDate} />\n                                :\n                                <DeliveryTagsDisplay orders={this.state.orders} date={this.state.pullDate} />\n                                    \n                        }\n                    </div>\n                }\n            </div>\n        )\n    }\n}\n\nfunction DeliveryTagsDisplay(props: any) {\n    return (\n        <div className='delivery_tags_print'>\n            {\n                props.orders.map((order: Order) => {\n                    const orderItems: OrderItem[] = order.items.filter((orderItem: OrderItem) => orderItem.cart_item.delivery_date === props.date)\n                    \n                    return (\n                        <Fragment key={`order_${order.id}`}>\n                            <div className='quarter-page'>\n                                <span className=\"contact-info\">{order.contact_name}</span>\n                                <span className=\"street-address\">{order.street_address} {order.unit}</span>\n                                <span className=\"street-address\">{order.city} {order.zip}</span>\n                                <span className=\"contact-info\">{order.phone_number}</span>\n                                <b>Items:</b>\n                                <div className=\"delivery-tag-items\">\n                                    {\n                                        orderItems.map((orderItem: OrderItem) => {\n                                            return(\n                                                <div className=\"delivery-tag-item\" key={`oi_${orderItem.id}`}> \n                                                    {orderItem.cart_item.quantity.toString() + \" \" + helpers.extractCartItemDescription(orderItem.cart_item)}\n                                                </div>\n                                            )\n                                        })\n                                    }\n                                </div>\n                                {order.notes &&\n                                    <div className=\"delivery-instructions\">\n                                        <br/>\n                                        _______________________________\n                                        <h4>Delivery Instructions:</h4>\n                                        <div className=\"delivery_instructions_text\">\n                                            {order.notes}\n                                        </div>\n                                    </div>\n\n                                }\n                            </div>\n                        </Fragment>\n                    )\n                    })\n            }\n        </div>\n    )\n}\n\nfunction PrepDisplay(props: any) {\n\n    type CondenensedListItem = {count: number, dish: string, protein: string, spicy_text:string};\n\n    const spicy: string[] = ['No', 'mild', 'spicy'];\n    let condensedList: {[key: string]: CondenensedListItem} = {};\n    let key: string = \"\";\n    let dish: string = \"\";\n    let protein: string = \"\";\n    let spicy_text: string = \"\";\n    let dishCount: number = 0;\n\n    props.orderItems.forEach((orderItem: OrderItem) => {\n        dish = orderItem.cart_item.menu_item.name;\n        protein = (orderItem.cart_item.menu_item.proteins.split(':').length > 1 && orderItem.cart_item.protein !== \"\") ?\n                    orderItem.cart_item.protein : \"\";\n        spicy_text = (orderItem.cart_item.menu_item.spicy) ? spicy[orderItem.cart_item.spicy] : \"\";\n\n        key = `${dish}:${protein}:${spicy_text}`;\n        if (!(key in condensedList))\n            condensedList[key] = {count: 0, dish, protein, spicy_text};\n\n        condensedList[key].count += orderItem.cart_item.quantity;\n        dishCount += orderItem.cart_item.quantity; \n    });\n\n    return ( \n        <Fragment>\n            <span className='print-sheet-header'>{props.date} &nbsp;&nbsp;:&nbsp;&nbsp;{dishCount} items</span>\n            <table className='prep-sheet'> \n                <thead>\n                    <tr>\n                        <td>#</td>\n                        <td>Dish</td>\n                        <td>Protein</td>\n                        <td>Spicy</td>\n                        <td>L</td>\n                        <td>P</td>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        Object.keys(condensedList).sort().map((key: string, index: number) => {\n                            return (\n                                <tr className={`${index % 2 ? '' : 'print-row-dark'}`} key={key}>\n                                    <td>{condensedList[key].count}</td>\n                                    <td>{condensedList[key].dish}</td>\n                                    <td>{condensedList[key].protein}</td>\n                                    <td>{condensedList[key].spicy_text}</td>\n                                    <td></td>\n                                    <td></td>\n                                </tr> \n                            )\n                        })\n                    }\n                </tbody>\n            </table>\n        </Fragment>\n    )\n}","import ModelBase from \"./ModelBase\";\nimport CartItem from \"./CartItemModel\";\nimport OrderItem from \"./OrderItemModel\";\n\nexport default class Order extends ModelBase {\n\n    public order_status!: number;\n    public square_payment!: string;\n    public contact_name!: string;\n    public phone_number!: string;\n    public email!: string;\n    public unit!: string;\n    public street_address!: string;\n    public city!: string;\n    public zip!: string;\n    public notes!: string;\n    public items!: OrderItem[];\n    public uuid!: string;\n    public public_id!: string;\n    public nonce!: string;\n    public tip!:number;\n\n    constructor(\n        id: number = -1,\n        order_status: number = 0,\n        contact_name: string = '',\n        phone_number: string = '',\n        email: string = '',\n        unit: string = '',\n        street_address: string = '',\n        city: string = '',\n        zip: string = '',\n        notes: string = '',\n        items: OrderItem[] = [],\n        uuid: string = '',\n        public_id: string = '',\n        nonce: string = '',\n        tip: number = 0\n    ){\n        super();\n        this.id = id;\n        this.order_status = order_status;\n        this.contact_name = contact_name;\n        this.phone_number = phone_number;\n        this.email = email;\n        this.unit = unit;\n        this.street_address = street_address;\n        this.city = city;\n        this.zip = zip;\n        this.notes = notes;\n        this.items = items;\n        this.uuid = uuid;\n        this.public_id = public_id;\n        this.nonce = nonce;\n        this.tip = tip;\n    }\n}\n\nexport class OrderDTO extends ModelBase {\n\n    public order_status!: number;\n    public contact_name!: string;\n    public phone_number!: string;\n    public email!: string;\n    public unit!: string;\n    public street_address!: string;\n    public city!: string;\n    public zip!: string;\n    public cart_items!: number[];\n    public notes!: string;\n    public nonce!: string;\n    public tip!: number;\n    public coupon!: number;\n    \n    constructor(order: Order) {\n                    super();\n\n                    this.order_status = order.order_status;\n                    this.contact_name = order.contact_name;\n                    this.phone_number = order.phone_number;\n                    this.email = order.email;\n                    this.unit = order.unit;\n                    this.street_address = order.street_address;\n                    this.city = order.city;\n                    this.zip = order.zip;\n                    this.notes = order.notes;\n                    this.nonce = order.nonce;\n                    this.tip = order.tip;\n                    // this.coupon = order.coupon.id;\n                }\n}","import Service from './Service';\nimport FunctionsResponsesDTO from '../dto/FunctionsResponsesDTO';\nimport Order from \"../models/OrderModel\";\nimport MassMailResponseDTO from \"../dto/MassMailResponseDTO\";\n\nclass APIActionService extends Service {\n\n    public getTimeZones = (): Promise<string[]> => {\n        return this._get<string[]>(`dashboard/get_time_zones/`);\n    }\n\n    public sendWeeklyEmails = (): Promise<FunctionsResponsesDTO> => {\n        return this._get(`dashboard/send_weekly_email/`);\n    }\n\n    public sendSupportEmail = (to: string, subject: string, body: string, order: Order | null = null): Promise<any> => {\n        let payload: any = {to, subject, body}\n\n        if (order !== null) payload['order_id'] = order.id\n\n        return this._post<any>('dashboard/send_support_email/', payload)\n    }\n\n    public sendMassMail = (dto: any): Promise<MassMailResponseDTO> => {\n        return this._post<any>('dashboard/send_mass_email/', dto);\n    }\n}\n\nexport default new APIActionService();","import React from 'react';\nimport Order from \"../../models/OrderModel\";\nimport adminService from '../../services/APIActionService';\n\ninterface Props {\n    order: Order\n}\n\ninterface State {\n    subject: string,\n    body: string,\n    include_order: boolean,\n    submitting: boolean\n}\n\nexport default class OrderEmail extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            subject: `Order ${props.order.public_id}`,\n            body: '',\n            include_order: true,\n            submitting: false\n        }\n    }\n\n    private submit = (): void => {\n        this.setState(({submitting: true}));\n\n        adminService.sendSupportEmail(\n            this.props.order.email,\n            this.state.subject,\n            this.state.body,\n            this.state.include_order ? this.props.order : null)\n            .then(() => {\n                window.alert('Email Sent');\n                this.setState({subject: '', body: '', include_order: true})\n            })\n            .catch( err => window.alert('unable to send email'))\n            .then(() => this.setState({submitting: false}))\n    }\n\n    private toggleIncludeOrder = (): void => {console.log(this.state.include_order)\n        this.setState(({include_order: !this.state.include_order}));\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n        } as Pick<State, keyof State>);\n    }\n\n    public render() {\n        return (\n            <div className={`row order_email`}>\n                <div className={`col-12 col-md-6`}>\n                    <label>subject:</label>\n                    <input className={'form-control order_email__subject'} id={'subject'}\n                        value={this.state.subject} onChange={this.updateData} disabled={this.state.submitting}/>\n                </div>\n                <div className={'col-12 mt-3'}>\n                    <label>Message</label>\n                    <textarea className={'form-control order_email__body'} id={'body'} value={this.state.body}\n                        onChange={this.updateData} disabled={this.state.submitting} rows={8}/>\n                </div>\n                <div className={'col-12 mt-3'}>\n                    Include Order: &nbsp;&nbsp;\n                    <input className={'order_email__include_order'} type={'checkbox'} id={'include_order'} checked={this.state.include_order}\n                        onChange={this.toggleIncludeOrder} disabled={this.state.submitting}/>\n                </div>\n                <div className={'col-12 mt-3'}>\n                    <button\n                        className={'btn btn-outline-success order_email__submit'}\n                        disabled={this.state.subject === '' || this.state.body === '' || this.state.submitting}\n                        onClick={this.submit}\n                        >Send Email</button>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport Order, { OrderDTO } from '../../models/OrderModel';\n\nimport orderService from '../../services/OrderService';\nimport OrderItem from '../../models/OrderItemModel';\nimport helpers, {OrderedItems} from '../../helpers/helpers';\nimport momentHelper from '../../helpers/MomentHelper';\nimport { Link, Redirect } from 'react-router-dom';\nimport OrderEmail from \"./OrderEmail\";\n\ninterface State {\n    loading: boolean,\n    order: Order,\n    updating: boolean,\n    updatesPending: boolean,\n    returnToOrders: boolean\n}\n\nexport default class OrderEdit extends React.Component<any, State> {\n\n    state = {\n        loading: true,\n        order: new Order(),\n        updating: false,\n        updatesPending: false,\n        returnToOrders: false\n    }\n\n    public componentDidMount = (): void => {\n        const { match: { params } } = this.props;\n\n        orderService.get<Order>(params.id)\n            .then((order: Order) => this.setState({order, loading: false}))\n            .catch( err => window.alert(err))\n    }\n\n    private saveUpdates = (): void => {\n        this.setState({updating: true});\n        orderService.update<any>(this.state.order.id, new OrderDTO(this.state.order))\n            .then((order: Order) => this.setState({order, updating: false, updatesPending: false, returnToOrders: true}))\n            .catch ( err => window.alert(err))\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>): void => {\n        let order: any = this.state.order;\n        order[e.target.id] = e.target.value;\n        this.setState({order, updatesPending: true})\n    }\n\n    public render() {\n        if (this.state.loading)\n            return <div>Loading...</div>\n\n        if (this.state.returnToOrders)\n            return <Redirect to=\"/dashboard/orders\" />\n\n        const orderedItems: OrderedItems = helpers.sortOrderItemsByDate(this.state.order.items);\n\n        return (\n            <div className=\"row edit_order\">\n                <div className=\"col-12\">\n                    <Link to={'/dashboard/orders'}>{`<<< Return to Orders`}</Link>\n                    <br/><br/>\n                </div>\n                <div className=\"col-12\">\n                    <h5>Order ID: {this.state.order.public_id}</h5>\n                    <select id=\"order_status\" defaultValue={this.state.order.order_status}\n                            className={`order_status order_status--${this.state.order.order_status}`}\n                            onChange={this.updateData} disabled={this.state.updating}>\n                        <option value=\"0\">Canceled</option>\n                        <option value=\"1\">Pending</option>\n                        <option value=\"2\">Paid</option>\n                    </select>\n                </div>\n                <div className=\"col-12 col-md-6\">\n                    <div className=\"form-group mt-2\">\n                        <label htmlFor=\"contact_name\">contact name</label>\n                        <input id=\"contact_name\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.contact_name} onChange={this.updateData}/>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"phone_number\">phone number</label>\n                        <input id=\"phone_number\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.phone_number} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"city\">city</label>\n                        <input id=\"city\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.city} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"zip\">zip</label>\n                        <input id=\"zip\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.zip} onChange={this.updateData}/>\n                    </div>\n                </div>\n                <div className=\"col-12 col-md-6\">\n                    <div className=\"form-group\">\n                        <label htmlFor=\"email\">email</label>\n                        <input id=\"email\" type=\"email\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.email} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"street_address\">Street Address</label>\n                        <input id=\"street_address\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.street_address} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"unit\">unit</label>\n                        <input id=\"unit\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.unit} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"notes\">delivery notes</label>\n                        <textarea id=\"notes\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.notes} onChange={this.updateData}/>\n                    </div>\n                </div>\n                <div className=\"col-2\">\n                    <pre>\n                        <code className=\"prettyprint\">\n                            {JSON.stringify(this.state.order.square_payment, null, 4)}\n                        </code>\n                    </pre>\n                </div>\n                <div className=\"col-12\">\n                    <button className=\"btn btn-outline-success\" onClick={this.saveUpdates}\n                            disabled={!this.state.updatesPending || this.state.updating}>Save Updates</button>\n                </div>\n                <div className=\"col-12 edit_order_deliveries\">\n                    <hr/>\n                    <h5>Deliveries:</h5>\n                    {\n                        Object.keys(orderedItems).sort().map((key: string) => {\n                            return (\n                                <div className=\"row mt-3\">\n                                    <div className=\"col-12\">\n                                        <b>{momentHelper.asFullDate(key)}</b>\n                                        {\n                                            orderedItems[key].map((orderItem: OrderItem) =>\n                                                <div className=\"row\">\n                                                    <div className=\"col-12\">\n                                                        &nbsp;&nbsp;&nbsp;\n                                                        {orderItem.cart_item.quantity}\n                                                        &nbsp;\n                                                        {helpers.extractCartItemDescription(orderItem.cart_item)}\n                                                    </div>\n                                                </div>\n                                            ) \n                                        }\n                                    </div> \n                                </div>\n                            )\n                        })\n                    }\n                </div>\n                <div className={'col-12'}>\n                    <hr/>\n                    <h5>Email Customer:</h5>\n                    <OrderEmail order={this.state.order}/>\n                </div>\n            </div> \n        )\n    }\n}","import ModelBase from './ModelBase';\nimport {format} from 'date-fns';\n\nexport default class Coupon extends ModelBase {\n\n    public code!: string;\n    public mode!: number;\n    public calculation_type!: number;\n    public expire!: string;\n    public start_value!: number;\n    public current_value!: number;\n    public remaining_uses!: number;\n    public email!: string;\n    public active!: boolean;\n\n    constructor (\n        id?: number,\n        code?: string,\n        active?: boolean,\n        mode?: number,\n        calculation_type?: number,\n        expire?: string,\n        start_value?: number,\n        current_value?: number,\n        remaining_uses?: number,\n        email?: string\n    ){\n        super();\n        let expire_date: Date = new Date();\n        expire_date.setDate(expire_date.getDate() + 60); // an extra 30 days  to cover for the diff between python and javascript dates\n        this.id = id || -1;\n        this.code = code || '';\n        this.active = active !== false ? true : false;\n        this.mode = mode || 0;\n        this.calculation_type = calculation_type || 0\n        this.expire = expire ||\n            format(expire_date, 'yyyy-mm-dd');\n        this.start_value = start_value || 0;\n        this.current_value = current_value || 0;\n        this.remaining_uses = remaining_uses || 0;\n        this.email = email || '';\n    }\n}\n\nexport class CouponDTO extends Coupon {\n\n    public code!: string;\n    public mode!: number;\n    public calculation_type!: number;\n    public expire!: string;\n    public start_value!: number;\n    public current_value!: number;\n    public remaining_uses!: number;\n    public email!: string;\n    public active!: boolean;\n\n    constructor(coupon: Coupon){\n        super();\n        this.id = coupon.id;\n        this.active = coupon.active;\n        this.mode = coupon.mode;\n        this.calculation_type = coupon.calculation_type;\n        this.expire = coupon.expire;\n        this.start_value = coupon.start_value;\n        this.current_value = coupon.current_value;\n        this.remaining_uses = coupon.remaining_uses;\n        this.email = coupon.email;\n    }\n}","import Service from './Service';\n\nclass CouponService extends Service {\n    appName = \"dashboard\";\n    view = \"coupon\";\n}\n\nexport default new CouponService();","import React, {useEffect, useState} from 'react';\n\nimport Coupon from '../../models/Coupon';\nimport momentHelper from '../../helpers/MomentHelper';\n\nimport './coupon.scss';\nimport couponService from '../../services/CouponService';\n\ninterface Props {\n    coupon: Coupon,\n    couponUpdated: (coupon: Coupon) => void\n}\n\nexport const CouponComponent = (props: Props): React.ReactElement => {\n    const modes: string[] = ['standard', 'one off'];\n    const calculation_types: string[] = ['percentage', 'fixed'];\n    const [coupon, setCoupon] = useState<Coupon>(props.coupon);\n    const [deactivating, setDeactivating] = useState(false);\n\n    const deactivateCoupon = (): void => {\n        if (!window.confirm(`Are you sure you want to deactivate:\\n${coupon.code}\\n\\nCoupons cannot be reactivated!`)) return;\n        setDeactivating(true);\n        coupon.active = false;\n        couponService.update(coupon.id, coupon)\n            .then((coupon: Coupon) => {\n                setCoupon(coupon);\n                props.couponUpdated(coupon);\n            })\n            .catch(\n                err => console.log(err))\n    }\n\n    return (\n        <tr className={`coupon ${!props.coupon.active ? 'coupon--inactive' : ''}`}>\n            <td>\n                { coupon.active &&\n                    <button className={'btn btn-outline-danger coupon__deactivate'}\n                            disabled={deactivating}\n                            onClick={deactivateCoupon}\n                    >X</button>\n                }\n            </td>\n            <td className={'coupon__code'}>{coupon.code}</td>\n            <td className={'coupon__mode d-none d-md-table-cell'}>{modes[coupon.mode]}</td>\n            <td className={'coupon__mode d-none d-md-table-cell'}>{calculation_types[coupon.calculation_type]}</td>\n            <td className={'coupon__uses'}>{coupon.remaining_uses}</td>\n            <td className={'coupon__start_value d-none d-md-table-cell'}>\n                {\n                    props.coupon.calculation_type === 0 ?\n                        `${coupon.start_value * 100}%`\n                        :\n                        `$${coupon.start_value.toFixed(2)}`\n                }\n            </td>\n            <td className={'coupon__end_value d-none d-md-table-cell'}>\n                {\n                    coupon.calculation_type === 0 ?\n                        ``\n                        :\n                        `$${coupon.current_value.toFixed(2)}`\n                }\n            </td>\n            <td className={'coupon__expire'}>\n                {momentHelper.asFullDate(coupon.expire)}\n            </td>\n            <td className={'coupon__email d-none d-md-table-cell'}>\n                {coupon.email}\n            </td>\n        </tr>\n    )\n}","import React from 'react';\nimport Coupon from '../../models/Coupon';\n\nimport couponService from '../../services/CouponService';\n\nimport './coupon.scss';\nimport {CouponComponent} from \"./CouponComponent\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {RouteComponentProps} from 'react-router-dom';\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\n\ninterface State {\n    loading: boolean,\n    coupons: Coupon[],\n    addingCoupon: boolean,\n    currentPage: number,\n    paginationCount: number\n}\n\nexport default class Coupons extends React.Component<RouteComponentProps, State> {\n\n    state = {\n        loading: true,\n        coupons: [],\n        addingCoupon: false,\n        currentPage: 0,\n        paginationCount: 0\n    }\n\n    public componentDidMount = (): void => {\n        this.changePages(1);\n    }\n\n    private changePages = (pageNumber: number): void => {\n        this.setState({currentPage: pageNumber, loading: true});\n\n        couponService.pagedSearchResults(pageNumber)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({\n                    coupons: dto.results as Coupon[],\n                    loading: false,\n                    paginationCount: dto.count\n                })\n                }\n            )\n            .catch( err => console.log(err))\n    }\n\n    private couponUpdated = (coupon: Coupon): void => {\n        this.setState({\n            coupons: this.state.coupons.map((c: Coupon) => {\n                if (c.id === coupon.id)\n                    return coupon\n                else\n                    return c\n            })\n        })\n    }\n\n    private addCoupon = (): void => {\n        this.setState(({addingCoupon: true}));\n        couponService.add<Coupon>(new Coupon())\n            .then((coupon: Coupon) => {this.props.history.push({pathname: `/dashboard/coupon/edit/${coupon.id}`})})\n            .catch( err => window.alert('Unable to create coupon'));\n    }\n\n    public render() {\n        if (this.state.loading)\n            return <LoadingOverlay />\n\n        const coupons: Coupon[] = this.state.coupons.sort((a: Coupon, b:Coupon) => {\n            return a.active < b.active ?\n                1\n                :\n                a.active > b.active ?\n                    -1 : 0\n        })\n\n        return(\n            <div className=\"row coupons\">\n                <div className='col-12'>\n                    <h3>coupons</h3>\n                    <hr/>\n                </div>\n                <div className={'col-12'}>\n                    <div className={'add_coupon'} onClick={() => this.props.history.push({pathname: '/dashboard/coupon/add'})}>\n                        {\n                            this.state.addingCoupon ?\n                                'Creating coupon...'\n                                :\n                                '+ Add Coupon'\n                        }\n                    </div>\n                    <PageSelector numItems={this.state.paginationCount} currentPage={this.state.currentPage} gotoPage={this.changePages} />\n                </div>\n                <div className={'col-12 mt-3'}>\n                    {\n                        coupons.length > 0 ?\n                            <table className={'table'}>\n                                <thead>\n                                <tr>\n                                    <th></th>\n                                    <th>code</th>\n                                    <th className='yes\n                                    '>mode</th>\n                                    <th className='d-none d-md-table-cell'>calculation</th>\n                                    <th>uses</th>\n                                    <th className='d-none d-md-table-cell'>start value</th>\n                                    <th className='d-none d-md-table-cell'>current value</th>\n                                    <th>expire</th>\n                                    <th className='d-none d-md-table-cell'>email</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                {\n                                    coupons.map((coupon: Coupon) =>\n                                        <CouponComponent\n                                            coupon={coupon} key={`c_${coupon.id}`}\n                                            couponUpdated={this.couponUpdated}/>\n                                    )\n                                }\n                                </tbody>\n                            </table>\n                            :\n                            <p>\n                                Coupons can be used for ad campaigns, rewarding great customers or an option to refunding\n                            </p>\n                    }\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\n\nimport deliveryDayService from '../../services/DeliveryDayService';\nimport DeliveryDay from '../../models/DeliveryDayModel';\nimport helpers from '../../helpers/helpers';\nimport momentHelper from '../../helpers/MomentHelper';\nimport LoadingOverlay from '../overlays/LoadingOverlay';\nimport DeliveryDayItem from '../../models/DeliveryDayItemModel';\nimport {RouteComponentProps} from 'react-router-dom';\n\ninterface Props extends RouteComponentProps {\n    match: any\n}\n\ninterface State {\n    loaded: boolean,\n    deliveryDay: DeliveryDay,\n    startDate: string,\n    endDate: string,\n    duplicating: boolean\n}\n\nexport default class DeliveryDuplicate extends React.Component<Props, State> {\n\n    state = {\n        loaded: false,\n        deliveryDay: new DeliveryDay(),\n        startDate: '',\n        endDate: '',\n        duplicating: false\n    }\n\n    public componentDidMount = (): void => {\n        const { match: { params } } = this.props;\n        deliveryDayService.get<DeliveryDay>(params.id)\n            .then((deliveryDay: DeliveryDay) => {\n                this.setState({deliveryDay, loaded: true})\n            })\n    }\n\n    private datesAreValid = (): boolean => {\n        return( \n            this.state.startDate !== '' &&\n            this.state.endDate !== '' &&\n            this.state.endDate > this.state.startDate\n            )\n    }\n\n    private duplicate = (): void => {\n        if(!window.confirm(`Are you sure you want duplicate: ${this.state.startDate} to ${this.state.endDate}`))\n            return;\n\n        deliveryDayService.duplicateDeliveryDay(this.state.deliveryDay, this.state.startDate, this.state.endDate)\n            .then((deliveryDay: DeliveryDay) => {\n                this.props.history.push({pathname: `/dashboard/delivery/edit/${deliveryDay.id}`})\n            })\n            .catch( err => window.alert(\"Unable to duplicate\"));\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    public render() {\n        if (!this.state.loaded)\n            return <LoadingOverlay />\n\n        return(\n            <div className=\"row delivery_duplicate\">\n                <div className=\"col-12 delivery_duplicate__dates\">\n                    {momentHelper.asFullDate(this.state.deliveryDay.date)} - {momentHelper.asFullDate(this.state.deliveryDay.end_date)}\n                    <hr/>\n                </div>\n                <div className=\"col-12\">\n                    Duplicate to:\n                </div>\n                <div className=\"col-12\">\n                    <div className=\"row\">\n                        <div className=\"col-12 col-md-2 delivery_duplicate__date\">\n                            <small>start date</small>\n                            <br/>\n                            <input\n                                type=\"date\"\n                                id=\"startDate\"\n                                value={this.state.startDate}\n                                disabled={this.state.duplicating}\n                                onChange={this.updateData} />\n                        </div>\n                        <div className=\"col-12 col-md-2 delivery_duplicate__date\">\n                            <small>end date</small>\n                            <br/>\n                            <input\n                                type=\"date\"\n                                id=\"endDate\"\n                                value={this.state.endDate}\n                                disabled={this.state.duplicating}\n                                onChange={this.updateData} />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-12 mt-3\">\n                    <button \n                        className=\"btn btn-outline-success duplicate_btn\" disabled={!this.datesAreValid()}\n                        onClick={this.duplicate}>\n                            Duplicate</button>\n                    <button \n                        className=\"btn btn-default ml-3\"\n                        onClick={() => (this.props as any).history.push({pathname: '/dashboard/deliveries'})}>\n                            Cancel</button>\n                </div>\n                <div className=\"col-12 delivery_duplicate_items\">\n                    <hr/>\n                    <div className=\"row\">\n                        {\n                            this.state.deliveryDay.day_items.map((item: DeliveryDayItem) => {\n                                return(\n                                    <div className=\"col-12 col-md-3 delivery_duplicate_items__item\" key={`di_${item.id}`}>\n                                        {item.menu_item.name}\n                                        <img src={item.menu_item.image} alt={item.menu_item.name}/>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Fragment } from 'react';\n\nimport couponService from '../../services/CouponService';\nimport Coupon from \"../../models/Coupon\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {RouteComponentProps} from 'react-router-dom'\n\ninterface State {\n    saving: boolean,\n    coupon: Coupon\n}\n\nexport default class CouponAdd extends React.Component<RouteComponentProps, State> {\n\n    state = {\n        saving: false,\n        coupon: new Coupon()\n    }\n\n    private cancel = (): void => {\n        if (window.confirm('Are you sure you want to cancel?'))\n            this.props.history.push('/dashboard/coupons');\n    }\n\n    private save = (): void => {\n        this.setState({saving: true});\n\n        let coupon: Coupon = this.state.coupon;\n\n        if (coupon.calculation_type === 0 && coupon.start_value > 1)\n            coupon.start_value = coupon.start_value * .01\n\n        couponService.add<Coupon>(this.state.coupon)\n            .then(() => {}) //this.props.history.push({pathname: '/dashboard/coupons'}))\n            .catch( err => alert('unable to add coupon'))\n            .finally(() => this.setState({saving: false}));\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>): void => {\n        let coupon: any = this.state.coupon;\n        coupon[e.target.id] = e.target.value;\n        this.setState({coupon});\n    }\n\n    public render() {\n        if (this.state.saving)\n            return <LoadingOverlay />\n\n        return (\n            <div className={'row justify-content-center edit_coupon'}>\n                <div className={'col-12 col-md-4'}>\n                    <h3>Add Coupon</h3>\n                    <hr/>\n                    <div className={'row'}>\n                        <div className={'col-12 col-6 mt-3'}>\n                            Mode:\n                            <select id={'mode'} className={'form-control edit_coupon__mode'}\n                                value={this.state.coupon.mode}\n                                onChange={this.updateData}>\n                                <option value={0}>standard</option>\n                                <option value={1}>one off</option>\n                            </select>\n                        </div>\n                        <div className={'col-12 col-6 mt-3'}>\n                            Calculation:\n                            <select id={'calculation_type'} className={'form-control edit_coupon__calculation_type'}\n                                value={this.state.coupon.calculation_type}\n                                onChange={this.updateData}>\n                                <option value={0}>percentage</option>\n                                <option value={1}>fixed value</option>\n                            </select>\n                        </div>\n                        <div className={'col-12 col-6 mt-3 edit_coupon__start_value'}>\n                            value:\n                            <input\n                                id={'start_value'}\n                                value={this.state.coupon.start_value || ''}\n                                onChange={this.updateData}\n                                className={'form-control'} />\n                        </div>\n                        <div className={'col-12 col-6 mt-3 edit_coupon__email'}>\n                            uses:\n                            <input\n                                id={'remaining_uses'}\n                                type={'number'}\n                                value={this.state.coupon.remaining_uses}\n                                onChange={this.updateData}\n                                className={'form-control'} />\n                        </div>\n                        <div className={'col-12 col-6 mt-3 edit_coupon__email'}>\n                            expire:\n                            <input\n                                id={'expire'}\n                                value={this.state.coupon.expire}\n                                onChange={this.updateData}\n                                type={'date'}\n                                className={'form-control'} />\n                        </div>\n                        <div className={'col-12 col-6 mt-3 edit_coupon__email'}>\n                            email:\n                            <input\n                                id={'email'}\n                                value={this.state.coupon.email}\n                                onChange={this.updateData}\n                                className={'form-control'} />\n                        </div>\n                        <div className={'col-12 mt-3'}>\n                            <div className={'row justify-content-center'}>\n                                <button className={'btn btn-outline-success mr-3'} onClick={this.save}>\n                                    save\n                                </button>\n                                <button className={'btn btn-outline-default edit_coupon__cancel'} onClick={this.cancel}>\n                                    cancel\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {this.state.saving &&\n                    <LoadingOverlay />\n                }\n\n            </div>\n        )\n    }\n}","import ModelBase from \"./ModelBase\";\n\nexport default class MailingListModel extends ModelBase {\n\n    public email!: string;\n    public code!: string;\n    public active!: boolean;\n\n    constructor(email: string, code: string, active: boolean) {\n        super();\n        this.email = email;\n        this.code = code;\n        this.active = active;\n    }\n}","import Service from './Service';\n\nclass MailingListService extends Service {\n    appName = 'dashboard';\n    view='mailing_list'\n}\n\nexport default new MailingListService();","import React, {useState} from 'react';\nimport MailingListModel from \"../../models/MailingListModel\";\nimport mailingListService from '../../services/MailingListService';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\ninterface Props {\n    dto: MailingListModel\n}\n\nexport const MailingListEntry = (props: Props): React.ReactElement => {\n    let checkDTO: MailingListModel = props.dto;\n    const [code, setCode] = useState<string>(checkDTO.code);\n    const [active, setActive] = useState<boolean>(checkDTO.active);\n    const [email, setEmail] = useState<string>(checkDTO.email);\n    const [saving, setSaving] = useState(false);\n\n    const save = (): void => {\n        setSaving(true);\n        mailingListService.update<MailingListModel>(checkDTO.id, new MailingListModel(email, code, active))\n            .then((dto:MailingListModel) => {\n                checkDTO = dto;\n                setSaving(false);\n            })\n            .catch( err => window.alert('unable to update entry'))\n    }\n\n    const disabled: boolean = code === checkDTO.code && active === checkDTO.active && email === checkDTO.email;\n\n    return (\n        <tr>\n            <td className='d-none d-md-table-cell'>\n                <input className={'form-control mailing_list__code'} value={code} type={'text'}\n                       onChange={(e: React.ChangeEvent<HTMLInputElement>) => setCode(e.target.value)} />\n            </td>\n            <td>\n                <input className={'form-control mailing_list__email'} value={email} type={'email'}\n                       onChange={(e: React.ChangeEvent<HTMLInputElement>) => setEmail(e.target.value)} />\n            </td>\n            <td>\n                <input className={'mailing_list__active'} type={'checkbox'} checked={active}\n                       onChange={() => setActive(!active)} />\n            </td>\n            <td>\n                <LoadingIconButton\n                    label='save'\n                    onClick={save}\n                    busy={saving}\n                    btnClass='btn btn-outline-success'\n                    outerClass='mailing_list__save_btn'\n                    disabled={disabled}\n                    />\n            </td>\n        </tr>\n    )\n}","import React, {ChangeEvent} from 'react';\nimport MailingListModel from '../../models/MailingListModel';\nimport mailingListService from '../../services/MailingListService';\nimport {MailingListEntry} from \"./MailingListEntry\";\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport InputWidget from \"../widgets/inputWidget/InputWidget\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\n\ninterface State {\n    mailingList: MailingListModel[],\n    loading: boolean,\n    newCode: string,\n    newEmail: string,\n    currentPage: number,\n    paginationCount: number\n}\n \nexport default class MailingList extends React.Component<any, State> {\n\n    constructor(props: any) {\n        super(props);\n\n        this.state = {\n            mailingList: [],\n            loading: true,\n            newCode: '',\n            newEmail: '',\n            currentPage: 0,\n            paginationCount: 0\n        }\n    }\n\n    private addNewEntry = (): void => {\n        mailingListService.add<MailingListModel>(new MailingListModel(this.state.newEmail, this.state.newCode, true))\n            .then((entry: MailingListModel) => this.setState({\n                ...this.state,\n                mailingList: [...this.state.mailingList, entry],\n                newCode: '',\n                newEmail: ''\n            }))\n            .catch( err => window.alert('unable to add email \\n\\n this email address may already exist'))\n    }\n\n    public componentDidMount = (): void => { \n        this.changePage(1);\n    }\n\n    private changePage = (pageNumber: number, searchPattern?: string): void => {\n        this.setState({loading: true, currentPage: pageNumber});\n\n        mailingListService.pagedSearchResults(pageNumber, searchPattern)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({\n                    mailingList: dto.results as MailingListModel[],\n                    loading: false,\n                    paginationCount: dto.count\n                })\n            })\n    }\n\n    public render() {\n        return(\n            <div className=\"row mailing_list\">\n                <div className={'col-12'}>\n                    <h3>mailing list</h3>\n                    <hr/>\n                </div>\n                <div className='col-12'>\n                    <InputWidget\n                        id='search_widget'\n                        type='text'\n                        onUpdate={(id: string, searchPattern: string) => this.changePage(this.state.currentPage, searchPattern)}\n                    />\n                    <PageSelector\n                        numItems={this.state.paginationCount}\n                        currentPage={this.state.currentPage}\n                        gotoPage={this.changePage}\n                        />\n                </div>\n                <div className={'col-12 mb-2'}>\n                    <h5>add email address</h5>\n                    <div className={'row'}>\n                        <div className={'col-12 col-md-3'}>\n                            <input type={'text'} placeholder={'zip'} value={this.state.newCode}\n                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                       this.setState({...this.state, newCode: e.target.value.toString()})}\n                            />\n                        </div>\n                        <div className={'col-12 col-md-3'}>\n                            <input type={'email'} placeholder={'email'} value={this.state.newEmail}\n                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                       this.setState({...this.state, newEmail: e.target.value.toString()})}\n                            />\n                        </div>\n                        <div className={'col-12 col-md-3'}>\n                            <button className={'btn btn-outline-success'} onClick={this.addNewEntry}>add</button>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-12\">\n                    {this.state.loading &&\n                        <LoadingOverlay />\n                    }\n                    {!this.state.loading &&\n                        <table className={'table'}>\n                            <thead>\n                                <tr>\n                                    <th className={'mailing_list__zip_header d-none d-md-table-cell'}>zip</th>\n                                    <th>email</th>\n                                    <th>active</th>\n                                    <th></th>\n                                </tr>\n                            </thead>\n                            {\n                                this.state.mailingList.length === 0 ?\n                                    <div>no results found</div>\n                                    :\n                                    <tbody>\n                                        {\n                                            this.state.mailingList.sort(\n                                                (a,b) =>\n                                                    (a.code > b.code) ? 1 : ((b.code > a.code) ? -1 : 0)).map((dto: MailingListModel) =>\n                                                    <MailingListEntry dto={dto} key={dto.email}/>\n                                            )\n                                        }\n                                    </tbody>\n                            }\n                        </table>\n                    }\n                </div>\n            </div>\n        )\n    }\n}","import Service from './Service';\nimport Order from \"../models/OrderModel\";\nimport MailTemplate from \"../models/MailTemplate\";\n\nclass MailTemplateService extends Service {\n    appName = 'dashboard';\n    view = 'mail_template';\n\n    public get_template_by_slug = (slug: string): Promise<MailTemplate> => {\n        return this._get<MailTemplate>(`${this.appName}/${this.view}/get_template_by_slug/?slug=${slug}`)\n    }\n}\n\nexport default new MailTemplateService();","import ModelBase from './ModelBase';\n\nexport default class MailTemplate extends ModelBase {\n    public slug!: string;\n    public text!: string;\n    public options!: {}\n\n    constructor(slug?: string, text?: string, options?: {}) {\n        super();\n        this.slug = slug || '';\n        this.text = text || '';\n        this.options = options || {}\n    }\n}\n","import React from 'react';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport mailTemplateService from '../../services/MailTemplateService';\nimport MailTemplate from \"../../models/MailTemplate\";\n\nimport './mail.scss';\n\ninterface Props {\n    templateSlug: string\n}\n\ninterface State {\n    loading: boolean,\n    updating: boolean,\n    template: MailTemplate,\n    text: string,\n    originalText: string\n}\n\nexport default class MailTemplateComponent extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n            updating: false,\n            template: new MailTemplate(),\n            text: '',\n            originalText: ''\n        }\n    }\n\n    public componentDidMount() {\n        mailTemplateService.get_template_by_slug(this.props.templateSlug)\n            .then((template: MailTemplate) => {\n                this.setState({text: template.text, originalText: template.text, template, loading: false})\n            })\n            .catch(() => {})\n            .then(() => this.setState({loading: false}))\n    }\n\n    public saveUpdates = (): void => {\n        this.setState({updating: true});\n\n        const template: MailTemplate = this.state.template;\n        template.text = this.state.text;\n\n        if (template.id < 0) {\n            template.slug = this.props.templateSlug;\n            template.options = '';\n            mailTemplateService.add<MailTemplate>(template)\n                .then(() => this.setState({originalText: this.state.text}))\n                .catch( err => window.alert('unable to save'))\n                .then(() => this.setState({updating: false}))\n        } else {\n            mailTemplateService.update<MailTemplate>(template.id, template)\n                .then(() => this.setState({originalText: this.state.text}))\n                .catch( err => window.alert('unable to update'))\n                .then(() => this.setState({updating: false}))\n        }\n    }\n\n    public render() {\n        if(this.state.loading)\n            return <LoadingOverlay />\n\n        return(\n            <div className={'col-12 col-md-6'}>\n                <div className={'row mail_template'}>\n                    <div className={'col-12'}>\n                        {this.props.templateSlug.replace(/-/g, ' ')}\n                    </div>\n                    <div\n                        className={'col-12 '}>\n                        <textarea\n                            className={'mail_template__body'}\n                            value={this.state.text}\n                            onChange={(e: any) => this.setState({text:e.target.value})}\n                            disabled={this.state.updating}\n                        ></textarea>\n                        ({this.state.text.length} characters)\n                    </div>\n                    <div className={'col-12'}>\n                        <button className={`btn btn-${this.state.updating || this.state.text === this.state.originalText ? \n                            'default' : 'success'}`}\n                                onClick={() => this.saveUpdates()}\n                                disabled={this.state.updating || this.state.text === this.state.originalText}\n                                >Update</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport MailTemplateComponent from \"./MailTemplateComponent\";\n\nexport const MailTemplates = (): React.ReactElement => {\n    const templateSlugs: string[] = [\n        'upcoming_delivery',\n        'upcoming_delivery_day',\n        'newsletter'\n    ]\n\n    return(\n        <div className={'row mail_template'}>\n            <div className={'col-12 mt-2'}>\n                <h3>mass mail templates</h3>\n                <hr/>\n            </div>\n            {\n                templateSlugs.map((slug: string) => <MailTemplateComponent templateSlug={slug} key={slug} />)\n            }\n        </div>\n    )\n}","import Service from './Service';\nimport {DeliveryWindowWithCountsDTO} from \"../models/DeliveryWindowModel\";\nimport Order from \"../models/OrderModel\";\nimport moment from 'moment';\nimport DeliveryRouteDTO from \"../dto/DeliveryRouteDTO\";\nimport Route from \"../models/RouteModel\";\n\nclass DeliveryWindowService extends Service {\n    appName = 'dashboard';\n    view = 'delivery_window';\n\n    public listWithCounts = (targetDate: string): Promise<DeliveryWindowWithCountsDTO[]> => {\n        return this._get(`${this.appName}/${this.view}/list_with_counts/?target_date=${targetDate}`);\n    }\n\n    public retrieveOrders = (deliveryWindowId: number, targetDate: Date): Promise<Order[]> => {\n        return this._get(`${this.appName}/${this.view}/${deliveryWindowId}/retrieve_orders/?target_date=${\n            moment(targetDate).utc().format('YYYY-MM-DD')}`)\n    }\n\n    public retrieveRoute = (deliveryWindowId: number, targetDate: Date): Promise<Route> => {\n        return this._get(`${this.appName}/${this.view}/${deliveryWindowId}/retrieve_route/?target_date=${\n            moment(targetDate).utc().format('YYYY-MM-DD')}`)\n    }\n\n    public addZone = (deliveryWindowId: number, zoneId: number): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/add_zone/${deliveryWindowId}/${zoneId}/`);\n    }\n\n    public removeZone = (deliveryWindowId: number, zoneId: number): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/remove_zone/${deliveryWindowId}/${zoneId}/`);\n    }\n}\n\nexport default new DeliveryWindowService()","import ModelBase from \"./ModelBase\";\nimport Zone from \"./ZoneModel\";\n\nexport class DeliveryWindowDTO {\n    public date!: string;\n    public window!: DeliveryWindow};\n\nexport default class DeliveryWindow extends ModelBase {\n\n    public name!: string;\n    public active!: boolean;\n    public start_time!: string;\n    public end_time!: string;\n    public day!:number; // 0 = Monday\n    public start_date: string | null;\n    public end_date!: string | null;\n    public zones!: Zone[];\n\n    constructor(id?: number, name?: string, start_time?: string, end_time?: string, day?: number, active?: boolean,\n                start_date?: string | null, end_date?: string | null) {\n        super();\n        this.name = name || '';\n        this.start_time = start_time || \"1\";\n        this.end_time = end_time || \"\";\n        this.day = day || 0;\n        this.id = id || -1;\n        this.active = active === undefined ? false : active;\n        this.start_date = start_date || null;\n        this.end_date = end_date || null;\n    }\n}\n\nexport class DeliveryWindowWithCountsDTO {\n    public dish_count!: number;\n    public order_count!: number;\n    public window!: DeliveryWindow;\n}","import React, { Fragment } from 'react';\n\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport deliveryDayService from '../../services/DeliveryDayService';\nimport DeliveryDay from \"../../models/DeliveryDayModel\";\nimport DeliveryWindow from \"../../models/DeliveryWindowModel\";\nimport adminService from '../../services/APIActionService';\n\ninterface Props {\n    match: any\n}\n\ninterface State {\n    who: string,\n    deliveryDays: DeliveryDay[],\n    deliveryWindows: DeliveryWindow[],\n    message: string,\n    deliveryWindowId: number,\n    deliveryDate: string,\n    deliveryDay: DeliveryDay,\n    includeSamples: boolean\n}\n\nexport default class MailMassMailer extends React.Component<Props, State> {\n    state = {\n        who: 'all_customers',\n        deliveryDays: [],\n        deliveryWindows: [],\n        message: '',\n        deliveryWindowId: 0,\n        deliveryDate: '',\n        deliveryDay: new DeliveryDay(),\n        includeSamples: false\n    }\n\n    public componentDidMount = (): void => {\n        Promise.all([\n            deliveryDayService.get<DeliveryDay[]>(),\n            deliveryWindowService.get<DeliveryWindow>()\n        ])\n            .then((values) => {\n                // defaults for state\n                let who: string = 'all_customers';\n                let deliveryDate: string = '';\n                const deliveryWindows: DeliveryWindow[] = values[1] as any;\n                const deliveryWindow: DeliveryWindow = deliveryWindows.length > 0 ?\n                    deliveryWindows[0] : new DeliveryWindow();\n                const deliveryDay: DeliveryDay = values[0].length > 0 ?\n                    values[0][0] : new DeliveryDay()\n\n                //check if a type of email and option were sent\n                const { match: { params }} = this.props;\n                const option: any = 'option' in params ? params['option'] : '';\n\n                if ('mail_type' in params) {\n                    switch(params['mail_type']) {\n                        case('upcoming_delivery'):\n                            who = 'upcoming_delivery';\n                            deliveryDate = option;\n                            break;\n                    }\n                }\n\n                this.setState({\n                    who,\n                    deliveryDate,\n                    deliveryDays: values[0],\n                    deliveryDay: deliveryDay,\n                    deliveryWindows: deliveryWindows,\n                    deliveryWindowId: deliveryWindow.id\n                })\n            })\n    }\n\n    private goodToSend = (): boolean => {\n        const who: string = this.state.who;\n\n        if (this.state.message === \"\") return false\n\n        return  (\n            who == 'all_customers' || who == 'delivery_window' || who == 'upcoming_delivery_days' ||\n            (who == 'upcoming_delivery' && this.state.deliveryDate !== '')\n        )\n    }\n\n    private sendMail = (): void => {\n        let confirmMessage: string = 'Send to all customers';\n        let options: any = {}\n\n        if (this.state.includeSamples) options['include_menu_sample'] = true\n\n        switch (this.state.who){\n            case 'delivery_window':\n                confirmMessage = `Send to customers in the selected delivery window.`;\n                options['delivery_window'] = this.state.deliveryWindowId;\n                break;\n\n            case 'upcoming_delivery':\n                confirmMessage = `Send to customers receiving a delivery on: ${this.state.deliveryDate}`;\n                options['delivery_date'] = this.state.deliveryDate;\n                //TODO: Need to implement this\n                break;\n\n            case 'upcoming_delivery_days':\n                confirmMessage = `Send to customers in the delivery days ${this.state.deliveryDay.date} to ${this.state.deliveryDay.end_date}`\n                break;\n\n            default:\n                options['all_customers'] = true;\n        }\n\n        if (!window.confirm(`You about to initiate the following: \\n\\n${confirmMessage}\\n\\nContinue?`)) return\n        /*\n        adminService.sendMassMail(this.state.message, options)\n            .then((resp: any) => {\n                if(resp.count === 0 ){\n                    window.alert(`${confirmMessage} did not produce any emails.`);\n                    return;\n                } else {\n                    if(!window.confirm(`${confirmMessage}\\n\\nwill produce approx. ${resp.count} emails.\\n\\nSend?`))\n                        return\n\n                    adminService.sendMassMail(this.state.message, options, true)\n                        .then((resp: any) => window.alert(`${resp.count} emails were sent`))\n                }\n            })\n\n         */\n    }\n\n    public render() {\n        return(\n            <div className={'row mass_mailer justify-content-center'}>\n                <div className={'col-12 col-md-6'}>\n                    <div className={'row'}>\n                        <div className={'col-12'}>\n                            <h3>mass mailer</h3>\n                            <hr/>\n                        </div>\n                        <div className={'col-12'}>\n                            <label>message:</label>\n                            <textarea\n                                className={'mass_mailer__message form-control'}\n                                value={this.state.message}\n                                onChange={(e) => this.setState({message: e.target.value})}\n                            ></textarea>\n                            ({this.state.message.length} characters)\n                        </div>\n                        <div className={'col-12 mt-3 mass_mailer_send_to'}>\n                            send to:<br/>\n                            <div className={'mass_mailer_send_to__option'}>\n                                <input type={'radio'}\n                                       name={'to'}\n                                       id={'all_customers'}\n                                       checked={this.state.who === 'all_customers'}\n                                       onChange={() => this.setState({who: 'all_customers'})}/> all customers<br/>\n                                       <span>anyone who has completed an order</span>\n                            </div>\n                            <div className={'mass_mailer_send_to__option'}>\n                                <input type={'radio'} name={'to'}\n                                       id={'delivery_window'}\n                                       disabled={this.state.deliveryWindows.length === 0}\n                                       checked={this.state.who === 'delivery_window'}\n                                       onChange={() => this.setState({who: 'delivery_window'})}/> delivery window<br/>\n                                       <span>customers in the window selected below</span>\n                            </div>\n                            <div className={'mass_mailer_send_to__option'}>\n                                <input type={'radio'} name={'to'}\n                                   id={'upcoming_delivery'}\n                                   checked={this.state.who === 'upcoming_delivery'}\n                                   onChange={() => this.setState({who: 'upcoming_delivery'})} /> upcoming delivery<br/>\n                                   <span>customers receiving a delivery on the date selected below</span>\n                            </div>\n                            <div className={'mass_mailer_send_to__option'}>\n                                <input type={'radio'} name={'to'}\n                                   id={'upcoming_delivery_days'}\n                                   disabled={this.state.deliveryDays.length === 0}\n                                   checked={this.state.who === 'upcoming_delivery_days'}\n                                   onChange={() => this.setState({who: 'upcoming_delivery_days'})} /> upcoming delivery days<br/>\n                                   <span>customers receiving an order during the deliver days selected below</span>\n                            </div>\n\n                        </div>\n                        <div className={'col-12 mt-3 mass_mailer__options'}>\n                            {this.state.who === 'upcoming_delivery' &&\n                                <Fragment>\n                                    select a delivery day:\n                                    <input\n                                        type={'date'}\n                                        value={this.state.deliveryDate}\n                                        onChange={(e) =>\n                                            this.setState({deliveryDate: e.target.value})}\n                                        className={'form-control options__upcoming_delivery'} />\n                                </Fragment>\n                            }\n                            {this.state.who === 'upcoming_delivery_days' &&\n                                <Fragment>\n                                    select delivery days:\n                                    <select className={'form-control options__upcoming_delivery_days'}>\n                                        {\n                                            this.state.deliveryDays.map((deliveryDay: DeliveryDay) =>\n                                                <option key={`dd_${deliveryDay.id}`}>\n                                                    {`${deliveryDay.date} to ${deliveryDay.end_date}`}\n                                                </option>\n                                            )\n                                        }\n                                    </select>\n                                </Fragment>\n                            }\n                            {this.state.who === 'delivery_window' &&\n                                <Fragment>\n                                    select delivery window:\n                                    <select\n                                        className={'form-control options__delivery_windows'}\n                                        onChange={(e) =>\n                                            this.setState({deliveryWindowId: parseInt(e.target.value)})}>\n                                        {\n                                            this.state.deliveryWindows.map((window: DeliveryWindow) =>\n                                                <option key={`wi_${window.id}`} value={window.id}>\n                                                    {window.name}\n                                                </option>\n                                            )\n                                        }\n                                    </select>\n                                </Fragment>\n                            }\n                        </div>\n                        <div className={'col-12 mt-3 mass_mailer__includes'}>\n                            {this.state.who !== 'upcoming_delivery_days'&&\n                                <Fragment>\n                                    <input\n                                        type={'checkbox'}\n                                        className={'includes__include_samples'}\n                                        checked={this.state.includeSamples}\n                                        onChange={(e) => this.setState(({includeSamples: !this.state.includeSamples}))}\n                                    /> &nbsp;&nbsp;Include Upcoming Menu Samples\n                                </Fragment>\n                            }\n                        </div>\n                        <div className={'col-12 mt-3 mass_mailer__buttons text-center'}>\n                            <button\n                                className={'btn btn-outline-success buttons__send'}\n                                disabled={!this.goodToSend()}\n                                onClick={this.sendMail}\n                                >Send Mass Mail</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport MailingList from \"./MailingList\";\nimport {MailTemplates} from \"./MailTemplates\";\nimport MailMassMailer from \"./MailMassMailer\";\n\nexport const Mail = (): React.ReactElement => {\n\n    return(\n        <div className='row mail'>\n            <div className=\"col-12\">\n                <Switch>\n                    <Route path=\"/dashboard/mail/list/\" component={MailingList} />\n                    <Route path={'/dashboard/mail/template'} component={MailTemplates} />\n                    <Route path={'/dashboard/mail/mass_mailer/:mail_type/:option'} component={MailMassMailer} />\n                    <Route path={'/dashboard/mail/mass_mailer'} component={MailMassMailer} />\n                    <Route path=\"/dashboard/mail/\" component={MailTemplates} />\n                </Switch>\n            </div>\n        </div>\n    )\n}","import Service from './Service';\nimport Newsletter from \"../models/Newsletter\";\n\nclass NewsletterService extends Service {\n    appName = 'dashboard';\n    view = 'newsletter';\n\n    public release = (newsletterId: number, send_email: boolean = false): Promise<any> => {\n        return this._get<any>(`${this.appName}/${this.view}/${newsletterId}/release/?send_email=${send_email}`);\n    }\n\n    sendEmailSample = (newsletterId: number, email: string, send_email?: boolean): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${newsletterId}/send_email_sample/?email=${email}`);\n    }\n}\n\nexport default new NewsletterService();","import React from 'react';\nimport Newsletter from \"../../models/Newsletter\";\nimport helpers from '../../helpers/helpers';\nimport momentHelper from '../../helpers/MomentHelper';\nimport { useHistory } from 'react-router-dom';\n\nimport './newsletter.scss';\n\ninterface Props {\n    newsletter: Newsletter\n}\n\nexport const NewslettersNewsletter = (props: Props): React.ReactElement => {\n    const history = useHistory();\n\n    return (\n        <tr className={'newsletters_newsletter'}>\n            <td>{props.newsletter.title}</td>\n            <td>\n                {\n                    props.newsletter.release_date !== null && props.newsletter.release_date !== undefined ?\n                        momentHelper.asFullDate(props.newsletter.release_date)\n                        :\n                        <span>click 'Edit' to release</span>\n                }\n            </td>\n            <td>\n                <button\n                    className={'btn btn-sm btn-outline-success'}\n                    onClick={() => history.push({pathname: `/dashboard/newsletter/edit/${props.newsletter.id}`})}\n                    >Edit</button>\n            </td>\n        </tr>\n    )\n}","import ModelBase from \"./ModelBase\";\n\nexport default class Newsletter extends ModelBase {\n    public title!: string;\n    public content!: string;\n    public release_date!: any;\n\n    constructor(id?: number, title?: string, content?: string, release_date?: any) {\n        super();\n        this.id = id || -1;\n        this.title = title || '';\n        this.content = content || '';\n        this.release_date = release_date || null;\n    }\n}\n\n","import React from 'react';\nimport newsletterService from '../../services/NewsletterService';\nimport {withRouter} from 'react-router';\n\nimport './newsletter.scss';\nimport Newsletter from \"../../models/Newsletter\";\n\ninterface State {\n    title: string,\n    creating: boolean\n}\n\nclass NewsletterAdd extends React.Component<any, State> {\n\n    state = {\n        title: '',\n        creating: false\n    }\n\n    public render() {\n\n        const createNewsletter = (): void => {\n            this.setState({creating: true});\n            newsletterService.add<Newsletter>(new Newsletter(-1, this.state.title, ''))\n                .then((newsLetter: Newsletter) =>\n                    this.props.history.push({pathname: `/dashboard/newsletter/edit/${newsLetter.id}`}))\n                .catch( err => {console.log(err);\n                    window.alert('unable to create newsletter')\n                })\n        }\n\n        return(\n            <div className={'row newsletter_add'}>\n                <div className={'col-12'}>\n                    <h5>create newsletter</h5>\n                    <input\n                        placeholder={'title'}\n                        value={this.state.title}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                            this.setState(({title: e.target.value}))}\n                        />\n                    <button\n                        className={'btn btn-outline-success ml-2'}\n                        disabled={this.state.title === '' || this.state.creating}\n                        onClick={createNewsletter}\n                        >create</button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(NewsletterAdd);","import React, {useEffect, useState} from 'react';\nimport Newsletter from '../../models/Newsletter';\nimport newsletterService from '../../services/NewsletterService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {NewslettersNewsletter} from \"./NewslettersNewsletter\";\nimport NewsletterAdd from \"./NewsletterAdd\";\n\nexport const Newsletters = (): React.ReactElement => {\n    const[newsLetters, setNewsLetters] = useState<Newsletter[]>([]);\n    const[loading, setLoading] = useState<boolean>(true);\n\n    useEffect(() => {\n        newsletterService.get<Newsletter[]>()\n            .then((newsletters: Newsletter[]) => {\n                setNewsLetters(newsletters);\n                setLoading(false);\n            })\n            .catch( err => window.alert('unable to load newsletters'))\n    }, [])\n\n    if (loading)\n        return <LoadingOverlay />\n\n    // @ts-ignore\n    // @ts-ignore\n    return(\n        <div className={'row newsletters'}>\n            <div className={'col-12'}>\n                <h3>newsletters</h3>\n                <hr/>\n            </div>\n            <div className={'col-12 mb-2'}>\n                <NewsletterAdd />\n            </div>\n            <div className={'col-12'}>\n                {\n                    newsLetters.length > 0 ?\n                        <table className={'table'}>\n                            <thead>\n                                <tr>\n                                    <th>title</th>\n                                    <th>release</th>\n                                    <th></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {\n                                    newsLetters.map((newsletter: Newsletter) =>\n                                        <NewslettersNewsletter newsletter={newsletter} key={`nl_${newsletter.id}`} />\n                                    )\n                                }\n                            </tbody>\n                        </table>\n                        :\n                        <p>\n                            Newsletters are a great way to keep your customers updated about new menu items and your success\n                        </p>\n                }\n            </div>\n        </div>\n\n    )\n}","import React from 'react';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\n\nimport newsletterService from '../../services/NewsletterService';\n\nimport Newsletter from \"../../models/Newsletter\";\nimport { Link } from 'react-router-dom';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\ninterface State {\n    loading: boolean,\n    saving: boolean,\n    releasing: boolean,\n    title: string,\n    content: string,\n    newsletter: Newsletter,\n    email: string,\n    sendingEmail: boolean\n}\n\nexport default class NewsletterEdit extends React.Component<any, State> {\n\n    constructor(props: any) {\n        super(props);\n\n        this.state = {\n            loading: true,\n            saving: false,\n            releasing: false,\n            title: '',\n            content: '',\n            newsletter: new Newsletter(),\n            email: '',\n            sendingEmail: false\n        }\n    }\n\n    public componentDidMount() {\n        const { match: { params } } = this.props;\n\n        newsletterService.get<Newsletter>(params.id)\n            .then((newsLetter: Newsletter) =>\n                this.setState({\n                    newsletter: newsLetter,\n                    title: newsLetter.title,\n                    content: newsLetter.content,\n                    loading: false\n                })\n            )\n            .catch( err => window.alert('unable to load newsletter'))\n    }\n\n    private release = (): void => { //TODO: add testing\n        this.setState({releasing: true});\n        newsletterService.release(this.state.newsletter.id)\n            .then((resp: any) => {\n                if(resp.count === 0) {\n                    window.alert('no emails found');\n                    return;\n                } else {\n                    if(!window.confirm(`You are about to send ${resp.count} emails.\\n\\nContinue?`)) {\n                        this.setState({releasing: false});\n                        return;\n                    }\n                    newsletterService.release(this.state.newsletter.id, true)\n                        .then((resp: any) => {\n                            window.alert(`${resp.count} emails sent`);\n                            const newsletter: Newsletter = this.state.newsletter;\n                            newsletter.release_date = 'a';\n                            this.setState({newsletter});\n                        })\n                        .catch( err => window.alert('unable to release newsletter'))\n                        .then(() => this.setState({releasing: false}))\n                }\n            })\n            .catch( err => window.alert('unable to release newsletter'))\n    }\n\n    private saveNewsletter = (): void => {\n        this.setState({saving: true});\n\n        const newsletter: Newsletter = this.state.newsletter;\n        newsletter.title = this.state.title;\n        newsletter.content = this.state.content;\n        newsletterService.update<Newsletter>(newsletter.id, newsletter)\n            .then((nl: Newsletter) => {\n                this.setState({\n                    newsletter: nl,\n                    title: nl.title,\n                    content: nl.content,\n                    saving: false\n                })\n            })\n            .catch( err => window.alert('unable to update newsletter'))\n    }\n\n    private sendTestEmail = (): void => {\n        if (this.state.email === '') {\n            window.alert('Enter an email address');\n            return;\n        }\n        this.setState({sendingEmail: true});\n        newsletterService.sendEmailSample(this.state.newsletter.id, this.state.email)\n            .then((resp: any) => window.alert('sample mail sent'))\n            .catch( err => window.alert('unable to send sample'))\n            .finally(() => this.setState({sendingEmail: false}))\n    }\n\n    public render() {\n        if (this.state.loading)\n            return <LoadingOverlay />\n\n        const saveDisabled: boolean = (this.state.title === this.state.newsletter.title &&\n                                            this.state.content === this.state.newsletter.content) ||\n                                                this.state.saving || this.state.releasing\n\n        const titlePresent: boolean = this.state.content.indexOf('newsletter__email_title') !== -1\n        const contentPresent: boolean = this.state.content.indexOf('newsletter__email_content') !== -1\n\n        return (\n            <div className={'row newsletter_edit justify-content-center'}>\n                <div className={'col-12 col-md-5'}>\n                    <div className={'row'}>\n                        <div className={'col-12'}>\n                            <h3>edit newsletter</h3>\n                            <hr/>\n                        </div>\n                        <div className={'col-12 basic_form__label'}>\n                            title: <br/>\n                            <input\n                                value={this.state.title}\n                                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                                            this.setState({title: e.target.value})}\n                                className={'form-control newsletter_edit__title_input'}\n                                disabled={this.state.saving}\n                                />\n                        </div>\n                        <div className={'col-12 newsletter_edit__content basic_form__label mt-2'}>\n                            content:\n                            <textarea\n                                className={'form-control newsletter_edit__content_input'}\n                                value={this.state.content}\n                                rows={10}\n                                onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\n                                    this.setState({content: e.target.value})}\n                                disabled={this.state.saving}\n                                />\n                            ({this.state.content.length} characters)\n                            <LoadingIconButton\n                                label='save'\n                                onClick={this.saveNewsletter}\n                                busy={this.state.saving}\n                                btnClass='btn btn-sm btn-outline-success'\n                                outerClass='newsletter_edit__control_btn newsletter_edit__save_btn mt-2'\n                                disabled={saveDisabled}\n                                />\n                            {(this.state.newsletter.release_date === null && !(!saveDisabled || !titlePresent || !contentPresent)) &&\n                                <LoadingIconButton\n                                    label='release'\n                                    onClick={this.release}\n                                    busy={this.state.releasing}\n                                    btnClass='btn btn-sm btn-outline-warning'\n                                    outerClass='newsletter_edit__control_btn mt-2 mr-2'\n                                    />\n                            }\n                        </div>\n                        <div className={'col-12'}>\n                            { !titlePresent &&\n                                <div className={'newsletter_edit__error'}>\n                                    missing 'newsletter__email_title' class\n                                </div>\n                            }\n                            { !contentPresent &&\n                                <div className={'newsletter_edit__error'}>\n                                    missing 'newsletter__email_content' class\n                                </div>\n                            }\n                            { !saveDisabled &&\n                                <div className={'newsletter_edit__error'}>\n                                    save updates\n                                </div>\n                            }\n                        </div>\n                        <div className={'col-12 newsletter_edit_controls mt-3'}>\n                            <div className={'row'}>\n                                <div className={'col-12'}>\n                                    <h5>test email</h5>\n                                    <input\n                                        className={'form-control newsletter_edit_controls__email_input'}\n                                        placeholder={'enter email address'}\n                                        type={'email'}\n                                        value={this.state.email}\n                                        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                                            this.setState({email: e.target.value})}\n                                        disabled={!saveDisabled || this.state.sendingEmail}\n                                           />\n                                    <LoadingIconButton\n                                        label='send email test'\n                                        onClick={this.sendTestEmail}\n                                        busy={this.state.sendingEmail}\n                                        disabled={!saveDisabled || this.state.sendingEmail}\n                                        btnClass='btn btn-sm btn-outline-success'\n                                        outerClass='mt-2 newsletter_edit_controls__email_btn'\n                                        />\n\n                                    <Link\n                                        className={'btn btn-sm btn-outline-info newsletter_edit__control_btn mt-2 mr-2'}\n                                        to={'/dashboard/newsletter'}\n                                        >return to newsletters</Link>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","\nexport const months: string[] = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\nexport const days: string[] = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nexport const pythonDays: string[] = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];","import React, {useEffect, useState, Fragment} from 'react';\nimport DeliveryWindow, {DeliveryWindowWithCountsDTO} from \"../../models/DeliveryWindowModel\";\nimport deliveryWindowService from '../../services/DeliveryWindowService';\n\nimport './browser.scss';\nimport { useHistory } from 'react-router-dom';\nimport momentHelper from '../../helpers/MomentHelper';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\n\ninterface Props {\n    date: Date\n}\n\nexport const BrowserDay = (props: Props): React.ReactElement => {\n    const [countsData, setCountsData] = useState<DeliveryWindowWithCountsDTO[] | string>([]);\n    const [loading, setLoading] = useState(true);\n    const history = useHistory();\n\n    useEffect(() => {\n        deliveryWindowService.listWithCounts(momentHelper.asDateSlug(props.date))\n            .then((countsData: DeliveryWindowWithCountsDTO[]) => {\n                setCountsData(countsData);\n            })\n            .catch( err => window.alert(`unable to load date: ${props.date.toISOString().slice(0,10)}`))\n            .then(() => setLoading(false))\n\n    }, []);\n\n    if (loading)\n        return <LoadingOverlay />\n\n    const today: string = momentHelper.asDateSlug(new Date());\n    let hasWindows: boolean = false\n    let deliveryCount: number = 0;\n    let dishCount: number = 0;\n\n    // check if the day has any delivery windows\n    if (typeof countsData === 'object'){\n        hasWindows = true;\n        countsData?.forEach((dto: DeliveryWindowWithCountsDTO) => {\n            deliveryCount += dto.order_count;\n            dishCount += dto.dish_count\n        })\n    }\n\n    return(\n        <div\n            className={'browser_day'}\n        >\n            <div className={'nopadding'}>\n                <div className={`browser_day__date ${momentHelper.asDateSlug(props.date) === today ? 'browser_day__date--today' : ''}`}\n                     onClick={() => history.push({pathname: `/dashboard/browser/day/${momentHelper.asDateSlug(props.date)}`})}\n                >\n                    {props.date.getDate()}\n                </div>\n                <div className='browser_day__data'>\n                    {(hasWindows && deliveryCount === 0) &&\n                            <div className='browser_day__no_orders'>\n                                <span className='d-none d-md-inline'>\n                                    no orders\n                                </span>\n                                <br/>\n                                &nbsp;\n                            </div>\n                    }\n                    {(hasWindows && deliveryCount > 0) &&\n                        <Fragment>\n                            <div className='browser_day__delivery_count'><span className='d-none d-md-inline'>deliveries: </span>{deliveryCount}</div>\n                            <div className='browser_day__dish_count'><span className='d-none d-md-inline'>dishes: </span>{dishCount}</div>\n                        </Fragment>\n                    }\n                    {!hasWindows &&\n                        <div>&nbsp;<br/>&nbsp;</div>\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}","import React from 'react';\n\nimport {months} from '../../constants';\nimport './browser.scss';\nimport {BrowserDay} from \"./BrowserDay\";\nimport { RouteComponentProps } from 'react-router-dom';\nimport {NavItem, SubNavigation} from \"../nav/SubNavigation\";\n\ninterface Props extends RouteComponentProps {\n    match: any\n}\n\ninterface State {\n    month: number,\n    year: number,\n    viewDay: number\n}\n\nexport default class BrowserTool extends React.Component<Props, State>{\n\n    today: Date = new Date();\n\n    state = {\n        month: this.today.getMonth(),\n        year: this.today.getFullYear(),\n        viewDay: 0\n    }\n\n    public componentDidMount() {\n        let month: number = new Date().getMonth();\n        let year: number = new Date().getFullYear();\n\n        const { match: { params } } = this.props;\n\n        // sets URL to include the month and year of they are not in the path\n        if ('month' in params || 'year' in params) {\n            if ('month' in params)\n                month = parseInt(params['month']);\n            if ('year' in params)\n                year = parseInt(params['year']);\n        } else {\n            this.props.history.push({pathname: `/dashboard/browser/${month}/${year}`});\n        }\n\n        this.setState({month, year});\n    }\n\n    private changeMonth = (add: number): void => {\n        let month: number = this.state.month;\n        let year: number = this.state.year;\n\n        month += add;\n\n        if (month > 11){\n            month = 0;\n            year ++;\n        } else if (month < 0) {\n            month = 11;\n            year --;\n        }\n        this.props.history.push({pathname: `/dashboard/browser/${month}/${year}`});\n        this.setState({month, year});\n    }\n\n    public render(){\n\n        const startDate: Date = new Date(this.state.year, this.state.month, 1);\n        const daysInMonth: number = new Date(this.state.year, this.state.month + 1, 0).getDate();\n        let dateNdx: number = -startDate.getDay() + 1;\n\n        let weeks: any = []\n        let week: any;\n        while (dateNdx <= daysInMonth) {\n            week = [];\n            for (let x: number = 0; x < 7; x ++) {\n                if (dateNdx >= 1 && dateNdx <= daysInMonth) {\n                    week.push(<BrowserDay date={new Date(this.state.year, this.state.month, dateNdx)} />)\n                } else {\n                    week.push(<div></div>) // TODO: Update this to show last and next month days faded\n                }\n                dateNdx ++;\n            }\n            weeks.push(week);\n        }\n\n        return(\n            <div className={'row browser_tool'}>\n                <div className={`col-12 browser_tool__calendar`}>\n                    <div className='row justify-content-center'>\n                        <div className={'col-12 col-md-8 browser_tool_calendar__month_nav'}>\n                            <div\n                                className={'month_nav__arrow month_nav__item'}\n                                id={'month_nav__last_month'}\n                                onClick={() => this.changeMonth(-1)}\n                            >&lt;&lt;</div>\n                            <div className={'month_nav__date month_nav__item'}>{months[this.state.month]}  {this.state.year}</div>\n                            <div\n                                className={'month_nav__arrow month_nav__item'}\n                                id={'month_nav__next_month'}\n                                onClick={() => this.changeMonth(1)}\n                            >&gt;&gt;</div>\n                        </div>\n                        <div className={'col-12'}>\n                            <table className={''}>\n                                <thead>\n                                    <tr>\n                                        <th>Sun</th>\n                                        <th>Mon</th>\n                                        <th>Tue</th>\n                                        <th>Wed</th>\n                                        <th>Thu</th>\n                                        <th>Fri</th>\n                                        <th>Sat</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                {\n                                    weeks.map((week: any, index: number) =>\n                                        <tr key={`week_${index.toString()}`}>\n                                            {\n                                                week.map((day: any) =>\n                                                    <td key={Math.random()}>{day}</td>\n                                                )\n                                            }\n                                        </tr>\n                                    )\n                                }\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, {ChangeEvent, useState} from 'react';\nimport './email_widget.scss';\nimport {LoadingIconButton} from \"../loading_icon_button/LoadingIconButton\";\nimport apiActionsService from \"../../../services/APIActionService\";\nimport MassMailResponseDTO from \"../../../dto/MassMailResponseDTO\";\n\n\ninterface EmailConfig {\n    email_type: string,\n    entity_id: number,\n    message?: string,\n    send_email?: boolean\n}\n\ninterface DeliveriesEmailConfig extends  EmailConfig{\n    target_date: string\n}\n\ninterface Props {\n    finished: () => void,\n    prompt: string,\n    config: DeliveriesEmailConfig\n}\n\nexport const EmailWidget = (props: Props): React.ReactElement => {\n    const [message, setMessage] = useState('');\n    const [sending, setSending] = useState(false);\n\n    const cancel = (): void => {\n        if (!window.confirm('do you want to cancel this email?')) return;\n        props.finished();\n    }\n\n    const confirmEmailSend = (): void => {\n        sendEmail()\n            .then((dto: MassMailResponseDTO) => {\n                if (window.confirm(`You are about to send ${dto.count} emails.`)) {\n                    sendEmail(true)\n                        .then(() => {\n                            props.finished();\n                        })\n                        .catch(() => window.alert('unable to send emails'))\n                        .then(() => setSending(false))\n                } else {\n                    setSending(false);\n                }\n            })\n            .catch(() => window.alert('unable to send message'))\n\n    }\n\n    const sendEmail = (send_email: boolean = false): Promise<any> => {\n        setSending(true);\n        return apiActionsService.sendMassMail({...props.config, ...{message, send_email}})\n\n    }\n\n    return(\n        <div className='row email_widget'>\n            <div className='col-12'>\n                {props.prompt}\n            </div>\n            <div className='col-12 mt-2'>\n                <textarea\n                    className='form-control'\n                    value={message}\n                    placeholder='enter message'\n                    disabled={sending}\n                    onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setMessage(e.target.value)}\n                ></textarea>\n            </div>\n            <div className='col-12 text-center'>\n                <LoadingIconButton\n                    label='send'\n                    onClick={confirmEmailSend}\n                    disabled={message === ''}\n                    busy={sending}\n                    btnClass='btn btn-sm btn-outline-success'\n                />\n                <button className='btn btn-sm btn-outline-info ml-2'\n                        onClick={cancel}\n                        disabled={sending}\n                        >cancel</button>\n            </div>\n        </div>\n    )\n}","import React, {Fragment} from 'react';\nimport {DeliveryWindowWithCountsDTO} from \"../../models/DeliveryWindowModel\";\nimport OrderItem from \"../../models/OrderItemModel\";\nimport helpers from \"../../helpers/helpers\";\nimport momentHelper from '../../helpers/MomentHelper';\nimport Order from \"../../models/OrderModel\";\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport './browser.scss';\nimport moment from \"moment\";\nimport {EmailWidget} from \"../widgets/email_widget/EmailWidget\";\nimport MomentHelper from \"../../helpers/MomentHelper\";\n\ninterface Props extends RouteComponentProps {\n    dto: DeliveryWindowWithCountsDTO,\n    date: Date,\n    printDocument: (component: React.ReactElement) => void\n}\n\ninterface State {\n    showLoading: boolean,\n    orders: Order[],\n    sendingEmail: boolean\n}\n\nclass BrowserWindowTools extends React.Component<Props, State>{\n\n    constructor(props: any) {\n        super(props);\n\n        this.state = {\n            showLoading: true,\n            orders: [],\n            sendingEmail: false\n        }\n    }\n\n    public componentDidMount() {\n        deliveryWindowService.retrieveOrders(this.props.dto.window.id, this.props.date)\n            .then((orders: Order[]) => this.setState({orders, showLoading: false}))\n            .catch( err => window.alert('unable to load data'))\n    }\n\n    private downloadDeliverySpreadsheet = (): void => {console.log('xx')\n        let fileContent: string = \"Address line 1\\tAddress line 2\\tCity\\tState\\tZip\\tName\\tEmail Address\\tPhone Number\\tExternal ID\\tOrder Count\\tDriver\\n\";\n        let orderItems: OrderItem[] = [];\n\n        this.state.orders.forEach((order: Order) => {\n            orderItems = order.items.filter((orderItem: OrderItem) => orderItem.cart_item.delivery_date === momentHelper.asDateSlug(this.props.date));\n            if (orderItems.length > 0) {\n                fileContent += `${order.street_address}\\t${order.unit}\\t${order.city}\\tCA\\t${order.zip}\\t${order.contact_name}\\t${order.email}\\t${order.phone_number}\\t${order.public_id}\\t${orderItems.length}\\tLee\\n`;\n            }\n        })\n\n        const bb = new Blob([fileContent ], { type: 'text/plain' });\n        const a = document.createElement('a');\n        a.download = `delivery_route_${momentHelper.asDateSlug(this.props.date)}.tsv`;\n        a.href = window.URL.createObjectURL(bb);\n        a.click();\n    }\n\n    private emailingComplete = (): void => {\n        this.setState({sendingEmail: false})\n\n    }\n\n    private print = (pullType: string): void => {\n        let orderItems: OrderItem[] = [];\n        for (let x: number = 0; x < this.state.orders.length; x ++)\n            for (let y: number = 0; y < this.state.orders[x].items.length; y ++)\n                if (this.state.orders[x].items[y].cart_item.delivery_date === moment(this.props.date).utc().format('YYYY-MM-DD'))\n                    orderItems.push(this.state.orders[x].items[y])\n\n        switch(pullType) {\n            case 'prep': this.props.printDocument(<PrepDisplay orderItems={orderItems} date={this.props.date} />); break;\n            case 'delivery_tags': this.props.printDocument(\n                <DeliveryTagsDisplay orders={this.state.orders} date={this.props.date} />\n                ); break;\n        }\n    }\n\n    public render() {\n        if (this.state.showLoading)\n            return( <LoadingOverlay /> );\n\n        return(\n            <div className={'row browser_window_tools mb-2'}>\n                <div className={'col-12 browser_window_tools__inner'}>\n                    <div className={'row'}>\n                        <div className={'col-12'}>{this.props.dto.window.name}</div>\n                        <div className={'col-6 mt-2'}>Deliveries: {this.props.dto.order_count}</div>\n                        <div className={'col-6 mt-2'}>Dishes: {this.props.dto.dish_count}</div>\n                        <div className={'col-12'}><hr/></div>\n                        <div className={'d-none d-md-block col-md-12 browser_window_tools__controls mt-2'}>\n                                <button className={'btn-block btn-outline-success'} onClick={() => this.print('prep')}\n                                disabled={this.state.orders.length === 0}>print prep list</button>\n                                <button className={'btn-block btn-outline-success'} onClick={() => this.print('delivery_tags')}\n                                disabled={this.state.orders.length === 0}>print delivery tags</button>\n                        </div>\n                        <div className={'col-12 mt-2'}>\n                            <button className={'btn-block btn-outline-success'}\n                                    onClick={() => this.props.history.push({\n                                        pathname:`/dashboard/delivery_planner/${this.props.dto.window.id}/${moment(this.props.date).utc().format('YYYY-MM-DD')}`})}\n                                    disabled={this.state.orders.length === 0}>\n                                route planner</button>\n\n                            <button\n                                className={'btn-block btn-info'}\n                                onClick={() => this.setState({sendingEmail: true})}\n                                disabled={this.state.orders.length === 0}>\n                                send mail</button>\n                        </div>\n                    </div>\n\n                    {this.state.sendingEmail &&\n                        <div className='browser_window_tools__emailer'>\n                            <EmailWidget\n                                finished={this.emailingComplete}\n                                prompt='send email to all deliveries'\n                                config={{\n                                    email_type: 'deliveries_email',\n                                    entity_id: this.props.dto.window.id,\n                                    target_date: MomentHelper.asDateSlug(this.props.date, true)\n                                }}\n                            />\n                        </div>\n                    }\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(BrowserWindowTools);\n\ninterface DeliveryTagsDisplayProps {\n    orders: Order[],\n    date: Date\n}\n\nexport const DeliveryTagsDisplay = (props: DeliveryTagsDisplayProps): React.ReactElement => {\n    const target_date: string = moment(props.date).utc().format('YYYY-MM-DD');\n    return (\n        <div className='delivery_tags'>\n            {\n                props.orders.map((order: Order) => {\n                    const orderItems: OrderItem[] = order.items.filter((orderItem: OrderItem) => orderItem.cart_item.delivery_date === target_date)\n                    console.log(order)\n                    return (\n                        <div className='quarter_print_page' key={`order_${order.id}`}>\n                            <span className=\"contact-info\">{order.contact_name}</span>\n                            <span className=\"street-address\">{order.street_address} {order.unit}</span>\n                            <span className=\"street-address\">{order.city} {order.zip}</span>\n                            <span className=\"contact-info\">{order.phone_number}</span>\n                            <b>Items:</b>\n                            <div className=\"delivery-tag-items\">\n                                {\n                                    orderItems.map((orderItem: OrderItem) => {\n                                        console.log(orderItem)\n                                        return(\n                                            <div className=\"delivery-tag-item\" key={`oi_${orderItem.id}`}>\n                                                {orderItem.cart_item.quantity.toString() + \" \" + helpers.extractCartItemDescription(orderItem.cart_item)}\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                            {order.notes &&\n                                <div className=\"delivery-instructions\">\n                                    <br/>\n                                    _______________________________\n                                    <h4>Delivery Instructions:</h4>\n                                    <div className=\"delivery_instructions_text\">\n                                        {order.notes}\n                                    </div>\n                                </div>\n                            }\n                        </div>\n                    )\n                    })\n            }\n        </div>\n    )\n}\n\ninterface PrepDisplayProps {\n    orderItems: OrderItem[],\n    date: Date\n}\n\nexport const PrepDisplay = (props: PrepDisplayProps): React.ReactElement => {\n\n    type CondensedListItems = {count: number, dish: string, protein: string, spicy_text:string};\n\n    const spicy: string[] = ['No', 'mild', 'spicy'];\n    let condensedList: {[key: string]: CondensedListItems} = {};\n    let key: string = \"\";\n    let dish: string = \"\";\n    let protein: string = \"\";\n    let spicy_text: string = \"\";\n    let dishCount: number = 0;\n\n    props.orderItems.forEach((orderItem: OrderItem) => {\n        dish = orderItem.cart_item.menu_item.name;\n        protein = (orderItem.cart_item.menu_item.proteins.split(':').length > 1 && orderItem.cart_item.protein !== \"\") ?\n                    orderItem.cart_item.protein : \"\";\n        spicy_text = (orderItem.cart_item.menu_item.spicy) ? spicy[orderItem.cart_item.spicy] : \"\";\n\n        key = `${dish}:${protein}:${spicy_text}`;\n        if (!(key in condensedList))\n            condensedList[key] = {count: 0, dish, protein, spicy_text};\n\n        condensedList[key].count += orderItem.cart_item.quantity;\n        dishCount += orderItem.cart_item.quantity;\n    });\n\n    return (\n        <div className={'prep_list'}>\n            <span className='prep_list__header'>{moment(props.date).utc().format('YYYY-MM-DD')} &nbsp;&nbsp;:&nbsp;&nbsp;{dishCount} items</span>\n            <table className='prep_list__list'>\n                <thead>\n                    <tr>\n                        <td>#</td>\n                        <td>Dish</td>\n                        <td>Protein</td>\n                        <td>Spicy</td>\n                        <td>L</td>\n                        <td>P</td>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        Object.keys(condensedList).sort().map((key: string, index: number) => {\n                            return (\n                                <tr className={`${index % 2 ? '' : 'print-row-dark'}`} key={key}>\n                                    <td>{condensedList[key].count}</td>\n                                    <td>{condensedList[key].dish}</td>\n                                    <td>{condensedList[key].protein}</td>\n                                    <td>{condensedList[key].spicy_text}</td>\n                                    <td></td>\n                                    <td></td>\n                                </tr>\n                            )\n                        })\n                    }\n                </tbody>\n            </table>\n        </div>\n    )\n}","import React from 'react';\nimport momentHelper from '../../helpers/MomentHelper';\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport {DeliveryWindowWithCountsDTO} from \"../../models/DeliveryWindowModel\";\nimport {RouteComponentProps} from 'react-router-dom';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport BrowserWindowTools, {PrepDisplay} from \"./BrowserWindowTools\";\n\nimport './browser.scss';\n\ninterface Props extends RouteComponentProps {\n    match: any;\n}\n\ninterface State {\n    loading: boolean,\n    targetDate: Date,\n    counts: DeliveryWindowWithCountsDTO[],\n    documentToPrint: any\n}\n\nexport default class BrowserFullDay extends React.Component<Props, State> {\n\n    state = {\n        loading: true,\n        targetDate: new Date(),\n        counts: [],\n        documentToPrint: null\n    }\n\n    public componentDidMount() {\n        const { match: { params } } = this.props;\n\n        deliveryWindowService.listWithCounts(params.targetDate)\n            .then((counts: DeliveryWindowWithCountsDTO[]) => this.setState({counts, targetDate: new Date(new Date(params.targetDate).toUTCString())}))\n            .catch( err => console)\n            .then(() => this.setState({loading: false}))\n    }\n\n    private printDocument = (documentToPrint: any): void => {\n        this.setState({documentToPrint}, () => window.print())\n    }\n\n    public render() {\n        if (this.state.loading)\n            return(<LoadingOverlay />)\n\n        return(\n            <div className={'row browser_full_day justify-content-center'}>\n                <div className='col-12 text-center'>\n                    <h5>\n                        {momentHelper.asFullDate(this.state.targetDate)}\n                    </h5>\n                </div>\n                <div className={'col-12 col-md-7'}>\n                    <div className={'row'}>\n                        <div className={'col-12'}>\n                            <div className={'col-12 text-center'}>\n                                <button\n                                    className={'btn btn-outline-info mt-2'}\n                                    onClick={() => this.props.history.goBack()}\n                                    >return to calendar</button>\n\n                                <button\n                                    className={'btn btn-outline-primary ml-2 mt-2'}\n                                    onClick={() => this.props.history.push({pathname: '/dashboard/delivery_window'})}\n                                    >create delivery window</button>\n                            </div>\n                            <div className={'row mt-2 justify-content-center'}>\n                                {this.state.counts.length > 0 &&\n                                    this.state.counts.map((dto:DeliveryWindowWithCountsDTO) =>\n                                        <div className={'col-12 col-md-6'} key={`dto_${dto.window.id}`}>\n                                            <BrowserWindowTools\n                                                dto={dto}\n                                                date={this.state.targetDate}\n                                                key={`dto_${dto.window.id}`}\n                                                printDocument={this.printDocument} />\n                                        </div>\n                                    )\n                                }\n                                {this.state.counts.length === 0 &&\n                                    <div className='col-12 text-center'>\n                                        delivery windows define the days and times of day you will be delivering\n                                    </div>\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"col-12 print-sheet\">\n                    {this.state.documentToPrint}\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport {pythonDays} from \"../../constants\";\nimport { useHistory } from 'react-router-dom';\nimport DeliveryWindow from \"../../models/DeliveryWindowModel\";\nimport momentHelper from '../../helpers/MomentHelper';\nimport moment from 'moment';\n\ninterface Props {\n    window: DeliveryWindow\n}\nexport const DeliveryWindowsWindow = (props: Props): React.ReactElement => {\n    const history = useHistory();\n\n    let runText: string = 'recurring';\n    switch (true) {\n        case (props.window.end_date && new Date(props.window.end_date) < new Date(moment().utc().format('YYYY-DD-MM'))): runText = 'expired'; break;\n        case (props.window.start_date !== null && props.window.end_date !== null):\n            runText = `${momentHelper.asShortDate(new Date(props.window.start_date || ''))} - ${momentHelper.asShortDate(new Date(props.window.end_date || ''))}`\n            break;\n    }\n\n    return (\n        <tr\n            key={`dw_${props.window.id}`}\n            className={`delivery_windows__window ${props.window.active ? '' : 'delivery_windows__window-inactive'}`}\n            onClick={() => history.push({pathname: `/dashboard/delivery_window/edit/${props.window.id}`})}\n        >\n            <td className='d-none d-md-table-cell'>{props.window.name}</td>\n            <td>{pythonDays[props.window.day]}</td>\n            <td>\n                <div>{moment(props.window.start_time, 'HH:mm:ss').format('h:mm a')} -</div>\n                <div>{moment(props.window.end_time, 'HH:mm:ss').format('h:mm a')}</div>\n\n            </td>\n            <td>{runText}</td>\n        </tr>\n    )\n}","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport DeliveryWindow from '../../models/DeliveryWindowModel';\nimport deliveryWindowService from '../../services/DeliveryWindowService';\n\nimport './delivery_windows.scss';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport { DeliveryWindowsWindow } from './DeliveryWindowsWindow';\n\nimport { pythonDays } from '../../constants';\nimport { useHistory, Link } from 'react-router-dom';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\ninterface Props {\n}\n\nexport const DeliveryWindows = (props: Props): React.ReactElement => {\n    const [showLoading, setShowLoading] = useState(true);\n    const [deliveryWindows, setDeliveryWindows] = useState<DeliveryWindow[]>([])\n    const [newWindow, setNewWindow] = useState('');\n    const [addingWindow, setAddingWindow] = useState(false);\n\n    const history = useHistory()\n\n    useEffect(() => {\n        deliveryWindowService.get<DeliveryWindow[]>()\n            .then((deliveryWindows: DeliveryWindow[]) => {\n                setShowLoading(false);\n                setDeliveryWindows(deliveryWindows);\n            })\n            .catch( err => window.alert('Unable to load delivery windows'))\n    }, [])\n\n    const addWindow = (): void => {\n        setAddingWindow(true)\n        deliveryWindowService.add(new DeliveryWindow(\n            -1, newWindow, '17:00:00', '19:00:00', 0, false\n        ))\n            .then((window: DeliveryWindow) => history.push({pathname: `/dashboard/delivery_window/edit/${window.id}`}))\n            .catch(() => window.alert('unable to create window'))\n            .then(() => setAddingWindow(false))\n    }\n\n    if (showLoading)\n        return(<LoadingOverlay />)\n\n    return (\n        <div className=\"row delivery_windows\">\n            <div className='col-12'>\n                <h3>delivery windows</h3>\n                <hr/>\n            </div>\n            <div className={'col-12'}>\n                <div className='row'>\n                    <div className='col-8 col-md-3'>\n                        <input type='text' className='form-control'placeholder='new delivery window name'\n                               onChange={(e:ChangeEvent<HTMLInputElement>) => setNewWindow(e.target.value)}\n                        />\n                    </div>\n                    <div className='col-2'>\n                        <LoadingIconButton label={'add window'} onClick={addWindow} busy={addingWindow}\n                                           btnClass='btn btn-sm btn-outline-success' disabled={newWindow === ''}\n                        />\n                    </div>\n                </div>\n            </div>\n            <div className={'col-12 mt-2'}>\n                <table className={'table'}>\n                    <thead>\n                        <tr>\n                            <th className='d-none d-md-table-cell'>name</th>\n                            <th>day</th>\n                            <th>time</th>\n                            <th>run</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {\n                        deliveryWindows.map((window: DeliveryWindow) =>\n                            <DeliveryWindowsWindow window={window}/>\n                        )\n                    }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}\n\nconst DeliveryWindowContainer = (props: {deliveryWindow: DeliveryWindow, windowSelected: (deliveryWindow: DeliveryWindow) => void}): any => {\n    return (\n        <div className=\"delivery-window-container\" onDoubleClick={()=>{props.windowSelected(props.deliveryWindow)}}>\n            {props.deliveryWindow.name}\n        </div>\n    )\n}","import Service from './Service';\n\nclass ZoneService extends Service {\n    appName='dashboard';\n    view='zone';\n}\n\nexport default new ZoneService();","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport zoneService from '../../services/ZoneService';\nimport { useParams, useHistory } from 'react-router-dom';\nimport DeliveryWindow from \"../../models/DeliveryWindowModel\";\nimport Zone from \"../../models/ZoneModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\n\nexport const DeliveryWindowEdit = (): React.ReactElement => {\n    const history = useHistory();\n    const params: any = useParams();\n    const [showLoading, setShowLoading] = useState<boolean>(true);\n    const [deliveryWindow, setWindow] = useState<DeliveryWindow>(new DeliveryWindow());\n    const [disabled, setDisabled] = useState<boolean>(false);\n    const [zones, setZones] = useState<Zone[]>([]);\n    const [selectedZone, setSelectedZone] = useState<number>(-1)\n    const [saving, setSaving] = useState(false);\n    const [deleting, setDeleting] = useState(false);\n\n    useEffect(() => {\n        if (params.id === undefined) {\n            zoneService.get<Zone[]>()\n                .then((zones: Zone[]) => setZones(zones))\n                .catch(() => window.alert('unable to load zones'))\n                .then(() => setShowLoading(false));\n        } else {\n            Promise.all([\n                deliveryWindowService.get<DeliveryWindow>(params.id),\n                zoneService.get<Zone[]>()\n            ])\n                .then((values) => {\n                    let deliveryWindow: DeliveryWindow = values[0];\n                    setWindow(deliveryWindow);\n                    setZones(values[1]);\n                    if (values[1].length > 0) setSelectedZone(values[1][0].id);\n                    setShowLoading(false);\n                })\n                .catch( err => window.alert('unable to load window'));\n        }\n    }, []);\n\n    const addZone = (): void => {\n        if (zones.length === 0) {\n            history.push({pathname: '/dashboard/zone'})\n        } else {\n            deliveryWindowService.addZone(deliveryWindow.id, selectedZone)\n                .then((deliveryWindow: DeliveryWindow) => setWindow(deliveryWindow))\n                .catch(() => window.alert('unable to add zone'))\n        }\n    }\n\n    const deleteWindow = (): void => {\n        if (!window.confirm('are you sure you want to delete this window? \\n\\nWARNING:\\nthis cannot be reversed.')) return;\n\n        setDeleting(true)\n        deliveryWindowService.delete(deliveryWindow.id)\n            .then(() => history.goBack())\n            .catch(err => window.alert('unable to delete'))\n            .then(() => setDeleting(false))\n    }\n    const removeZone = (zone: Zone): void => {\n        if (!window.confirm(`Are you sure you want to remove '${zone.name}'?`)) return\n\n        deliveryWindowService.removeZone(deliveryWindow.id, zone.id)\n            .then((deliveryWindow: DeliveryWindow) => setWindow(deliveryWindow))\n            .catch(() => window.alert('unable to remove zone'))\n    }\n\n    const saveWindow = (): void => {\n        setDisabled(true);\n        setSaving(true);\n\n        deliveryWindowService.update<DeliveryWindow>(deliveryWindow.id, deliveryWindow)\n                .then(() => history.goBack())\n                .catch( err => window.alert('unable to update window'))\n    }\n\n    const updateData = (e: ChangeEvent<HTMLInputElement | HTMLSelectElement>): void => {\n        setWindow({...deliveryWindow, [e.target.id]: e.target.value});\n    }\n\n    if (showLoading)\n        return(<LoadingOverlay />)\n\n    return (\n        <div className={'row delivery_window_edit justify-content-center'}>\n            <div className='col-12 col-md-10'>\n                <h3>Edit Delivery Window</h3>\n                <hr/>\n            </div>\n            <div className={'col-12 col-md-5'}>\n                <div className={'row'}>\n                    <div className={'col-12'}>\n                        <div className={'delivery_window_edit__prompt'}>name:</div>\n                        <input className={'form-control'} type={'text'} id={'name'}\n                               value={deliveryWindow.name}\n                               onChange={updateData} />\n                    </div>\n                    <div className={'col-6 mt-2'}>\n                        <div className={'delivery_window_edit__prompt'}>day:</div>\n                        <select className={'form-control'} id={'day'}\n                                value={deliveryWindow.day}\n                                onChange={updateData}\n                        >\n                            <option value={6}>sunday</option>\n                            <option value={0}>monday</option>\n                            <option value={1}>tuesday</option>\n                            <option value={2}>wednesday</option>\n                            <option value={3}>thursday</option>\n                            <option value={4}>friday</option>\n                            <option value={5}>saturday</option>\n                        </select>\n                    </div>\n                    <div className={'col-6 mt-2'}>\n                        <div className={'delivery_window_edit__prompt'}>active:</div>\n                        <input type='checkbox' className={''} id={'active'}\n                               checked={deliveryWindow.active}\n                               onChange={() => setWindow({...deliveryWindow, active: !deliveryWindow.active})}\n                        />\n                    </div>\n                    <div className={'col-6 mt-2'}>\n                        <div className={'delivery_window_edit__prompt'}>start time:</div>\n                        <input type={'time'} className={'form-control'} id={'start_time'}\n                        value={deliveryWindow.start_time}\n                        onChange={updateData}/>\n                    </div>\n                    <div className={'col-6 mt-2'}>\n                        <div className={'delivery_window_edit__prompt'}>end time:</div>\n                        <input type={'time'} className={'form-control'} id={'end_time'}\n                        value={deliveryWindow.end_time} onChange={updateData}/>\n                    </div>\n                    <div className={'col-9 mt-2'}>\n                        <div className={'delivery_window_edit__prompt'}>start date:</div>\n                        <input type={'date'} className={'form-control'} id={'start_date'}\n                               value={deliveryWindow.start_date || ''} onChange={updateData}/>\n                    </div>\n                    <div className={'col-2 mt-4'}>\n                        <button className={'btn btn-sm btn-outline-danger'}\n                                onClick={() => setWindow({...deliveryWindow, start_date: null})}\n                        >clear</button>\n                    </div>\n                    <div className={'col-9 mt-2'}>\n                        <div className={'delivery_window_edit__prompt'}>end date:</div>\n                        <input type={'date'} className={'form-control'} id={'end_date'}\n                               value={deliveryWindow.end_date || ''} onChange={updateData} />\n                    </div>\n                    <div className={'col-2 mt-4'}>\n                        <button className={'btn btn-sm btn-outline-danger'}\n                                onClick={() => setWindow({...deliveryWindow, end_date: null})}>clear</button>\n                    </div>\n                </div>\n            </div>\n            <div className='col-12 d-md-none'>\n                <hr/>\n            </div>\n            <div className='col-12 col-md-5 dwe_zones'>\n                <h5>zones</h5>\n                <div className='row'>\n                    <div className='col-9'>\n                        {\n                            zones.length > 0 ?\n                                <select className='form-control'\n                                        onChange={(e: ChangeEvent<HTMLSelectElement>) => setSelectedZone(parseInt(e.target.value))}>\n                                    {\n                                        zones.map((zone: Zone) =>\n                                            <option key={`zone_${zone.id}`} value={zone.id}>{zone.name}</option>\n                                        )\n                                    }\n                                </select>\n                                :\n                                <div className='dwe__no_zones_message'>\n                                    no zones available\n                                </div>\n                        }\n                    </div>\n                    <div className='col-2'>\n                        <button className='btn btn-sm btn-outline-success' onClick={addZone}>\n                            add zone\n                        </button>\n                    </div>\n                </div>\n                <hr/>\n                <div className='dwe_zones__zones'>\n                    {deliveryWindow.zones &&\n                        deliveryWindow.zones.map((zone: Zone) =>\n                            <div className='row dwe_zones__zone mt-1'>\n                                <div className='col-9'>{zone.name}</div>\n                                <div className='col-2'>\n                                    <button className='btn btn-sm btn-outline-danger' onClick={()=>removeZone(zone)}>X</button>\n                                </div>\n                            </div>\n                        )\n                    }\n                </div>\n            </div>\n            <div className={'col-12 col-md-10 mt-2 text-center'}>\n                <hr/>\n                <LoadingIconButton label='save updates' onClick={saveWindow} busy={saving} disabled={disabled}\n                                   btnClass={'btn btn-outline-success'}\n                />\n                <LoadingIconButton label='delete' onClick={deleteWindow} busy={deleting} disabled={disabled}\n                                   btnClass={'btn btn-outline-danger'} outerClass={'ml-2'}\n                />\n            </div>\n            <div className='col-12 col-md-10 text-center mt-2'>\n                <button\n                    onClick={() => history.goBack()}\n                    className={'btn btn-outline-info ml-2'}\n                    disabled={disabled}\n                >\n                    go back\n                </button>\n            </div>\n        </div>\n    )\n}","import ModelBase from './ModelBase';\nimport Zipcode from \"./ZipcodeModel\";\n\nexport default class Zone extends ModelBase {\n\n    public name!: string;\n    public zip_codes!: Zipcode[]\n\n    constructor(name?: string, zip_codes?: Zipcode[]) {\n        super();\n\n        this.name = name || ''\n        this.zip_codes = zip_codes || []\n    }\n}","import ModelBase from \"./ModelBase\";\nimport Zone from \"./ZoneModel\";\n\nexport default class Zipcode extends ModelBase {\n\n    public code!: string;\n    public zone!: Zone | number;\n\n    constructor(id?: number, code?: string, zone?: Zone | number) {\n        super();\n\n        this.id = id || -1;\n        this.code = code || '';\n        this.zone = zone || new Zone();\n    }\n}","import React from 'react';\nimport Zipcode from \"../../models/ZipcodeModel\";\n\nimport './zone.scss';\n\ninterface Props {\n    code: Zipcode,\n    removeCode: (code: Zipcode) => void\n}\n\nexport const ZoneCode = (props: Props): React.ReactElement => {\n\n    return (\n        <div className={'zone_code'} onClick={() => props.removeCode(props.code)}>\n            <div className={'zone_code__code'}>\n                {props.code.code}\n            </div>\n        </div>\n    )\n}","import Service from './Service';\n\nclass ZipService extends Service {\n    appName = 'dashboard';\n    view = 'zipcode';\n}\n\nexport default new ZipService();","import React from 'react';\n\nimport checkmark from '../../../assets/save_checkmark.png';\nimport './spinner_button.scss';\n\ninterface Props {\n    active: boolean;\n}\n\nexport const SpinnerButton = (props: Props): React.ReactElement => {\n\n    return (\n        <div className={`spinner_button ${props.active ? '' : 'spinner_button--inactive'}`}>\n            {\n                props.active ?\n                    <div className='spinner_button__loader'></div>\n                    :\n                    <div className='spinner_button__checkmark'>\n                        <img src={checkmark} />\n                    </div>\n            }\n        </div>\n    )\n}","import React, {ChangeEvent, useState} from 'react';\nimport Zone from \"../../models/ZoneModel\";\nimport './zone.scss';\nimport Zipcode from \"../../models/ZipcodeModel\";\nimport {ZoneCode} from \"./ZoneCode\";\nimport zipService from '../../services/ZipService';\nimport zoneService from '../../services/ZoneService';\nimport {SpinnerButton} from \"../widgets/spinnerButton/SpinnerButton\";\n\ninterface Props {\n    zone: Zone\n}\n\nexport const ZoneTool = (props: Props): React.ReactElement => {\n    const [codes, setCodes] = useState<Zipcode[]>(props.zone.zip_codes);\n    const [newCode, setNewCode] = useState<string>('');\n    const [zoneName, setZoneName] = useState<string>(props.zone.name);\n    const [updating, setUpdating] = useState<boolean>(false);\n\n    const removeCode = (code: Zipcode): void => {\n        if (!window.confirm(`Are you sure you want to remove: ${code.code}?`)) return\n        zipService.delete<Zipcode>(code.id)\n            .then(() => setCodes(codes.filter((tcode: Zipcode) => tcode.code !== code.code)))\n            .catch(() => window.alert('unable to remove code'))\n    }\n\n    const addCode = (): void => {\n\n        if (codes.filter((code: Zipcode) => code.code === newCode).length > 0) {\n            alert('that code already exists');\n            return;\n        }\n\n        zipService.add<Zipcode>(new Zipcode(-1, newCode, props.zone.id))\n            .then((code: Zipcode) => {\n                setCodes([...codes, code]);\n                setNewCode('');\n            })\n            .catch(() => window.alert('unable to add code'));\n    }\n\n    const updateZone = (): void => {\n        setUpdating(true)\n        zoneService.update<Zone>(props.zone.id, new Zone(zoneName))\n            .then(() => setUpdating(false))\n    }\n\n    return (\n        <div className={'row zone_tool'}>\n            <div className={'col-12'}>\n                <div className='row'>\n                    <div className='col-10'>\n                        <input className={'form-control zone_tool__name'} type={'text'} value={zoneName}\n                               onChange={(e:ChangeEvent<HTMLInputElement>) => setZoneName(e.target.value)}\n                        />\n                    </div>\n                    <div className='col-1'>\n                        <div onClick={updateZone}>\n                            <SpinnerButton active={updating} />\n                        </div>\n                    </div>\n                </div>\n                <hr/>\n            </div>\n            <div className={'col-6'}>\n                <div className={'zone_tool__note'}>select code to remove</div>\n                <div className={'zone_tool__codes'}>\n                    {\n                        codes.map((code: Zipcode) => <ZoneCode code={code} removeCode={removeCode} key={code.code} />)\n                    }\n                </div>\n            </div>\n            <div className={'col-6'}>\n                <br/>\n                <input className={'form-control'} placeholder={'new code'} value={newCode}\n                       onChange={(e:ChangeEvent<HTMLInputElement>) => setNewCode(e.target.value)}\n                />\n                <div className={'btn btn-sm btn-outline-success zone_tool__add_btn mt-2'} onClick={addCode}>add code</div>\n            </div>\n        </div>\n    )\n}","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport Zone from \"../../models/ZoneModel\";\nimport zoneService from '../../services/ZoneService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport { ZoneTool } from './ZoneTool';\nimport './zone.scss';\n\nexport const Zones = (): React.ReactElement => {\n    const [zones, setZones] = useState<Zone[]>([]);\n    const [showLoading, setShowLoading] = useState<boolean>(true);\n    const [newZone, setNewZone] = useState<string>('');\n\n    useEffect(() => {\n        zoneService.get<Zone[]>()\n            .then((zones:Zone[]) => {\n                setZones(zones);\n                setShowLoading(false)\n            })\n            .catch( err => window.alert('unable to load zones'))\n    }, [])\n\n    const addZone = (): void => {\n        zoneService.add<Zone>(new Zone(newZone))\n            .then((zone: Zone) => {\n                setZones([...zones, zone]);\n                setNewZone('');\n            })\n            .catch(() => window.alert('unable to create new zone'))\n    }\n\n    if (showLoading)\n        return( <LoadingOverlay /> )\n\n    return (\n        <div className={'row zones justify-content-center'}>\n            <div className={'col-12 col-md-10'}>\n                <div className={'row'}>\n                    <div className={'col-12'}>\n                        <h3>delivery zones</h3>\n                        <hr/>\n                    </div>\n                    <div className={'col-12'}>\n                        <div className='row'>\n                            <div className='col-8 col-md-10'>\n                                <input type='text' className='form-control' value={newZone} placeholder='new zone name'\n                                       onChange={(e:ChangeEvent<HTMLInputElement>) => setNewZone(e.target.value)}\n                                />\n                            </div>\n                            <div className='col-2'>\n                                <button className='btn btn-outline-success' onClick={addZone}>add zone</button>\n                            </div>\n                        </div>\n                        <hr/>\n                    </div>\n                    {\n                        zones.length > 0 ?\n                            zones.map((zone: Zone) => {\n                                return(\n                                        <div className={'col-12 col-md-6 zones__zone_wrapper'} key={`zone_${zone.id}`}>\n                                            <ZoneTool zone={zone}/>\n                                        </div>\n                                    )\n                            })\n                            :\n                            <div className='col-12'>\n                                <p>\n                                    Delivery zones are defined by a collection of zip codes. Once you creat a zone, you will be ready to create your first Delivery Window.\n                                </p>\n                            </div>\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}","import ModelBase from \"./ModelBase\";\nimport DeliveryWindow from \"./DeliveryWindowModel\";\nimport RouteStop from \"./RouteStopModel\";\n\nexport default class Route extends ModelBase {\n    public delivery_date!: string;\n    public delivery_window!: DeliveryWindow\n    public stops!: RouteStop[];\n    public route_status!: number;\n    public started_at!: string;\n    public finished_at!: string;\n\n    /*\n    ROUTE_STATUS = (\n    (0, \"uncommitted\"),\n    (1, \"committed\"),\n    (2, \"in_progress\"),\n    (3, \"completed\")\n)\n     */\n\n    constructor(\n        id?: number,\n        delivery_date?: string,\n        delivery_window?: DeliveryWindow,\n        stops?: RouteStop[],\n        route_status?: number,\n        started_at?: string,\n        finished_at?: string\n    )\n    {\n        super();\n        this.id = id || -1;\n        this.delivery_date = delivery_date || '';\n        this.delivery_window = delivery_window || new DeliveryWindow();\n        this.stops = stops || [];\n        this.route_status = route_status || 0;\n        this.started_at = started_at || '';\n        this.finished_at = finished_at || '';\n    }\n}","import Service from \"./Service\";\nimport RouteStop from \"../models/RouteStopModel\";\nimport Route from \"../models/RouteModel\";\n\nclass RouteStopService extends Service {\n    appName = 'dashboard';\n    view = 'route_stop';\n\n    public at_stop = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/at_stop/`);\n    }\n\n    public alertDelivery = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/delivery_alert/`);\n    }\n\n    public cancel = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/cancel/`);\n    }\n\n    public delivered = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/delivered/`);\n    }\n\n    public en_route = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/en_route/`);\n    }\n}\n\nexport default new RouteStopService();","import React, {useState, Fragment} from 'react';\nimport routeStopService from '../../services/RouteStopService';\n\nimport './delivery_planner.scss';\nimport RouteStop from \"../../models/RouteStopModel\";\nimport moment from \"moment\";\nimport Route from \"../../models/RouteModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport MomentHelper from \"../../helpers/MomentHelper\";\n\ninterface Props {\n    stop: RouteStop,\n    route: Route,\n    moveStop: (stop: RouteStop, direction: string) => void,\n    canMoveUp: boolean,\n    canMoveDown: boolean\n}\n\nexport const RouteOrganizerEntry = (props: Props): React.ReactElement => {\n\n    const [stop, setStop] = useState(props.stop);\n    const [loadButtonActive, setLoadButtonActive] = useState('');\n\n    const atStop = (): void => {\n        setLoadButtonActive('at_stop');\n        routeStopService.at_stop(props.stop)\n            .then((stop:RouteStop) => setStop(stop))\n            .catch(() => window.alert('unable to at_stop'))\n            .then(() => setLoadButtonActive(''))\n    }\n\n    const cancelDelivery = (): void => {\n        if (!window.confirm('are you sure you want to cancel this stop? \\n\\nThis cannot be reversed.')) return;\n\n        setLoadButtonActive('canceling_delivery');\n        routeStopService.cancel(props.stop)\n            .then((stop:RouteStop) => setStop(stop))\n            .catch(() => window.alert('unable to cancel'))\n            .then(() => setLoadButtonActive(''))\n    }\n\n    const completeDelivery = (): void => {\n        setLoadButtonActive('completing_delivery');\n        routeStopService.delivered(props.stop)\n            .then((s: RouteStop) => {setStop(s)})\n            .catch(() => window.alert('unable to complete'))\n            .then(() => setLoadButtonActive('canceling_delivery'))\n    }\n\n    const navigate = (): void => {\n        openMap();\n        routeStopService.en_route(props.stop)\n            .then((stop:RouteStop) => setStop(stop))\n            .catch(() => window.alert('unable to en_route'))\n    }\n\n    const openMap = (): void => {\n        window.open(`http://maps.google.com/?q=${stop.order.street_address} ${props.stop.order.zip}`, '_blank');\n    }\n\n    return (\n        <div className='row route_organizer_entry'>\n            <div className='col-12'>\n                <div className='row organizer_entry__inner'>\n                    <div className='col-12'>\n\n                        <div className='organizer_entry__address'>\n                            { stop.current_index > -1 ? (stop.current_index + 1).toString() : ''} &nbsp;\n                            {stop.order.street_address}\n                        </div>\n                        {(props.route.route_status > 0 && props.route.route_status < 4) &&\n                            <div className='organizer_entry__time'>\n                                {`${moment(props.route.delivery_window.start_time, 'HH:mm:ss')\n                                    .add(stop.eta, 'seconds')\n                                    .subtract(10, 'minutes')\n                                    .format('HH:mm')} - \n                                    ${moment(props.route.delivery_window.start_time, 'HH:mm:ss')\n                                        .add(stop.eta, 'seconds')\n                                        .subtract(10, 'minutes')\n                                        .add(20, 'minutes')\n                                        .format('HH:mm')}`}\n                            </div>\n                        }\n                    </div>\n                    <div className='col-12 organizer_entry__notes'>\n                        {stop.order.notes}\n                    </div>\n                    <div className='col-12 text-center'>\n                            {stop.stop_status === 3 && // delivery completed\n                                <Fragment>\n                                    {\n                                        <Fragment>\n                                            delivered: {MomentHelper.asShortDateTime(stop.delivered_at)}\n                                        </Fragment>\n                                    }\n\n                                </Fragment>\n                            }\n                            {(props.route.route_status === 3 && stop.stop_status !== 3) && // route completed\n                                <Fragment>\n                                    there was no delivery time recorded\n                                </Fragment>\n                            }\n                            {stop.stop_status === 4 &&\n                                <Fragment>\n                                    canceled\n                                </Fragment>\n                            }\n\n                            {stop.stop_status < 3 &&\n                                <Fragment>\n                                    <div className='col-12 organizer_entry__delivery_controls'>\n                                        {(props.route.route_status === 2 && stop.stop_status === 0) &&\n                                            <button className='btn btn-sm btn-outline-success delivery_controls__navigate mr-2' onClick={() => navigate()}>navigate</button>\n                                        }\n                                        {(props.route.route_status === 2 && stop.stop_status !== 0) &&\n                                            <Fragment>\n                                                {stop.stop_status === 1 &&\n                                                    <LoadingIconButton\n                                                        busy={loadButtonActive ==='at_stop'}\n                                                        outerClass='mr-2 delivery_controls__arrive'\n                                                        btnClass={'btn btn-sm btn-outline-info'}\n                                                        label={'arrive'}\n                                                        onClick={atStop} />\n                                                }\n                                                {stop.stop_status === 2 &&\n                                                    <LoadingIconButton\n                                                        busy={loadButtonActive ==='completing_delivery'}\n                                                        outerClass='mr-2 delivery_controls__finished'\n                                                        btnClass={'btn btn-sm btn-outline-success'}\n                                                        label={'finished'}\n                                                        onClick={completeDelivery} />\n                                                }\n                                            </Fragment>\n                                        }\n                                        {props.route.route_status === 2 &&\n                                            <LoadingIconButton\n                                                busy={loadButtonActive ==='canceling_delivery'}\n                                                outerClass='mr-2 organizer_entry__cancel'\n                                                btnClass={'btn btn-sm btn-outline-danger'}\n                                                label={'cancel'}\n                                                onClick={cancelDelivery} />\n                                        }\n                                    </div>\n                                    {props.route.route_status === 0 && // non commited\n                                        <div className='col-12 organizer_entry__plan_controls'>\n                                            <button className='btn btn-sm btn-outline-success plan_controls__up_btn mr-2' disabled={!props.canMoveUp}\n                                                    onClick={() => props.moveStop(stop, 'up')}\n                                            >up</button>\n                                            <button className='btn btn-sm btn-outline-success plan_controls__down_btn mr-2' disabled={!props.canMoveDown}\n                                                    onClick={() => props.moveStop(stop, 'down')}\n                                            >down</button>\n                                            <button className='btn btn-sm btn-outline-success plan_controls__top_btn mr-2' disabled={!props.canMoveUp}\n                                                    onClick={() => props.moveStop(stop, 'top')}\n                                            >first</button>\n                                            <button className='btn btn-sm btn-outline-success plan_controls__bottom_btn' disabled={!props.canMoveDown}\n                                                    onClick={() => props.moveStop(stop, 'bottom')}\n                                            >last</button>\n\n                                        </div>\n                                    }\n                                </Fragment>\n                            }\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    )\n}","import Service from \"./Service\";\nimport Route from \"../models/RouteModel\";\n\nclass RouteService extends Service {\n    appName = 'dashboard';\n    view = 'route';\n\n    public commitRoute = (route: Route): Promise<Route> => {\n        return this._get(`${this.appName}/${this.view}/${route.id}/commit`);\n    }\n\n    public completeRoute = (route: Route): Promise<Route> => {\n        return this._get(`${this.appName}/${this.view}/${route.id}/complete_route`);\n    }\n\n    public startRoute = (route: Route): Promise<Route> => {\n        return this._get(`${this.appName}/${this.view}/${route.id}/start_route`);\n    }\n\n    public updateStopOrder = (route: Route, stopIds: number[]): Promise<Route> => {\n        return this._post(`${this.appName}/${this.view}/${route.id}/update_stop_order/`, {\n            stop_ids: JSON.stringify(stopIds)\n        })\n    }\n}\n\nexport default new RouteService();","import React, {Fragment} from 'react';\nimport Route from \"../../models/RouteModel\";\n\nimport './delivery_planner.scss';\nimport {RouteOrganizerEntry} from \"./RouteOrganizerEntry\";\nimport RouteStop from \"../../models/RouteStopModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport routeService from '../../services/RouteService';\nimport MomentHelper from \"../../helpers/MomentHelper\";\n\ninterface Props {\n    route: Route,\n    updateRoute: (route: Route) => void\n}\n\ninterface State {\n    mode: string,\n    route: Route,\n    routeUpdated: boolean,\n    loading: boolean,\n    stops: RouteStop[],\n    loadingButtonInUse: string\n}\n\nexport default class RouteOrganizer extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            mode: 'plan',\n            route: props.route,\n            routeUpdated: false,\n            loading: true,\n            stops: this.extractStopsFromRoute(props.route),\n            loadingButtonInUse: ''\n        }\n    }\n\n    private commitRoute = (): void => {\n        if (!window.confirm('Once you commit a route, it cannot be changed.')) return;\n\n        this.setState({loadingButtonInUse: 'committing'});\n\n        routeService.commitRoute(this.state.route)\n            .then((route: Route) => this.setState({route, stops: this.extractStopsFromRoute(route)}))\n            .catch(() => window.alert('cannot commit route'))\n            .then(() => this.setState({loadingButtonInUse: ''}))\n    }\n\n    private completeRoute = (): void => {\n        if (!window.confirm('Are you sure you are done?')) return;\n\n        this.setState({loadingButtonInUse: 'completing_route'})\n        routeService.completeRoute(this.state.route)\n            .then((route: Route) => this.setState({route, stops: this.extractStopsFromRoute(route)}))\n            .catch(() => window.alert('unable to complete route'))\n            .then(() => this.setState({loadingButtonInUse: ''}))\n    }\n\n    private moveEntry = (stop: RouteStop, direction: string) => {\n        let currentNdx: number = -1;\n        this.state.stops.forEach((e: RouteStop, index: number) => {\n            if (e.id === stop.id) currentNdx = index;\n        })\n\n        let stops: RouteStop[] = this.state.stops;\n        stops.splice(currentNdx, 1); // remove\n\n        // add\n        switch(direction) {\n            case 'up': currentNdx --; break;\n            case 'down': currentNdx ++; break;\n            case 'top': currentNdx = 0; break;\n            case 'bottom': currentNdx = stops.length; break;\n        }\n        stops.splice(currentNdx, 0, stop)\n\n        for (let x: number = 0; x < stops.length; x ++)\n            stops[x].current_index = x\n\n        this.setState({stops, routeUpdated: true});\n    }\n\n    private optimize = (): void => {\n        this.setState({\n            loadingButtonInUse: 'optimizing',\n            stops: this.state.stops.sort((a,b) => (a.index > b.index) ? 1 : ((b.index > a.index) ? -1 : 0))\n        }, () => this.saveChanges())\n    }\n\n    private saveChanges = (): void => {\n        routeService.updateStopOrder(this.state.route, this.state.stops.map((stop: RouteStop) => stop.id))\n            .then((route: Route) => this.props.updateRoute(route))\n            .catch(() => window.alert('unable to save changes'))\n            .then(() => this.setState({loadingButtonInUse: ''}))\n    }\n\n    private extractStopsFromRoute = (route: Route): RouteStop[] => {\n        return route.stops.sort((a,b) => (a.current_index > b.current_index) ? 1 : ((b.current_index > a.current_index) ? -1 : 0))\n    }\n\n    private startRoute = (): void => {\n        if (!window.confirm('Are you sure you want to start the route?')) return;\n\n        this.setState({loadingButtonInUse: 'starting_route'})\n        routeService.startRoute(this.state.route)\n            .then((route: Route) => this.setState({route}))\n            .catch(() => window.alert('unable to start route'))\n            .then(() => this.setState({loadingButtonInUse: ''}))\n    }\n\n    public render() {\n        const routeStatus: string[] = ['uncommitted', 'committed', 'in progress', 'completed', 'waiting for cutoff'];\n        let canOptimize: boolean = false;\n        this.state.stops.forEach((stop: RouteStop, index: number) => {\n            if (stop.index !== stop.current_index) canOptimize = true;\n        })\n\n        return (\n            <div className='row route_organizer'>\n                <div className='col-12 route_organizer__status mb-2'>\n                    status:\n                    <span className={`route_organizer__status--${this.state.route.route_status} ml-2`}>\n                        {routeStatus[this.state.route.route_status]}\n                    </span>\n                </div>\n                {this.state.route.route_status === 3 && //completed\n                    <Fragment>\n                        <div className='col-12'>started: {MomentHelper.asShortDateTime(this.state.route.started_at)}</div>\n                        <div className='col-12'>completed: {MomentHelper.asShortDateTime(this.state.route.finished_at)}</div>\n                    </Fragment>\n                }\n                <div className='col-12'>\n                    {this.state.route.route_status === 0 && //uncommitted\n                        <Fragment>\n                            {this.state.routeUpdated &&\n                                <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='saving_changes'}\n                                    btnClass={'btn btn-outline-success route_organizer__optimize_btn'}\n                                    label={'save changes'}\n                                    onClick={() => {\n                                        this.setState({loadingButtonInUse: 'saving_changes'});\n                                        this.saveChanges();\n                                    }} />\n                            }\n                            {(!this.state.routeUpdated) &&\n                                <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='committing'}\n                                    btnClass='btn btn-outline-success'\n                                    label={'commit route'}\n                                    onClick={this.commitRoute} />\n                            }\n                            {canOptimize &&\n                                <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='at_stop'}\n                                    btnClass='btn btn-outline-info'\n                                    label={'optimize'}\n                                    onClick={this.optimize} />\n                            }\n                        </Fragment>\n                    }\n                    {this.state.route.route_status === 1 &&  //committed\n                        <Fragment>\n                            <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='starting_route'}\n                                    btnClass='btn btn-outline-info'\n                                    label={'start route'}\n                                    onClick={this.startRoute} />\n                        </Fragment>\n                    }\n                    {this.state.route.route_status === 2 &&  //in progress\n                        <Fragment>\n                            <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='completing_route'}\n                                    btnClass='btn btn-outline-success'\n                                    label={'completed'}\n                                    onClick={this.completeRoute} />\n                        </Fragment>\n                    }\n                </div>\n                <div className='col-12 route_organizer__stops mt-2'>\n                    <div className='row'>\n                        {\n                            this.state.stops.map((stop: RouteStop, index: number) =>\n                                <div className='col-12'key={`route_${Math.random()}`}>\n                                    <RouteOrganizerEntry\n                                        stop={stop}\n                                        route={this.state.route}\n                                        moveStop={this.moveEntry}\n                                        canMoveDown={index + 1  < this.state.stops.length}\n                                        canMoveUp={index > 0}\n                                    />\n                                </div>\n                            )\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, {useEffect, useState} from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport GoogleMapReact, {Maps} from 'google-map-react';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport Route from \"../../models/RouteModel\";\n\nimport './delivery_planner.scss';\nimport RouteOrganizer from \"./RouteOrganizer\";\nimport RouteStop from \"../../models/RouteStopModel\";\nimport MomentHelper from \"../../helpers/MomentHelper\";\nimport moment from \"moment\";\n\nexport const DeliveryPlanner = (props: any): React.ReactElement => {\n    const params: any = useParams();\n    const history = useHistory();\n    const [route, setRoute] = useState<Route>(new Route());\n    const [loading, setLoading] = useState<boolean>(true);\n\n    let map: any;\n    let maps: any;\n    let markers: any[] = [];\n\n    useEffect(() => {\n        deliveryWindowService.retrieveRoute(params.delivery_window, new Date(moment(params.target_date).format('YYYY-MM-DD')))\n            .then((route: Route) => {\n                setRoute(route);\n                setLoading(false);\n                firstBuild();\n            })\n            .catch(() => window.alert('unable to load route'))\n    }, [])\n\n    const handleApiLoaded = (imap: any, imaps: Maps) => {\n      map = imap;\n      maps = imaps;\n      firstBuild();\n    };\n\n    const firstBuild = (): void => {\n        return;\n        if (route.id === -1 || map === undefined) return;\n        updateStops(route.stops);\n    }\n\n    const createMapOptions = (maps: any): any => {\n      return {\n        zoomControlOptions: {\n          position: maps.ControlPosition.RIGHT_CENTER,\n          style: maps.ZoomControlStyle.SMALL\n        },\n        mapTypeControlOptions: {\n          position: maps.ControlPosition.TOP_RIGHT\n        },\n        mapTypeControl: true\n      };\n    }\n\n    const updateStops = (stops: RouteStop[]): void => {\n        if (map !== undefined) {\n\n            // clear old markers\n            markers.forEach((marker: any) => marker.setMap(null));\n            markers = [];\n\n            // add new markers\n            stops.forEach((stop: RouteStop, index: number) => {\n                markers.push(\n                    new maps.Marker({\n                        position: JSON.parse(stop.leg).end_location,\n                        map,\n                        title: stop.order.street_address,\n                        label: {\n                            color: '#00ff00',\n                            fontWeight: 'bold',\n                            fontSize: '3em',\n                            text: (index + 1).toString()\n                        },\n                        icon: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png',\n                    })\n                )\n            })\n        }\n    }\n\n    if (loading)\n        return <LoadingOverlay />\n\n     return (\n        <div className='row delivery_planner justify-content-center'>\n            <div className='col-12'>\n                <h3>route planner</h3>\n                <b>{MomentHelper.asShortDate(route.delivery_date)}</b>\n                <button\n                    className='btn btn-sm btn-outline-info delivery_planner__back_btn'\n                    onClick={() => history.goBack()}\n                >\n                    back to tools\n                </button>\n                <hr/>\n            </div>\n            <div className={`d-none ${route.route_status !== 0 ? 'd-md-none' : 'd-md-block'}  col-md-8 delivery_planner__map_div`}>\n                {route.route_status === 0 &&\n                    <GoogleMapReact\n                        key={Math.random()}\n                        bootstrapURLKeys={{key: 'AIzaSyC0yq5uGlMfHp98X-L452J-dzR2HX5FEP8'}}\n                        center={{lat: 37.804363, lng:-122.271111}}\n                        zoom={10}\n                        yesIWantToUseGoogleMapApiInternals={true}\n                        options={createMapOptions}\n                        onGoogleApiLoaded={({map, maps}) => handleApiLoaded(map, maps)}\n                    >\n                        {\n                            route.stops.sort((a, b) => (a.current_index > b.current_index) ? 1 : ((b.current_index > a.current_index) ? -1 : 0)).map((stop: RouteStop, index: number) => {\n                                    let leg: any = stop.leg !== '' ? JSON.parse(stop.leg) : {end_location : {\n                                            lat: 37.804363,\n                                            lng: -122.271111\n                                        }};\n                                    return (\n                                        <Marker\n                                            key={Math.random()}\n                                            lat={leg.end_location.lat}\n                                            lng={leg.end_location.lng}\n                                            text={(index += 1).toString()}\n                                        />)\n                                }\n                            )\n                        }\n                    </GoogleMapReact>\n                }\n            </div>\n            <div className='col-12 col-md-4'>\n                <RouteOrganizer\n                    key={Math.random()}\n                    route={route}\n                    updateRoute={(route: Route) => setRoute(route)}\n                />\n            </div>\n        </div>\n    )\n}\n\ninterface MarkerProps {\n    lat: number,\n    lng: number,\n    text: string\n}\nexport const Marker = (props: MarkerProps): React.ReactElement =>\n    <div style={{fontSize: '2em', color: 'red', fontWeight: 'bold'}}>{props.text}</div>","import Service from './Service'\nimport Operator from \"../models/OperatorModel\";\n\nclass OperatorService extends Service {\n    appName = 'dashboard';\n    view = 'operator';\n\n    public getMe = (): Promise<Operator> => {\n        return this._get<any>(`${this.appName}/${this.view}/get_me`);\n    }\n}\n\nexport default new OperatorService();","import ModelBase from \"./ModelBase\";\nimport User from \"./User\";\n\nexport default class Operator extends ModelBase {\n    public token!: string;\n    public is_active!: boolean;\n    public name!: string;\n    public phone!: string;\n\n    public page_name!: string;\n    public page_slug!: string;\n    public street_address!: string;\n    public unit!: string;\n    public city!: string;\n    public state!: string;\n    public zip_code!: string;\n    public self_hosted!: boolean;\n    public domain!: string;\n    public support_email!: string;\n    public timezone!: string;\n    public storefront_template!: string;\n\n    public ordering_cutoff_time!: number;\n    public upcoming_delivery_notification_time!: number;\n    public upcoming_delivery_days_notification_time!: number;\n    public auto_notify_upcoming_deliveries!: boolean;\n    public max_future_delivery_windows_time!: number;\n\n    public user!: User;\n\n    constructor(\n        id: number = -1,\n        token: string = '',\n        is_active: boolean = true,\n        name: string = '',\n        phone: string = '',\n        page_name: string = '',\n        page_slug: string = '',\n        street_address: string = '',\n        unit: string = '',\n        city: string = '',\n        state: string = '',\n        zip_code: string = '',\n        self_hosted: boolean = false,\n        domain: string = '',\n        support_email: string = '',\n        timezone: string = '',\n        ordering_cutoff_time: number = 0,\n        upcoming_delivery_notification_time: number = 0,\n        upcoming_delivery_days_notification_time: number = 0,\n        user: User = new User(),\n        auto_notify_upcoming_deliveries: boolean = false,\n        storefront_template: string = '',\n        max_future_delivery_windows_time: number = 0\n    ) {\n        super();\n        this.id = id;\n        this.token = token;\n        this.is_active = is_active;\n        this.name = name;\n        this.phone = phone;\n        this.page_name = page_name;\n        this.page_slug = page_slug;\n        this.street_address = street_address;\n        this.unit = unit;\n        this.city = city;\n        this.state = state;\n        this.zip_code = zip_code;\n        this.self_hosted = self_hosted;\n        this.domain = domain;\n        this.support_email = support_email;\n        this.timezone = timezone;\n        this.ordering_cutoff_time = ordering_cutoff_time;\n        this.upcoming_delivery_notification_time = upcoming_delivery_notification_time;\n        this.upcoming_delivery_days_notification_time = upcoming_delivery_days_notification_time;\n        this.user = user;\n        this.auto_notify_upcoming_deliveries = auto_notify_upcoming_deliveries;\n        this.storefront_template = storefront_template;\n        this.max_future_delivery_windows_time = max_future_delivery_windows_time;\n    }\n}","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport operatorService from '../../services/OperatorService';\nimport './profile.scss';\nimport Operator from \"../../models/OperatorModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport authService from '../../services/AuthService';\nimport actionsService from '../../services/APIActionService';\n\nexport const Profile = (): React.ReactElement => {\n    const [operator, setOperator] = useState<Operator>(new Operator());\n    const [errors, setErrors] = useState<string[]>([]);\n    const [hasUpdates, setHasUpdates] = useState(false);\n    const [saving, setSaving] = useState(false);\n    const [timeZones, setTimeZones] = useState<string[]>([]);\n\n    const [updatingPassword, setUpdatingPassword] = useState(false);\n    const [currentPassword, setCurrentPassword] = useState('');\n    const [newPassword, setNewPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [savingPassword, setSavingPassword] = useState(false);\n\n    let savedOperator: Operator;\n\n    useEffect(() => {\n        Promise.all([\n            operatorService.getMe(),\n            actionsService.getTimeZones()\n        ])\n            .then((values) => {\n                updateOperator(values[0], true);\n                savedOperator = values[0];\n                setTimeZones(values[1]);\n            })\n            .catch(() => window.alert('unable to load page'))\n    }, [])\n\n    const savePassword = (): void => {\n        setSavingPassword(true);\n        authService.updatePassword(operator.user, currentPassword, newPassword)\n            .then(() => {\n                setUpdatingPassword(false);\n                setCurrentPassword('');\n                setNewPassword('');\n                setConfirmPassword('');\n                alert('password updated');\n            })\n            .catch(() => window.alert('unable to update password.\\n\\nCheck that the current password is correct'))\n            .then(() => setSavingPassword(false))\n    }\n\n    const saveUpdates = (): void => {\n        setSaving(true);\n        operatorService.update(operator.id, operator)\n            .then((op: Operator) => {\n                savedOperator = op;\n                updateOperator(op);\n            })\n            .catch((err) => window.alert(JSON.stringify(err.response.data)))\n            .then(() => {\n                setSaving(false)\n            })\n    }\n\n    const updateOperator = (op: Operator, initial: boolean = false): void =>  {\n        let errors: string[] = [];\n\n        // each to check fields\n        (['zip_code', 'city', 'street_address', 'name', 'phone', 'page_name', 'support_email', 'state', 'timezone',\n            'ordering_cutoff_time'\n        ]).forEach((field: any) => {\n            // @ts-ignore\n            if (op[field] === '')\n                errors.push(field);\n        })\n\n        // fields with more checking\n        if (op.self_hosted &&\n            (op.domain === '' || op.domain.indexOf('https://') !== 0)\n        ) errors.push('domain');\n\n        if (op.auto_notify_upcoming_deliveries && op.upcoming_delivery_notification_time < 1)\n            errors.push('upcoming_delivery_notification_time');\n\n        if (!op.auto_notify_upcoming_deliveries && op.storefront_template === '')\n            errors.push('storefront_template');\n\n        if (op.ordering_cutoff_time < 1)\n            errors.push('ordering_cutoff_time');\n\n        if (op.upcoming_delivery_days_notification_time < 1)\n            errors.push('upcoming_delivery_days_notification_time');\n\n        if (op.max_future_delivery_windows_time < 1)\n            errors.push('max_future_delivery_windows_time');\n\n        if (!initial) setHasUpdates(errors.length === 0);\n        setErrors(errors);\n        setOperator(op);\n    }\n\n    let passwordErrors: string[] = [];\n    if (updatingPassword) {\n        if (currentPassword === '') passwordErrors.push('current_password');\n        if (newPassword === '') passwordErrors.push('new_password');\n        if (confirmPassword === '' || confirmPassword !== newPassword) passwordErrors.push('confirm_password');\n    }\n\n    return (\n        <div className='row profile justify-content-center'>\n            <div className='col-12 col-md-7'>\n                <h3>profile</h3>\n                <hr/>\n            </div>\n            <div className='col-12 col-md-7'>\n                <fieldset disabled={saving}>\n                    <div className=\"accordion\" id=\"myAccordion\">\n                        <div className=\"card\">\n                            <div className=\"card-header\" id=\"headingOne\">\n                                <h2 className=\"mb-0\">\n                                    <button type=\"button\" className=\"btn btn-link\" data-toggle=\"collapse\"\n                                            data-target=\"#collapseOne\">contact info\n                                    </button>\n                                </h2>\n                            </div>\n                            <div id=\"collapseOne\" className=\"collapse show\" aria-labelledby=\"headingOne\"\n                                 data-parent=\"#myAccordion\">\n                                <div className=\"card-body\">\n                                    <div className='row'>\n                                        <div className='col-12 col-md-6'>\n                                            full name:\n                                            <input className={`form-control ${errors.indexOf('name') > -1 ? 'profile__error_border' : ''}`} value={operator.name}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, name: e.target.value})\n                                                   }\n                                            />\n                                        </div>\n                                        <div className='col-12 col-md-6 mt-1'>\n                                            contact email:\n                                            <h6>{operator.user.email}</h6>\n                                            <span className='profile__prompt_note'>for emails regarding your account. contact admin to change</span>\n                                        </div>\n                                        <div className='col-12 col-md-6 mt-1'>\n                                            phone number:\n                                            <input className={`form-control ${errors.indexOf('phone') > -1 ? 'profile__error_border' : ''}`} type='email' value={operator.phone}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, phone: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-12 col-md-6 text-center'>\n                                            <button className={`btn btn-sm btn-outline-${\n                                                updatingPassword ? 'warning' : 'info'\n                                                } mt-4`}\n                                                    onClick={() => {\n                                                        setUpdatingPassword(!updatingPassword);\n                                                    }}\n                                            >\n                                                {\n                                                    updatingPassword ? 'cancel update' : 'update password'\n                                                }\n                                            </button>\n                                        </div>\n                                        {updatingPassword &&\n                                            <div className='col-12'>\n                                                <hr/>\n                                                <h5>update password:</h5>\n                                                <div className='row'>\n                                                    <div className='col-12 col-md-6 mt-1'>\n                                                        current password:\n                                                        <input className={`form-control ${passwordErrors.indexOf('current_password') > -1 ? 'profile__error_border' : ''}`}\n                                                               type='password'\n                                                               value={currentPassword}\n                                                               onChange={(e:ChangeEvent<HTMLInputElement>) => setCurrentPassword(e.target.value)}\n                                                        />\n                                                    </div>\n                                                    <div className='d-none d-md-block col-md-6'></div>\n                                                    <div className='col-12 col-md-6 mt-1'>\n                                                        new password:\n                                                        <input className={`form-control ${passwordErrors.indexOf('new_password') > -1 ? 'profile__error_border' : ''}`}\n                                                               type='password'\n                                                               value={newPassword}\n                                                               onChange={(e:ChangeEvent<HTMLInputElement>) => setNewPassword(e.target.value)}\n                                                        />\n                                                    </div>\n                                                    <div className='col-12 col-md-6 mt-1'>\n                                                        confirm password:\n                                                        <input className={`form-control ${passwordErrors.indexOf('confirm_password') > -1 ? 'profile__error_border' : ''}`}\n                                                               type='password'\n                                                               value={confirmPassword}\n                                                               onChange={(e:ChangeEvent<HTMLInputElement>) => setConfirmPassword(e.target.value)}\n                                                        />\n                                                    </div>\n                                                    <div className='col-12 mt-1 text-center'>\n                                                        <LoadingIconButton label='save password'\n                                                                           btnClass='btn btn-outline-success'\n                                                                           onClick={savePassword}\n                                                                           busy={savingPassword}\n                                                                           disabled={passwordErrors.length > 0}\n                                                                           />\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        }\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"card\">\n                            <div className=\"card-header\" id=\"headingTwo\">\n                                <h2 className=\"mb-0\">\n                                    <button type=\"button\" className=\"btn btn-link collapsed\" data-toggle=\"collapse\"\n                                            data-target=\"#collapseTwo\">business info\n                                    </button>\n                                </h2>\n                            </div>\n                            <div id=\"collapseTwo\" className=\"collapse\" aria-labelledby=\"headingTwo\"\n                                 data-parent=\"#myAccordion\">\n                                <div className=\"card-body\">\n                                    <div className='row'>\n                                        <div className='col-12 col-md-6'>\n                                            business name:\n                                            <input className={`form-control ${errors.indexOf('page_name') > -1 ? 'profile__error_border' : ''}`} value={operator.page_name}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, page_name: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-12 col-md-6'>\n                                            time zone:\n                                            <select className={`form-control ${errors.indexOf('timezone') > -1 ? 'profile__error_border' : ''}`}\n                                                    value={operator.timezone}\n                                                    onChange={(e:ChangeEvent<HTMLSelectElement>) =>\n                                                       updateOperator({...operator, timezone: e.target.value})\n                                                   }\n                                            >\n                                                <option value={''}>choose</option>\n                                                {\n                                                    timeZones.map((zone: string) =>\n                                                        <option value={zone}>{zone}</option>\n                                                    )\n                                                }\n                                            </select>\n                                        </div>\n                                        <div className='col-12 col-md-6 mt-2'>\n                                            contact email:\n                                            <input className={`form-control ${errors.indexOf('support_email') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='email' value={operator.support_email}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, support_email: e.target.value})\n                                                   }/>\n                                            <span className='profile__prompt_note'>for messages from your customers and alerts</span>\n                                        </div>\n                                        <div className='col-12 mt-2'>\n                                            street address:\n                                            <input className={`form-control ${errors.indexOf('street_address') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='text' value={operator.street_address}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, street_address: e.target.value})\n                                                   }/>\n                                            <span className='profile__prompt_note'>this should be the location deliveries will start from</span>\n                                        </div>\n                                        <div className='col-md-3 mt-2'>\n                                            unit:\n                                            <input className={`form-control`}\n                                                   type='text' value={operator.unit}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, unit: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-md-3 mt-2'>\n                                            city:\n                                            <input className={`form-control ${errors.indexOf('city') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='text' value={operator.city}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, city: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-md-3 mt-2'>\n                                            state:\n                                            <input className={`form-control ${errors.indexOf('state') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='text' value={operator.state}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, state: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-md-3 mt-2'>\n                                            zip code:\n                                            <input className={`form-control ${errors.indexOf('zip_code') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='text' value={operator.zip_code}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, zip_code: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-12 mt-2'>\n                                            <hr/>\n                                            <h5>store front hosting</h5>\n                                            <p>\n                                                You can host the store front application on your own website or host it on our platform.\n                                                The implementation is simple HTML that requires no plugins or javascript.\n                                            </p>\n                                            <input type='checkbox' checked={operator.self_hosted}\n                                                   onChange={()=> updateOperator({...operator, self_hosted: !operator.self_hosted})}\n                                            />\n                                            &nbsp;&nbsp;&nbsp;\n                                            host on my own server\n                                        </div>\n                                        {operator.self_hosted &&\n                                            <div className='col-12 mt-2'>\n                                                <input type='text' placeholder='url to  your website'\n                                                       className={`form-control ${errors.indexOf('domain') > -1 ? 'profile__error_border' : ''}`}\n                                                       value={operator.domain}\n                                                       onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                           updateOperator({...operator, domain: e.target.value})\n                                                       }/>\n                                                <span className='profile__prompt_note'>\n                                                    this needs to be a full URL to your website. ex; <strong>http://www.example.com</strong>.\n                                                </span>\n                                                <p>\n\n                                                </p>\n                                                <a href='/static/files/implement_sample.html' target='_blank'>Click for an example on how to add the store front app to your website </a>\n                                            </div>\n                                        }\n                                        {!operator.self_hosted &&\n                                            <div className='col-12 mt-2'>\n                                                Copy and paste your HTML below:\n                                                <ul>\n                                                    <li>you need to provide hosting for your own images</li>\n                                                    <li>do not include any tags that belong in the &lt;head&gt; tag</li>\n                                                </ul>\n                                                <textarea\n                                                    className={`form-control ${errors.indexOf('storefront_template') > -1 ? 'profile__error_border' : ''}`}\n                                                    value={operator.storefront_template}\n                                                    onChange={(e:ChangeEvent<HTMLTextAreaElement>) =>\n                                                       updateOperator({...operator, storefront_template: e.target.value})\n                                                   }\n                                                ></textarea>\n                                            </div>\n\n                                        }\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"card\">\n                            <div className=\"card-header\" id=\"headingThree\">\n                                <h2 className=\"mb-0\">\n                                    <button type=\"button\" className=\"btn btn-link collapsed\" data-toggle=\"collapse\"\n                                            data-target=\"#collapseThree\">settings\n                                    </button>\n                                </h2>\n                            </div>\n                            <div id=\"collapseThree\" className=\"collapse\" aria-labelledby=\"headingThree\"\n                                 data-parent=\"#myAccordion\">\n                                <div className=\"card-body\">\n                                    <div className='row'>\n                                        <div className='col-12'>\n                                            how many <strong>hours</strong> before delivery time should ordering be disabled?\n                                            &nbsp;&nbsp;\n                                            <input type='number'\n                                                   min={1}\n                                                   className={`form-control ${errors.indexOf('ordering_cutoff_time') > -1 ? 'profile__error_border' : ''}`}\n                                                   value={operator.ordering_cutoff_time > 0 ? operator.ordering_cutoff_time : ''}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, ordering_cutoff_time: parseInt(e.target.value) || 0})\n                                                   }\n                                            />\n                                        </div>\n                                        <div className='col-12'>\n                                            how many <strong>days</strong> out should delivery windows be shown?\n                                            &nbsp;&nbsp;\n                                            <input type='number'\n                                                   min={1}\n                                                   className={`form-control ${errors.indexOf('max_future_delivery_windows_time') > -1 ? 'profile__error_border' : ''}`}\n                                                   value={operator.max_future_delivery_windows_time > 0 ? operator.max_future_delivery_windows_time : ''}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, max_future_delivery_windows_time: parseInt(e.target.value) || 0})\n                                                   }\n                                            />\n                                        </div>\n                                        <div className='col-12 mt-4'>\n                                            <hr/>\n                                        </div>\n                                        <div className='col-12 mt-2'>\n                                            how many <b>days</b> before an upcoming delivery day should the customer be notified?\n                                            &nbsp;&nbsp;\n                                            <input\n                                                type='number'\n                                                min={1}\n                                                className={`form-control ${errors.indexOf('upcoming_delivery_days_notification_time') > -1 ? 'profile__error_border' : ''}`}\n                                                value={operator.upcoming_delivery_days_notification_time > 0 ? operator.upcoming_delivery_days_notification_time : ''}\n                                                onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, upcoming_delivery_days_notification_time: parseInt(e.target.value) || 0})\n                                                   }\n                                            />\n                                        </div>\n                                        <div className='col-12 mt-2'>\n                                            <input type='checkbox' checked={operator.auto_notify_upcoming_deliveries}\n                                                   onChange={()=> updateOperator({...operator, auto_notify_upcoming_deliveries: !operator.auto_notify_upcoming_deliveries})}\n                                            />\n                                            &nbsp;&nbsp; automatically notify customers of their upcoming delivery\n                                        </div>\n                                        {operator.auto_notify_upcoming_deliveries &&\n                                            <div className='col-12 mt-2'>\n                                                how many <strong>days</strong> before a delivery should the customer be notified?\n                                                &nbsp;&nbsp;\n                                                <input\n                                                    type='number'\n                                                    min={1}\n                                                    className={`form-control ${errors.indexOf('upcoming_delivery_notification_time') > -1 ? 'profile__error_border' : ''}`}\n                                                    value={operator.upcoming_delivery_notification_time > 0 ? operator.upcoming_delivery_notification_time : ''}\n                                                    onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                           updateOperator({...operator, upcoming_delivery_notification_time: parseInt(e.target.value) || 0})\n                                                       }\n                                                />\n                                            </div>\n                                        }\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </fieldset>\n                <div className='col-12 text-right'>\n                    <LoadingIconButton\n                        key={Math.random()}\n                        busy={saving}\n                        label={'save updates'}\n                        onClick={saveUpdates}\n                        btnClass={'btn btn-outline-success'}\n                        outerClass={'mt-2'}\n                        disabled={!hasUpdates || errors.length !== 0}\n                    />\n                </div>\n            </div>\n        </div>\n    )\n}","import React, { Fragment } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\n\nimport { AuthState } from './store/auth/authReducer';\nimport { AppState, AppActions } from './store/store';\nimport { dispatchLogin } from './store/auth/authActions';\nimport authService from './services/AuthService';\nimport User from './models/User';\n\nimport './App.css';\n\nimport menuIcon from './assets/menu_icon.png';\n\nimport {Navigation} from './components/nav/Navigation';\nimport Deliveries from './components/delivery/Deliveries';\nimport DeliveryDay from './components/delivery/DeliveryDayComponent';\nimport {Menu} from './components/menu/Menu';\nimport Login from './components/authentication/Login';\nimport Orders from './components/order/Orders';\nimport Export from './components/order/Export';\nimport OrderEdit from './components/order/OrderEdit';\nimport Coupons from './components/coupon/Coupons';\nimport DeliveryDuplicate from './components/delivery/DeliveryDuplicate';\nimport CouponAdd from \"./components/coupon/CouponAdd\";\nimport OrderEmail from \"./components/order/OrderEmail\";\nimport {Mail} from \"./components/mail/Mail\";\nimport {Newsletters} from \"./components/newsletter/Newsletters\";\nimport NewsletterEdit from \"./components/newsletter/NewsletterEdit\";\nimport BrowserTool from \"./components/browser_tool/BrowserTool\";\nimport BrowserFullDay from \"./components/browser_tool/BrowserFullDay\";\nimport {DeliveryWindows} from \"./components/delivery_windows/DeliveryWindows\";\nimport {DeliveryWindowEdit} from \"./components/delivery_windows/DeliveryWindowEdit\";\nimport {Zones} from \"./components/zone/Zones\";\nimport {DeliveryPlanner} from \"./components/delivery_planner/DeliveryPlanner\";\nimport {Profile} from \"./components/profile/Profile\";\n\ninterface LinkStateProps {\n  auth: AuthState\n}\n\ninterface LinkDispatchProps {\n  login: (user: User, operator_token: string) => void\n}\n\ntype Props = LinkStateProps & LinkDispatchProps;\n\ninterface State { \n  connecting: boolean,\n  loggedIn: boolean // temporary flag while auth login is completed\n}\n\nclass App extends React.Component<Props, State> {\n\n  state = {\n    connecting: true,\n    loggedIn: false\n  }\n\n  openNav = () => {\n      // @ts-ignore\n      document.getElementById(\"mySidenav\").style.width = \"250px\";\n    }\n\n/* Set the width of the side navigation to 0 */\n closeNav = () => {\n  // @ts-ignore\n     document.getElementById(\"mySidenav\").style.width = \"0\";\n    }\n\n  public componentDidMount = () => {\n    const refresh_token: string | null = window.localStorage.getItem('refresh_token');\n    if(refresh_token !== null) {\n        authService.validateToken(refresh_token)\n              .then((user: User) => {\n                this.setState({connecting: false, loggedIn: true});\n                this.props.login(user, \"\");\n              })\n              .catch((err: any) => {\n                this.setState({connecting: false, loggedIn: false});\n              })\n    } else {\n        this.setState({connecting: false, loggedIn: false});\n    }\n  }\n\n  public render() {\n    if (this.state.connecting)\n      return <div>Connecting...</div>\n\n    if (!this.props.auth.loggedIn)\n      return <Login />\n\n    const PrivateRoute = ({component, ...rest}: any) => {\n      const routeComponent = (props: any) => (\n          this.props.auth.loggedIn || this.state.loggedIn\n              ? React.createElement(component, props)\n              : <Redirect to={{pathname: '/dashboard/login'}}/>\n      );\n      return <Route {...rest} render={routeComponent}/>;\n    };\n    \n    return (\n\t\t<div className=\"container-fluid app\">\n\t\t\t{this.props.auth.loggedIn &&\n\t\t\t\t<div id=\"mySidenav\" className=\"sidenav\">\n                    <div className=\"closebtn\" onClick={this.closeNav}>x</div>\n                    <Navigation closeNav={this.closeNav} />\n                </div>\n\t\t\t}\n\t\t\t<div className='row app_header'>\n                <div className='col-12'>\n                    <div className='app_header__title'>\n                        Pearako Operator Dashboard\n                    </div>\n                    <div className='app_header__menu_toggle' onClick={this.openNav}>\n                        <img src={menuIcon} alt='open the menu'/>\n                    </div>\n                </div>\n            </div>\n\t\t\t<div className=\"row app__page\">\n\t\t\t\t<div className=\"col-12 mt-2\">\n\t\t\t\t\t<Switch>\n                        <PrivateRoute path='/dashboard/browser/day/:targetDate' component={BrowserFullDay} />\n                        <PrivateRoute path='/dashboard/browser/:month/:year' component={BrowserTool} />\n                        <PrivateRoute path='/dashboard/browser' component={BrowserTool} />\n                        <PrivateRoute path=\"/dashboard/coupon/add\" component={CouponAdd}/>\n                        <PrivateRoute path=\"/dashboard/coupons\" component={Coupons} />\n                        <PrivateRoute path=\"/dashboard/deliveries\" component={Deliveries} />\n                        <PrivateRoute path=\"/dashboard/delivery/edit/:id\" component={DeliveryDay} />\n                        <PrivateRoute path=\"/dashboard/delivery/duplicate/:id\" component={DeliveryDuplicate} />\n                        <PrivateRoute path='/dashboard/delivery_window/edit/:id' component={DeliveryWindowEdit} />\n                        <PrivateRoute path='/dashboard/delivery_window/add' component={DeliveryWindowEdit} />\n                        <PrivateRoute path=\"/dashboard/delivery_window\" component={DeliveryWindows} />\n                        <PrivateRoute path='/dashboard/delivery_planner/:delivery_window/:target_date' component={DeliveryPlanner} />\n                        <PrivateRoute path=\"/dashboard/mail\" component={Mail} />\n                        <PrivateRoute path=\"/dashboard/menu\" component={Menu} />\n                        <PrivateRoute path='/dashboard/newsletter/edit/:id' component={NewsletterEdit} />\n                        <PrivateRoute path='/dashboard/newsletter' component={Newsletters} />\n                        <PrivateRoute path=\"/dashboard/orders/export\" component={Export} />\n                        <PrivateRoute path=\"/dashboard/orders/edit/:id\" component={OrderEdit} />\n                        <PrivateRoute path='/dashboard/order/mail/:id' component={OrderEmail} />\n                        <PrivateRoute path=\"/dashboard/orders\" component={Orders} />\n                        <PrivateRoute path='/dashboard/profile' component={Profile} />\n                        <PrivateRoute path='/dashboard/zone' component={Zones} />\n                        <PrivateRoute path='/dashboard/' component={BrowserTool} />\n                        <PrivateRoute path='' component={BrowserTool} />\n                        <Route path=\"/dashboard/login\" component={Login} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state: AppState): LinkStateProps => ({auth: state.authReducer});\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>): LinkDispatchProps => ({\n  login: bindActionCreators(dispatchLogin, dispatch)\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport { store } from './store/store';\nimport { Provider } from 'react-redux';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAlCAYAAAAA7LqSAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TRSkVETuIOGSoThZERTpqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8AoVFhmtU1AWi6baaTCTGbWxV7XhGCgAHEEZeZZcxJUgq+4+seAb7exXiW/7k/R5+atxgQEIlnmWHaxBvEM5u2wXmfOMJKskp8Tjxu0gWJH7muePzGueiywDMjZiY9TxwhFosdrHQwK5ka8TRxVNV0yheyHquctzhrlRpr3ZO/MJzXV5a5TnMESSxiCRJEKKihjApsxGjVSbGQpv2Ej3/Y9UvkUshVBiPHAqrQILt+8D/43a1VmJr0ksIJoPvFcT5GgZ5doFl3nO9jx2meAMFn4Epv+6sNIP5Jer2tRY+A/m3g4rqtKXvA5Q4w9GTIpuxKQZpCoQC8n9E35YDBWyC05vXW2sfpA5ChrlI3wMEhMFak7HWfd/d29vbvmVZ/P8oIcso1e0lyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AoCEgIouZmeeAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAANpSURBVFjD7ZnPT9tmGMc/TuIkDhVZiJuO9IDQ1k5Eg1A6pA24LlKlaodJ44A45gA5jYMPHLnzD3DgHxhoGz8ORBtElZA6YBtj2qbRaQKBQEmFtySFhMSxvQOvW4q6uy31e/TJX/t9nu/nfR6JV5IAGYgAYcAnnrlJNmABl0ANMMSzly/qA+LAA6AfuAMEXGqkBZSAX4BdQBfmkIDbsixnC4XCTqVSqVuWZbtVl5eX5v7+vj4+Pv49kAVuOx9cBjKFQmHH9pBKpVKjs7MzD2QA2Qe0Af0DAwMf4iElEomgpmk9QBpo8wFBIB4Oh4N4TKqqKoAKBH2i8isnJycvvGTCNE3W19drQBkw/KLib/n9/ntDQ0N3Q6GQz+0mbNtmeXn5fHp6+g/gW+BPSVT8u8BoJpP5IpvN3o/H42EXtl4AGo2GtbGxcTE7O/s3sAh8BRSdl/ULMx8DD0WOyC79IYbIkZ+AH4AiYEo3kj0EREW6+91aHiLVK0DDSfa3cptuHq0gcAtQXH606sA50HwTNCaAQUVRHqiq6tpir9Vqhq7rJQGMO8Dz69B4R1XV3NbW1q/1et1wM2OZpmkdHBxUcrncEyAnOqyEOE6PNjc3d70EjbquN7u7u9eBRw6itAHpvr6+Hi8Vd0dHhzw1NXVfQGPEgcZYKBSSvdap2tvbw0DM+SNN4N+jo6OKl0y0Wi3y+fwF8A/QdKAxYhjG+8PDw3cVRfG73YRpmiwsLFRnZmZ+B74BnjnQmAA+HxwcHJ2cnPwgFospboXGVqtlr62tnc/Pz/8FLABfA89v5shHwIBHoPFn4EcnR/4v2SPCnBtlCWh8Ldnfyu3QGAbaPXIfqYqJ42vQ6NwQP0mn0w9HRkaSkiS5ctJ4fHxsLC0tnYpif+rcEB0zyVQqNbW3t7dvGIbpds46PT290DTtKfAlkLwOjY+3t7d/8xI0lstlo7e39wnw+Do09qVSqXteKu5oNBqYmJh4D+h1Jo0yEA0EAgGvdapIJBIC3kHMfpvA2eHhYdlLJgzDsFdWVs6BM+Hhaho/Njb2XbFYbHihPprNpjU3N1cG8sCngOxAowp8lkwmRzVN6+nq6mpzKzRWq1VrdXX1xeLi4jMxZVwGzm5urPq52lp5ARp3udpa6W+CxoDoYl7YIV5wtYazAf4DNE+hw/CkaMsAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/loader.9a2c42ba.gif\";","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}