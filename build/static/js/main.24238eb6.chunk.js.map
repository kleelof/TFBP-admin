{"version":3,"sources":["assets/print_icon.png","assets/menu_icon.png","assets/loader.gif","assets/daisy_logo.png","store/store.ts","models/User.ts","store/auth/authReducer.ts","store/helpersReducer.ts","store/operatorReducer.ts","store/auth/authActions.ts","config.js","services/axiosApi.ts","services/Service.ts","services/AuthService.ts","models/ModelBase.ts","models/OperatorModel.ts","components/nav/Navigation.tsx","services/DeliveryDayService.ts","models/DeliveryDayModel.ts","helpers/MomentHelper.ts","helpers/helpers.ts","components/delivery/DeliveryDays.tsx","components/widgets/loading_icon_button/LoadingIconButton.tsx","components/overlays/LoadingOverlay.tsx","components/widgets/page_selector/PageSelector.tsx","components/delivery/Deliveries.tsx","services/MenuItemService.ts","services/DeliveryDayItemService.ts","components/widgets/inputWidget/InputWidget.tsx","components/menu/MenuItems.tsx","dto/PagedResultsDTO.ts","components/widgets/searchWidget/SearchWidgetDefaultDisplay.tsx","components/widgets/searchWidget/SearchWidget.tsx","models/MenuItemModel.ts","models/DeliveryDayItemModel.ts","components/delivery/DeliveryMenuItemOptionsComponent.tsx","components/delivery/DeliveryDayItemComponent.tsx","services/APIActionService.ts","components/widgets/email_widget/EmailWidget.tsx","components/delivery/DeliveryDayComponent.tsx","components/menu/NewMenuItem.tsx","components/menu/MenuItemEdit.tsx","components/widgets/imageUploader/ImageUploader.tsx","components/menu/RecipeAndIngredientSearcher.tsx","dto/AttachComponentDTO.ts","models/RecipeIngredientModel.ts","components/menu/MenuComponentAdd.tsx","helpers/RecipeHelper.ts","components/menu/MenuComponentComponent.tsx","components/widgets/print_button/PrintButton.tsx","helpers/PrintHelper.ts","components/menu/MenuComponents.tsx","services/MenuCategoryService.ts","components/menu/Menu.tsx","components/authentication/Login.tsx","services/OrderService.ts","components/order/Orders.tsx","services/OrderItemService.ts","components/order/Export.tsx","models/OrderModel.ts","components/order/OrderEmail.tsx","components/order/OrderEdit.tsx","models/CouponModel.ts","services/CouponService.ts","components/coupon/CouponComponent.tsx","components/coupon/Coupons.tsx","components/delivery/DeliveryDuplicate.tsx","components/coupon/CouponAdd.tsx","models/MailingListModel.ts","services/MailingListService.ts","components/mail/MailingListEntry.tsx","components/mail/MailingList.tsx","services/MailTemplateService.ts","models/MailTemplate.ts","components/mail/MailTemplateComponent.tsx","components/mail/MailTemplates.tsx","components/mail/MailMassMailer.tsx","components/mail/Mail.tsx","services/NewsletterService.ts","components/newsletter/NewslettersNewsletter.tsx","models/Newsletter.ts","components/newsletter/NewsletterAdd.tsx","components/newsletter/Newsletters.tsx","components/newsletter/NewsletterEdit.tsx","constants.ts","services/DeliveryWindowService.ts","components/browser_tool/BrowserDay.tsx","components/browser_tool/BrowserTool.tsx","components/browser_tool/BrowserWindowTools.tsx","components/browser_tool/BrowserFullDay.tsx","models/DeliveryWindowModel.ts","components/delivery_windows/DeliveryWindowsWindow.tsx","components/delivery_windows/DeliveryWindows.tsx","services/ZoneService.ts","components/delivery_windows/DeliveryWindowEdit.tsx","models/ZoneModel.ts","models/ZipcodeModel.ts","components/zone/ZoneCode.tsx","services/ZipService.ts","components/zone/ZoneTool.tsx","components/zone/Zones.tsx","models/RouteModel.ts","services/RouteStopService.ts","components/delivery_planner/RouteOrganizerEntry.tsx","services/RouteService.ts","components/delivery_planner/RouteOrganizer.tsx","components/delivery_planner/DeliveryPlanner.tsx","services/OperatorService.ts","components/profile/Profile.tsx","services/RecipeService.ts","models/RecipeModel.ts","components/recipe/Recipes.tsx","services/IngredientService.ts","models/IngredientModel.ts","components/ingredient/Ingredients.tsx","services/AllergenService.ts","components/ingredient/IngredientEdit.tsx","services/RecipeIngredientService.ts","components/recipe/RecipeIngredientPanel.tsx","components/recipe/RecipePrintout.tsx","components/recipe/RecipeEdit.tsx","services/RecipeNoteService.ts","models/RecipeNoteModel.ts","components/recipe/RecipeNotes.tsx","components/restaurant_menu_manager/RestaurantMenuManager.tsx","components/restaurant_delivery/RestaurantDelivery.tsx","components/restaurant_dashboard/RestaurantDashboardPanel.tsx","components/create_order/RouteOrder.tsx","components/restaurant_dashboard/RestaurantDashboard.tsx","components/create_order/CreateOrder.tsx","models/MenuCategoryModel.ts","components/restaurant_menu_manager/RestaurantMenuItem.tsx","components/restaurant_menu_manager/RestaurantMenuCategory.tsx","components/restaurant_menu_manager/RestaurantMenuEdit.tsx","components/restaurant_menu_manager/RestaurantMenuItems.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","actions","User","id","username","email","defaultState","loggedIn","user","operator_token","overlayComponent","closeCallback","selfClose","addOverlay","component","type","SET_OVERLAY","dispatchAddOverlay","dispatch","settings","dispatchUpdateOperatorSettings","OPERATOR_SETTINGS","updateOperatorSettings","rootReducer","combineReducers","authReducer","state","action","LOGIN","LOGOUT","window","localStorage","removeItem","operatorReducer","helpersReducer","SET_LOADING_OVERLAY","store","createStore","applyMiddleware","thunk","dispatchLogin","login","config","API_URL","OPERATOR_TOKEN","RESULTS_PER_PAGE","UPLOADS_PATH","axiosInstance","axios","create","baseURL","timeout","headers","getItem","interceptors","response","use","a","error","originalRequest","status","refresh_token","post","refresh","setItem","data","access","defaults","console","log","Promise","reject","Service","_service_url","appName","view","buildSearchQuery","search","searchField","page","params","pagedSearchResults","pageNumber","searchColumn","_get","path","resolve","get","then","resp","catch","err","content","patch","delete","this","DTO","useFormData","multipartFormPost","_post","_delete","querizeObject","date","startDate","endDate","formData","FormData","Object","keys","forEach","key","append","_patch","object","query","map","join","length","multipartFormUpdate","authenticate","password","logout","viewPath","updatePassword","current_password","new_password","user_id","validateToken","refreshToken","ModelBase","created_at","OPERATOR_TYPES","Operator","token","is_active","name","phone","page_name","page_slug","street_address","unit","city","zip_code","self_hosted","domain","support_email","timezone","ordering_cutoff_time","upcoming_delivery_notification_time","upcoming_delivery_days_notification_time","auto_notify_upcoming_deliveries","storefront_template","max_future_delivery_windows_time","delivery_fee","free_delivery_minimum","tax_rate","tax_tips","tax_delivery_fee","allow_tipping","customer_must_be_present","delivery_minimum","Navigation","props","useState","doLogin","showDropdown","setShowDropdown","useDispatch","history","useHistory","isRestaurant","useSelector","navigateToPage","pathname","closeNav","push","to","className","onClick","attachCategory","deliveryDay","category","attachDeliveryWindow","day","detachDeliveryWindow","duplicateDeliveryDay","start_date","end_date","DeliveryDay","day_items","is_perpetual","categories","asDateSlug","useUTC","moment","utc","format","asFullDate","asFullDateTime","dateTime","asShortDate","asShortDateTime","days","months","spicy","proteins","convertToTwelveHour","twentyFourHourTime","parts","split","hour","parseInt","amPm","toString","extractCartItemDescription","cartItem","description","menu_item","protein","formatDeliveryWindow","excludeDate","windowText","momentHelper","start_time","end_time","sortOrderItemsByDate","orderItems","sortedItems","item","cart_item","delivery_date","sortDeliveryDayItemsByCategory","items","en","ap","si","de","groupMenuItemsByCategory","sort","groupedItems","compareMenuItemsByName","ia","ib","DeliveryDays","style","whiteSpace","helpers","src","image","alt","LoadingIconButton","disabled","undefined","outerClass","disabledBtnClass","btnClass","label","busy","LoadingOverlay","loadingAnimation","React","Component","PageSelector","numPages","Math","ceil","numItems","getRangeOfChoices","start","end","selected","choices","x","text","currentPage","unshift","choice","gotoPage","choiceClicked","Deliveries","loading","deliveryDays","creatingDeliveryDay","editId","paginationCount","componentDidMount","changePages","setState","deliveryDayService","dto","results","count","createDeliveryDay","alert","add","updateData","e","target","value","deliveries","b","onChange","attachComponent","menuItem","deleteComponent","componentId","isAddon","generatePlatingSheet","InputWidget","timer","lastSavedValue","handleOnKeyPress","keyCode","sendUpdate","updateValue","resetTimer","defaultUpdateValue","initialValue","onUpdate","clearInterval","clearTimeout","setTimeout","onBlur","onKeyDown","required","placeholder","autoComplete","getDerivedStateFromProps","ItemsModes","PagedResultsDTO","next","previous","SearchWidgetDefaultDisplay","itemSelected","SearchWidget","showChoices","currentValue","doSearch","serviceFunction","random","SPICINESS_CHOICES","MenuItem","price","allergens","active","components","add_ons","spiciness","note","DeliveryDayItemDTO","delivery_day","sold_out","delivery_category","DeliveryDayItem","getDTOxxx","DeliveryMenuItemOptions","remove","confirm","saving","deliveryDayItemService","deliveryDayItem","refreshItems","save","update","parseFloat","checked","DeliveryDayItemComponent","getTimeZones","searchRecipesAndIngredients","search_pattern","sendWeeklyEmails","sendSupportEmail","subject","body","order","payload","sendMassMail","EmailWidget","message","setMessage","sending","setSending","sendEmail","send_email","apiActionsService","prompt","emails","finished","DeliveryDayComponent","menuItems","deliveryWindows","deleting","match","refreshDay","searchPattern","callback","menuItemService","email_type","entity_id","NewMenuItem","setName","setCategory","open","setOpen","defaultValue","newMenuItem","ItemModes","MenuItems","useParams","setDTO","setCurrentPage","useEffect","loadPage","menuType","toLowerCase","ImageUploader","fileElement","reloadAttempted","imageURL","loadImage","componentDidUpdate","clearImage","preventDefault","hasImage","newImageLoaded","url","toDataURL","document","getElementById","loadingImage","onInputChanged","files","readFile","file","size","maxSizeInMb","maximumSizeInMb","result","currentImage","dataURL","click","reader","FileReader","onload","replace","readAsDataURL","xhr","XMLHttpRequest","onloadend","responseType","send","ref","input","accept","allowedFileTypes","uploadPrompt","RecipeAndIngredientSearcher","AttachComponentDTO","item_type","item_id","component_quantity","component_unit","is_add_on","add_on_name","add_on_price","INGREDIENT_UNIT","RecipeIngredient","quantity","yld","ingredient","recipe","scale","MenuComponentAdd","selectedItem","setSelectedItem","isAddOn","setIsAddOn","addOnPrice","setAddOnPrice","addOnName","setAddOnName","setQuantity","setUnit","setSaving","nameOnly","setNameOnly","canSave","menuItemComponent","addComponent","index","createStringListOfAllergensFromIngredient","list","allergen","extractAllergensFromMenuItemComponent","ingredients","indexOf","scaleRecipeIngredient","servings","scaleTo","rawValue","toFixed","MenuComponentComponent","recipeHelper","PrintButton","printIcon","download","fileName","element","createElement","setAttribute","encodeURIComponent","display","appendChild","removeChild","print","MenuComponents","setComponents","addOns","setAddOns","adding","setAdding","documentToPrint","filter","c","printHelper","addOn","updateIndexes","indexes","MenuItemEdit","temporaryImage","loaded","viewingServings","hasBeenUpdated","menuCategories","allergenSelected","checkboxesToString","operator","menuCategoryService","code","splice","final","substr","onNewImageLoaded","proteinSelected","menuItemDTO","updateMenuItem","updateOptions","goBack","rows","connect","Menu","MenuEdit","Login","loggingIn","authService","auth","href","bindActionCreators","getCompletedOrders","Orders","orders","orderStatuses","changePage","orderService","deliveryDates","orderItem","contact_name","public_id","phone_number","order_status","getCompleted","Export","pullDate","pullType","loadData","loadOrderItems","loadOrders","orderItemService","fileContent","zip","bb","Blob","URL","createObjectURL","DeliveryTagsDisplay","notes","PrepDisplay","condensedList","dish","spicy_text","dishCount","ORDER_TYPES","Order","uuid","nonce","tip","square_payment","order_type","OrderDTO","cart_items","coupon","OrderEmail","submit","submitting","adminService","include_order","toggleIncludeOrder","OrderEdit","updating","updatesPending","returnToOrders","saveUpdates","orderedItems","htmlFor","JSON","stringify","Coupon","mode","calculation_type","expire","start_value","current_value","remaining_uses","expire_date","Date","setDate","getDate","CouponComponent","setCoupon","deactivating","setDeactivating","couponService","couponUpdated","Coupons","coupons","addingCoupon","addCoupon","DeliveryDuplicate","duplicating","datesAreValid","duplicate","CouponAdd","cancel","finally","MailingListModel","addUnserivcedZipcode","confirmZipCode","zipCode","MailingListEntry","checkDTO","setCode","setActive","setEmail","mailingListService","MailingList","addNewEntry","newEmail","newCode","entry","mailingList","get_template_by_slug","slug","MailTemplate","options","MailTemplateComponent","template","templateSlug","mailTemplateService","originalText","MailTemplates","MailMassMailer","who","deliveryWindowId","deliveryDate","includeSamples","goodToSend","sendMail","confirmMessage","Mail","release","newsletterId","sendEmailSample","NewslettersNewsletter","newsletter","title","release_date","Newsletter","NewsletterAdd","creating","newsletterService","newsLetter","withRouter","Newsletters","newsLetters","setNewsLetters","setLoading","newsletters","NewsletterEdit","releasing","saveNewsletter","nl","sendTestEmail","sendingEmail","saveDisabled","titlePresent","contentPresent","pythonDays","activityTypes","states","generateProductionBoard","windowId","generateDeliveryTags","generateOrdersTSV","generateShoppingList","generateOrderingSpreadsheet","listWithCounts","targetDate","retrieveOrders","retrieveRoute","addZone","zoneId","removeZone","BrowserDay","countsData","setCountsData","deliveryWindowService","toISOString","slice","today","hasWindows","deliveryCount","order_count","dish_count","BrowserTool","month","getMonth","year","getFullYear","viewDay","changeMonth","week","daysInMonth","dateNdx","getDay","weeks","BrowserWindowTools","downloadDeliveryTags","pdf","downloadOrdersSpreadsheet","tsv","downloadPrepBoard","downloadShoppingList","downloadOrderingSheet","emailingComplete","y","printDocument","showLoading","target_date","BrowserFullDay","counts","toUTCString","DELIVERY_WINDOW_TYPES","DeliveryWindow","zones","DeliveryWindowsWindow","runText","DeliveryWindows","setShowLoading","setDeliveryWindows","newWindow","setNewWindow","addingWindow","setAddingWindow","searchZipDb","import_zip_codes","zone","search_by","DeliveryWindowEdit","deliveryWindow","setWindow","setDisabled","setZones","selectedZone","setSelectedZone","setDeleting","setSendEmail","zoneService","all","values","Zone","zip_codes","jdel_min","jdel_del_charge","jdel_free_del_min","jdel_tax","fdel_min","fdel_del_charge","fdel_free_del_min","fdel_tax","ship_min","ship_del_charge","ship_free_del_min","ship_tax","Zipcode","ZoneCode","removeCode","ZoneTool","codes","setCodes","updateNewCode","searchCity","addState","updateAddState","addingCode","setAddingCode","setUpdating","tZone","setTZone","setZone","zipService","tcode","addCode","cs","hasUnsavedChanges","deleteZone","z","Zones","newZone","setNewZone","Route","delivery_window","stops","route_status","started_at","finished_at","at_stop","stop","alertDelivery","delivered","en_route","RouteOrganizerEntry","setStop","loadButtonActive","setLoadButtonActive","openMap","current_index","route","eta","subtract","stop_status","MomentHelper","delivered_at","routeStopService","s","canMoveUp","moveStop","canMoveDown","commitRoute","completeRoute","startRoute","updateStopOrder","stopIds","stop_ids","RouteOrganizer","loadingButtonInUse","routeService","extractStopsFromRoute","moveEntry","direction","currentNdx","routeUpdated","optimize","saveChanges","updateRoute","canOptimize","DeliveryPlanner","setRoute","firstBuild","handleApiLoaded","imap","imaps","bootstrapURLKeys","center","lat","lng","zoom","yesIWantToUseGoogleMapApiInternals","maps","zoomControlOptions","position","ControlPosition","RIGHT_CENTER","ZoomControlStyle","SMALL","mapTypeControlOptions","TOP_RIGHT","mapTypeControl","onGoogleApiLoaded","leg","parse","end_location","Marker","fontSize","color","fontWeight","getMe","get_settings","Profile","setOperator","savedOperator","setSavedOperator","errors","setErrors","hasUpdates","setHasUpdates","timeZones","setTimeZones","updatingPassword","setUpdatingPassword","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","savingPassword","setSavingPassword","operatorService","actionsService","updateOperator","checkForUpdates","updated","op","field","passwordErrors","data-toggle","data-target","aria-labelledby","data-parent","colSpan","min","step","max","attachIngredient","recipeIngredient","Recipe","instructions","is_vegan","Recipes","newRecipe","setNewRecipe","addingRecipe","setAddingRecipe","recipeService","Ingredient","allergens_ids","Ingredients","addingIngredient","setAddingIngredient","newIngredient","setNewIngredient","addIngredient","edit","ingredientService","IngredientEdit","setAllergens","setIngredient","setUpdated","allergenService","al","RecipeIngredientPanel","setRecipeIngredient","scale_to","RecipeHelper","recipeIngredientService","rec","removeIngredient","yield","RecipePrintout","RecipeEdit","setRecipe","qty","setQty","isNewIngredient","setIsNewIngredient","creatingIngredient","setCreatingIngredient","showScaling","setShowScaling","setScale","setDocumentToPrint","ing","canAddIngredient","r","searchResult","RecipeNote","RecipeNotes","showAdd","setShowAdd","newNote","setNewNote","recipeNoteService","RestaurantMenuManager","setDeliveryDays","setPaginationCount","updateStartDate","updateEndDate","setCreatingDeliveryDay","isPerpetual","setIsPerpetual","newMenuName","updateNewMenuName","RestaurantDelivery","creatingWindow","setCreatingWindow","windowTypes","sortedWindows","deleteWindow","delWindows","dw","createWindow","RestaurantDashboardPanel","orders_type","RouteOrder","setMode","updateZip","checkingZip","setCheckingZip","updateEmail","savingEmail","setSavingEmail","checkZip","deliveryChoice","gotoCreateOrder","closeMe","RestaurantDashboard","CreateOrder","MenuCategory","enabled","RestaurantMenuItem","setCategoryItem","mi","categoryItemUpdated","deleteMenuItem","RestaurantMenuCategory","creatingMenuItem","setCreatingMenuItem","setMenuItem","completeCreateMenuItem","isNew","delivery_day_items","deleteDeliveryDayItem","i","hasSoldOut","menu_category","move","categorySelected","isOpen","RestaurantMenuEdit","newCategory","setNewCategory","addingCategory","setAddingCategory","setCategories","openCategory","setOpenCategory","updateDeliveryDay","savingDeliveryDay","setSavingDeliveryDay","moveCategory","cats","cat","submitUpdatedIndexes","delDay","RestaurantMenuItems","isLoading","App","connecting","openNav","width","getSettings","PrivateRoute","rest","render","logo","menuIcon","setOverlay","stopPropagation","Boolean","location","hostname","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.24238eb6.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAmCAIAAAAwfe4wAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bpVIrDnYQcchQnSzUD8RRq1CECqFWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIk6OToouU+L+k0CLGg+N+vLv3uHsH+BsVpppdcUDVLCOdTAjZ3KoQfEUIvQhjHHGJmfqcKKbgOb7u4ePrXYxneZ/7c/QpeZMBPoF4lumGRbxBPL1p6Zz3iSOsJCnE58RjBl2Q+JHrsstvnIsO+3lmxMik54kjxEKxg+UOZiVDJZ4ijiqqRvn+rMsK5y3OaqXGWvfkLwzntZVlrtMcRhKLWIIIATJqKKMCCzFaNVJMpGk/4eEfcvwiuWRylcHIsYAqVEiOH/wPfndrFiYn3KRwAuh+se2PESC4CzTrtv19bNvNEyDwDFxpbX+1Acx8kl5va9EjoH8buLhua/IecLkDDD7pkiE5UoCmv1AA3s/om3LAwC0QWnN7a+3j9AHIUFepG+DgEBgtUva6x7t7Onv790yrvx+uvXK/9Jx3GQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+QKCw07G2K/2RMAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACi0lEQVRYw+1YP0g6cRR/p99NQ87kOIQKdLipP0M3NN1wg4IN1RI0diAJQoJBkw0V1NAQRbjoctEsRHAqODRfQ9RiDacXKKUIB0YmKNdwcTX8PPwdlxr0md6X7+PzPt/v473v44upqgo9cHNzk8vlwAoEAoH5+fme22pvCIIAFkEQBINANhgBoH6c9vb2FhcXTbBfXV0lEglrRExNTc3NzZkQcX9/34/bSKTjT8RIiUB6t6jVatVqtdPp6HuPj4+aIUmSKIom2CVJ0qnGx8e/oiLk9XoJgsAw7DO8oigHBwcOh2OQp3c4HIeHh4qiqKoKrVYrHA4PKxEbGxvv7+9YNpsNBoMAMDY2xnHc90v7OTQajVQq9fr6CgD5fB7i8bje3dQB4vLyUou7vb1te3l50RbT09ODTMTMzIxmVCqVf5fo29tbu93+URGfddGrTzw8PCwsLIRCoefn56G9oqIo3t3dAUCxWCRJcjgiGIZZXV3FcXx2dnZoNzExMXFxcYFhmM1mG5oIALDb7SM0WRmMwaZr4f9EXF9fp9NpS0RwHMcwjBkRrVbr/PzcEhFra2u/ZJ4wxtHR0fLysgn2TCaztbVljQiCIHw+nwkRBEH0Nd7hOK5Z5XJ5kCkolUqa4Xa7Ecuyp6enALC+vh6LxVwul+6nNW9LUCgU6vW6vlQU5fj4WLNZloVms7m0tGRMwfO8uaGB53lj5pWVlWazaXM6nclkMhKJDL4ootHo2dmZ0+lEAECS5MnJyebm5tPTU7fb/f6c7uzsWBJvd3eXpunvz8Lk5KTf70cIfVUHQoiiKIqifujQNE1rk+wvb1ayLN/e3ppgl2W5L7+/n5o+0uHxePb39y0J4/F4DHY/AAhV6BpaF2GMAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAlCAYAAAAA7LqSAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TRSkVETuIOGSoThZERTpqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8AoVFhmtU1AWi6baaTCTGbWxV7XhGCgAHEEZeZZcxJUgq+4+seAb7exXiW/7k/R5+atxgQEIlnmWHaxBvEM5u2wXmfOMJKskp8Tjxu0gWJH7muePzGueiywDMjZiY9TxwhFosdrHQwK5ka8TRxVNV0yheyHquctzhrlRpr3ZO/MJzXV5a5TnMESSxiCRJEKKihjApsxGjVSbGQpv2Ej3/Y9UvkUshVBiPHAqrQILt+8D/43a1VmJr0ksIJoPvFcT5GgZ5doFl3nO9jx2meAMFn4Epv+6sNIP5Jer2tRY+A/m3g4rqtKXvA5Q4w9GTIpuxKQZpCoQC8n9E35YDBWyC05vXW2sfpA5ChrlI3wMEhMFak7HWfd/d29vbvmVZ/P8oIcso1e0lyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AoCEgIouZmeeAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAANpSURBVFjD7ZnPT9tmGMc/TuIkDhVZiJuO9IDQ1k5Eg1A6pA24LlKlaodJ44A45gA5jYMPHLnzD3DgHxhoGz8ORBtElZA6YBtj2qbRaQKBQEmFtySFhMSxvQOvW4q6uy31e/TJX/t9nu/nfR6JV5IAGYgAYcAnnrlJNmABl0ANMMSzly/qA+LAA6AfuAMEXGqkBZSAX4BdQBfmkIDbsixnC4XCTqVSqVuWZbtVl5eX5v7+vj4+Pv49kAVuOx9cBjKFQmHH9pBKpVKjs7MzD2QA2Qe0Af0DAwMf4iElEomgpmk9QBpo8wFBIB4Oh4N4TKqqKoAKBH2i8isnJycvvGTCNE3W19drQBkw/KLib/n9/ntDQ0N3Q6GQz+0mbNtmeXn5fHp6+g/gW+BPSVT8u8BoJpP5IpvN3o/H42EXtl4AGo2GtbGxcTE7O/s3sAh8BRSdl/ULMx8DD0WOyC79IYbIkZ+AH4AiYEo3kj0EREW6+91aHiLVK0DDSfa3cptuHq0gcAtQXH606sA50HwTNCaAQUVRHqiq6tpir9Vqhq7rJQGMO8Dz69B4R1XV3NbW1q/1et1wM2OZpmkdHBxUcrncEyAnOqyEOE6PNjc3d70EjbquN7u7u9eBRw6itAHpvr6+Hi8Vd0dHhzw1NXVfQGPEgcZYKBSSvdap2tvbw0DM+SNN4N+jo6OKl0y0Wi3y+fwF8A/QdKAxYhjG+8PDw3cVRfG73YRpmiwsLFRnZmZ+B74BnjnQmAA+HxwcHJ2cnPwgFospboXGVqtlr62tnc/Pz/8FLABfA89v5shHwIBHoPFn4EcnR/4v2SPCnBtlCWh8Ldnfyu3QGAbaPXIfqYqJ42vQ6NwQP0mn0w9HRkaSkiS5ctJ4fHxsLC0tnYpif+rcEB0zyVQqNbW3t7dvGIbpds46PT290DTtKfAlkLwOjY+3t7d/8xI0lstlo7e39wnw+Do09qVSqXteKu5oNBqYmJh4D+h1Jo0yEA0EAgGvdapIJBIC3kHMfpvA2eHhYdlLJgzDsFdWVs6BM+Hhaho/Njb2XbFYbHihPprNpjU3N1cG8sCngOxAowp8lkwmRzVN6+nq6mpzKzRWq1VrdXX1xeLi4jMxZVwGzm5urPq52lp5ARp3udpa6W+CxoDoYl7YIV5wtYazAf4DNE+hw/CkaMsAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/loader.9a2c42ba.gif\";","module.exports = __webpack_public_path__ + \"static/media/daisy_logo.8ab65235.png\";","import { createStore, combineReducers, applyMiddleware } from \"redux\";\nimport thunk, { ThunkMiddleware } from \"redux-thunk\";\n\nimport { AuthActionTypes } from './auth/authActions';\nimport { authReducer } from './auth/authReducer';\nimport {HelpersActionTypes, helpersReducer} from \"./helpersReducer\";\nimport { OperatorActionTypes, operatorReducer } from \"./operatorReducer\";\n\nexport enum actions {\n    LOGIN,\n    LOGOUT,\n    OPERATOR_SETTINGS,\n    SET_OVERLAY,\n    SET_LOADING_OVERLAY\n};\n\nexport type AppActions = AuthActionTypes | OperatorActionTypes | HelpersActionTypes;\n\nexport const rootReducer = combineReducers({authReducer, operatorReducer, helpersReducer});\n\nexport type AppState = ReturnType<typeof rootReducer>; \n\nexport const store = createStore(\n    rootReducer,\n    applyMiddleware( \n        thunk as ThunkMiddleware<AppState, AppActions>)\n)","export default class User {\n\n    id!: number;\n    username!: string;\n    email!: string;\n}","import { AuthActionTypes } from \"./authActions\";\nimport User from \"../../models/User\";\nimport { actions } from \"../store\";\n\nexport interface AuthState {\n    loggedIn: boolean\n    user: User,\n    operator_token: string\n}\n\nconst defaultState: AuthState = {\n    loggedIn: false,\n    user: new User(),\n    operator_token: ''\n}\n\nconst authReducer = (\n    state = defaultState,\n    action: AuthActionTypes\n): AuthState => {\n    switch(action.type) {\n        case actions.LOGIN:\n            state.user = action.user\n            state.operator_token = action.operator_token\n            state.loggedIn = true;\n            return {...state};\n    \n        case actions.LOGOUT:\n            state.loggedIn = false;\n            window.localStorage.removeItem('access_token');\n            window.localStorage.removeItem('refresh_token');\n            return {...state};\n    }\n    return state;\n}\n\nexport { authReducer };","import {Dispatch} from 'react';\nimport {actions} from './store';\nimport OperatorSettingsDTO from \"../dto/OperatorSettingsDTO\";\n\nexport interface HelpersState {\n    overlayComponent?: any,\n    closeCallback?: any,\n    selfClose?: boolean\n}\nconst defaultState: HelpersState = {\n    overlayComponent: null,\n    closeCallback: null,\n    selfClose: false\n}\n\ninterface AddOverlay {\n    type: typeof actions.SET_OVERLAY,\n    component?: any,\n    closeCallback?: any,\n    selfClose?: boolean\n};\nexport const addOverlay = (component?: any, selfClose?: boolean, closeCallback?: any): HelpersActionTypes => ({type: actions.SET_OVERLAY, component, selfClose, closeCallback});\nexport const dispatchAddOverlay = (component?: any, selfClose?: boolean, closeCallback?: any) => {\n    return (dispatch:Dispatch<HelpersActionTypes>) => {\n        dispatch(addOverlay(component, selfClose, closeCallback));\n    }\n}\n\ninterface AddLoaderOverlay {\n    type: typeof actions.SET_LOADING_OVERLAY,\n    displayLoadingOverlay: boolean\n}\nexport const addLoaderOverlay = (displayLoadingOverlay: boolean): HelpersActionTypes => \n        ({type: actions.SET_LOADING_OVERLAY, displayLoadingOverlay});\nexport const dispatchAddLoaderOverlay = (displayLoadingOverlay: boolean) => {\n    return (dispatch: Dispatch<HelpersActionTypes>) => {\n        dispatch(addLoaderOverlay(displayLoadingOverlay))\n    }\n}\n\nexport type HelpersActionTypes = AddOverlay | AddLoaderOverlay;\n\nconst helpersReducer = ( state = defaultState, action: HelpersActionTypes): HelpersState => {\n    switch(action.type) {\n        case actions.SET_OVERLAY:\n            state.overlayComponent = action.component;\n            state.closeCallback = action.closeCallback;\n            state.selfClose = action.selfClose;\n            return {...state};\n\n        case actions.SET_LOADING_OVERLAY:\n            return {...state};\n    }\n    return state;\n}\n\nexport {helpersReducer};","import {Dispatch} from 'react';\nimport {actions} from './store';\n\nexport type OperatorSettings = {\n    type?: number\n}\n\nexport interface OperatorState {\n    settings?: OperatorSettings\n}\n\n\nconst defaultState: OperatorState = {\n    settings: {\n        type: 0\n    }\n}\n\ninterface UpdateOperatorSettings {\n    type: typeof actions.OPERATOR_SETTINGS,\n    settings: OperatorSettings\n}\nexport const updateOperatorSettings = (settings: OperatorSettings): OperatorActionTypes => ({\n    type: actions.OPERATOR_SETTINGS, settings\n});\nexport const dispatchUpdateOperatorSettings = (settings: OperatorSettings) => {\n    return (dispatch: Dispatch<OperatorActionTypes>) => {\n        dispatch(updateOperatorSettings(settings))\n    }\n}\n\n\nexport type OperatorActionTypes = UpdateOperatorSettings\n\nconst operatorReducer = (state: OperatorState = defaultState, action: OperatorActionTypes): OperatorState => {\n    switch(action.type) {\n        case actions.OPERATOR_SETTINGS:\n            return {...state, settings: action.settings}\n    }\n    return state;\n}\n\nexport {operatorReducer};","import { actions } from '../store';\nimport { Dispatch } from 'react';\nimport User from '../../models/User';\n\ninterface Login { type: typeof actions.LOGIN, user: User, operator_token: string };\nexport const login = (user: User, operator_token: string): AuthActionTypes => ({ type: actions.LOGIN, user, operator_token });\nexport const dispatchLogin = (user: User, operator_token: string) => {\n    return(dispatch: Dispatch<AuthActionTypes>) => {\n        dispatch(login(user, operator_token));\n    }\n}\n\ninterface Logout { type: typeof actions.LOGOUT };\nexport const logout = (): AuthActionTypes => ({ type: actions.LOGOUT });\nexport const dispatchLogout = () => {\n    return(dispatch: Dispatch<AuthActionTypes>) => {\n        dispatch(logout());\n    }\n}\n\nexport type AuthActionTypes = Login | Logout;\n","const dev = {\n    API_URL: \"http://localhost:8000\",\n    OPERATOR_TOKEN: '8efedf49-db0e-4afe-9a96-2989fe599220',\n    RESULTS_PER_PAGE: 25,\n    UPLOADS_PATH: '/uploads'\n}\n\nconst prod = {\n    API_URL: \"https://www.daisychef.com\",\n    OPERATOR_TOKEN: '8500f3e1-0282-4d09-a752-6756d188f584',\n    RESULTS_PER_PAGE: 25,\n    UPLOADS_PATH: '/uploads'\n}\n\nconst test = {\n    API_URL: \"\",\n    OPERATOR_TOKEN: '',\n    RESULTS_PER_PAGE: 25,\n    UPLOADS_PATH: ''\n}\n\nexport const config = process.env.NODE_ENV === 'development' ? dev : process.env.NODE_ENV === 'test' ? test : prod;","import axios from 'axios';\nimport { config } from '../config';\n\nconst axiosInstance = axios.create({\n    baseURL: config.API_URL,\n    timeout: 0,\n    headers: {\n        'Authorization': \"JWT \" + window.localStorage.getItem('access_token'),\n        'Content-Type': 'application/json',\n        'accept': 'application/json',\n        'operator-token': window.localStorage.getItem('operator_token')\n    }\n});\n\naxiosInstance.interceptors.response.use(\n    response => response,\n    async error => {\n      const originalRequest = error.config;\n        if (error.response.status === 401) { // && error.response.statusText === \"Unauthorized\"\n            const refresh_token = window.localStorage.getItem('refresh_token');\n            try {\n                const response = await axiosInstance.post('/api/core/auth/token/refresh/', { refresh: refresh_token });\n                window.localStorage.setItem('access_token', response.data.access);\n                window.localStorage.setItem('refresh_token', response.data.refresh);\n                axiosInstance.defaults.headers['Authorization'] = \"JWT \" + response.data.access;\n                originalRequest.headers['Authorization'] = \"JWT \" + response.data.access;\n                return axiosInstance(originalRequest);\n            }\n            catch (err) {\n                console.log(err);\n            }\n        }\n      return Promise.reject(error);\n  }\n);\nexport default axiosInstance","import { config } from '../config.js';\nimport axiosInstance from './axiosApi';\nimport PagedResultsDTO from \"../dto/PagedResultsDTO\";\nimport ModelBase from \"../models/ModelBase\";\n\ninterface AxiosResponse {\n    data: any\n}\n\nexport default class Service {\n    protected _service_url: string = config.API_URL;\n    protected appName: string = \"\";\n    protected view: string = \"\";\n\n    public get viewPath(): string {\n        return `${this.appName}/${this.view}`;\n    }\n\n    public _get<T>(path: string): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            axiosInstance.get(`${this._service_url}/api/${path}`)\n                .then ((resp: AxiosResponse) => {\n                    resolve(resp.data);\n                })\n                .catch( err => reject(err))\n        })\n    }\n\n    public _post<T>(path: string, content: any, headers?: any): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            axiosInstance.post(`${this._service_url}/api/${path}`, content, headers)\n                .then((resp:AxiosResponse) => {\n                    resolve(resp.data);\n                })\n                .catch( err => reject(err))\n        })\n    }\n\n    public _patch<T>(path: string, content: any, headers?: any): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            axiosInstance.patch(`${this._service_url}/api/${path}`, content, headers)\n                .then((resp: AxiosResponse) => {\n                    resolve(resp.data)\n                })\n                .catch( err => reject(err));\n        })\n    }\n\n    public _delete<T>(path: string): Promise<T> {\n        return axiosInstance.delete(`${this._service_url}/api/${path}`)\n    }\n\n    public add<T>(DTO: T, useFormData: boolean = false): Promise<T> {\n        if (useFormData){\n            return this.multipartFormPost<T>(DTO);\n        } else {\n            return this._post<T>(`${this.appName}/${this.view}/`, DTO);\n        }\n    }\n\n    private buildSearchQuery = (search: string = '', searchField: string = '', page: number = 0 ): string => {\n        let params: string = `?`;\n        if (search !== '')\n            params += `search=${search}`;\n        if (searchField !== '')\n            params += `&search_field=${searchField}`;\n        if (page !== 0)\n            params += `&page=${page}`;\n        return params;\n    }\n\n    public delete<T>(id: number): Promise<T> {\n        return this._delete<T>(`${this.appName}/${this.view}/${id}/`);\n    }\n\n    public get<T>(id: number | null = null, params: {} = {}): Promise<T> {\n        if (id !== null) {\n            return this._get(`${this.appName}/${this.view}/${id}/${this.querizeObject(params)}`);\n        } else {\n            return this._get(`${this.appName}/${this.view}/${this.querizeObject(params)}`);\n        }\n    }\n\n    public getByDate<T>(date: string): Promise<T> {\n        return this._get<T>(`${this.appName}/${this.view}/get_by_date/?date=${date}`);\n    }\n\n    public getByDateRange<T>(startDate?: string, endDate?: string): Promise<T> {\n        let path: string = `${this.appName}/${this.view}/get_by_date_range/?`;\n        if (startDate) path += `start_date=${startDate}&`;\n        if (endDate) path += `end_date=${endDate}`; \n        return this._get<T>(path);\n    }\n\n    public multipartFormPost<T>(content: any): Promise<T> {\n        const formData: FormData = new FormData();\n        Object.keys(content).forEach( key => {\n            formData.append(key, content[key]);\n        })\n        console.log(formData);\n        return this._post<T>(`${this.appName}/${this.view}/`, formData, {headers: {'Content-Type': 'multipart/form-data'}});\n    }\n\n    public multipartFormUpdate<T>(id: number, content: any): Promise<T> {\n        const formData: FormData = new FormData();\n        Object.keys(content).forEach( key => {\n            formData.append(key, content[key]);\n        })\n        console.log(formData);\n        return this._patch<T>(`${this.appName}/${this.view}/${id}/`, formData, {headers: {'Content-Type': 'multipart/form-data'}});\n    }\n\n    public search<T>(search: string, searchColumn: string = '', page:number = 1): Promise<T> {\n        return this._get(`${this.appName}/${this.view}/${this.buildSearchQuery(search, searchColumn, page)}`);\n    }\n\n    public pagedSearchResults = (pageNumber: number = 1, search: string = '', searchColumn: string = ''): Promise<PagedResultsDTO> => {\n         return this._get(`${this.appName}/${this.view}/${this.buildSearchQuery(search, searchColumn, pageNumber)}`);\n    }\n\n    private querizeObject(object: any): String {\n        let query: string = Object.keys(object).map(key => key + '=' + object[key]).join('&');\n        if (query.length > 0)\n            query = '?' + query;\n\n        return query;\n    }\n\n    public softDelete<T>(id: number): Promise<T> {\n        return this._get(`${this.appName}/${this.view}/soft_delete/${id}/`);\n    }\n\n    public update<T>(DTO: any, useFormData:boolean = false): Promise<any> {\n        if (useFormData){\n            return this.multipartFormUpdate<T>(DTO.id, DTO);\n        } else {\n            return this._patch<T>(`${this.appName}/${this.view}/${DTO.id}/`, DTO);\n        }\n    }\n}","import Service from \"./Service\";\n\nimport AuthenticateDTO from \"../dto/AuthenticateDTO\";\nimport User from \"../models/User\";\n\nclass AuthService extends Service {\n    appName = 'core';\n    view = 'auth';\n\n    public authenticate = (email: string, password: string): Promise<AuthenticateDTO> => {\n        this.logout();\n        \n        return new Promise<AuthenticateDTO>((resolve, reject) => {\n            this._post(`${this.viewPath}/authenticate/`, {email, password})\n            .then( (resp: any) => {console.log(resp);\n                if (resp.operator_token !== null) {\n                    window.localStorage.setItem('access_token', resp.access);\n                    window.localStorage.setItem('refresh_token', resp.refresh);\n                    window.localStorage.setItem('operator_token', resp.operator_token)\n                    resolve(resp);\n                } else {\n                    reject (resp);\n                }\n            })\n            .catch( (resp: any) => reject(resp))\n        })\n    }\n\n    public logout = (): void => {\n        window.localStorage.removeItem('access_token');\n        window.localStorage.removeItem('refresh_token');\n        window.localStorage.removeItem('user_id');\n        window.localStorage.removeItem('username');\n    }\n\n    public updatePassword = (user: User, current_password: string, new_password: string): Promise<any> => {\n        return this._post(`${this.appName}/${this.view}/update_password/`, {\n            current_password, new_password, user_id: user.id\n        })\n    }\n\n    public validateToken = (refreshToken: string): Promise<User> => {\n        return new Promise<User>((resolve, reject) => {\n            this._get<User>(`${this.viewPath}/user`)\n            .then((user: User) => {\n                resolve(user);\n            })\n            .catch( err => reject(err))\n        })\n    }\n}\n\nexport default new AuthService();","export default class ModelBase {\n\n    public id: number = -1;\n    public created_at!: string;\n    \n}","import ModelBase from \"./ModelBase\";\nimport User from \"./User\";\n\nexport const OPERATOR_TYPES = {\n    default: 0,\n    restaurant: 1\n}\n\nexport default class Operator extends ModelBase {\n    public token!: string;\n    public is_active!: boolean;\n    public name!: string;\n    public phone!: string;\n\n    public page_name!: string;\n    public page_slug!: string;\n    public street_address!: string;\n    public unit!: string;\n    public city!: string;\n    public state!: string;\n    public zip_code!: string;\n    public self_hosted!: boolean;\n    public domain!: string;\n    public support_email!: string;\n    public timezone!: string;\n    public storefront_template!: string;\n\n    public ordering_cutoff_time!: number;\n    public upcoming_delivery_notification_time!: number;\n    public upcoming_delivery_days_notification_time!: number;\n    public auto_notify_upcoming_deliveries!: boolean;\n    public max_future_delivery_windows_time!: number;\n    public delivery_fee!: number;\n    public free_delivery_minimum!: number;\n    public tax_rate!: number;\n    public tax_tips!: boolean;\n    public tax_delivery_fee!: boolean;\n    public allow_tipping!: boolean;\n    public customer_must_be_present!: boolean;\n    public delivery_minimum!: number;\n\n    public user!: User;\n\n    constructor(\n        id: number = -1,\n        token: string = '',\n        is_active: boolean = true,\n        name: string = '',\n        phone: string = '',\n        page_name: string = '',\n        page_slug: string = '',\n        street_address: string = '',\n        unit: string = '',\n        city: string = '',\n        state: string = '',\n        zip_code: string = '',\n        self_hosted: boolean = false,\n        domain: string = '',\n        support_email: string = '',\n        timezone: string = '',\n        ordering_cutoff_time: number = 0,\n        upcoming_delivery_notification_time: number = 0,\n        upcoming_delivery_days_notification_time: number = 0,\n        user: User = new User(),\n        auto_notify_upcoming_deliveries: boolean = false,\n        storefront_template: string = '',\n        max_future_delivery_windows_time: number = 0\n    ) {\n        super();\n        this.id = id;\n        this.token = token;\n        this.is_active = is_active;\n        this.name = name;\n        this.phone = phone;\n        this.page_name = page_name;\n        this.page_slug = page_slug;\n        this.street_address = street_address;\n        this.unit = unit;\n        this.city = city;\n        this.state = state;\n        this.zip_code = zip_code;\n        this.self_hosted = self_hosted;\n        this.domain = domain;\n        this.support_email = support_email;\n        this.timezone = timezone;\n        this.ordering_cutoff_time = ordering_cutoff_time;\n        this.upcoming_delivery_notification_time = upcoming_delivery_notification_time;\n        this.upcoming_delivery_days_notification_time = upcoming_delivery_days_notification_time;\n        this.user = user;\n        this.auto_notify_upcoming_deliveries = auto_notify_upcoming_deliveries;\n        this.storefront_template = storefront_template;\n        this.max_future_delivery_windows_time = max_future_delivery_windows_time;\n    }\n}","import React, {useState} from 'react';\nimport { Redirect, useHistory } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport {actions, AppState} from '../../store/store';\nimport './navigation.scss';\nimport {OPERATOR_TYPES} from \"../../models/OperatorModel\";\n\ninterface Props {\n    closeNav: () => void\n}\n\nexport const Navigation = (props: Props): React.ReactElement => {\n    const [doLogin] = useState(false);\n    const [showDropdown, setShowDropdown] = useState(');')\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const isRestaurant = useSelector((state: AppState) => state.operatorReducer).settings?.type === OPERATOR_TYPES.restaurant;\n\n    const navigateToPage = (pathname: string): void => {\n        props.closeNav();\n        history.push({pathname})\n    }\n\n    const logout = (): void => {\n        dispatch({type: actions.LOGOUT});\n    }\n\n    if (doLogin)\n        return <Redirect to=\"/dashboard/login\" />\n\n    return (\n        <div className=\"navigation\">\n            <ul className=\"\">\n                <li onClick={() => navigateToPage(\"/dashboard/\")}>\n                    dashboard\n                </li>\n                <li onClick={() => navigateToPage(\"/dashboard/profile\")}>\n                    profile\n                </li>\n                {\n                    !isRestaurant ?\n                        <li onClick={() => setShowDropdown('menu')}>\n                            menu\n                            <ul className={`sidenav__dropdown sidenav__dropdown--${showDropdown === 'menu' ? 'open' : 'close'}`}>\n                                <li onClick={() => navigateToPage(\"/dashboard/menu/en\")}>\n                                    entrees\n                                </li>\n                                <li onClick={() => navigateToPage(\"/dashboard/menu/ap\")}>\n                                    appetizers\n                                </li>\n                                <li onClick={() => navigateToPage(\"/dashboard/menu/si\")}>\n                                    sides\n                                </li>\n                                <li onClick={() => navigateToPage(\"/dashboard/menu/de\")}>\n                                    desserts\n                                </li>\n                            </ul>\n                        </li>\n                        :\n                        <li onClick={() => setShowDropdown('menu')}>\n                            menu\n                            <ul className={`sidenav__dropdown sidenav__dropdown--${showDropdown === 'menu' ? 'open' : 'close'}`}>\n                                <li onClick={() => navigateToPage(\"/dashboard/rest/menu\")}>\n                                    menus\n                                </li>\n                                <li onClick={() => navigateToPage(\"/dashboard/rest/menu_items\")}>\n                                    menu items\n                                </li>\n                            </ul>\n                        </li>\n                }\n                {\n                    isRestaurant ?\n                        <li onClick={() => navigateToPage(\"/dashboard/rest/delivery\")}>\n                            activity windows\n                        </li>\n                        :\n                        <li onClick={() => setShowDropdown('delivery')}>\n                            delivery\n                            <ul className={`sidenav__dropdown sidenav__dropdown--${showDropdown === 'delivery' ? 'open' : 'close'}`}>\n                                <li onClick={() => navigateToPage(\"/dashboard/deliveries\")}>\n                                    menus\n                                </li>\n                                <li onClick={() => navigateToPage(\"/dashboard/delivery_window\")}>\n                                    windows\n                                </li>\n                                <li onClick={() => navigateToPage(\"/dashboard/zone\")}>\n                                    zones\n                                </li>\n                            </ul>\n                        </li>\n                }\n                <li onClick={() => setShowDropdown('recipe')}>\n                    recipes\n                    <ul className={`sidenav__dropdown sidenav__dropdown--${showDropdown === 'recipe' ? 'open' : 'close'}`}>\n                        <li onClick={() => navigateToPage(\"/dashboard/recipe\")}>\n                            recipes\n                        </li>\n                        <li onClick={() => navigateToPage(\"/dashboard/ingredient\")}>\n                            ingredients\n                        </li>\n                    </ul>\n                </li>\n                <li onClick={() => navigateToPage(\"/dashboard/coupons\")}>\n                    coupons\n                </li>\n                <li onClick={() => setShowDropdown('mail')}>\n                    mail\n                    <ul className={`sidenav__dropdown sidenav__dropdown--${showDropdown === 'mail' ? 'open' : 'close'}`}>\n                        <li onClick={() => navigateToPage(\"/dashboard/mail/mass_mailer\")}>\n                            mass mailer\n                        </li>\n                        <li onClick={() => navigateToPage(\"/dashboard/mail/list\")}>\n                            mailing list\n                        </li>\n                    </ul>\n                </li>\n                <li onClick={() => navigateToPage(\"/dashboard/newsletter\")}>\n                    newsletters\n                </li>\n                <li onClick={() => navigateToPage(\"/dashboard/orders\")}>\n                    orders\n                </li>\n            </ul>\n            <span className=\"navigation__login text-center\">\n                <button className=\"btn btn-sm btn-outline-danger\" onClick={logout}>Logout</button>\n            </span>\n        </div>\n    )\n\n}","import Service from './Service';\nimport DeliveryDay from '../models/DeliveryDayModel';\nimport DeliveryWindow from '../models/DeliveryWindowModel';\nimport {MenuCategory} from \"../models/MenuCategoryModel\";\nimport DeliveryDayMenuCategory from \"../models/DeliveryDayMenuCategory\";\n\nclass DeliveryDayService extends Service {\n    appName = \"dashboard\";\n    view = \"delivery_day\";\n\n    public attachCategory = (deliveryDay: DeliveryDay, category: MenuCategory | string): Promise<DeliveryDayMenuCategory> => {\n        return this._post(`${this.viewPath}/${deliveryDay.id}/attach_category/`, {\n            category: typeof category === 'string' ? category : category.id\n        })\n    }\n\n    //TODO: May be deprecated\n    public attachDeliveryWindow = (day: DeliveryDay, window: DeliveryWindow): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/c/${day.id}/${window.id}/`)\n    }\n\n    //TODO: May be deprecated\n    public detachDeliveryWindow = (day: DeliveryDay, window: DeliveryWindow): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/detach_delivery_window/${day.id}/${window.id}/`)\n    }\n\n    public duplicateDeliveryDay = (deliveryDay: DeliveryDay, start_date: string, end_date: string): Promise<DeliveryDay> => {\n        return this._get<DeliveryDay>(`${this.appName}/${this.view}/duplicate/?date=${start_date}&end_date=${end_date}&delivery_day=${deliveryDay.id}`);\n    }\n}\n\nexport default new DeliveryDayService();","import DeliveryDayItem from \"./DeliveryDayItemModel\";\nimport ModelBase from \"./ModelBase\";\nimport { DeliveryWindowDTO } from \"./DeliveryWindowModel\";\nimport DeliveryDayMenuCategory from \"./DeliveryDayMenuCategory\";\n\nexport default class DeliveryDay extends ModelBase {\n\n    public date!: string;\n    public end_date!: string;\n    public day_items!: DeliveryDayItem[];\n    public is_perpetual!: boolean;\n    public is_active!: boolean;\n    public name!: string;\n    public categories!: DeliveryDayMenuCategory[];\n\n    constructor(\n        date?: string,\n        id?: number,\n        end_date?: string,\n        day_items?: DeliveryDayItem[],\n        is_perpetual: boolean = false,\n        name: string = '') {\n            super();\n\n            this.id = id || -1;\n            this.date = date || '';\n            this.end_date = end_date || '';\n            this.day_items = day_items || [];\n            this.is_perpetual = is_perpetual;\n            this.name = name;\n    }\n}\n\nexport class DeliveryDayDTO  {\n    public delivery_day: DeliveryDay = new DeliveryDay();\n    public windows: DeliveryWindowDTO[] = [];\n};\n\nexport type DeliveryDaysDTO = {zip_valid: boolean, delivery_days: DeliveryDay[]} ","import moment from 'moment';\n\nclass MomentHelper {\n\n    public asDateSlug = (date: any, useUTC: boolean = false): string => {\n        if (useUTC) {\n            return moment(date).utc().format('YYYY-MM-DD');\n        } else {\n            return moment(date).format('YYYY-MM-DD');\n        }\n    }\n\n    public asFullDate = (date: any): string => {\n        return moment(date).utc().format('dddd MMMM D, YYYY');\n    }\n\n    public asFullDateTime = (dateTime: any): string => {\n        return moment(dateTime).format('dddd MMMM D, YYYY h:mm a')\n    }\n\n    public asShortDate = (date: any): string => {\n        return moment(date).utc().format('MMM D YYYY');\n    }\n\n    public asShortDateTime = (dateTime: any): string => {\n        return moment(dateTime).format('MMM D YYYY h:mm a')\n    }\n}\n\nexport default new MomentHelper();","import OrderItem from \"../models/OrderItemModel\";\nimport DeliveryDayItem from \"../models/DeliveryDayItemModel\";\nimport CartItem from \"../models/CartItemModel\";\nimport MenuItem from \"../models/MenuItemModel\";\nimport {DeliveryWindowDTO} from \"../models/DeliveryWindowModel\";\nimport momentHelper from './MomentHelper';\n\nexport type OrderedItems = {[key: string]: any[]};\n\nclass Helpers { \n\n    private days: string[] = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    private months: string[] = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    private spicy: string[] = [\"not spicy\", \"mild spicy\", \"spicy\"];\n    private proteins: {[key: string]: string} = {\n        'pork': 'Pork',\n        'chicken': 'Chicken',\n        'beef' : ' Beef',\n        'tofu' : ' Tofu',\n        'veg' : 'Vegetable',\n        'vekan' : 'Vegan',\n        'shrimp' : 'Shrimp'\n    };\n\n    public convertToTwelveHour = (twentyFourHourTime: string): string => {\n        let parts: string[] = twentyFourHourTime.split(':');\n        let hour: number = parseInt(parts[0]);\n        let amPm: string = ' am';\n        if (hour > 11) {\n            amPm = ' pm';\n            hour -= hour > 12 ? 12 : 0;\n        }\n\n        if (hour === 0) hour = 12;\n\n        return `${hour.toString()}:${parts[1]}${amPm}`;\n    }\n\n     /*\n        Returns a string ex; Pad-Tai with Chicken, mild spicy\n    */\n    public extractCartItemDescription = (cartItem: CartItem): string => {\n        let description: string = cartItem.menu_item.name;\n        description += cartItem.protein === null || cartItem.protein === \"\" ?\n                    \"\" :\n                    cartItem.protein === 'vekan' ?\n                    ' vegan' : ` with ${cartItem.protein}`\n\n        description += cartItem.menu_item.spicy ?\n        `, ${this.spicy[cartItem.spicy]}` : \"\"\n\n        return description;\n    }\n\n    public formatDeliveryWindow = (window: DeliveryWindowDTO, excludeDate: boolean = false, splitLines: boolean = false): string => {\n        let windowText: string = excludeDate ? \"\" :\n            `${momentHelper.asFullDate(window.date)} ${window.window.start_time !== window.window.end_time ? 'between ' : 'at '}`;\n\n        windowText += this.convertToTwelveHour(window.window.start_time);\n\n        return windowText += window.window.start_time !== window.window.end_time ?\n                ` and ${this.convertToTwelveHour(window.window.end_time)}` : ''\n    }\n\n\n    /*\n        Returns AA of orderItems sorted by their delivery dates\n        The correct date order in the AA is not guaranteed. Use .keys(AA).sort() when iterrating.\n    */\n\n    public sortOrderItemsByDate = (orderItems: OrderItem[]): OrderedItems => {\n        let sortedItems: OrderedItems = {};\n        orderItems.forEach((item: OrderItem) => {\n            if (!(item.cart_item.delivery_date in sortedItems))\n                sortedItems[item.cart_item.delivery_date] = [];\n\n            sortedItems[item.cart_item.delivery_date].push(item);\n        })\n\n        return  sortedItems;\n    }\n\n    public sortDeliveryDayItemsByCategory = (items: DeliveryDayItem[]): DeliveryDayItem[] => {\n        let sortedItems: OrderedItems = {\n            en: [],\n            ap: [],\n            si: [],\n            de: [],\n        };\n\n        if (items) items.forEach((item: DeliveryDayItem) => sortedItems[item.menu_item.category].push(item))\n        return [...sortedItems['en'], ...sortedItems['ap'], ...sortedItems['si'], ...sortedItems['de']];\n    }\n\n    public groupMenuItemsByCategory = (items: MenuItem[], sort: boolean = true): OrderedItems => {\n        let groupedItems: OrderedItems = {\n            en: [],\n            ap: [],\n            si: [],\n            de: [],\n        };\n        items.forEach((item: MenuItem) => groupedItems[item.category].push(item));\n\n        if (sort) {//TODO: Add sorting\n            groupedItems['en'].sort(this.compareMenuItemsByName)\n        }\n        return groupedItems;\n    }\n\n    private compareMenuItemsByName(ia: MenuItem, ib: MenuItem) {\n        if (ia.name < ib.name) return -1;\n        if (ib.name < ia.name) return 1;\n        return 0\n    }\n}\n\nexport default new Helpers();","/*\n    Lists each individual DeliveryDays in the delivery menus page\n */\nimport React from 'react';\nimport DeliveryDay from '../../models/DeliveryDayModel';\nimport momentHelper from '../../helpers/MomentHelper';\nimport helpers from '../../helpers/helpers';\nimport DeliveryDayItem from '../../models/DeliveryDayItemModel';\nimport { config } from '../../config';\nimport { useHistory } from 'react-router-dom';\n\nimport './delivery.scss';\n\ninterface Props {\n    deliveryDay: DeliveryDay\n}\n\nexport const DeliveryDays = (props: Props): React.ReactElement => {\n    const history = useHistory();\n\n    return(\n        <div className=\"row delivery_days\" key={`days_${props.deliveryDay.id}`}>\n            <div className='delivery_days__inner'>\n                <div className=\"col-12 delivery_days__date\">\n                    {momentHelper.asFullDate(props.deliveryDay.date)} -\n                </div>\n                <div className=\"col-12 col-md-6 delivery_days__end_date\">\n                    {momentHelper.asFullDate(props.deliveryDay.end_date)}\n                </div>\n                <div className=\"col-12\" style={{whiteSpace: \"nowrap\"}}>\n                    <div className=\"delivery_days__menu_items\">\n                        {\n                            helpers.sortDeliveryDayItemsByCategory(props.deliveryDay.day_items).map((item: DeliveryDayItem) =>\n                                    <div className=\"delivery_days__item\" key={`ddi_${item.id}`}>\n                                        <small>{item.menu_item.name}</small>\n                                        <div className='delivery_days__item_img'>\n                                            <img\n                                                src={`${config.API_URL + config.UPLOADS_PATH}/${item.menu_item.image}`}\n                                                alt={item.menu_item.name} />\n                                        </div>\n                                    </div>\n                            )\n                        }\n                    </div>\n                </div>\n                <div className=\"col-12 mt-3 text-center\">\n                    <button\n                        className=\"btn btn-sm btn-outline-success\"\n                        onClick={()=> {history.push({pathname: `/dashboard/delivery/edit/${props.deliveryDay.id}/`})}}>\n                            edit\n                        </button>\n                    <button\n                        className=\"btn btn-sm btn-outline-warning ml-2\"\n                        onClick={()=> {history.push({pathname: `/dashboard/delivery/duplicate/${props.deliveryDay.id}`})}}>\n                            duplicate\n                        </button>\n                </div>\n            </div>\n        </div>\n    )\n}","import React, {useState} from 'react';\n\nimport './loading_icon_button.scss';\ninterface Props {\n    label: string,\n    onClick: any,\n    busy: boolean,\n    btnClass?: string,\n    disabledBtnClass?: string,\n    disabled?: boolean,\n    outerClass?: string\n}\n\nexport const LoadingIconButton = (props: Props): React.ReactElement => {\n\n    const disabled: boolean = props.disabled !== undefined ? props.disabled : false;\n\n    return (\n        <div className={`loading_icon_button ${props.outerClass !== undefined ? props.outerClass : ''}`}>\n            <button\n                className={\n                    `${\n                        disabled ?\n                            props.disabledBtnClass !== undefined ?\n                                props.disabledBtnClass : \n                                props.btnClass !== undefined ?\n                                    props.btnClass : ''\n                            :\n                            props.btnClass !== undefined ?\n                                props.btnClass : ''\n                    }`\n                }\n                onClick={props.onClick}\n                disabled={disabled}\n            >{props.label}</button>\n            {props.busy &&\n                <div className='loading_icon_button__loader_layer'>\n                    <div className='loading_icon_button__loader'></div>\n                </div>\n            }\n        </div>\n    )\n}","import React from 'react';\n\nimport loadingAnimation from '../../assets/loader.gif'\nimport './overlays.scss';\n\nexport default class LoadingOverlay extends React.Component<any, any> {\n\n    //TODO: Add ability to override CSS. ex; change BG color/transparency\n\n    public render() {\n        return(\n            <div className=\"loading-overlay\">\n                <img src={loadingAnimation} alt=\"loadingIcon\"/>\n            </div>\n        )\n    }\n}","import React, {useState} from 'react';\nimport { config } from '../../../config';\n\nimport './page_selector.scss';\n\ninterface Props {\n    numItems: number,\n    currentPage:number,\n    gotoPage: (pageNumber: number) => void\n}\n\ntype Choice = {\n    text: string,\n    type: string\n}\n\nexport const PageSelector = (props: Props): React.ReactElement => {\n    const numPages: number = Math.ceil(props.numItems / config.RESULTS_PER_PAGE);\n\n    if (numPages < 2)\n        return(<div></div>)\n\n    const getRangeOfChoices = (start: number, end: number, selected: number): Choice[] => {\n        const choices: Choice[] = [];\n        for (let x: number = start; x <= end; x ++)\n            choices.push({\n                text: x.toString(),\n                type: selected === x ? 'selected' : 'selectable'\n            })\n        return choices;\n    }\n\n    const choiceClicked = (choice: Choice): void => {\n        if (choice.type === 'selected')\n            return\n\n        const page: number = choice.type === 'selectable' ? parseInt(choice.text) : props.currentPage;\n\n        props.gotoPage(\n            choice.type === 'selectable' ? page :\n                            choice.type === 'move_back' ? page - 8 > 0 ? page - 8 : 1 :\n                                page + 8 <= numPages? page + 8 : numPages\n        )\n    }\n\n    let choices: Choice[] = [];\n    if (numPages < 10){\n        choices = getRangeOfChoices(1, numPages, props.currentPage);\n    } else {\n        if (props.currentPage < 9) {\n            choices = getRangeOfChoices(1, 8, props.currentPage);\n            choices.push({text: '>', type: 'move_forward'});\n        } else if (numPages - props.currentPage < 9) {\n            const t = numPages - props.currentPage;\n            choices = getRangeOfChoices(numPages - 7, numPages, props.currentPage);\n            choices.unshift({text: '<', type: 'move_back'});\n        } else {\n            choices = getRangeOfChoices(props.currentPage - 3, props.currentPage + 3, props.currentPage)\n            choices.unshift({text: '<', type: 'move_back'});\n            choices.push({text: '>', type: 'move_forward'});\n        }\n    }\n\n    return(\n        <div className='page_selector'>\n            {\n                choices.map((choice:Choice) => {\n                    return(\n                        <div className={`page_selector__item page_selector__item--${choice.type}`}\n                             onClick={() => choiceClicked(choice)}\n                        >\n                            {choice.text}\n                        </div>\n                    )\n                    }\n                )\n            }\n        </div>\n    )\n}","/*\n    Handles listing DeliveryDayComponent\n */\nimport React from 'react';\nimport deliveryDayService from '../../services/DeliveryDayService';\n\nimport './delivery.scss';\nimport { Redirect } from 'react-router-dom';\nimport DeliveryDay from '../../models/DeliveryDayModel';\n\nimport { DeliveryDays } from './DeliveryDays';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\n\ninterface State {\n    loading: boolean,\n    deliveryDays: DeliveryDay[],\n    startDate: string,\n    endDate: string,\n    creatingDeliveryDay: boolean,\n    editId: number,\n    currentPage: number,\n    paginationCount: number\n}\n\nexport default class Deliveries extends React.Component<any, State> {\n\n    state = {\n        loading: true,\n        deliveryDays: [],\n        startDate: \"\",\n        endDate: \"\",\n        creatingDeliveryDay: false,\n        editId: 0,\n        currentPage: 0,\n        paginationCount: 0\n    }\n\n    public componentDidMount = (): void => {\n        this.changePages(1);\n    }\n\n    private changePages = (pageNumber: number): void => {\n        this.setState({currentPage: pageNumber, loading: true});\n\n        deliveryDayService.pagedSearchResults(pageNumber)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({\n                    deliveryDays: dto.results as DeliveryDay[],\n                    loading: false,\n                    paginationCount: dto.count\n                })\n                }\n            )\n            .catch( err => console.log(err))\n    }\n\n    private createDeliveryDay = (): void => {\n        if (this.state.startDate > this.state.endDate) {\n            window.alert('End date must be after start date');\n            return;\n        }\n\n        this.setState({creatingDeliveryDay: true})\n        deliveryDayService.add<DeliveryDay>(new DeliveryDay(this.state.startDate, -1, this.state.endDate))\n            .then((deliveryDay: DeliveryDay) => {\n                this.setState({\n                    editId: deliveryDay.id, \n                    startDate: \"\",\n                    creatingDeliveryDay: false}) \n            }) \n            .catch( err => window.alert(\"Unable to create week\"))\n            .then(() => this.setState({creatingDeliveryDay: false}))\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    public render() {\n        if (this.state.loading)\n            return <LoadingOverlay />\n\n        if (this.state.editId !== 0)\n            return <Redirect to={`delivery/edit/${this.state.editId}`} />\n        \n        const deliveries: DeliveryDay[] = this.state.deliveryDays;\n        deliveries.sort((a,b) => (a.date > b.date) ? -1 : ((b.date > a.date) ? 1 : 0));\n\n        return(\n            <div className=\"row weeks\">\n                <div className={'col-12'}>\n                    <h3>delivery menus</h3>\n                    <hr/>\n                </div>\n                <div className=\"col-12\">\n                    <h5>create delivery menu</h5>\n                    <input\n                        type=\"date\"\n                        id=\"startDate\"\n                        value={this.state.startDate}\n                        disabled={this.state.creatingDeliveryDay}\n                        onChange={this.updateData} />\n\n                    <input\n                        className={'ml-2'}\n                        type=\"date\"\n                        id=\"endDate\"\n                        value={this.state.endDate}\n                        disabled={this.state.creatingDeliveryDay}\n                        onChange={this.updateData} />\n\n                    <LoadingIconButton\n                        label='create'\n                        busy={this.state.creatingDeliveryDay}\n                        btnClass=\"btn btn-sm btn-outline-success\"\n                        outerClass='ml-2 mt-2 mt-m-0'\n                        onClick={this.createDeliveryDay}\n                        disabled={this.state.creatingDeliveryDay}\n                        />\n                    <PageSelector numItems={this.state.paginationCount} currentPage={this.state.currentPage} gotoPage={this.changePages} />\n                    <hr/>\n                </div>\n                {\n                    deliveries.map((deliveryDay: DeliveryDay) =>\n                        <div className=\"col-12 col-md-6 deliveries__delivery_days\" key={`dd_${deliveryDay.id}`}>\n                            <DeliveryDays \n                                deliveryDay={deliveryDay}\n                                key={`dd_${deliveryDay.id}`}/>\n                        </div>\n                    )\n                }\n            </div>\n        )\n    }\n}","import Service from './Service';\nimport MenuItem from '../models/MenuItemModel';\nimport MenuItemComponent from \"../models/MenuItemComponentModel\";\nimport AttachComponentDTO from \"../dto/AttachComponentDTO\";\n\nclass MenuItemService extends Service {\n    appName = \"dashboard\";\n    view = \"menu_item\";\n\n    public attachComponent = (menuItem: MenuItem, dto: AttachComponentDTO): Promise<MenuItemComponent> => {\n        return this._post(`${this.appName}/${this.view}/${menuItem.id}/attach_component/`, dto)\n    }\n\n    public deleteComponent = (menuItem: MenuItem, componentId: number, isAddon: boolean = false): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${menuItem.id}/delete_component/?component_id=${componentId}&is_add_on=${isAddon.toString()}`);\n    }\n\n    public generatePlatingSheet = (menuItem: MenuItem): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${menuItem.id}/generate_plating_sheet`);\n    }\n}\n\nexport default new MenuItemService();","import Service from './Service';\n\nclass DeliveryDayItemService extends Service {\n    appName = \"dashboard\";\n    view = \"delivery_day_item\";\n}\n\nexport default new DeliveryDayItemService();","/*\n    Provides an INPUT field.\n    Provides updated text when:\n        The user has stopped typing for 750ms, hits 'ENTER' or the INPUT field loses focus\n        The text has changed since last time an update was sent\n    <InputWidget    initialValue: starting value\n                    defaultUpdateValue: if the INPUT field is empty, this value will be returned instead.\n                    onUpdate: callback when there is new text\n                    placeholder: text for PLACEHOLDER property on INPUT\n                    type: text | textarea\n    returns     id: value of ID sent through props\n                value: string\n */\n\nimport React, {Component} from 'react';\n\ninterface Props {\n    id: string,\n    type: string, // 'textarea', 'text'\n    onUpdate: any,\n    required?: boolean,\n    initialValue?: any,\n    placeholder?: string,\n    defaultUpdateValue?: any\n}\n\ninterface State {\n    value: string\n    lastSavedValue: string\n}\n\n//todo: get type='number' to work\n\nexport default class InputWidget extends Component<Props, State> {\n    \n    private timer: any;\n    private lastSavedValue: string | null = null;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            value: props.initialValue ? props.initialValue : \"\",\n            lastSavedValue: ''\n        }\n\n        this.lastSavedValue = props.initialValue;\n    };\n\n    static getDerivedStateFromProps = (props: Props, state: State): State | null => {\n        if (props.initialValue !== state.lastSavedValue) {\n            return {\n                value: props.initialValue,\n                lastSavedValue: props.initialValue\n            }\n        }\n        return null;\n      }\n\n    private handleOnKeyPress = (e: any) => {\n        if (e.keyCode === 13) this.sendUpdate();\n    };\n\n    private updateValue = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        this.setState({value: e.target.value});\n        this.resetTimer();\n    };\n\n    private sendUpdate = () => {\n        if (this.lastSavedValue !== this.state.value) {\n            this.lastSavedValue = this.state.value;\n            let value = (this.props.defaultUpdateValue !== '' && this.props.initialValue === '') ?\n                this.props.defaultUpdateValue : this.state.value;\n            this.props.onUpdate(this.props.id, value);\n            clearInterval(this.timer);\n        }\n    };\n\n    private resetTimer = () => {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(this.sendUpdate, 750)\n    };\n\n    public render() {\n        if (this.props.type === 'textarea') {\n            return (\n                <div className={'row input_widget_textarea'}>\n                    <div className={'col-12'}>\n                        <textarea\n                            className = {'form-control iw'}\n                            id = {this.props.id}\n                            value = {this.state.value}\n                            onBlur = {() => this.sendUpdate()}\n                            onChange = {(e) =>this.updateValue(e)}\n                            onKeyDown = {(e) => this.handleOnKeyPress(e)}\n                            required = {(this.props.required)? this.props.required : false}\n                        />\n                    </div>\n                </div>\n            )\n        } else {\n            return (\n                <div className={'row input_widget_input'}>\n                    <div className={'col-12'}>\n                        <input\n                            className={'form-control iw'}\n                            id={this.props.id}\n                            placeholder={this.props.placeholder}\n                            value={this.state.value}\n                            onBlur={() => this.sendUpdate()}\n                            onChange={(e) => this.updateValue(e)}\n                            onKeyDown={(e) => this.handleOnKeyPress(e)}\n                            autoComplete=\"off\"\n                        />\n                    </div>\n                </div>\n            )\n        }\n\n    }\n}","import React, { useEffect, useState } from 'react';\nimport MenuItem from '../../models/MenuItemModel';\nimport { useParams, Link } from 'react-router-dom';\nimport menuItemService from '../../services/MenuItemService';\nimport {config} from '../../config';\nimport './menu.scss';\nimport {NewMenuItem} from \"./NewMenuItem\";\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport ingredientService from \"../../services/IngredientService\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\n\nexport const MenuItemCategories: any = {\n    en: 'Entrees',\n    ap: 'Appetizers',\n    si: 'Sides',\n    de: 'Desserts'\n}\n\nexport enum ItemsModes {\n    menu,\n    deliveryDay\n}\n\nexport const MenuItems = (): React.ReactElement => {\n    const params: any = useParams();\n    const [dto, setDTO] = useState(new PagedResultsDTO());\n    const [currentPage, setCurrentPage] = useState(1);\n\n    useEffect(() => {\n        loadPage(1);\n    }, [params.category])\n\n    const loadPage = (page: number, searchPattern?: string): void => {\n        setCurrentPage(page);\n\n        menuItemService.search<PagedResultsDTO>(params.category, 'category', page)\n            .then((dto: PagedResultsDTO) => {\n                setDTO(dto);\n            })\n            .catch( err => {window.alert('Unable To Load Menu Items')})\n    }\n\n    const sortedItems: MenuItem[] = (dto.results as any).sort((a: MenuItem, b: MenuItem) => a.name > b.name ? 1 : -1);\n\n    const menuType: string = params.category === 'en' ?\n                            'entree'\n                            :\n                            params.category === 'ap' ?\n                                'appetizer'\n                                :\n                                params.category === 'si' ?\n                                    'side'\n                                    :\n                                    'dessert'\n\n    return(\n        <div className=\"row menu_items mt-3\">\n            <div className='col-12 menu__title'>\n                <h3>\n                    { menuType }s\n                </h3>\n                <hr/>\n            </div>\n            <div className=\"col-12 col-md-4\">\n                <NewMenuItem key={Math.random().toString()} />\n            </div>\n            <div className='d-none d-md-block col-md-8'>\n\n            </div>\n            <div className='col-12 text-right'>\n                <PageSelector\n                    numItems={dto.count}\n                    currentPage={currentPage}\n                    gotoPage={loadPage}\n                    />\n            </div>\n            <div className='col-12'>\n                <hr/>\n            </div>\n            {\n                sortedItems.sort((a: MenuItem, b: MenuItem) =>\n                                    a.name.toLowerCase() > b.name.toLowerCase() ?\n                                        1 : a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 0 )\n                            .map((item: MenuItem) => {\n                    return(\n                        <div className=\"col-6 col-md-3 menu_items__item\" key={`mi_${item.id}`}>\n                            <Link className=\"row\" to={`/dashboard/menu/edit/${item.id}/`}>\n                                    <div className=\"col-12 menu_items__menuitem_name no_wrap_text\">{item.name}</div>\n                                    <div className=\"col-12\">\n                                        <div className='menu_items__image'>\n                                            <img src={`${config.API_URL + config.UPLOADS_PATH}/${item.image}`} alt={item.name}/>\n                                        </div>\n                                    </div>\n                            </Link>\n                        </div>\n                    )\n                })\n            }\n        </div>\n    )\n}","import ModelBase from \"../models/ModelBase\";\n\nexport default class PagedResultsDTO {\n\n    public count!: number;\n    public next!: string | null;\n    public previous!: string | null;\n    public results!: any[]\n\n    constructor(\n        count: number = 0,\n        results: ModelBase[] = []\n    ) {\n        this.count = count;\n        this.results = results;\n    }\n}","import React from 'react';\n\ninterface Props {\n    item: any,\n    itemSelected: (item: any) => void\n}\n\nexport const SearchWidgetDefaultDisplay = (props: Props): React.ReactElement => {\n\n    return (\n        <div className='row search_widget_default_display'>\n            <div\n                key={`search_result_${props.item.id}`}\n                className=\"row search_widget__result\"\n                onClick={() => props.itemSelected(props.item)}\n            >\n                <div className=\"col-12 result__name\">\n                    {props.item.name}\n                </div>\n            </div>\n        </div>\n    )\n}","import React from 'react';\nimport InputWidget from '../inputWidget/InputWidget';\nimport Service from '../../../services/Service';\n\nimport './search_widget.scss';\nimport PagedResultsDTO from \"../../../dto/PagedResultsDTO\";\nimport {SearchWidgetDefaultDisplay} from \"./SearchWidgetDefaultDisplay\";\n\ninterface Props {\n    serviceFunction: (pageNumber?: number, text?: string) => Promise<any>,\n    itemSelected: (item: any) => void,\n    placeholder?: string,\n    resultDisplayComponent?: React.ReactElement\n}\n\ninterface State {\n    dto: PagedResultsDTO,\n    showChoices: boolean,\n    currentValue: string\n}\n\nexport default class SearchWidget extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            dto: new PagedResultsDTO(),\n            showChoices: false,\n            currentValue: ''\n        }  \n    }\n\n    private itemSelected = (item: any): void => {\n        this.setState({showChoices: false, currentValue: item.name});\n        this.props.itemSelected(item);\n    }\n\n    protected doSearch = (id: string, text: string): void => {\n        this.setState({currentValue: text});\n\n        if (text === '') {\n            this.setState({showChoices: false});\n            return;\n        }\n\n        this.props.serviceFunction(1, text)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({dto, showChoices: dto.count > 0});\n                this.props.itemSelected(text);\n            })\n            .catch( () => window.alert('unable to search'))\n    }\n\n    public render() {\n        return(\n            <div\n                className=\"row search_widget\"\n                onBlur={() => this.setState({showChoices: false, currentValue: ''})}\n            >\n                <div className=\"col-12\">\n                    <InputWidget\n                        key={Math.random()}\n                        id='search_widget__InputWidget'\n                        type=\"\"\n                        initialValue={this.state.currentValue}\n                        onUpdate={this.doSearch}\n                        placeholder={this.props.placeholder || ''}\n                        defaultUpdateValue={''}\n                    />\n                </div>\n                <div className={`col-12 search_widget_results--${this.state.showChoices ? 'show' : 'hide'}`}>\n                    <div className=\"search_widget_results__content\">\n                        {\n                            this.state.dto.results.map((item: any) =>\n                                <SearchWidgetDefaultDisplay\n                                    key={`swdd_${item.id}`}\n                                    item={item}\n                                    itemSelected={() => this.itemSelected(item)}\n                                    />\n                                )\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import ModelBase from \"./ModelBase\";\nimport MenuItemComponent from \"./MenuItemComponentModel\";\nimport MenuItemAddOnModel from \"./MenuItemAddOnModel\";\nimport {MenuCategory} from \"./MenuCategoryModel\";\n\nexport const SPICINESS_CHOICES = {\n    notSpicy: 0,\n    spicy: 1,\n    notSpicyToSpicy: 2,\n    mildToSpicy: 3\n}\n\nexport default class MenuItem {\n\n    public id!: number;\n    public name: string = \"\";\n    public description: string = \"\";\n    public proteins: string = \"\";\n    public allergens: string = \"\";\n    public price: number = 0;\n    public image: string = \"\";\n    public active!: boolean;\n    public spicy!: boolean;\n    public category: string = 'en';\n    public components!: MenuItemComponent[];\n    public add_ons!: MenuItemAddOnModel[];\n    public spiciness!: number;\n    public note!: string;\n\n\n    constructor(\n        id: number = -1,\n        name: string = '',\n        description: string = '',\n        category: string = 'en',\n        price: number = 10,\n        proteins: string = \"\",\n        allergens: string = \"\",\n        spicy: boolean = false\n        ) \n        {\n            this.id = id;\n            this.name = name;\n            this.description = description;\n            this.category = category;\n            this.price = price;\n            this.proteins = proteins;\n            this.allergens = allergens;\n            this.spicy = spicy;\n        }\n}\n\nexport class MenuItemDTO {\n\n    public id!: number;\n    public name: string = \"\";\n    public description: string = \"\";\n    public proteins: string = \"\";\n    public allergens: string = \"\";\n    public price: number = 0;\n    public image!: File | string | null;\n    public active!: boolean;\n    public spicy: boolean = false;\n    public category: string = 'en';\n}","import ModelBase from './ModelBase';\nimport MenuItem from './MenuItemModel';\nimport DeliveryDay from './DeliveryDayModel';\nimport DeliveryMenuCategory from \"./DeliveryMenuCategoryModel\";\n\nexport class DeliveryDayItemDTO extends ModelBase {\n    public sold_out: boolean = false;\n    public price: number = 0;\n    public menu_item!: number;\n    public delivery_day!: number;\n    public delivery_category!: DeliveryMenuCategory;\n\n    constructor(delivery_day: number, menu_item: number, sold_out: boolean, price: number) {\n        super();\n        this.delivery_day = delivery_day;\n        this.menu_item = menu_item;\n        this.sold_out = sold_out;\n        this.price = price;\n    }\n}\n\nexport default class DeliveryDayItem extends ModelBase {\n\n    public sold_out: boolean = false;\n    public price: number = 0;\n    public menu_item!: MenuItem;\n    public delivery_day!: DeliveryDay;\n    public delivery_category!: DeliveryMenuCategory\n\n    constructor(delivery_day?: DeliveryDay, menu_item?: any, sold_out?: boolean, price?: number) {\n        super();\n\n        this.delivery_day = delivery_day || new DeliveryDay();\n        this.menu_item = menu_item || new MenuItem();\n        this.sold_out = sold_out || false;\n        this.price = price || 0;\n    }\n\n    public getDTOxxx = (): DeliveryDayItemDTO => {\n        return new DeliveryDayItemDTO(this.delivery_day.id, this.menu_item.id, this.sold_out, this.price);\n    }\n}","import React from 'react';\nimport deliveryDayItemService from '../../services/DeliveryDayItemService';\nimport DeliveryDayItem, { DeliveryDayItemDTO } from '../../models/DeliveryDayItemModel';\n\nimport './delivery.scss';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\ninterface Props {\n    deliveryDayItem: DeliveryDayItem,\n    refreshItems: () => {}\n}\n\ninterface State {\n    deliveryDayItem: DeliveryDayItem,\n    saving: boolean,\n    active: boolean\n}\n\nexport default class DeliveryMenuItemOptions extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            deliveryDayItem: props.deliveryDayItem,\n            saving: false,\n            active: props.deliveryDayItem.id ? true : false \n        }\n    }\n\n    private remove = (): void => {\n        if (!window.confirm(\"Are you sure you want to remove this menu item?\")) return;\n\n        this.setState({saving: true});\n        deliveryDayItemService.delete(this.state.deliveryDayItem.id)\n            .then( resp => this.setState({\n                deliveryDayItem: new DeliveryDayItem(this.state.deliveryDayItem.delivery_day, this.state.deliveryDayItem.menu_item, false, 0),\n                active: false,\n                saving: false\n            }, () => this.props.refreshItems()))\n            .catch( resp => window.alert(\"Unable to deactivate\"));\n    }\n\n    private save = (): void => {\n        this.setState({saving: true});\n        deliveryDayItemService.update<DeliveryDayItem>(this.state.deliveryDayItem)\n            .then((item: DeliveryDayItem) => this.setState({deliveryDayItem: item, saving: false}))\n            .catch( resp => window.alert(\"Unable to update\"))\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        let deliveryDayItem: DeliveryDayItem = this.state.deliveryDayItem\n        switch (e.target.id) {\n            case 'active': this.setState({active: !this.state.active}); break;\n            case 'sold_out': deliveryDayItem.sold_out = !deliveryDayItem.sold_out; break;\n            case 'price': deliveryDayItem.price = parseFloat(e.target.value)\n        }\n        this.setState({deliveryDayItem});\n    }\n\n    public render() {\n        return(\n            <div className=\"row delivery_item_options\">\n                <div className=\"col-12\"><hr/></div>\n                <div className=\"col-4\">\n                    <input\n                        type=\"number\"\n                        id=\"price\"\n                        value={this.state.deliveryDayItem.price}\n                        onChange={this.updateData}\n                        disabled={this.state.saving || !this.state.active}\n                        className=\"form-control delivery_item_options__price\"/>\n                </div>\n                <div className=\" col-8 mt-3\">\n                    <span className=\"mr-2\">Sold Out:</span>\n                    <input\n                        id=\"sold_out\"\n                        checked={this.state.deliveryDayItem.sold_out} \n                        onChange={this.updateData}\n                        disabled={this.state.saving || !this.state.active}\n                        type=\"checkbox\"/> \n                </div>\n                <div className=\"col-12 text-center mt-3\">\n                    <LoadingIconButton\n                        label='save'\n                        onClick={this.save}\n                        busy={this.state.saving}\n                        btnClass='btn btn-sm btn-outline-success'\n                        disabled={this.state.saving || !this.state.active}\n                        />\n\n                    <button\n                        className=\"btn btn-sm btn-danger ml-3\"\n                        disabled={this.state.saving}\n                        onClick={this.remove}>\n                        Remove</button>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport DeliveryDayItem from '../../models/DeliveryDayItemModel';\nimport {config} from '../../config';\nimport DeliveryDayItemOptionsComponent from './DeliveryMenuItemOptionsComponent';\n\ninterface Props {\n    item: DeliveryDayItem,\n    refreshItems: () => void\n}\n\nexport const DeliveryDayItemComponent = (props:Props) => {\n    return(\n        <div className=\"row delivery_day_item\">\n            <div className={'col-12'}>\n                <div className={'row delivery_day_item__inner'}>\n                    <div className=\"col-12 delivery_day_item__name\">{props.item.menu_item.name}</div>\n                    <div className=\"col-12\">\n                        <div className='delivery_day_item__img'>\n                            <img\n                                src={`${config.API_URL + config.UPLOADS_PATH}/${props.item.menu_item.image}`}\n                                alt={props.item.menu_item.name}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"col-12\">\n                        <DeliveryDayItemOptionsComponent deliveryDayItem={props.item} refreshItems={async () => props.refreshItems()} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}","import Service from './Service';\nimport FunctionsResponsesDTO from '../dto/FunctionsResponsesDTO';\nimport Order from \"../models/OrderModel\";\nimport SearchRecipesAndIngredientsDTO from \"../dto/SearchRecipesAndIngredientsDTO\";\n\nclass APIActionService extends Service {\n\n    public getTimeZones = (): Promise<string[]> => {\n        return this._get<string[]>(`dashboard/get_time_zones/`);\n    }\n\n    public searchRecipesAndIngredients = (search_pattern: string = ''): Promise<SearchRecipesAndIngredientsDTO[]> => {\n        return this._get(`dashboard/search_recipes_and_ingredients?search_pattern=${search_pattern}`);\n    }\n\n    public sendWeeklyEmails = (): Promise<FunctionsResponsesDTO> => {\n        return this._get(`dashboard/send_weekly_email/`);\n    }\n\n    public sendSupportEmail = (to: string, subject: string, body: string, order: Order | null = null): Promise<any> => {\n        let payload: any = {to, subject, body}\n\n        if (order !== null) payload['order_id'] = order.id\n\n        return this._post<any>('dashboard/send_support_email/', payload)\n    }\n\n    public sendMassMail = (dto: any): Promise<string[]> => {\n        return this._post<any>('dashboard/send_mass_email/', dto);\n    }\n}\n\nexport default new APIActionService();","import React, {ChangeEvent, useState} from 'react';\nimport './email_widget.scss';\nimport {LoadingIconButton} from \"../loading_icon_button/LoadingIconButton\";\nimport apiActionsService from \"../../../services/APIActionService\";\nimport MassMailResponseDTO from \"../../../dto/MassMailResponseDTO\";\n\n\ninterface EmailConfig {\n    email_type: string,\n    entity_id: number,\n    message?: string,\n    target_date?: string\n}\n\ninterface Props {\n    finished: () => void,\n    prompt: string,\n    config: EmailConfig\n}\n\nexport const EmailWidget = (props: Props): React.ReactElement => {\n    const [message, setMessage] = useState('');\n    const [sending, setSending] = useState(false);\n\n    const cancel = (): void => {\n        if (!window.confirm('do you want to cancel this email?')) return;\n        props.finished();\n    }\n\n    const confirmEmailSend = (): void => {\n        sendEmail()\n            .then((emails: string[]) => {\n                if (window.confirm(`You are about to send ${emails.length} emails.`)) {\n                    sendEmail(true)\n                        .then(() => {\n                            window.alert('emails have been sent');\n                            props.finished();\n                        })\n                        .catch(() => window.alert('unable to send emails'))\n                        .then(() => setSending(false))\n                } else {\n                    setSending(false);\n                }\n            })\n            .catch(() => window.alert('unable to send message'))\n\n    }\n\n    const sendEmail = (send_email: boolean = false): Promise<any> => {\n        setSending(true);\n        return apiActionsService.sendMassMail({...props.config, ...{message, send_email}})\n\n    }\n\n    return(\n        <div className='row email_widget'>\n            <div className='col-12'>\n                {props.prompt}\n            </div>\n            <div className='col-12 mt-2'>\n                <textarea\n                    className='form-control'\n                    value={message}\n                    placeholder='enter message'\n                    disabled={sending}\n                    onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setMessage(e.target.value)}\n                ></textarea>\n            </div>\n            <div className='col-12 text-center mt-2'>\n                <LoadingIconButton\n                    label='send'\n                    onClick={confirmEmailSend}\n                    disabled={message === ''}\n                    busy={sending}\n                    btnClass='btn btn-sm btn-outline-success'\n                />\n                <button className='btn btn-sm btn-outline-info ml-2'\n                        onClick={cancel}\n                        disabled={sending}\n                        >cancel</button>\n            </div>\n        </div>\n    )\n}","/*\n    Mange MenuItems in DeliveryDay\n */\nimport React from 'react';\n\nimport {MenuItemDTO} from '../../models/MenuItemModel';\nimport DeliveryDay from '../../models/DeliveryDayModel';\nimport MenuItem from '../../models/MenuItemModel';\nimport menuItemService from '../../services/MenuItemService';\nimport deliveryDayItemService from '../../services/DeliveryDayItemService';\nimport deliveryDayService from '../../services/DeliveryDayService';\nimport momentHelper from '../../helpers/MomentHelper';\nimport DeliveryWindow from '../../models/DeliveryWindowModel';\nimport SearchWidget from '../widgets/searchWidget/SearchWidget';\nimport DeliveryDayItem, { DeliveryDayItemDTO } from '../../models/DeliveryDayItemModel';\nimport { DeliveryDayItemComponent } from './DeliveryDayItemComponent';\nimport './delivery.scss';\nimport { Link } from 'react-router-dom';\nimport {RouteComponentProps} from 'react-router-dom';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport {EmailWidget} from \"../widgets/email_widget/EmailWidget\";\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport {DeliveryDayItemSearchChoice} from \"./DeliveryDayItemSearchChoice\";\n\ninterface Props extends RouteComponentProps {\n    match: any;\n}\n\ninterface State {\n    loading: boolean,   //TODO: FINISH ADDING LOAD ALL MENU ITEMS, have MenuItems confirm if \n    menuItems: MenuItemDTO[],\n    deliveryDay: DeliveryDay,\n    deliveryWindows: DeliveryWindow[],\n    deleting: boolean,\n    sendEmail: boolean\n}\n\nexport default class DeliveryDayComponent extends React.Component<Props, State> {\n\n    state ={\n        loading: true,\n        menuItems: [],\n        deliveryDay: new DeliveryDay(\"\"),\n        deliveryWindows: [],\n        deleting: false,\n        sendEmail: false\n    }\n\n    public componentDidMount = (): void => {\n        const { match: { params } } = this.props;\n        this.refreshDay(params.id);\n    }\n\n    private delete = (): void => {\n        if (!window.confirm('are you sure you want to delete this delivery menu?')) return;\n\n        this.setState({deleting: true});\n        deliveryDayService.delete(this.state.deliveryDay.id)\n            .then(() => this.props.history.push({pathname: '/dashboard/deliveries'}))\n            .catch(() => window.alert('unable to delete'))\n            .then(() => this.setState({deleting: false}))\n    }\n\n    private itemSelected = (menuItem: MenuItem | string) => {\n        if (typeof menuItem === 'string') return;\n\n        deliveryDayItemService.add(new DeliveryDayItemDTO(this.state.deliveryDay.id, menuItem.id, false, menuItem.price))\n            .then((item: any) => {\n                const deliveryDay: DeliveryDay = this.state.deliveryDay;\n                deliveryDay.day_items.unshift(item);\n                this.setState({deliveryDay});\n            })\n            .catch( err => window.alert('unable to add menu item'))\n    }\n\n    private refreshDay = (id: number): void => {\n        deliveryDayService.get<DeliveryDay>(id)\n            .then((deliveryDay: DeliveryDay) => {\n                this.setState({deliveryDay, loading: false})\n            })\n            .catch( err => window.alert(\"Unable to load week\"))\n    }\n\n    private search = (searchPattern: string, callback: (choices: any[]) => void): void => {\n        menuItemService.pagedSearchResults(1, searchPattern)\n            .then((dto: PagedResultsDTO) => {\n                let choices: any[] = [];\n                dto.results.forEach((menuItem: MenuItem) =>  choices.push({text: menuItem.name, object: menuItem}))\n                callback(choices);\n                }\n            )\n            .catch(() => window.alert('unable to search menu items'))\n    }\n    \n    public render() {\n        if (this.state.loading)\n            return <div>Loading...</div>\n\n        return(\n            <div className=\"row delivery_day_component\">\n                <div className='col-12 delivery_day_component__header'>\n                    <h3>delivery menu</h3>\n                    <div className='delivery_day_component__date'>{momentHelper.asFullDate(this.state.deliveryDay.date)} -&nbsp;</div>\n                    <div className='delivery_day_component__date'>{momentHelper.asFullDate(this.state.deliveryDay.end_date)}</div>\n                    <div className='clear_both'></div>\n                    <hr/>\n                </div>\n                <div className={\"col-12 mb-2\"}>\n                    <Link className={'btn btn-sm btn-outline-info'} to={'/dashboard/deliveries'}>go back</Link>\n                    <button\n                        className='btn btn-sm btn-outline-primary float-right ml-2'\n                        >send email</button>\n                    <LoadingIconButton\n                        label='delete'\n                        onClick={this.delete}\n                        busy={this.state.deleting}\n                        btnClass='btn btn-sm btn-outline-danger'\n                        outerClass='float-right'\n                        />\n                    <hr/>\n                </div>\n                <div className=\"col-12 delivery_day_component__search_widget mb-2\">\n                    <SearchWidget serviceFunction={menuItemService.pagedSearchResults} itemSelected={this.itemSelected} />\n                </div>\n                {\n                    this.state.deliveryDay.day_items.map((item: DeliveryDayItem) => {\n                        return (\n                            <div className=\"col-12 col-md-3\" key={`dd_${item.id}`}>\n                                <div className=\"row\">\n                                    <div className=\"col-12\">\n                                        <DeliveryDayItemComponent item={item} refreshItems={() => this.refreshDay(this.state.deliveryDay.id)}/>\n                                    </div>\n                                </div>\n                            </div>\n                        )\n                    })\n                }\n                {this.state.sendEmail &&\n                    <div className='col-12 delivery_window_edit__emailer'>\n                        <div className='row justify-content-center'>\n                            <div className='col-12 col-md-6'>\n                                <EmailWidget\n                                    finished={() => this.setState({sendEmail: false})}\n                                    prompt={'this email will be sent to all customers who have ordered from this delivery menu'}\n                                    config={{\n                                        email_type: 'delivery_day',\n                                        entity_id: this.state.deliveryDay.id\n                                    }}\n                                    />\n                            </div>\n                        </div>\n                    </div>\n                }\n            </div>\n        )\n    }\n}","import React, { Fragment, useEffect } from 'react';\nimport { useState } from 'react';\n\nimport './menu.scss';\nimport { useHistory } from 'react-router-dom';\nimport menuItemService from '../../services/MenuItemService';\nimport MenuItem from '../../models/MenuItemModel';\n\nexport const NewMenuItem = (): React.ReactElement => {\n    const [name, setName] = useState<string>('');\n    const [category, setCategory] = useState<string>('en');\n    const [open, setOpen] = useState<boolean>(false);\n\n    const history = useHistory();\n\n    const createNewMenuItem = (): void => {\n        menuItemService.add<MenuItem>({name, category} as any)\n            .then((newMenuItem: MenuItem) => {\n                history.push({pathname: `/dashboard/menu/edit/${newMenuItem.id}/`});\n                setName('');\n                setCategory('en');\n            })\n            .catch( err => window.alert('unable to add new menu item'))\n    }\n\n    return(\n        <div className=\"row new_menu_item mt-3\">\n            {\n                open === false ?\n                    <div className=\"col-12 new_menu_item__add_link\" onClick={()=> setOpen(true)}>\n                        + add new menu item\n                    </div>\n                    :\n                    <Fragment>\n                        <div className=\"col-12\">\n                            <input type=\"text\" className=\"form-control\" id='new_menu_item__name'\n                                value={name} placeholder='New Menu Item Name'\n                                onChange={(e: any)=> setName(e.target.value)}/>\n                        </div>\n                        <div className=\"col-12 mt-1\">\n                            <select className=\"form-control\" defaultValue={category}\n                                onChange={(e) => setCategory(e.target.value)}>\n                                <option value=\"en\">Entree</option>\n                                <option value=\"ap\">Appetizer</option>\n                                <option value=\"si\">Side Item</option>\n                                <option value=\"de\">Dessert</option>\n                            </select>\n                        </div>\n                        <div className=\"col-12 mt-1 text-center\">\n                            <button className=\"btn btn-outline-success new_menu_item__submit\"\n                                disabled={name === \"\"} onClick={()=> createNewMenuItem()}>\n                                Add New Item</button>\n                        </div>\n                    </Fragment>\n            }\n        </div>\n    )\n}","import React, { Fragment } from 'react';\n\nimport { connect } from 'react-redux';\n\nimport MenuItem, {MenuItemDTO} from '../../models/MenuItemModel';\nimport menuItemService from '../../services/MenuItemService';\nimport ImageUploader from '../widgets/imageUploader/ImageUploader';\nimport {RouteComponentProps} from 'react-router-dom';\n\nimport './menu.scss';\nimport LoadingOverlay from '../overlays/LoadingOverlay';\nimport {config} from \"../../config\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport {MenuComponents} from \"./MenuComponents\";\nimport {OperatorState} from \"../../store/operatorReducer\";\nimport {AppState} from \"../../store/store\";\nimport {OPERATOR_TYPES} from '../../models/OperatorModel';\nimport {MenuCategory} from \"../../models/MenuCategoryModel\";\nimport menuCategoryService from '../../services/MenuCategoryService';\nimport {SPICINESS_CHOICES} from \"../../models/MenuItemModel\";\nimport { RestaurantMenuItemAddOns } from '../restaurant_menu_manager/RestaurantMenuItemAddOns';\n\ninterface Props extends RouteComponentProps {\n    match: any;\n}\n\ninterface LinkStateProps {\n    operator: OperatorState\n}\n\ninterface State {\n    menuItem: MenuItemDTO,\n    loaded: boolean,\n    saving: boolean,\n    viewingServings: boolean,\n    hasBeenUpdated: boolean,\n    menuCategories: MenuCategory[]\n}\n\nexport enum ItemModes {\n    add,\n    edit,\n    view,\n    deliveryDay\n}\n\nclass MenuItemEdit extends React.Component<Props & LinkStateProps, State> {\n\n    private temporaryImage: File | null = null;\n\n    state = {\n        menuItem: new MenuItem(),\n        loaded: false,\n        saving: false,\n        viewingServings: false,\n        hasBeenUpdated: false,\n        menuCategories: []\n    } \n\n    private allergenSelected = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        let menuItem: MenuItemDTO = this.state.menuItem;\n        menuItem.allergens = this.checkboxesToString(menuItem.allergens, e.target.id)\n        this.setState({menuItem, hasBeenUpdated: true});\n    }\n\n    public componentDidMount = (): void => {\n        const { match: { params } } = this.props;\n\n        menuItemService.get<MenuItem>(params.id)\n            .then((menuItem: MenuItem) => {\n                this.setState({menuItem, loaded: true})\n            })\n            .catch( err => window.alert('Unable to load menu item'))\n\n        if (this.props.operator.settings?.type === OPERATOR_TYPES.restaurant) {\n            menuCategoryService.get<MenuCategory[]>()\n                .then((menuCategories: MenuCategory[]) => {\n                    this.setState({menuCategories})\n                })\n                .catch( err => window.alert('unable to load categories'))\n        }\n    }\n\n    private checkboxesToString = (items: string, code: string): string => {\n        if (items === null) items= \"\";\n\n        let parts: string[] = items.split(':')\n        console.log(parts, items);\n        if (parts.indexOf(code) !== -1) {// delete if it exists\n            parts.splice(parts.indexOf(code), 1);\n        } else {\n            parts.push(code);\n        }\n\n        const final: string = parts.join(':');\n        return (final.substr(0, 1)) === ':' ? final.substr(1) : final;\n    }\n\n    private onNewImageLoaded = (file: File | null) => {\n        this.temporaryImage = file;\n\n        if (file === null){\n            let menuItem: MenuItemDTO = this.state.menuItem;\n            menuItem.image = null;\n            this.setState({menuItem});\n        }\n\n        this.setState({hasBeenUpdated: true});\n    }\n\n    private proteinSelected = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        let menuItem: MenuItemDTO = this.state.menuItem;\n        menuItem.proteins = this.checkboxesToString(menuItem.proteins, e.target.id);\n        this.setState({menuItem, hasBeenUpdated: true});\n    }\n\n    private save = (): void => {\n        this.setState({saving: true});\n        let menuItem: MenuItemDTO = this.state.menuItem;\n\n        if (this.temporaryImage){\n            menuItem.image = this.temporaryImage;\n        } else if (typeof menuItem.image === 'string') {\n            delete menuItem.image;\n        }\n         menuItemService.update<MenuItemDTO>(menuItem, menuItem.image !== null && typeof menuItem.image !== 'string')\n                .then((menuItemDTO: MenuItemDTO) => {\n                    this.setState({\n                        menuItem: menuItem,\n                        saving: false,\n                        hasBeenUpdated: false\n                    });\n                    // if (this.props.itemAdded) this.props.itemAdded(menuItemDTO);\n                })\n    }\n\n    private updateMenuItem = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>): void => {\n        let menuItem: any = this.state.menuItem;\n        menuItem[e.target.name] = e.target.value;\n        this.setState({menuItem, hasBeenUpdated: true});\n    }\n\n    private updateOptions = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        let menuItem: MenuItemDTO = this.state.menuItem;\n        switch(e.target.id) {\n            case 'spicy':\n                menuItem.spicy = !menuItem.spicy\n                this.setState({menuItem, hasBeenUpdated: true})\n                break;\n            case 'price':\n                menuItem.price = parseFloat(e.target.value);\n                this.setState({menuItem, hasBeenUpdated: true});\n                break;\n        }\n    }\n\n    public render() {//TODO: fix saveBtnDisabled\n\n        if (!this.state.loaded)\n            return <LoadingOverlay />\n\n        const disabled: boolean = false;// this.props.mode === ItemModes.view || this.props.mode === ItemModes.deliveryDay\n\n        const allergens: any[] = [\n            { name: 'Dairy', code: 'milk' },\n            { name: 'Soy', code: 'soy'},\n            { name: 'Shellfish', code: 'shell'},\n            { name: 'Egg', code: 'egg'},\n            { name: 'Fish', code: 'fish'},\n            { name: 'Nuts', code: 'nuts'},\n            { name: 'Peanuts', code: 'peanut'},\n            { name: 'Wheat', code: 'wheat'}\n        ]\n\n        const proteins: any[] = [\n            { name: 'Pork', code: 'pork'},\n            { name: 'Chicken', code: 'chicken'},\n            { name: 'Beef', code: 'beef' },\n            { name: 'Tofu', code: 'tofu'},\n            { name: 'Veggie', code: 'veg'},\n            { name: 'Vegan', code: 'vekan'},\n            { name: 'Shrimp', code: 'shrimp'}\n        ]\n\n        const isRestaurant: boolean = this.props.operator.settings?.type === OPERATOR_TYPES.restaurant;\n        \n        return (\n            <div className=\"row menuedititem justify-content-center\">\n                <div className=\"col-12\">\n                    <h3>edit menu item</h3>\n                    <hr/>\n                </div>\n                <div className='col-12'>\n                    <button\n                        className='btn btn-sm btn-outline-info'\n                        onClick={() => this.props.history.goBack()}\n                        >back</button>\n                    <hr/>\n                </div>\n                    <div className={`col-12`}>\n                        <div className=\"row\">\n                            <div className={`col-12 col-md-6`}>\n                                <div className=\"row\">\n                                    <div className=\"col-12\">\n                                        <h5>name</h5>\n                                        <input\n                                            id='menuedititem__name'\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            placeholder=\"Meal Name\"\n                                            name=\"name\"\n                                            value={this.state.menuItem.name}\n                                            onChange={this.updateMenuItem}\n                                            disabled={disabled}\n                                            />\n                                    </div>\n                                    <div className=\"col-12 col-md-8 mt-2\">\n                                        <h5>description</h5>\n                                        <textarea\n                                            className=\"form-control\"\n                                            rows={2}\n                                            placeholder=\"Description\"\n                                            name=\"description\"\n                                            value={this.state.menuItem.description}\n                                            onChange={this.updateMenuItem}\n                                            disabled={disabled}\n                                            ></textarea>\n                                    </div>\n                                    <div className=\"col-12 col-md-4 menuedititem__imagearea menuedititem__area mt-2\">\n                                        <ImageUploader\n                                            id={`image_uploader__menuItem-${this.state.menuItem.id}`}\n                                            imageURL={this.state.menuItem.image !== null ? config.API_URL + config.UPLOADS_PATH + '/' + this.state.menuItem.image : ''}\n                                            newImageLoaded={this.onNewImageLoaded}\n                                            maximumSizeInMb={100}\n                                            allowedFileTypes=\".jpg,.png,.jpeg\"\n                                            disabled={disabled}\n                                            />\n                                    </div>\n                                    {true &&\n                                        <Fragment>\n                                            <div className=\"col-6 mt-2\">\n                                                <h5>category</h5>\n                                                <select\n                                                    name={`${isRestaurant ? 'menu_category' : 'category'}`}\n                                                    className=\"form-control\"\n                                                    defaultValue={this.state.menuItem.category}\n                                                    disabled={disabled}\n                                                    onChange={this.updateMenuItem}>\n                                                    {\n                                                        isRestaurant ?\n                                                            <div></div>\n                                                            :\n                                                            <Fragment>\n                                                                <option value=\"en\">Entree</option>\n                                                                <option value=\"ap\">Appetizer</option>\n                                                                <option value=\"si\">Side Item</option>\n                                                                <option value=\"de\">Dessert</option>\n                                                            </Fragment>\n                                                    }\n                                                </select>\n                                            </div>\n                                            <div className=\"col-6 mt-2\">\n                                                <h5>price</h5>\n                                                <input type=\"text\" name=\"price\" className=\"form-control\" value={this.state.menuItem.price}\n                                                disabled={disabled} onChange={this.updateMenuItem} />\n                                            </div>\n                                        </Fragment>\n                                    }\n                                    <div className='col-3 mt-2'>\n                                        <div className=\"checkbox_selector\">\n                                            <input\n                                                type=\"checkbox\"\n                                                id=\"spicy\"\n                                                checked={this.state.menuItem.spicy}\n                                                onChange={this.updateOptions}\n                                                />\n                                                <span>Spicy</span>\n                                        </div>\n                                    </div>\n                                    {this.state.menuItem.spicy &&\n                                        <div className='col-9 mt-2'>\n                                            <select\n                                                name='spiciness'\n                                                className=\"form-control\"\n                                                defaultValue={this.state.menuItem.spiciness}\n                                                disabled={disabled}\n                                                onChange={this.updateMenuItem}>\n                                                <option value={SPICINESS_CHOICES.spicy}>spicy only</option>\n                                                <option value={SPICINESS_CHOICES.mildToSpicy}>mild, med, spicy</option>\n                                                <option value={SPICINESS_CHOICES.notSpicyToSpicy}>not spicy, mild, med, spicy</option>\n                                            </select>\n                                        </div>\n                                    }\n                                    <div className=\"col-12 mt-2\">\n                                        <h5>allergens</h5>\n                                            {\n                                                allergens.map((allergen: any) =>\n                                                    <div className=\"checkbox_selector\" key={allergen.code}>\n                                                        <input\n                                                            type=\"checkbox\"\n                                                            id={allergen.code}\n                                                            checked={this.state.menuItem.allergens.indexOf(allergen.code) !== -1}\n                                                            onChange={this.allergenSelected}/>\n                                                        <span>{allergen.name}</span>\n                                                    </div>\n                                                )\n                                            }\n                                    </div>\n                                    {/*\n                                    <div className=\"col-12 mt-2\">\n                                        <hr/>\n                                        <h5>proteins:</h5>\n                                            {\n                                                proteins.map((protein: any) =>\n\n\n                                                    <div className=\"checkbox_selector\" key={protein.code}>\n                                                        <input\n                                                            type=\"checkbox\"\n                                                            id={protein.code}\n                                                            checked={this.state.menuItem.proteins.indexOf(protein.code) > -1}\n                                                            onChange={this.proteinSelected}/>\n                                                        <span>{protein.name}</span>\n                                                    </div>\n\n                                                )\n                                            }\n                                    </div>\n                                    */}\n                                    <div className='col-12 text-right'>\n                                        <LoadingIconButton\n                                            outerClass='float-right'\n                                            btnClass={`btn btn-outline-${this.state.hasBeenUpdated ? 'success' : 'secondary'}`}\n                                            label='save'\n                                            onClick={this.save}\n                                            busy={this.state.saving}\n                                            disabled={!this.state.hasBeenUpdated}\n                                            />\n                                    </div>\n                                </div>\n                            </div>\n                            <div className={'col-12 d-block d-md-none'}>\n                                <hr/>\n                            </div>\n                            <div className={`col-12 col-md-6 mt-2 mb-2 mt-md-0`}>\n                                <MenuComponents menuItem={this.state.menuItem} />\n                            </div>\n                        </div>\n                    </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state: AppState): LinkStateProps => ({\n    operator: state.operatorReducer\n})\n\nexport default connect(mapStateToProps)(MenuItemEdit);","import React from 'react';\n\nimport './image_uploader.scss';\n\ninterface Props {\n    id: string;\n    imageURL: string; \n    newImageLoaded(file: File | null): void;\n    uploadPrompt?: string,\n    allowedFileTypes?: string,\n    maximumSizeInMb?: number,\n    disabled?: boolean\n}\n\ninterface State {\n    hasImage: boolean,\n    currentImage: File | null,\n    loadingImage: boolean\n}\n\nexport default class ImageUploader extends React.Component<Props, State> {\n\n    private fileElement: HTMLInputElement | null = null;\n    private reloadAttempted: boolean = true;\n\n    constructor(props: Props) {\n        super(props);\n        \n        this.state = {\n            hasImage: props.imageURL !== \"\" && props.imageURL !== null ? true : false,\n            currentImage: null,\n            loadingImage: props.imageURL !== \"\" && props.imageURL !== null ? true : false\n        }\n    }\n\n    public componentDidMount = (): void => {\n        if (this.props.imageURL) {\n            this.loadImage(this.props.imageURL);\n        }\n    }\n\n    public componentDidUpdate = (props: Props): void => {\n    }\n\n    private toDataURL(url: any): Promise<string> {\n\n        return new Promise((resolve, reject) => {\n            var xhr = new XMLHttpRequest();\n            xhr.onload = function() {\n                if (xhr.response.type !== \"text/html\") {\n                    var reader = new FileReader();\n                    reader.onloadend = function() {\n                        resolve(reader.result?.toString());\n                    }\n                    reader.readAsDataURL(xhr.response);\n                } else {\n                    reject();\n                } \n                \n            };\n            xhr.open('GET', url);\n            xhr.responseType = 'blob';\n            xhr.send();\n        })\n    }\n\n    private clearImage = (e: React.MouseEvent<HTMLElement>): void => {\n        if (this.props.disabled) return;\n\n        e.preventDefault();\n        this.setState({\n            hasImage: false\n        });\n\n        this.props.newImageLoaded(null);\n    }\n\n    private loadImage = (url: string): void => {\n        this.toDataURL(url)\n            .then( (data: string) => {\n                (window.document.getElementById(this.props.id) as HTMLImageElement).src=data;\n                this.setState({loadingImage: false})\n            })\n            .catch( err => {\n                window.setTimeout(()=>{\n                    if (this.reloadAttempted) {\n                        this.setState({\n                            loadingImage: false,\n                            hasImage: false\n                        })\n                    } else {\n                        this.reloadAttempted = true;\n                        this.loadImage(url);\n                    }\n                }, 3000);\n            })\n    }\n\n    private onInputChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            this.readFile(e.target.files[0])\n            .then((resp: any) => {\n                console.log(resp.file.size);\n                const maxSizeInMb: number = this.props.maximumSizeInMb ? this.props.maximumSizeInMb : 2;\n                if (resp.file.size > maxSizeInMb * 1048576) {\n                    window.alert(`Maximum File Size is ${maxSizeInMb}Mb`);\n                    return;\n                } else {\n                    (window.document.getElementById(this.props.id) as HTMLImageElement).src=resp.result;\n                    this.setState({currentImage: resp.dataURL, hasImage: true})\n                    this.props.newImageLoaded(resp.file)\n                }\n                \n            }) \n        }\n    }\n\n    private open = () => {\n        if (!this.props.disabled)\n            this.fileElement?.click();\n    }\n\n    private readFile= (file: File) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = function (e: any) {\n                let dataURL = e.target.result;\n                dataURL = dataURL.replace(\";base64\", `;name=${file.name};base64`);\n                resolve({file, dataURL, result:e.target.result});\n            };\n          reader.readAsDataURL(file);\n        });\n    }\n\n    public render() {\n        return(\n            <div className={`image_uploader ${this.props.disabled ? '' : 'image_uploader--active'}`}>\n                <div \n                    className=\"inner\"\n                    onClick={this.open}\n                    > \n                    <img \n                        src={\"\"}\n                        alt=\"question\"\n                        id={this.props.id}\n                        className={this.state.hasImage? \"\" : \"hidden\"}\n                        />\n                    <input\n                        type=\"file\"\n                        id=\"xxx\"\n                        ref={input => this.fileElement = input}\n                        onChange={this.onInputChanged}\n                        accept={this.props.allowedFileTypes ? this.props.allowedFileTypes : \"\"}\n                    >\n                    </input>\n                    {(!this.state.hasImage && !this.props.disabled) &&\n                        <div className={`no-image image_uploader-overlay`}>\n                            <span>{ this.props.uploadPrompt || \"Click to  Upload Image\"}</span>\n                        </div>\n                    }\n                </div>\n                {(this.state.hasImage && !this.props.disabled) &&\n                    <div \n                        className=\"remove-btn\"\n                        onClick={this.clearImage}\n                        >X</div>\n                }\n                {this.state.loadingImage &&\n                    <div className=\"loading-image image_uploader-overlay\">\n                        <span>Loading Image...</span>\n                    </div>\n                }\n            </div>\n        )\n    }\n}","import React from 'react';\nimport InputWidget from '../widgets/inputWidget/InputWidget';\nimport apiActionsService from '../../services/APIActionService';\n\nimport '../widgets/searchWidget/search_widget.scss';\nimport SearchRecipesAndIngredientsDTO from \"../../dto/SearchRecipesAndIngredientsDTO\";\nimport SearchRecipesAndIngredientsResultDTO from \"../../dto/SearchRecipesAndIngredientsDTO\";\n\ninterface Props {\n    itemSelected: (item: any) => void,\n    disabled?: boolean\n}\n\ninterface State {\n    results: SearchRecipesAndIngredientsDTO[],\n    showChoices: boolean,\n    currentValue: string\n}\n\nexport default class RecipeAndIngredientSearcher extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            results: [],\n            showChoices: false,\n            currentValue: ''\n        }\n    }\n\n    private itemSelected = (item: any): void => {\n        this.setState({showChoices: false, currentValue: item.item.name});\n        this.props.itemSelected(item);\n    }\n\n    protected doSearch = (id: string, text: string): void => {\n        this.setState({currentValue: text});\n\n        if (text === '') {\n            this.setState({showChoices: false});\n            return;\n        }\n\n        apiActionsService.searchRecipesAndIngredients(text)\n            .then((results: SearchRecipesAndIngredientsDTO[]) => {\n                this.setState({results, showChoices: true});\n                this.props.itemSelected(text);\n            })\n            .catch( () => window.alert('unable to search'))\n    }\n\n    public render() {\n        return(\n            <fieldset disabled={this.props.disabled}>\n                <div\n                    className=\"row search_widget\"\n                    onBlur={() => this.setState({showChoices: false, currentValue: ''})}\n                >\n                    <div className=\"col-12\">\n                        <InputWidget\n                            key={Math.random()}\n                            id='search_widget__InputWidget'\n                            type=\"\"\n                            initialValue={this.state.currentValue}\n                            onUpdate={this.doSearch}\n                            placeholder='name of ingredient or recipe to add'\n                            defaultUpdateValue={''}\n                        />\n                    </div>\n                    <div className={`col-12 search_widget_results--${this.state.showChoices ? 'show' : 'hide'}`}>\n                        <div className=\"search_widget_results__content\">\n                            {\n                                this.state.results.map((result: SearchRecipesAndIngredientsResultDTO) =>\n                                    <div\n                                        key={`search_result_${result.item.id.toString() + result.item.name}`}\n                                        className='row search_widget_default_display'>\n                                        <div\n                                            className=\"row search_widget__result\"\n                                            onClick={() => this.itemSelected(result)}\n                                        >\n                                            <div className=\"col-12 result__name\">\n                                                {result.item.name}\n                                            </div>\n                                        </div>\n                                    </div>\n                                )\n                            }\n                        </div>\n                    </div>\n                </div>\n            </fieldset>\n        )\n    }\n}","/*\n    For attaching components/addons to menu items\n */\n\nexport default class AttachComponentDTO {\n    public item_type!: string; // 'recipe', 'ingredient'\n    public item_id!: number;\n    public component_quantity!: number;\n    public component_unit!: number;\n    public is_add_on!: boolean;\n    public add_on_name!: string;\n    public add_on_price!: number;\n\n    constructor(\n        item_type: string,\n        item_id: number,\n        component_quantity: number = 0,\n        component_unit: number = 0,\n        is_add_on: boolean = false,\n        add_on_name: string = '',\n        add_on_price: number = 0\n    ) {\n        this.item_type = item_type;\n        this.item_id = item_id;\n        this.component_quantity =component_quantity;\n        this.component_unit =component_unit;\n        this.is_add_on = is_add_on;\n        this.add_on_name = add_on_name;\n        this.add_on_price = add_on_price;\n    }\n}","import ModelBase from \"./ModelBase\";\nimport Ingredient from \"./IngredientModel\";\nimport Recipe from \"./RecipeModel\";\n\nexport const INGREDIENT_UNIT: string[] = [\n    'oz', //0\n    'lb',\n    'g',\n    'kg', // 3\n    'fl oz',\n    'cup', // 5\n    'pint',\n    'qt',\n    'gal', //9\n    'ml',\n    'l',\n    'ea'\n]\n\nexport default class RecipeIngredient extends ModelBase {\n    public quantity!: number;\n    public unit!: number;\n    public yld!: number;\n    public ingredient!: Ingredient | number;\n    public recipe!: Recipe | number;\n\n    constructor (\n        quantity: number = 0,\n        unit: number = 0,\n        yld: number = 1,\n        ingredient: Ingredient | number = -1,\n        recipe: Recipe | number = -1\n    ) {\n        super();\n        this.quantity = quantity;\n        this.unit = unit;\n        this.yld = yld;\n        this.ingredient = ingredient;\n        this.recipe = recipe;\n    }\n\n    public scale = (): number => {\n        return this.quantity;\n    }\n}","/*\n    Handles adding and editing MenuItemComponent\n */\nimport React, {ChangeEvent, useState, Fragment} from 'react';\nimport Recipe from \"../../models/RecipeModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport MenuItemComponent from \"../../models/MenuItemComponentModel\";\nimport menuItemService from '../../services/MenuItemService';\nimport MenuItem from \"../../models/MenuItemModel\";\nimport SearchRecipesAndIngredientsDTO from \"../../dto/SearchRecipesAndIngredientsDTO\";\nimport RecipeAndIngredientSearcher from \"./RecipeAndIngredientSearcher\";\nimport AttachComponentDTO from \"../../dto/AttachComponentDTO\";\nimport {INGREDIENT_UNIT} from \"../../models/RecipeIngredientModel\";\n\ninterface Props {\n    menuItem: MenuItem\n    addComponent: (component: MenuItemComponent) => void\n}\n\nexport const MenuComponentAdd = (props: Props): React.ReactElement => {\n    const [selectedItem, setSelectedItem] = useState<SearchRecipesAndIngredientsDTO | string | null>(null);\n    const [isAddOn, setIsAddOn] = useState(false);\n    const [addOnPrice, setAddOnPrice] = useState(0);\n    const [addOnName, setAddOnName] = useState('');\n    const [quantity, setQuantity] = useState(0);\n    const [unit, setUnit] = useState(0);\n    const [saving, setSaving] = useState(false);\n    const [nameOnly, setNameOnly] = useState(false);\n\n    const save = (): void => {\n        setSaving(true);\n\n        menuItemService.attachComponent(\n            props.menuItem,\n            new AttachComponentDTO(\n                selectedItem ? (selectedItem as SearchRecipesAndIngredientsDTO).type : 'name',\n                selectedItem ? (selectedItem as SearchRecipesAndIngredientsDTO).item.id : 0,\n                quantity, unit, isAddOn, addOnName, addOnPrice\n                ))\n            .then((menuItemComponent: MenuItemComponent) => props.addComponent(menuItemComponent))\n            .catch(() => window.alert('unable to add component'))\n            .then(() => setSaving(false))\n    }\n\n    let canSave: boolean =\n        ((selectedItem !== null && typeof selectedItem !== 'string') &&\n        (!isAddOn || (isAddOn && addOnName !== ''))) ||\n        isAddOn && nameOnly\n\n    return(\n        <fieldset disabled={saving}>\n            <div className='row menu_component_add'>\n                <div className='col-12'>\n                    <h5 className='float-left'>add component</h5>\n                    <LoadingIconButton\n                        outerClass='float-right'\n                        btnClass={`btn btn-sm btn-outline-${canSave ? 'success' : 'secondary'}`}\n                        label='save'\n                        disabled={!canSave}\n                        onClick={save}\n                        busy={saving}\n                        />\n                </div>\n                    <div className='col-12 mt-2'>\n                    <RecipeAndIngredientSearcher\n                        itemSelected={(item: SearchRecipesAndIngredientsDTO) => setSelectedItem(item)}\n                        disabled={isAddOn && nameOnly}\n                    />\n                </div>\n                <div className='col-12'>\n                    <fieldset disabled={saving || nameOnly}>\n                            <div className='row'>\n                                <div className='col-6 col-md-2 mt-2'>\n                                    <h6>quantity</h6>\n                                    <input\n                                        type='number'\n                                        className='form-control'\n                                        value={quantity}\n                                        onChange={(e: ChangeEvent<HTMLInputElement>) => setQuantity(parseFloat(e.target.value))}\n                                        />\n                                </div>\n                                <div className='col-6 col-md-2 mt-2'>\n                                    <h6>unit</h6>\n                                    <select\n                                        className='form-control'\n                                        value={unit}\n                                        onChange={(e: ChangeEvent<HTMLSelectElement>) => setUnit(parseInt(e.target.value))}\n                                    >\n                                        {\n                                            INGREDIENT_UNIT.map((unit: string, index: number) =>\n                                                <option value={index} key={`opt_${unit}`}>{unit}</option>\n                                            )\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                    </fieldset>\n                </div>\n                <div className='col-12 mt-2'>\n                    <div className='checkbox_selector'>\n                        <input\n                            type='checkbox'\n                            checked={isAddOn}\n                            onChange={() => setIsAddOn(!isAddOn)}\n                            />\n                        <span>is add-on</span>\n                    </div>\n                </div>\n                {isAddOn &&\n                    <Fragment>\n                        <div className='col-12 mt-2'>\n                            <div className='checkbox_selector'>\n                                <input\n                                    type='checkbox'\n                                    checked={nameOnly}\n                                    onChange={() => setNameOnly(!nameOnly)}\n                                    />\n                                <span>name only</span>\n                            </div>\n                        </div>\n                        <div className='col-6 mt-2'>\n                            <h6>display name</h6>\n                            <input\n                                className='form-control'\n                                value={addOnName}\n                                onChange={(e:ChangeEvent<HTMLInputElement>) => setAddOnName(e.target.value)}\n                                />\n                        </div>\n                        <div className='col-6 mt-2'>\n                            <h6>price</h6>\n                            <input\n                                type='number'\n                                className='form-control'\n                                value={addOnPrice}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setAddOnPrice(parseFloat(e.target.value))}\n                                />\n                        </div>\n                    </Fragment>\n                }\n            </div>\n        </fieldset>\n    )\n}","import RecipeIngredient from \"../models/RecipeIngredientModel\";\nimport {INGREDIENT_UNIT} from '../models/RecipeIngredientModel';\nimport Ingredient from \"../models/IngredientModel\";\nimport Allergen from \"../models/AllergenModel\";\nimport MenuItemAddOn from \"../models/MenuItemAddOnModel\";\nimport MenuItemComponentModel from \"../models/MenuItemComponentModel\";\nimport AllergenModel from \"../models/AllergenModel\";\n\nclass RecipeHelper {\n\n    public createStringListOfAllergensFromIngredient = (ingredient: Ingredient): string => {\n        let list: string = '';\n        ingredient.allergens.forEach((allergen: Allergen, index: number) => {\n            list += allergen.name;\n            if (index < ingredient.allergens.length -1)\n                list += ', '\n        })\n        return list;\n    }\n\n    public extractAllergensFromMenuItemComponent = (item: MenuItemAddOn | MenuItemComponentModel): string[] => {\n        let allergens: string[] = [];\n\n        if (item.ingredient) {\n            allergens = item.ingredient.allergens.map((allergen: Allergen) => allergen.name);\n        } else if (item.recipe) {\n            item.recipe.ingredients.forEach((ingredient: RecipeIngredient) =>{\n                (ingredient.ingredient as Ingredient).allergens.forEach((allergen: Allergen) => {\n                    if (allergens.indexOf(allergen.name) < 0)\n                        allergens.push(allergen.name);\n                })\n\n            })\n        }\n\n        return allergens;\n    }\n\n    public scaleRecipeIngredient = (ingredient: RecipeIngredient, servings: number, scaleTo: number, yld: number = 1): string => {\n        let rawValue: number =  ((ingredient.quantity / servings) * scaleTo / ingredient.yld) / yld;\n        let unit: number = ingredient.unit;\n\n        if (unit === 0 && rawValue > 15) { // oz > lb\n            rawValue /= 16;\n            unit = 1;\n        }\n\n        if (unit === 2 && rawValue > 99) { // g > kg\n            rawValue /= 1000;\n            unit = 3;\n        }\n\n        if (unit === 4 && rawValue > 5) { // tsp > fl_oz\n            rawValue /= 6;\n            unit = 6;\n        }\n\n        if (unit === 5 && rawValue > 1) {// tbl > fl_oz\n            rawValue /= 2;\n            unit = 6;\n        }\n\n        if (unit === 6 && rawValue > 7) {// fl_oz > c\n            rawValue /= 8;\n            unit = 7;\n        }\n\n        if (unit === 7 && rawValue > 1) {// c > pint\n            rawValue /= 2;\n            unit = 8;\n        }\n\n        if (unit === 8 && rawValue > 1) { // pint > q\n            rawValue /= 2;\n            unit = 9;\n        }\n\n        if (unit === 9 && rawValue > 3) { // q > gal\n            rawValue /= 4;\n            unit = 10;\n        }\n\n        if (unit === 11 && rawValue > 999) { // ml > l\n            rawValue /= 1000;\n            unit = 12;\n        }\n\n        return `${rawValue.toFixed(2)} ${INGREDIENT_UNIT[unit]}`;\n    }\n}\n\nexport default new RecipeHelper();","import React, { Fragment } from 'react';\nimport MenuItemComponent from \"../../models/MenuItemComponentModel\";\nimport { useHistory } from 'react-router-dom';\nimport {INGREDIENT_UNIT} from \"../../models/RecipeIngredientModel\";\nimport MenuItemAddOn from \"../../models/MenuItemAddOnModel\";\nimport Allergen from \"../../models/AllergenModel\";\nimport recipeHelper from '../../helpers/RecipeHelper';\n\ninterface Props {\n    item: MenuItemComponent | MenuItemAddOn,\n    deleteComponent: (component: MenuItemComponent | MenuItemAddOn) => void\n}\n\nexport const MenuComponentComponent = (props: Props): React.ReactElement => {\n    const history = useHistory();\n\n    const allergens: string[] = recipeHelper.extractAllergensFromMenuItemComponent(props.item);\n\n    return(\n        <div className='row menu_component mt-2'>\n            <div className='col-12 menu_component__title'>\n                {\n                    'price' in props.item ?\n                        props.item.name\n                        :\n                        props.item.ingredient ?\n                            props.item.ingredient.name\n                            :\n                            props.item.recipe!.name\n                }\n            </div>\n            <div className='col-12 menu_component__portion'>\n                {`${props.item.quantity} ${INGREDIENT_UNIT[props.item.unit]}`}\n            </div>\n            <div className='col-12'>\n                {\n                    props.item.ingredient ?\n                        <Fragment><strong>ingredient:</strong> {props.item.ingredient.name}</Fragment>\n                        :\n                        props.item.recipe ?\n                            <Fragment><strong>recipe:</strong> {props.item.recipe.name}</Fragment>\n                            : \"\"\n\n                }\n                {\n                    'price' in props.item ?\n                        <Fragment>&nbsp;&nbsp;&nbsp;<strong>price:</strong> {props.item.price}</Fragment>\n                        :''\n                }\n            </div>\n            {allergens.length > 0 ?\n                <div className='col-12 menu_component__allergens'>\n                    <strong>allergens: </strong>\n                    {\n                        allergens.map((allergen: string, index: number) =>\n                            allergen + ((index < allergens.length - 1) ? ',' : '')\n                        )\n                    }\n                </div>\n                :\n                <div>&nbsp;</div>\n            }\n            <div className='col-12 mt-2'>\n                <button\n                    className='btn btn-sm btn-outline-danger float-right'\n                    onClick={() => props.deleteComponent(props.item)}\n                    >X</button>\n\n                {(props.item.ingredient != null || props.item.recipe != null) &&\n                    <button\n                        className='btn btn-sm btn-outline-primary float-right mr-2'\n                        onClick={() => history.push(\n                            {pathname: `/dashboard/${props.item.ingredient ? 'ingredient' : 'recipe'}/edit/${props.item.ingredient ? props.item.ingredient.id : props.item.recipe!.id}`}\n                            )}\n                        >\n                        {\n                            props.item.ingredient ?\n                                <Fragment>goto ingredient</Fragment>\n                                :\n                                props.item.recipe ?\n                                    <Fragment>goto recipe</Fragment>\n                                    : \"\"\n                        }\n                    </button>\n                }\n            </div>\n        </div>\n    )\n}","import React from \"react\";\nimport printIcon from '../../../assets/print_icon.png';\nimport './print_button.scss';\n\ninterface Props {\n    prompt: string\n}\n\nexport const PrintButton = (props: Props): React.ReactElement => {\n\n    return (\n        <div className='print_button'>\n            <img\n                src={printIcon}\n                alt={`print ${props.prompt}`}\n                />\n        </div>\n    )\n}","\nclass PrintHelper {\n\n    public download = (fileName: string, body: any): void => {\n        var element = document.createElement('a');\n        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(body));\n        element.setAttribute('download', fileName);\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n\n        element.click();\n\n        document.body.removeChild(element);\n    }\n\n    public print = (body: any): void => {\n\n    }\n}\n\nexport default new PrintHelper();","import React, {useState, Fragment} from 'react';\nimport MenuItem from \"../../models/MenuItemModel\";\nimport MenuItemComponent from \"../../models/MenuItemComponentModel\";\nimport {MenuComponentAdd} from \"./MenuComponentAdd\";\nimport {MenuComponentComponent} from \"./MenuComponentComponent\";\nimport menuItemService from '../../services/MenuItemService';\nimport MenuItemAddOn from \"../../models/MenuItemAddOnModel\";\nimport {PrintButton} from \"../widgets/print_button/PrintButton\";\nimport printHelper from '../../helpers/PrintHelper';\n\ninterface Props {\n    menuItem: MenuItem\n}\n\nexport const MenuComponents = (props: Props): React.ReactElement => {\n    const [components, setComponents] = useState(props.menuItem.components);\n    const [addOns, setAddOns] = useState(props.menuItem.add_ons)\n    const [adding, setAdding] = useState(false);\n    const [documentToPrint, setDocumentToPrint] = useState<any>('');\n\n    let menuItem: MenuItem = props.menuItem;\n\n    const addComponent = (component: MenuItemComponent | MenuItemAddOn): void => {\n        setAdding(false);\n        if ('price' in component) {\n            menuItem.add_ons = [component, ...addOns]\n            setAddOns(menuItem.add_ons);\n        } else {\n            menuItem.components = [component, ...components]\n            setComponents(menuItem.components);\n        }\n\n    }\n\n    const deleteComponent = (item: MenuItemComponent | MenuItemAddOn): void => {\n        const isAddon: boolean = 'price' in item;\n\n        if (!window.confirm(`are you sure you want to remove this ${isAddon ? 'add-on' : 'component'}?`)) return;\n\n        menuItemService.deleteComponent(props.menuItem, item.id, isAddon)\n            .then(() => {\n                if (isAddon) {\n                    menuItem.add_ons = addOns.filter((c: MenuItemAddOn) => c.id !== item.id);\n                    setAddOns(menuItem.add_ons);\n                } else {\n                    menuItem.components = components.filter((c: MenuItemComponent) => c.id !== item.id);\n                    setComponents(menuItem.components);\n                }\n            })\n            .catch(() => window.alert('unable to delete component'))\n    }\n\n    function printPlatingSheet(): void {\n        menuItemService.generatePlatingSheet(props.menuItem)\n            .then((content: any) => printHelper.download('plating_sheet.pdf', content))\n            .catch(() => window.alert('unable to download plating sheet'))\n    }\n\n    return (\n        <Fragment>\n            <div className='menu_components row'>\n                <div className='col-12'>\n                    <h3 className='float-left'>components</h3>\n                    <div className='d-none d-md-block float-right'\n                         onClick={printPlatingSheet}\n                    >\n                        <PrintButton prompt='sheet'/>\n                    </div>\n                    <button\n                        className={`btn btn-sm btn-outline-${adding ? 'warning' : 'primary'} float-right`}\n                        onClick={() => setAdding(!adding)}\n                        >{adding ? 'cancel ' : ''}add</button>\n                </div>\n                <div className='col-12'>\n                    <hr/>\n                </div>\n                {adding &&\n                    <div className='col-12'>\n                        <MenuComponentAdd menuItem={props.menuItem} addComponent={addComponent}/>\n                        <hr/>\n                    </div>\n                }\n                {addOns.length > 0 &&\n                    <Fragment>\n                        <div className='col-12 menu_components__components_type'>\n                            add-ons\n                        </div>\n                        {\n                            addOns.map((addOn: MenuItemAddOn) =>\n                                <div className='col-12 col-md-6' key={`addon_${Math.random()}`}>\n                                    <MenuComponentComponent item={addOn} deleteComponent={deleteComponent}/>\n                                </div>\n                            )\n                        }\n                    </Fragment>\n                }\n                {components.length > 0 &&\n                    <Fragment>\n                        <div className='col-12 menu_components__components_type mt-2'>\n                            components\n                        </div>\n                        {\n                            components.map((component: MenuItemComponent) =>\n                                <div className='col-12 col-md-6' key={`comp_${Math.random()}`}>\n                                    <MenuComponentComponent item={component} deleteComponent={deleteComponent}/>\n                                </div>\n                            )\n                        }\n                    </Fragment>\n                }\n            </div>\n            <div className=\"print_sheet\">\n                {documentToPrint}\n            </div>\n        </Fragment>\n    )\n}","import Service from './Service';\n\nclass MenuCategoryService extends Service {\n    appName = 'dashboard';\n    view = 'menu_category';\n\n    public updateIndexes = (indexes: number[]): any => {\n        return this._post(`${this.viewPath}/update_indexes/`, indexes);\n    }\n}\n\nexport default new MenuCategoryService();","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { MenuItems } from './MenuItems';\nimport MenuEdit from './MenuItemEdit';\n\nexport const Menu = (): React.ReactElement => {\n\n    return(\n        <div className=\"row menu\">\n            <div className=\"col-12\">\n                <Switch>\n                    <Route path=\"/dashboard/menu/edit/:id/\" component={MenuEdit} />\n                    <Route path=\"/dashboard/menu/:category/\" component={MenuItems} />\n                </Switch>\n            </div>\n        </div>\n    )\n}","import React from 'react';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\n\nimport './authentication.css';\nimport authService from '../../services/AuthService';\nimport { Redirect } from 'react-router-dom';\nimport User from '../../models/User';\nimport AuthenticateDTO from '../../dto/AuthenticateDTO';\nimport { AppActions, AppState } from '../../store/store';\nimport { dispatchLogin } from '../../store/auth/authActions';\nimport { AuthState } from '../../store/auth/authReducer';\n\ninterface LinkStateProps {\n    auth: AuthState\n}\n\ninterface LinkDispatchProps {\n    login: (user: User, operator_token: string) => void\n}\n\ntype Props = LinkStateProps & LinkDispatchProps\n\ninterface State {\n    email: string,\n    password: string,\n    loggingIn: boolean\n}\n\nclass Login extends React.Component<Props, State> {\n\n    state = {\n        email: \"\",\n        password: \"\",\n        loggingIn: false\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    private login = (): void => {\n        if (this.state.email === \"\" || this.state.password === \"\") return;\n\n        authService.authenticate(this.state.email, this.state.password)\n            .then( (dto: AuthenticateDTO) => {\n                console.log(dto);\n                this.props.login(dto.user, dto.operator_token);\n            })\n            .catch((err: any) => {\n                window.alert(\"Invalid Credentials\");\n            });\n    }\n\n    public render() {\n        if (this.props.auth.loggedIn) \n            return <Redirect to=\"/dashboard/menu\" />\n        \n        return(\n            <div className=\"row justify-content-center\" id=\"login-panel\">\n                <div className=\"class-12 class-md-6\">\n                    <div className=\"wrapper fadeInDown\">\n                        <div id=\"formContent\">\n                            <div className=\"fadeIn first\">\n                                <h5>Welcome to the Operator Dashboard!</h5>\n                            </div>\n\n                            <form>\n                                <input\n                                    type=\"text\"\n                                    className=\"fadeIn second\"\n                                    id=\"email\"\n                                    placeholder=\"email\"\n                                    value={this.state.email}\n                                    onChange={this.updateData}\n                                    />\n                                <input\n                                    type=\"password\" \n                                    className=\"fadeIn third\"\n                                    id=\"password\"\n                                    placeholder=\"password\"\n                                    value={this.state.password}\n                                    onChange={this.updateData}\n                                    />\n                                <input \n                                    type=\"button\"\n                                    className=\"fadeIn fourth\"\n                                    value=\"Log In\"\n                                    onClick={this.login}\n                                    />\n                            </form>\n\n                            <div id=\"formFooter\">\n                                <a className=\"underlineHover\" href=\"/\">Forgot Password?</a>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state: AppState): LinkStateProps => ({auth: state.authReducer})\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>): LinkDispatchProps => ({\n    login: bindActionCreators(dispatchLogin, dispatch)\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)","import Service from './Service';\nimport Order from '../models/OrderModel';\n\nclass OrderService extends Service {\n    appName=\"dashboard\";\n    view=\"order\";\n\n    public getCompletedOrders = (date: string): Promise<Order[]> => {\n        return this._get<Order[]>(`${this.appName}/${this.view}/get_completed/?date=${date}`);\n    }\n}\n\nexport default new OrderService();","import React, { Fragment } from 'react';\nimport Order from '../../models/OrderModel';\n\nimport orderService from '../../services/OrderService';\nimport OrderItem from '../../models/OrderItemModel';\nimport helpers from '../../helpers/helpers';\nimport momentHelper from '../../helpers/MomentHelper';\nimport { Redirect } from 'react-router-dom';\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\nimport InputWidget from \"../widgets/inputWidget/InputWidget\";\n\ninterface State {\n    loading: boolean,\n    orders: Order[],\n    editId: number,\n    startDate: string,\n    endDate: string,\n    currentPage: number,\n    paginationCount: number\n}\n\nexport default class Orders extends React.Component<any, State> {\n\n    state = {\n        loading: false,\n        orders: [],\n        editId: 0,\n        startDate: '',\n        endDate: '',\n        currentPage: 0,\n        paginationCount: 0\n    }\n\n    private orderStatuses: string[] = ['canceled', 'pending', 'paid'];\n\n    public componentDidMount = (): void => {\n        this.changePage(1);\n    }\n\n    private changePage = (pageNumber: number, searchPattern?: string): void => {\n        this.setState({loading: true, currentPage: pageNumber});\n\n        orderService.pagedSearchResults(pageNumber, searchPattern)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({\n                    orders: dto.results as Order[],\n                    loading: false,\n                    paginationCount: dto.count\n                })\n            })\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    public render() {\n        if (this.state.editId > 0)\n            return <Redirect to={`/dashboard/orders/edit/${this.state.editId}`} /> \n\n        return(\n            <div className=\"row orders\">\n                <div className=\"col-12\">\n                    <div className=\"row\">\n                        <div className='col-12'>\n                            <InputWidget\n                                id='orders_search_input'\n                                type='text'\n                                onUpdate={(id: string, searchPattern: string) => this.changePage(this.state.currentPage, searchPattern)}\n                                />\n                            <PageSelector\n                                numItems={this.state.paginationCount}\n                                currentPage={this.state.currentPage}\n                                gotoPage={this.changePage}\n                                />\n                        </div>\n                    </div>\n                    {this.state.loading &&\n                        <LoadingOverlay />\n                    }\n                    {!this.state.loading &&\n                        this.state.orders.length === 0 ?\n                            <div>No Orders Found</div>\n                            :\n                            <table className={'table'}>\n                                <thead>\n                                    <tr>\n                                        <th>Name</th>\n                                        <th className='d-none d-md-block'>Order ID</th>\n                                        <th>Contact</th>\n                                        <th className='d-none d-md-block'>Date</th>\n                                        <th>Status</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {\n                                        this.state.orders\n                                            .map((order: Order, index: number) => {\n                                                let menuItemCount: number = 0;\n                                                let total: number = 0;\n                                                let deliveryDates: string[] = [];\n                                                order.items.forEach((orderItem: OrderItem) => {\n                                                    menuItemCount += orderItem.cart_item.quantity;\n                                                    total += orderItem.cart_item.quantity * orderItem.cart_item.price;\n                                                    if (deliveryDates.indexOf(orderItem.cart_item.delivery_date) === -1)\n                                                        deliveryDates.push(orderItem.cart_item.delivery_date);\n                                                })\n\n                                                return (\n                                                    <tr key={order.id} className={index % 2 ? '' : 'orders-line-highlight'}\n                                                        onClick={()=> this.setState({editId: order.id})}>\n                                                        <td>{order.contact_name}</td>\n                                                        <td className='d-none d-md-block'>{order.public_id}</td>\n                                                        <td>{order.email}<br/>{order.phone_number}</td>\n                                                        <td className='d-none d-md-block'>{momentHelper.asFullDate(order.created_at)}</td>\n\n                                                        <td className={`order-status-${order.order_status}`}>\n                                                            {this.orderStatuses[order.order_status]}\n                                                        </td>\n                                                    </tr>\n                                                )\n                                        })\n                                    }\n                                </tbody>\n                            </table>\n                    }\n                </div> \n            </div>\n        )\n    }\n}","import Service from './Service';\nimport OrderItem from '../models/OrderItemModel';\n\nclass OrderItemService extends Service{\n\n    appName = 'dashboard';\n    view = 'order_item';\n\n    public getCompleted = (date: string): Promise<OrderItem[]> => {\n        return this._get<OrderItem[]>(`${this.appName}/${this.view}/get_completed/?date=${date}`)\n    }\n}\n\nexport default new OrderItemService();","import React, { Fragment } from 'react';\n\nimport orderItemService from '../../services/OrderItemService';\nimport orderService from '../../services/OrderService';\nimport OrderItem from '../../models/OrderItemModel';\n\nimport './order.scss';\nimport Order from '../../models/OrderModel';\nimport helpers from '../../helpers/helpers';\n\ninterface State {\n    pullDate: string,\n    orderItems: OrderItem[],\n    pullType: string,\n    orders: Order[]\n}\n\nexport default class Export extends React.Component<any, State> {\n\n    state = {\n        pullDate: \"\",\n        orderItems: [],\n        pullType: \"route\",\n        orders: []\n    }\n\n    public componentDidMount = (): void => {\n        /*\n        orderItemService.getByDate('2020-06-16')\n            .then((prepListItems: OrderItem[]) => {\n                if (prepListItems.length === 0) {\n                    window.alert('There are not prep items for this day');\n                    return;\n                }\n                //this.setState({prepListItems})\n            })\n            .catch( err => window.alert('Unable to display prep list'));\n            */\n    }\n\n    private loadData = (): void => {\n        if (this.state.pullType === 'prep') {\n            this.loadOrderItems();\n        } else {\n            this.loadOrders();\n        }\n    }\n\n    private loadOrderItems = (): void => {\n        orderItemService.getCompleted(this.state.pullDate)\n            .then((orderItems: OrderItem[]) => {\n                if (orderItems.length === 0) {\n                    window.alert('There are not items for this day');\n                    return;\n                }\n                this.setState({orderItems}, ()=> window.print())\n            })\n            .catch( err => window.alert('Unable to display'));\n    }\n\n    private loadOrders = (): void => {\n        orderService.getCompletedOrders(this.state.pullDate)\n            .then((orders: Order[]) => {\n                if (orders.length === 0) {\n                    window.alert('There are not items for this day');\n                    return;\n                }\n\n                if (this.state.pullType === 'route') {\n                    let fileContent: string = \"Address line 1\\tAddress line 2\\tCity\\tState\\tZip\\tName\\tEmail Address\\tPhone Number\\tExternal ID\\tOrder Count\\tDriver\\n\";\n                    let orderItems: OrderItem[] = [];\n\n                    orders.forEach((order: Order) => {\n                        orderItems = order.items.filter((orderItem: OrderItem) => orderItem.cart_item.delivery_date === this.state.pullDate);\n                        if (orderItems.length > 0) {\n                            fileContent += `${order.street_address}\\t${order.unit}\\t${order.city}\\tCA\\t${order.zip}\\t${order.contact_name}\\t${order.email}\\t${order.phone_number}\\t${order.public_id}\\t${orderItems.length}\\tLee\\n`;\n                        }\n                    })\n                    \n                    var bb = new Blob([fileContent ], { type: 'text/plain' });\n                    var a = document.createElement('a');\n                    a.download = `delivery_route_${this.state.pullDate}.tsv`;\n                    a.href = window.URL.createObjectURL(bb);\n                    a.click();\n                } else {\n                    this.setState({orders},()=> window.print())\n                }\n            })\n            .catch( err => window.alert(err));\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    public render() {\n        return(\n            <div className=\"row\">\n                <div className=\"col-12 col-md-6 export-panel\">\n                    <select id=\"pullType\" className=\"control-form\" onChange={this.updateData} defaultValue={this.state.pullType}>\n                        <option value=\"prep\">Prep List</option>\n                        <option value=\"delivery_tags\">Delivery Tags</option>\n                        <option value=\"route\">Route CSV</option>\n                    </select>\n                    <br/><br/>\n                    Select a date: \n                    <input type=\"date\" id=\"pullDate\" className=\"form-control\"\n                            value={this.state.pullDate} onChange={this.updateData}/>\n                    <button className=\"btn btn-outline-success mt-2\" onClick={this.loadData}>Print</button>\n                </div>\n                {(this.state.orderItems.length + this.state.orders.length > 0) &&\n                    <div className=\"col-12 print_sheet\">\n                        {\n                            this.state.pullType === 'prep' ?\n                                <PrepDisplay orderItems={this.state.orderItems} date={this.state.pullDate} />\n                                :\n                                <DeliveryTagsDisplay orders={this.state.orders} date={this.state.pullDate} />\n                                    \n                        }\n                    </div>\n                }\n            </div>\n        )\n    }\n}\n\nfunction DeliveryTagsDisplay(props: any) {\n    return (\n        <div className='delivery_tags_print'>\n            {\n                props.orders.map((order: Order) => {\n                    const orderItems: OrderItem[] = order.items.filter((orderItem: OrderItem) => orderItem.cart_item.delivery_date === props.date)\n                    \n                    return (\n                        <Fragment key={`order_${order.id}`}>\n                            <div className='quarter-page'>\n                                <span className=\"contact-info\">{order.contact_name}</span>\n                                <span className=\"street-address\">{order.street_address} {order.unit}</span>\n                                <span className=\"street-address\">{order.city} {order.zip}</span>\n                                <span className=\"contact-info\">{order.phone_number}</span>\n                                <b>Items:</b>\n                                <div className=\"delivery-tag-items\">\n                                    {\n                                        orderItems.map((orderItem: OrderItem) => {\n                                            return(\n                                                <div className=\"delivery-tag-item\" key={`oi_${orderItem.id}`}> \n                                                    {orderItem.cart_item.quantity.toString() + \" \" + helpers.extractCartItemDescription(orderItem.cart_item)}\n                                                </div>\n                                            )\n                                        })\n                                    }\n                                </div>\n                                {order.notes &&\n                                    <div className=\"delivery-instructions\">\n                                        <br/>\n                                        _______________________________\n                                        <h4>Delivery Instructions:</h4>\n                                        <div className=\"delivery_instructions_text\">\n                                            {order.notes}\n                                        </div>\n                                    </div>\n\n                                }\n                            </div>\n                        </Fragment>\n                    )\n                    })\n            }\n        </div>\n    )\n}\n\nfunction PrepDisplay(props: any) {\n\n    type CondenensedListItem = {count: number, dish: string, protein: string, spicy_text:string};\n\n    const spicy: string[] = ['No', 'mild', 'spicy'];\n    let condensedList: {[key: string]: CondenensedListItem} = {};\n    let key: string = \"\";\n    let dish: string = \"\";\n    let protein: string = \"\";\n    let spicy_text: string = \"\";\n    let dishCount: number = 0;\n\n    props.orderItems.forEach((orderItem: OrderItem) => {\n        dish = orderItem.cart_item.menu_item.name;\n        protein = (orderItem.cart_item.menu_item.proteins.split(':').length > 1 && orderItem.cart_item.protein !== \"\") ?\n                    orderItem.cart_item.protein : \"\";\n        spicy_text = (orderItem.cart_item.menu_item.spicy) ? spicy[orderItem.cart_item.spicy] : \"\";\n\n        key = `${dish}:${protein}:${spicy_text}`;\n        if (!(key in condensedList))\n            condensedList[key] = {count: 0, dish, protein, spicy_text};\n\n        condensedList[key].count += orderItem.cart_item.quantity;\n        dishCount += orderItem.cart_item.quantity; \n    });\n\n    return ( \n        <Fragment>\n            <span className='print_sheet__header'>{props.date} &nbsp;&nbsp;:&nbsp;&nbsp;{dishCount} items</span>\n            <table className='prep-sheet'> \n                <thead>\n                    <tr>\n                        <td>#</td>\n                        <td>Dish</td>\n                        <td>Protein</td>\n                        <td>Spicy</td>\n                        <td>L</td>\n                        <td>P</td>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        Object.keys(condensedList).sort().map((key: string, index: number) => {\n                            return (\n                                <tr className={`${index % 2 ? '' : 'print-row-dark'}`} key={key}>\n                                    <td>{condensedList[key].count}</td>\n                                    <td>{condensedList[key].dish}</td>\n                                    <td>{condensedList[key].protein}</td>\n                                    <td>{condensedList[key].spicy_text}</td>\n                                    <td></td>\n                                    <td></td>\n                                </tr> \n                            )\n                        })\n                    }\n                </tbody>\n            </table>\n        </Fragment>\n    )\n}","import ModelBase from \"./ModelBase\";\nimport OrderItem from \"./OrderItemModel\";\n\nexport const ORDER_TYPES = {\n    standard: 0,\n    pickUp: 1,\n    jit_delivery: 2,\n    future_delivery: 3\n}\n\nexport default class Order extends ModelBase {\n\n    public order_status!: number;\n    public square_payment!: string;\n    public contact_name!: string;\n    public phone_number!: string;\n    public email!: string;\n    public unit!: string;\n    public street_address!: string;\n    public city!: string;\n    public zip!: string;\n    public notes!: string;\n    public items!: OrderItem[];\n    public uuid!: string;\n    public public_id!: string;\n    public nonce!: string;\n    public tip!: number;\n    public order_type!: number;\n\n    constructor(\n        id: number = -1,\n        order_status: number = 0,\n        contact_name: string = '',\n        phone_number: string = '',\n        email: string = '',\n        unit: string = '',\n        street_address: string = '',\n        city: string = '',\n        zip: string = '',\n        notes: string = '',\n        items: OrderItem[] = [],\n        uuid: string = '',\n        public_id: string = '',\n        nonce: string = '',\n        tip: number = 0\n    ){\n        super();\n        this.id = id;\n        this.order_status = order_status;\n        this.contact_name = contact_name;\n        this.phone_number = phone_number;\n        this.email = email;\n        this.unit = unit;\n        this.street_address = street_address;\n        this.city = city;\n        this.zip = zip;\n        this.notes = notes;\n        this.items = items;\n        this.uuid = uuid;\n        this.public_id = public_id;\n        this.nonce = nonce;\n        this.tip = tip;\n    }\n}\n\nexport class OrderDTO extends ModelBase {\n\n    public order_status!: number;\n    public contact_name!: string;\n    public phone_number!: string;\n    public email!: string;\n    public unit!: string;\n    public street_address!: string;\n    public city!: string;\n    public zip!: string;\n    public cart_items!: number[];\n    public notes!: string;\n    public nonce!: string;\n    public tip!: number;\n    public coupon!: number;\n    \n    constructor(order: Order) {\n                    super();\n\n                    this.id = order.id;\n                    this.order_status = order.order_status;\n                    this.contact_name = order.contact_name;\n                    this.phone_number = order.phone_number;\n                    this.email = order.email;\n                    this.unit = order.unit;\n                    this.street_address = order.street_address;\n                    this.city = order.city;\n                    this.zip = order.zip;\n                    this.notes = order.notes;\n                    this.nonce = order.nonce;\n                    this.tip = order.tip;\n                    // this.coupon = order.coupon.id;\n                }\n}","import React from 'react';\nimport Order from \"../../models/OrderModel\";\nimport adminService from '../../services/APIActionService';\n\ninterface Props {\n    order: Order\n}\n\ninterface State {\n    subject: string,\n    body: string,\n    include_order: boolean,\n    submitting: boolean\n}\n\nexport default class OrderEmail extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            subject: `Order ${props.order.public_id}`,\n            body: '',\n            include_order: true,\n            submitting: false\n        }\n    }\n\n    private submit = (): void => {\n        this.setState(({submitting: true}));\n\n        adminService.sendSupportEmail(\n            this.props.order.email,\n            this.state.subject,\n            this.state.body,\n            this.state.include_order ? this.props.order : null)\n            .then(() => {\n                window.alert('Email Sent');\n                this.setState({subject: '', body: '', include_order: true})\n            })\n            .catch( err => window.alert('unable to send email'))\n            .then(() => this.setState({submitting: false}))\n    }\n\n    private toggleIncludeOrder = (): void => {console.log(this.state.include_order)\n        this.setState(({include_order: !this.state.include_order}));\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n        } as Pick<State, keyof State>);\n    }\n\n    public render() {\n        return (\n            <div className={`row order_email`}>\n                <div className={`col-12 col-md-6`}>\n                    <label>subject:</label>\n                    <input className={'form-control order_email__subject'} id={'subject'}\n                        value={this.state.subject} onChange={this.updateData} disabled={this.state.submitting}/>\n                </div>\n                <div className={'col-12 mt-3'}>\n                    <label>Message</label>\n                    <textarea className={'form-control order_email__body'} id={'body'} value={this.state.body}\n                        onChange={this.updateData} disabled={this.state.submitting} rows={8}/>\n                </div>\n                <div className={'col-12 mt-3'}>\n                    Include Order: &nbsp;&nbsp;\n                    <input className={'order_email__include_order'} type={'checkbox'} id={'include_order'} checked={this.state.include_order}\n                        onChange={this.toggleIncludeOrder} disabled={this.state.submitting}/>\n                </div>\n                <div className={'col-12 mt-3'}>\n                    <button\n                        className={'btn btn-outline-success order_email__submit'}\n                        disabled={this.state.subject === '' || this.state.body === '' || this.state.submitting}\n                        onClick={this.submit}\n                        >Send Email</button>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport Order, { OrderDTO } from '../../models/OrderModel';\n\nimport orderService from '../../services/OrderService';\nimport OrderItem from '../../models/OrderItemModel';\nimport helpers, {OrderedItems} from '../../helpers/helpers';\nimport momentHelper from '../../helpers/MomentHelper';\nimport { Link, Redirect } from 'react-router-dom';\nimport OrderEmail from \"./OrderEmail\";\n\ninterface State {\n    loading: boolean,\n    order: Order,\n    updating: boolean,\n    updatesPending: boolean,\n    returnToOrders: boolean\n}\n\nexport default class OrderEdit extends React.Component<any, State> {\n\n    state = {\n        loading: true,\n        order: new Order(),\n        updating: false,\n        updatesPending: false,\n        returnToOrders: false\n    }\n\n    public componentDidMount = (): void => {\n        const { match: { params } } = this.props;\n\n        orderService.get<Order>(params.id)\n            .then((order: Order) => this.setState({order, loading: false}))\n            .catch( err => window.alert(err))\n    }\n\n    private saveUpdates = (): void => {\n        this.setState({updating: true});\n        orderService.update<any>(new OrderDTO(this.state.order))\n            .then((order: Order) => this.setState({order, updating: false, updatesPending: false, returnToOrders: true}))\n            .catch ( err => window.alert(err))\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>): void => {\n        let order: any = this.state.order;\n        order[e.target.id] = e.target.value;\n        this.setState({order, updatesPending: true})\n    }\n\n    public render() {\n        if (this.state.loading)\n            return <div>Loading...</div>\n\n        if (this.state.returnToOrders)\n            return <Redirect to=\"/dashboard/orders\" />\n\n        const orderedItems: OrderedItems = helpers.sortOrderItemsByDate(this.state.order.items);\n\n        return (\n            <div className=\"row edit_order\">\n                <div className=\"col-12\">\n                    <Link to={'/dashboard/orders'}>{`<<< Return to Orders`}</Link>\n                    <br/><br/>\n                </div>\n                <div className=\"col-12\">\n                    <h5>Order ID: {this.state.order.public_id}</h5>\n                    <select id=\"order_status\" defaultValue={this.state.order.order_status}\n                            className={`order_status order_status--${this.state.order.order_status}`}\n                            onChange={this.updateData} disabled={this.state.updating}>\n                        <option value=\"0\">Canceled</option>\n                        <option value=\"1\">Pending</option>\n                        <option value=\"2\">Paid</option>\n                    </select>\n                </div>\n                <div className=\"col-12 col-md-6\">\n                    <div className=\"form-group mt-2\">\n                        <label htmlFor=\"contact_name\">contact name</label>\n                        <input id=\"contact_name\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.contact_name} onChange={this.updateData}/>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"phone_number\">phone number</label>\n                        <input id=\"phone_number\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.phone_number} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"city\">city</label>\n                        <input id=\"city\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.city} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"zip\">zip</label>\n                        <input id=\"zip\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.zip} onChange={this.updateData}/>\n                    </div>\n                </div>\n                <div className=\"col-12 col-md-6\">\n                    <div className=\"form-group\">\n                        <label htmlFor=\"email\">email</label>\n                        <input id=\"email\" type=\"email\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.email} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"street_address\">Street Address</label>\n                        <input id=\"street_address\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.street_address} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"unit\">unit</label>\n                        <input id=\"unit\" type=\"text\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.unit} onChange={this.updateData}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"notes\">delivery notes</label>\n                        <textarea id=\"notes\" className=\"form-control\" disabled={this.state.updating}\n                                value={this.state.order.notes} onChange={this.updateData}/>\n                    </div>\n                </div>\n                <div className=\"col-2\">\n                    <pre>\n                        <code className=\"prettyprint\">\n                            {JSON.stringify(this.state.order.square_payment, null, 4)}\n                        </code>\n                    </pre>\n                </div>\n                <div className=\"col-12\">\n                    <button className=\"btn btn-outline-success\" onClick={this.saveUpdates}\n                            disabled={!this.state.updatesPending || this.state.updating}>Save Updates</button>\n                </div>\n                <div className=\"col-12 edit_order_deliveries\">\n                    <hr/>\n                    <h5>Deliveries:</h5>\n                    {\n                        Object.keys(orderedItems).sort().map((key: string) => {\n                            return (\n                                <div className=\"row mt-3\">\n                                    <div className=\"col-12\">\n                                        <b>{momentHelper.asFullDate(key)}</b>\n                                        {\n                                            orderedItems[key].map((orderItem: OrderItem) =>\n                                                <div className=\"row\">\n                                                    <div className=\"col-12\">\n                                                        &nbsp;&nbsp;&nbsp;\n                                                        {orderItem.cart_item.quantity}\n                                                        &nbsp;\n                                                        {helpers.extractCartItemDescription(orderItem.cart_item)}\n                                                    </div>\n                                                </div>\n                                            ) \n                                        }\n                                    </div> \n                                </div>\n                            )\n                        })\n                    }\n                </div>\n                <div className={'col-12'}>\n                    <hr/>\n                    <h5>Email Customer:</h5>\n                    <OrderEmail order={this.state.order}/>\n                </div>\n            </div> \n        )\n    }\n}","import ModelBase from './ModelBase';\nimport {format} from 'date-fns';\n\nexport default class Coupon extends ModelBase {\n\n    public code!: string;\n    public mode!: number;\n    public calculation_type!: number;\n    public expire!: string;\n    public start_value!: number;\n    public current_value!: number;\n    public remaining_uses!: number;\n    public email!: string;\n    public active!: boolean;\n\n    constructor (\n        id?: number,\n        code?: string,\n        active?: boolean,\n        mode?: number,\n        calculation_type?: number,\n        expire?: string,\n        start_value?: number,\n        current_value?: number,\n        remaining_uses?: number,\n        email?: string\n    ){\n        super();\n        let expire_date: Date = new Date();\n        expire_date.setDate(expire_date.getDate() + 60); // an extra 30 days  to cover for the diff between python and javascript dates\n        this.id = id || -1;\n        this.code = code || '';\n        this.active = active !== false ? true : false;\n        this.mode = mode || 0;\n        this.calculation_type = calculation_type || 0\n        this.expire = expire ||\n            format(expire_date, 'yyyy-mm-dd');\n        this.start_value = start_value || 0;\n        this.current_value = current_value || 0;\n        this.remaining_uses = remaining_uses || 0;\n        this.email = email || '';\n    }\n}\n\nexport class CouponDTO extends Coupon {\n\n    public code!: string;\n    public mode!: number;\n    public calculation_type!: number;\n    public expire!: string;\n    public start_value!: number;\n    public current_value!: number;\n    public remaining_uses!: number;\n    public email!: string;\n    public active!: boolean;\n\n    constructor(coupon: Coupon){\n        super();\n        this.id = coupon.id;\n        this.active = coupon.active;\n        this.mode = coupon.mode;\n        this.calculation_type = coupon.calculation_type;\n        this.expire = coupon.expire;\n        this.start_value = coupon.start_value;\n        this.current_value = coupon.current_value;\n        this.remaining_uses = coupon.remaining_uses;\n        this.email = coupon.email;\n    }\n}","import Service from './Service';\n\nclass CouponService extends Service {\n    appName = \"dashboard\";\n    view = \"coupon\";\n}\n\nexport default new CouponService();","import React, {useEffect, useState} from 'react';\n\nimport Coupon from '../../models/CouponModel';\nimport momentHelper from '../../helpers/MomentHelper';\n\nimport './coupon.scss';\nimport couponService from '../../services/CouponService';\n\ninterface Props {\n    coupon: Coupon,\n    couponUpdated: (coupon: Coupon) => void\n}\n\nexport const CouponComponent = (props: Props): React.ReactElement => {\n    const modes: string[] = ['standard', 'one off'];\n    const calculation_types: string[] = ['percentage', 'fixed'];\n    const [coupon, setCoupon] = useState<Coupon>(props.coupon);\n    const [deactivating, setDeactivating] = useState(false);\n\n    const deactivateCoupon = (): void => {\n        if (!window.confirm(`Are you sure you want to deactivate:\\n${coupon.code}\\n\\nCoupons cannot be reactivated!`)) return;\n        setDeactivating(true);\n        coupon.active = false;\n        couponService.update(coupon)\n            .then((coupon: Coupon) => {\n                setCoupon(coupon);\n                props.couponUpdated(coupon);\n            })\n            .catch(\n                err => console.log(err))\n    }\n\n    return (\n        <tr className={`coupon ${!props.coupon.active ? 'coupon--inactive' : ''}`}>\n            <td>\n                { coupon.active &&\n                    <button className={'btn btn-outline-danger coupon__deactivate'}\n                            disabled={deactivating}\n                            onClick={deactivateCoupon}\n                    >X</button>\n                }\n            </td>\n            <td className={'coupon__code'}>{coupon.code}</td>\n            <td className={'coupon__mode d-none d-md-table-cell'}>{modes[coupon.mode]}</td>\n            <td className={'coupon__mode d-none d-md-table-cell'}>{calculation_types[coupon.calculation_type]}</td>\n            <td className={'coupon__uses'}>{coupon.remaining_uses}</td>\n            <td className={'coupon__start_value d-none d-md-table-cell'}>\n                {\n                    props.coupon.calculation_type === 0 ?\n                        `${coupon.start_value * 100}%`\n                        :\n                        `$${coupon.start_value.toFixed(2)}`\n                }\n            </td>\n            <td className={'coupon__end_value d-none d-md-table-cell'}>\n                {\n                    coupon.calculation_type === 0 ?\n                        ``\n                        :\n                        `$${coupon.current_value.toFixed(2)}`\n                }\n            </td>\n            <td className={'coupon__expire'}>\n                {momentHelper.asFullDate(coupon.expire)}\n            </td>\n            <td className={'coupon__email d-none d-md-table-cell'}>\n                {coupon.email}\n            </td>\n        </tr>\n    )\n}","import React from 'react';\nimport Coupon from '../../models/CouponModel';\n\nimport couponService from '../../services/CouponService';\n\nimport './coupon.scss';\nimport {CouponComponent} from \"./CouponComponent\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {RouteComponentProps} from 'react-router-dom';\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\n\ninterface State {\n    loading: boolean,\n    coupons: Coupon[],\n    addingCoupon: boolean,\n    currentPage: number,\n    paginationCount: number\n}\n\nexport default class Coupons extends React.Component<RouteComponentProps, State> {\n\n    state = {\n        loading: true,\n        coupons: [],\n        addingCoupon: false,\n        currentPage: 0,\n        paginationCount: 0\n    }\n\n    public componentDidMount = (): void => {\n        this.changePages(1);\n    }\n\n    private changePages = (pageNumber: number): void => {\n        this.setState({currentPage: pageNumber, loading: true});\n\n        couponService.pagedSearchResults(pageNumber)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({\n                    coupons: dto.results as Coupon[],\n                    loading: false,\n                    paginationCount: dto.count\n                })\n                }\n            )\n            .catch( err => console.log(err))\n    }\n\n    private couponUpdated = (coupon: Coupon): void => {\n        this.setState({\n            coupons: this.state.coupons.map((c: Coupon) => {\n                if (c.id === coupon.id)\n                    return coupon\n                else\n                    return c\n            })\n        })\n    }\n\n    private addCoupon = (): void => {\n        this.setState(({addingCoupon: true}));\n        couponService.add<Coupon>(new Coupon())\n            .then((coupon: Coupon) => {this.props.history.push({pathname: `/dashboard/coupon/edit/${coupon.id}`})})\n            .catch( err => window.alert('Unable to create coupon'));\n    }\n\n    public render() {\n        if (this.state.loading)\n            return <LoadingOverlay />\n\n        const coupons: Coupon[] = this.state.coupons.sort((a: Coupon, b:Coupon) => {\n            return a.active < b.active ?\n                1\n                :\n                a.active > b.active ?\n                    -1 : 0\n        })\n\n        return(\n            <div className=\"row coupons\">\n                <div className='col-12'>\n                    <h3>coupons</h3>\n                    <hr/>\n                </div>\n                <div className={'col-12'}>\n                    <div className={'add_coupon'} onClick={() => this.props.history.push({pathname: '/dashboard/coupon/add'})}>\n                        {\n                            this.state.addingCoupon ?\n                                'Creating coupon...'\n                                :\n                                '+ Add Coupon'\n                        }\n                    </div>\n                    <PageSelector numItems={this.state.paginationCount} currentPage={this.state.currentPage} gotoPage={this.changePages} />\n                </div>\n                <div className={'col-12 mt-3'}>\n                    {\n                        coupons.length > 0 ?\n                            <table className={'table'}>\n                                <thead>\n                                <tr>\n                                    <th></th>\n                                    <th>code</th>\n                                    <th className='yes\n                                    '>mode</th>\n                                    <th className='d-none d-md-table-cell'>calculation</th>\n                                    <th>uses</th>\n                                    <th className='d-none d-md-table-cell'>start value</th>\n                                    <th className='d-none d-md-table-cell'>current value</th>\n                                    <th>expire</th>\n                                    <th className='d-none d-md-table-cell'>email</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                {\n                                    coupons.map((coupon: Coupon) =>\n                                        <CouponComponent\n                                            coupon={coupon} key={`c_${coupon.id}`}\n                                            couponUpdated={this.couponUpdated}/>\n                                    )\n                                }\n                                </tbody>\n                            </table>\n                            :\n                            <p>\n                                Coupons can be used for ad campaigns, rewarding great customers or an option to refunding\n                            </p>\n                    }\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\n\nimport deliveryDayService from '../../services/DeliveryDayService';\nimport DeliveryDay from '../../models/DeliveryDayModel';\nimport momentHelper from '../../helpers/MomentHelper';\nimport LoadingOverlay from '../overlays/LoadingOverlay';\nimport DeliveryDayItem from '../../models/DeliveryDayItemModel';\nimport {RouteComponentProps} from 'react-router-dom';\nimport {config} from \"../../config\";\n\ninterface Props extends RouteComponentProps {\n    match: any\n}\n\ninterface State {\n    loaded: boolean,\n    deliveryDay: DeliveryDay,\n    startDate: string,\n    endDate: string,\n    duplicating: boolean\n}\n\nexport default class DeliveryDuplicate extends React.Component<Props, State> {\n\n    state = {\n        loaded: false,\n        deliveryDay: new DeliveryDay(),\n        startDate: '',\n        endDate: '',\n        duplicating: false\n    }\n\n    public componentDidMount = (): void => {\n        const { match: { params } } = this.props;\n        deliveryDayService.get<DeliveryDay>(params.id)\n            .then((deliveryDay: DeliveryDay) => {\n                this.setState({deliveryDay, loaded: true})\n            })\n    }\n\n    private datesAreValid = (): boolean => {\n        return( \n            this.state.startDate !== '' &&\n            this.state.endDate !== '' &&\n            this.state.endDate > this.state.startDate\n            )\n    }\n\n    private duplicate = (): void => {\n        if(!window.confirm(`Are you sure you want duplicate: ${this.state.startDate} to ${this.state.endDate}`))\n            return;\n\n        deliveryDayService.duplicateDeliveryDay(this.state.deliveryDay, this.state.startDate, this.state.endDate)\n            .then((deliveryDay: DeliveryDay) => {\n                this.props.history.push({pathname: `/dashboard/delivery/edit/${deliveryDay.id}`})\n            })\n            .catch( err => window.alert(\"Unable to duplicate\"));\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            [e.target.id]: e.target.value as any,\n         }  as Pick<State, keyof State>);\n    }\n\n    public render() {\n        if (!this.state.loaded)\n            return <LoadingOverlay />\n\n        return(\n            <div className=\"row delivery_duplicate\">\n                <div className=\"col-12 delivery_duplicate__dates\">\n                    <h3>duplicate delivery menu</h3>\n                    {momentHelper.asFullDate(this.state.deliveryDay.date)} - {momentHelper.asFullDate(this.state.deliveryDay.end_date)}\n                    <hr/>\n                </div>\n                <div className=\"col-12\">\n                    Duplicate to:\n                </div>\n                <div className=\"col-12\">\n                    <div className=\"row\">\n                        <div className=\"col-12 col-md-2 delivery_duplicate__date\">\n                            <small>start date</small>\n                            <br/>\n                            <input\n                                type=\"date\"\n                                id=\"startDate\"\n                                value={this.state.startDate}\n                                disabled={this.state.duplicating}\n                                onChange={this.updateData} />\n                        </div>\n                        <div className=\"col-12 col-md-2 delivery_duplicate__date\">\n                            <small>end date</small>\n                            <br/>\n                            <input\n                                type=\"date\"\n                                id=\"endDate\"\n                                value={this.state.endDate}\n                                disabled={this.state.duplicating}\n                                onChange={this.updateData} />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-12 mt-3\">\n                    <button \n                        className=\"btn btn-outline-success duplicate_btn\" disabled={!this.datesAreValid()}\n                        onClick={this.duplicate}>\n                            Duplicate</button>\n                    <button \n                        className=\"btn btn-default ml-3\"\n                        onClick={() => (this.props as any).history.push({pathname: '/dashboard/deliveries'})}>\n                            Cancel</button>\n                </div>\n                <div className=\"col-12 delivery_duplicate_items\">\n                    <hr/>\n                    <div className=\"row\">\n                        {\n                            this.state.deliveryDay.day_items.map((item: DeliveryDayItem) => {\n                                return(\n                                    <div className=\"col-12 col-md-3 delivery_duplicate_items__item\" key={`di_${item.id}`}>\n                                        {item.menu_item.name}\n                                        <div className='delivery_duplicate_items__item_image'>\n                                            <img src={`${config.API_URL + config.UPLOADS_PATH}/${item.menu_item.image}`} alt={item.menu_item.name}/>\n                                        </div>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Fragment } from 'react';\n\nimport couponService from '../../services/CouponService';\nimport Coupon from \"../../models/CouponModel\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {RouteComponentProps} from 'react-router-dom'\n\ninterface State {\n    saving: boolean,\n    coupon: Coupon\n}\n\nexport default class CouponAdd extends React.Component<RouteComponentProps, State> {\n\n    state = {\n        saving: false,\n        coupon: new Coupon()\n    }\n\n    private cancel = (): void => {\n        if (window.confirm('Are you sure you want to cancel?'))\n            this.props.history.push('/dashboard/coupons');\n    }\n\n    private save = (): void => {\n        this.setState({saving: true});\n\n        let coupon: Coupon = this.state.coupon;\n\n        if (coupon.calculation_type === 0 && coupon.start_value > 1)\n            coupon.start_value = coupon.start_value * .01\n\n        couponService.add<Coupon>(this.state.coupon)\n            .then(() => {}) //this.props.history.push({pathname: '/dashboard/coupons'}))\n            .catch( err => alert('unable to add coupon'))\n            .finally(() => this.setState({saving: false}));\n    }\n\n    private updateData = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>): void => {\n        let coupon: any = this.state.coupon;\n        coupon[e.target.id] = e.target.value;\n        this.setState({coupon});\n    }\n\n    public render() {\n        if (this.state.saving)\n            return <LoadingOverlay />\n\n        return (\n            <div className={'row justify-content-center edit_coupon'}>\n                <div className={'col-12 col-md-4'}>\n                    <h3>Add Coupon</h3>\n                    <hr/>\n                    <div className={'row'}>\n                        <div className={'col-12 col-6 mt-3'}>\n                            Mode:\n                            <select id={'mode'} className={'form-control edit_coupon__mode'}\n                                value={this.state.coupon.mode}\n                                onChange={this.updateData}>\n                                <option value={0}>standard</option>\n                                <option value={1}>one off</option>\n                            </select>\n                        </div>\n                        <div className={'col-12 col-6 mt-3'}>\n                            Calculation:\n                            <select id={'calculation_type'} className={'form-control edit_coupon__calculation_type'}\n                                value={this.state.coupon.calculation_type}\n                                onChange={this.updateData}>\n                                <option value={0}>percentage</option>\n                                <option value={1}>fixed value</option>\n                            </select>\n                        </div>\n                        <div className={'col-12 col-6 mt-3 edit_coupon__start_value'}>\n                            value:\n                            <input\n                                id={'start_value'}\n                                value={this.state.coupon.start_value || ''}\n                                onChange={this.updateData}\n                                className={'form-control'} />\n                        </div>\n                        <div className={'col-12 col-6 mt-3 edit_coupon__email'}>\n                            uses:\n                            <input\n                                id={'remaining_uses'}\n                                type={'number'}\n                                value={this.state.coupon.remaining_uses}\n                                onChange={this.updateData}\n                                className={'form-control'} />\n                        </div>\n                        <div className={'col-12 col-6 mt-3 edit_coupon__email'}>\n                            expire:\n                            <input\n                                id={'expire'}\n                                value={this.state.coupon.expire}\n                                onChange={this.updateData}\n                                type={'date'}\n                                className={'form-control'} />\n                        </div>\n                        <div className={'col-12 col-6 mt-3 edit_coupon__email'}>\n                            email:\n                            <input\n                                id={'email'}\n                                value={this.state.coupon.email}\n                                onChange={this.updateData}\n                                className={'form-control'} />\n                        </div>\n                        <div className={'col-12 mt-3'}>\n                            <div className={'row justify-content-center'}>\n                                <button className={'btn btn-outline-success mr-3'} onClick={this.save}>\n                                    save\n                                </button>\n                                <button className={'btn btn-outline-default edit_coupon__cancel'} onClick={this.cancel}>\n                                    cancel\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {this.state.saving &&\n                    <LoadingOverlay />\n                }\n\n            </div>\n        )\n    }\n}","import ModelBase from \"./ModelBase\";\n\nexport default class MailingListModel extends ModelBase {\n\n    public email!: string;\n    public code!: string;\n    public active!: boolean;\n\n    constructor(\n        id: number = -1,\n        email: string = '',\n        code: string = '',\n        active: boolean = true\n) {\n        super();\n        this.id = id;\n        this.email = email;\n        this.code = code;\n        this.active = active;\n    }\n}","import Service from './Service';\n\nclass MailingListService extends Service {\n    appName = 'dashboard';\n    view='mailing_list';\n\n    public addUnserivcedZipcode = (code: string, email: string): Promise<any> => {\n        return this._post<any>(`${this.appName}/${this.view}/add_unserviced_zipcode`, {code, email});\n    }\n\n    public confirmZipCode = (zipCode: string) : Promise<string> => {\n        return this._get<any>(`${this.appName}/${this.view}/confirm_zip_code/?zip_code=${zipCode}`);\n    }\n}\n\nexport default new MailingListService();","import React, {useState} from 'react';\nimport MailingListModel from \"../../models/MailingListModel\";\nimport mailingListService from '../../services/MailingListService';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\ninterface Props {\n    dto: MailingListModel\n}\n\nexport const MailingListEntry = (props: Props): React.ReactElement => {\n    let checkDTO: MailingListModel = props.dto;\n    const [code, setCode] = useState<string>(checkDTO.code);\n    const [active, setActive] = useState<boolean>(checkDTO.active);\n    const [email, setEmail] = useState<string>(checkDTO.email);\n    const [saving, setSaving] = useState(false);\n\n    const save = (): void => {\n        setSaving(true);\n        mailingListService.update<MailingListModel>(new MailingListModel(checkDTO.id, email, code, active))\n            .then((dto:MailingListModel) => {\n                checkDTO = dto;\n                setSaving(false);\n            })\n            .catch( err => window.alert('unable to update entry'))\n    }\n\n    const disabled: boolean = code === checkDTO.code && active === checkDTO.active && email === checkDTO.email;\n\n    return (\n        <tr>\n            <td className='d-none d-md-table-cell'>\n                <input className={'form-control mailing_list__code'} value={code} type={'text'}\n                       onChange={(e: React.ChangeEvent<HTMLInputElement>) => setCode(e.target.value)} />\n            </td>\n            <td>\n                <input className={'form-control mailing_list__email'} value={email} type={'email'}\n                       onChange={(e: React.ChangeEvent<HTMLInputElement>) => setEmail(e.target.value)} />\n            </td>\n            <td>\n                <input className={'mailing_list__active'} type={'checkbox'} checked={active}\n                       onChange={() => setActive(!active)} />\n            </td>\n            <td>\n                <LoadingIconButton\n                    label='save'\n                    onClick={save}\n                    busy={saving}\n                    btnClass='btn btn-outline-success'\n                    outerClass='mailing_list__save_btn'\n                    disabled={disabled}\n                    />\n            </td>\n        </tr>\n    )\n}","import React, {ChangeEvent} from 'react';\nimport MailingListModel from '../../models/MailingListModel';\nimport mailingListService from '../../services/MailingListService';\nimport {MailingListEntry} from \"./MailingListEntry\";\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport InputWidget from \"../widgets/inputWidget/InputWidget\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\n\ninterface State {\n    mailingList: MailingListModel[],\n    loading: boolean,\n    newCode: string,\n    newEmail: string,\n    currentPage: number,\n    paginationCount: number\n}\n \nexport default class MailingList extends React.Component<any, State> {\n\n    constructor(props: any) {\n        super(props);\n\n        this.state = {\n            mailingList: [],\n            loading: true,\n            newCode: '',\n            newEmail: '',\n            currentPage: 0,\n            paginationCount: 0\n        }\n    }\n\n    private addNewEntry = (): void => {\n        mailingListService.add<MailingListModel>(new MailingListModel(-1, this.state.newEmail, this.state.newCode, true))\n            .then((entry: MailingListModel) => this.setState({\n                ...this.state,\n                mailingList: [...this.state.mailingList, entry],\n                newCode: '',\n                newEmail: ''\n            }))\n            .catch( err => window.alert('unable to add email \\n\\n this email address may already exist'))\n    }\n\n    public componentDidMount = (): void => { \n        this.changePage(1);\n    }\n\n    private changePage = (pageNumber: number, searchPattern?: string): void => {\n        this.setState({loading: true, currentPage: pageNumber});\n\n        mailingListService.pagedSearchResults(pageNumber, searchPattern)\n            .then((dto: PagedResultsDTO) => {\n                this.setState({\n                    mailingList: dto.results as MailingListModel[],\n                    loading: false,\n                    paginationCount: dto.count\n                })\n            })\n    }\n\n    public render() {\n        return(\n            <div className=\"row mailing_list\">\n                <div className={'col-12'}>\n                    <h3>mailing list</h3>\n                    <hr/>\n                </div>\n                <div className='col-12'>\n                    <InputWidget\n                        id='search_widget'\n                        type='text'\n                        onUpdate={(id: string, searchPattern: string) => this.changePage(this.state.currentPage, searchPattern)}\n                    />\n                    <PageSelector\n                        numItems={this.state.paginationCount}\n                        currentPage={this.state.currentPage}\n                        gotoPage={this.changePage}\n                        />\n                </div>\n                <div className={'col-12 mb-2'}>\n                    <h5>add email address</h5>\n                    <div className={'row'}>\n                        <div className={'col-12 col-md-3'}>\n                            <input type={'text'} placeholder={'zip'} value={this.state.newCode}\n                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                       this.setState({...this.state, newCode: e.target.value.toString()})}\n                            />\n                        </div>\n                        <div className={'col-12 col-md-3'}>\n                            <input type={'email'} placeholder={'email'} value={this.state.newEmail}\n                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                       this.setState({...this.state, newEmail: e.target.value.toString()})}\n                            />\n                        </div>\n                        <div className={'col-12 col-md-3'}>\n                            <button className={'btn btn-outline-success'} onClick={this.addNewEntry}>add</button>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-12\">\n                    {this.state.loading &&\n                        <LoadingOverlay />\n                    }\n                    {!this.state.loading &&\n                        <table className={'table'}>\n                            <thead>\n                                <tr>\n                                    <th className={'mailing_list__zip_header d-none d-md-table-cell'}>zip</th>\n                                    <th>email</th>\n                                    <th>active</th>\n                                    <th></th>\n                                </tr>\n                            </thead>\n                            {\n                                this.state.mailingList.length === 0 ?\n                                    <div>no results found</div>\n                                    :\n                                    <tbody>\n                                        {\n                                            this.state.mailingList.sort(\n                                                (a,b) =>\n                                                    (a.code > b.code) ? 1 : ((b.code > a.code) ? -1 : 0)).map((dto: MailingListModel) =>\n                                                    <MailingListEntry dto={dto} key={dto.email}/>\n                                            )\n                                        }\n                                    </tbody>\n                            }\n                        </table>\n                    }\n                </div>\n            </div>\n        )\n    }\n}","import Service from './Service';\nimport Order from \"../models/OrderModel\";\nimport MailTemplate from \"../models/MailTemplate\";\n\nclass MailTemplateService extends Service {\n    appName = 'dashboard';\n    view = 'mail_template';\n\n    public get_template_by_slug = (slug: string): Promise<MailTemplate> => {\n        return this._get<MailTemplate>(`${this.appName}/${this.view}/get_template_by_slug/?slug=${slug}`)\n    }\n}\n\nexport default new MailTemplateService();","import ModelBase from './ModelBase';\n\nexport default class MailTemplate extends ModelBase {\n    public slug!: string;\n    public text!: string;\n    public options!: {}\n\n    constructor(slug?: string, text?: string, options?: {}) {\n        super();\n        this.slug = slug || '';\n        this.text = text || '';\n        this.options = options || {}\n    }\n}\n","import React from 'react';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport mailTemplateService from '../../services/MailTemplateService';\nimport MailTemplate from \"../../models/MailTemplate\";\n\nimport './mail.scss';\n\ninterface Props {\n    templateSlug: string\n}\n\ninterface State {\n    loading: boolean,\n    updating: boolean,\n    template: MailTemplate,\n    text: string,\n    originalText: string\n}\n\nexport default class MailTemplateComponent extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n            updating: false,\n            template: new MailTemplate(),\n            text: '',\n            originalText: ''\n        }\n    }\n\n    public componentDidMount() {\n        mailTemplateService.get_template_by_slug(this.props.templateSlug)\n            .then((template: MailTemplate) => {\n                this.setState({text: template.text, originalText: template.text, template, loading: false})\n            })\n            .catch(() => {})\n            .then(() => this.setState({loading: false}))\n    }\n\n    public saveUpdates = (): void => {\n        this.setState({updating: true});\n\n        const template: MailTemplate = this.state.template;\n        template.text = this.state.text;\n\n        if (template.id < 0) {\n            template.slug = this.props.templateSlug;\n            template.options = '';\n            mailTemplateService.add<MailTemplate>(template)\n                .then(() => this.setState({originalText: this.state.text}))\n                .catch( err => window.alert('unable to save'))\n                .then(() => this.setState({updating: false}))\n        } else {\n            mailTemplateService.update<MailTemplate>(template)\n                .then(() => this.setState({originalText: this.state.text}))\n                .catch( err => window.alert('unable to update'))\n                .then(() => this.setState({updating: false}))\n        }\n    }\n\n    public render() {\n        if(this.state.loading)\n            return <LoadingOverlay />\n\n        return(\n            <div className={'col-12 col-md-6'}>\n                <div className={'row mail_template'}>\n                    <div className={'col-12'}>\n                        {this.props.templateSlug.replace(/-/g, ' ')}\n                    </div>\n                    <div\n                        className={'col-12 '}>\n                        <textarea\n                            className={'mail_template__body'}\n                            value={this.state.text}\n                            onChange={(e: any) => this.setState({text:e.target.value})}\n                            disabled={this.state.updating}\n                        ></textarea>\n                        ({this.state.text.length} characters)\n                    </div>\n                    <div className={'col-12'}>\n                        <button className={`btn btn-${this.state.updating || this.state.text === this.state.originalText ? \n                            'default' : 'success'}`}\n                                onClick={() => this.saveUpdates()}\n                                disabled={this.state.updating || this.state.text === this.state.originalText}\n                                >Update</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport MailTemplateComponent from \"./MailTemplateComponent\";\n\nexport const MailTemplates = (): React.ReactElement => {\n    const templateSlugs: string[] = [\n        'upcoming_delivery',\n        'upcoming_delivery_day',\n        'newsletter'\n    ]\n\n    return(\n        <div className={'row mail_template'}>\n            <div className={'col-12 mt-2'}>\n                <h3>mass mail templates</h3>\n                <hr/>\n            </div>\n            {\n                templateSlugs.map((slug: string) => <MailTemplateComponent templateSlug={slug} key={slug} />)\n            }\n        </div>\n    )\n}","import React, { Fragment } from 'react';\n\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport deliveryDayService from '../../services/DeliveryDayService';\nimport DeliveryDay from \"../../models/DeliveryDayModel\";\nimport DeliveryWindow from \"../../models/DeliveryWindowModel\";\nimport adminService from '../../services/APIActionService';\n\ninterface Props {\n    match: any\n}\n\ninterface State {\n    who: string,\n    deliveryDays: DeliveryDay[],\n    deliveryWindows: DeliveryWindow[],\n    message: string,\n    deliveryWindowId: number,\n    deliveryDate: string,\n    deliveryDay: DeliveryDay,\n    includeSamples: boolean\n}\n\nexport default class MailMassMailer extends React.Component<Props, State> {\n    state = {\n        who: 'all_customers',\n        deliveryDays: [],\n        deliveryWindows: [],\n        message: '',\n        deliveryWindowId: 0,\n        deliveryDate: '',\n        deliveryDay: new DeliveryDay(),\n        includeSamples: false\n    }\n\n    public componentDidMount = (): void => {\n        /*\n        Promise.all([\n            deliveryDayService.get<DeliveryDay[]>(),\n            deliveryWindowService.get<DeliveryWindow>()\n        ])\n            .then((values: (DeliveryDay[] | DeliveryWindow)[]) => {\n                // defaults for state\n                let who: string = 'all_customers';\n                let deliveryDate: string = '';\n                const deliveryWindows: DeliveryWindow[] = values[1] as any;\n                const deliveryWindow: DeliveryWindow = deliveryWindows.length > 0 ?\n                    deliveryWindows[0] : new DeliveryWindow();\n                const deliveryDay: DeliveryDay = values[0].length > 0 ?\n                    values[0][0] : new DeliveryDay()\n\n                //check if a type of email and option were sent\n                const { match: { params }} = this.props;\n                const option: any = 'option' in params ? params['option'] : '';\n\n                if ('mail_type' in params) {\n                    switch(params['mail_type']) {\n                        case('upcoming_delivery'):\n                            who = 'upcoming_delivery';\n                            deliveryDate = option;\n                            break;\n                    }\n                }\n\n                this.setState({\n                    who,\n                    deliveryDate,\n                    deliveryDays: values[0],\n                    deliveryDay: deliveryDay,\n                    deliveryWindows: deliveryWindows,\n                    deliveryWindowId: deliveryWindow.id\n                })\n            })\n\n         */\n    }\n\n    private goodToSend = (): boolean => {\n        const who: string = this.state.who;\n\n        if (this.state.message === \"\") return false\n\n        return  (\n            who == 'all_customers' || who == 'delivery_window' || who == 'upcoming_delivery_days' ||\n            (who == 'upcoming_delivery' && this.state.deliveryDate !== '')\n        )\n    }\n\n    private sendMail = (): void => {\n        let confirmMessage: string = 'Send to all customers';\n        let options: any = {}\n\n        if (this.state.includeSamples) options['include_menu_sample'] = true\n\n        switch (this.state.who){\n            case 'delivery_window':\n                confirmMessage = `Send to customers in the selected delivery window.`;\n                options['delivery_window'] = this.state.deliveryWindowId;\n                break;\n\n            case 'upcoming_delivery':\n                confirmMessage = `Send to customers receiving a delivery on: ${this.state.deliveryDate}`;\n                options['delivery_date'] = this.state.deliveryDate;\n                //TODO: Need to implement this\n                break;\n\n            case 'upcoming_delivery_days':\n                confirmMessage = `Send to customers in the delivery days ${this.state.deliveryDay.date} to ${this.state.deliveryDay.end_date}`\n                break;\n\n            default:\n                options['all_customers'] = true;\n        }\n\n        if (!window.confirm(`You about to initiate the following: \\n\\n${confirmMessage}\\n\\nContinue?`)) return\n        /*\n        adminService.sendMassMail(this.state.message, options)\n            .then((resp: any) => {\n                if(resp.count === 0 ){\n                    window.alert(`${confirmMessage} did not produce any emails.`);\n                    return;\n                } else {\n                    if(!window.confirm(`${confirmMessage}\\n\\nwill produce approx. ${resp.count} emails.\\n\\nSend?`))\n                        return\n\n                    adminService.sendMassMail(this.state.message, options, true)\n                        .then((resp: any) => window.alert(`${resp.count} emails were sent`))\n                }\n            })\n\n         */\n    }\n\n    public render() {\n        return(\n            <div className={'row mass_mailer justify-content-center'}>\n                <div className={'col-12 col-md-6'}>\n                    <div className={'row'}>\n                        <div className={'col-12'}>\n                            <h3>mass mailer</h3>\n                            <hr/>\n                        </div>\n                        <div className={'col-12'}>\n                            <label>message:</label>\n                            <textarea\n                                className={'mass_mailer__message form-control'}\n                                value={this.state.message}\n                                onChange={(e) => this.setState({message: e.target.value})}\n                            ></textarea>\n                            ({this.state.message.length} characters)\n                        </div>\n                        <div className={'col-12 mt-3 mass_mailer_send_to'}>\n                            send to:<br/>\n                            <div className={'mass_mailer_send_to__option'}>\n                                <input type={'radio'}\n                                       name={'to'}\n                                       id={'all_customers'}\n                                       checked={this.state.who === 'all_customers'}\n                                       onChange={() => this.setState({who: 'all_customers'})}/> all customers<br/>\n                                       <span>anyone who has completed an order</span>\n                            </div>\n                            <div className={'mass_mailer_send_to__option'}>\n                                <input type={'radio'} name={'to'}\n                                       id={'delivery_window'}\n                                       disabled={this.state.deliveryWindows.length === 0}\n                                       checked={this.state.who === 'delivery_window'}\n                                       onChange={() => this.setState({who: 'delivery_window'})}/> delivery window<br/>\n                                       <span>customers in the window selected below</span>\n                            </div>\n                            <div className={'mass_mailer_send_to__option'}>\n                                <input type={'radio'} name={'to'}\n                                   id={'upcoming_delivery'}\n                                   checked={this.state.who === 'upcoming_delivery'}\n                                   onChange={() => this.setState({who: 'upcoming_delivery'})} /> upcoming delivery<br/>\n                                   <span>customers receiving a delivery on the date selected below</span>\n                            </div>\n                            <div className={'mass_mailer_send_to__option'}>\n                                <input type={'radio'} name={'to'}\n                                   id={'upcoming_delivery_days'}\n                                   disabled={this.state.deliveryDays.length === 0}\n                                   checked={this.state.who === 'upcoming_delivery_days'}\n                                   onChange={() => this.setState({who: 'upcoming_delivery_days'})} /> upcoming delivery days<br/>\n                                   <span>customers receiving an order during the deliver days selected below</span>\n                            </div>\n\n                        </div>\n                        <div className={'col-12 mt-3 mass_mailer__options'}>\n                            {this.state.who === 'upcoming_delivery' &&\n                                <Fragment>\n                                    select a delivery day:\n                                    <input\n                                        type={'date'}\n                                        value={this.state.deliveryDate}\n                                        onChange={(e) =>\n                                            this.setState({deliveryDate: e.target.value})}\n                                        className={'form-control options__upcoming_delivery'} />\n                                </Fragment>\n                            }\n                            {this.state.who === 'upcoming_delivery_days' &&\n                                <Fragment>\n                                    select delivery days:\n                                    <select className={'form-control options__upcoming_delivery_days'}>\n                                        {\n                                            this.state.deliveryDays.map((deliveryDay: DeliveryDay) =>\n                                                <option key={`dd_${deliveryDay.id}`}>\n                                                    {`${deliveryDay.date} to ${deliveryDay.end_date}`}\n                                                </option>\n                                            )\n                                        }\n                                    </select>\n                                </Fragment>\n                            }\n                            {this.state.who === 'delivery_window' &&\n                                <Fragment>\n                                    select delivery window:\n                                    <select\n                                        className={'form-control options__delivery_windows'}\n                                        onChange={(e) =>\n                                            this.setState({deliveryWindowId: parseInt(e.target.value)})}>\n                                        {\n                                            this.state.deliveryWindows.map((window: DeliveryWindow) =>\n                                                <option key={`wi_${window.id}`} value={window.id}>\n                                                    {window.name}\n                                                </option>\n                                            )\n                                        }\n                                    </select>\n                                </Fragment>\n                            }\n                        </div>\n                        <div className={'col-12 mt-3 mass_mailer__includes'}>\n                            {this.state.who !== 'upcoming_delivery_days'&&\n                                <Fragment>\n                                    <input\n                                        type={'checkbox'}\n                                        className={'includes__include_samples'}\n                                        checked={this.state.includeSamples}\n                                        onChange={(e) => this.setState(({includeSamples: !this.state.includeSamples}))}\n                                    /> &nbsp;&nbsp;Include Upcoming Menu Samples\n                                </Fragment>\n                            }\n                        </div>\n                        <div className={'col-12 mt-3 mass_mailer__buttons text-center'}>\n                            <button\n                                className={'btn btn-outline-success buttons__send'}\n                                disabled={!this.goodToSend()}\n                                onClick={this.sendMail}\n                                >Send Mass Mail</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport MailingList from \"./MailingList\";\nimport {MailTemplates} from \"./MailTemplates\";\nimport MailMassMailer from \"./MailMassMailer\";\n\nexport const Mail = (): React.ReactElement => {\n\n    return(\n        <div className='row mail'>\n            <div className=\"col-12\">\n                <Switch>\n                    <Route path=\"/dashboard/mail/list/\" component={MailingList} />\n                    <Route path={'/dashboard/mail/template'} component={MailTemplates} />\n                    <Route path={'/dashboard/mail/mass_mailer/:mail_type/:option'} component={MailMassMailer} />\n                    <Route path={'/dashboard/mail/mass_mailer'} component={MailMassMailer} />\n                    <Route path=\"/dashboard/mail/\" component={MailTemplates} />\n                </Switch>\n            </div>\n        </div>\n    )\n}","import Service from './Service';\nimport Newsletter from \"../models/Newsletter\";\n\nclass NewsletterService extends Service {\n    appName = 'dashboard';\n    view = 'newsletter';\n\n    public release = (newsletterId: number, send_email: boolean = false): Promise<any> => {\n        return this._get<any>(`${this.appName}/${this.view}/${newsletterId}/release/?send_email=${send_email}`);\n    }\n\n    sendEmailSample = (newsletterId: number, email: string, send_email?: boolean): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${newsletterId}/send_email_sample/?email=${email}`);\n    }\n}\n\nexport default new NewsletterService();","import React from 'react';\nimport Newsletter from \"../../models/Newsletter\";\nimport helpers from '../../helpers/helpers';\nimport momentHelper from '../../helpers/MomentHelper';\nimport { useHistory } from 'react-router-dom';\n\nimport './newsletter.scss';\n\ninterface Props {\n    newsletter: Newsletter\n}\n\nexport const NewslettersNewsletter = (props: Props): React.ReactElement => {\n    const history = useHistory();\n\n    return (\n        <tr className={'newsletters_newsletter'}>\n            <td>{props.newsletter.title}</td>\n            <td>\n                {\n                    props.newsletter.release_date !== null && props.newsletter.release_date !== undefined ?\n                        momentHelper.asFullDate(props.newsletter.release_date)\n                        :\n                        <span>click 'Edit' to release</span>\n                }\n            </td>\n            <td>\n                <button\n                    className={'btn btn-sm btn-outline-success'}\n                    onClick={() => history.push({pathname: `/dashboard/newsletter/edit/${props.newsletter.id}`})}\n                    >Edit</button>\n            </td>\n        </tr>\n    )\n}","import ModelBase from \"./ModelBase\";\n\nexport default class Newsletter extends ModelBase {\n    public title!: string;\n    public content!: string;\n    public release_date!: any;\n\n    constructor(id?: number, title?: string, content?: string, release_date?: any) {\n        super();\n        this.id = id || -1;\n        this.title = title || '';\n        this.content = content || '';\n        this.release_date = release_date || null;\n    }\n}\n\n","import React from 'react';\nimport newsletterService from '../../services/NewsletterService';\nimport {withRouter} from 'react-router';\n\nimport './newsletter.scss';\nimport Newsletter from \"../../models/Newsletter\";\n\ninterface State {\n    title: string,\n    creating: boolean\n}\n\nclass NewsletterAdd extends React.Component<any, State> {\n\n    state = {\n        title: '',\n        creating: false\n    }\n\n    public render() {\n\n        const createNewsletter = (): void => {\n            this.setState({creating: true});\n            newsletterService.add<Newsletter>(new Newsletter(-1, this.state.title, ''))\n                .then((newsLetter: Newsletter) =>\n                    this.props.history.push({pathname: `/dashboard/newsletter/edit/${newsLetter.id}`}))\n                .catch( err => {console.log(err);\n                    window.alert('unable to create newsletter')\n                })\n        }\n\n        return(\n            <div className={'row newsletter_add'}>\n                <div className={'col-12'}>\n                    <h5>create newsletter</h5>\n                    <input\n                        placeholder={'title'}\n                        value={this.state.title}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                            this.setState(({title: e.target.value}))}\n                        />\n                    <button\n                        className={'btn btn-outline-success ml-2'}\n                        disabled={this.state.title === '' || this.state.creating}\n                        onClick={createNewsletter}\n                        >create</button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(NewsletterAdd);","import React, {useEffect, useState} from 'react';\nimport Newsletter from '../../models/Newsletter';\nimport newsletterService from '../../services/NewsletterService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {NewslettersNewsletter} from \"./NewslettersNewsletter\";\nimport NewsletterAdd from \"./NewsletterAdd\";\n\nexport const Newsletters = (): React.ReactElement => {\n    const[newsLetters, setNewsLetters] = useState<Newsletter[]>([]);\n    const[loading, setLoading] = useState<boolean>(true);\n\n    useEffect(() => {\n        newsletterService.get<Newsletter[]>()\n            .then((newsletters: Newsletter[]) => {\n                setNewsLetters(newsletters);\n                setLoading(false);\n            })\n            .catch( err => window.alert('unable to load newsletters'))\n    }, [])\n\n    if (loading)\n        return <LoadingOverlay />\n\n    // @ts-ignore\n    // @ts-ignore\n    return(\n        <div className={'row newsletters'}>\n            <div className={'col-12'}>\n                <h3>newsletters</h3>\n                <hr/>\n            </div>\n            <div className={'col-12 mb-2'}>\n                <NewsletterAdd />\n            </div>\n            <div className={'col-12'}>\n                {\n                    newsLetters.length > 0 ?\n                        <table className={'table'}>\n                            <thead>\n                                <tr>\n                                    <th>title</th>\n                                    <th>release</th>\n                                    <th></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {\n                                    newsLetters.map((newsletter: Newsletter) =>\n                                        <NewslettersNewsletter newsletter={newsletter} key={`nl_${newsletter.id}`} />\n                                    )\n                                }\n                            </tbody>\n                        </table>\n                        :\n                        <p>\n                            Newsletters are a great way to keep your customers updated about new menu items and your success\n                        </p>\n                }\n            </div>\n        </div>\n\n    )\n}","import React from 'react';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\n\nimport newsletterService from '../../services/NewsletterService';\n\nimport Newsletter from \"../../models/Newsletter\";\nimport { Link } from 'react-router-dom';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\ninterface State {\n    loading: boolean,\n    saving: boolean,\n    releasing: boolean,\n    title: string,\n    content: string,\n    newsletter: Newsletter,\n    email: string,\n    sendingEmail: boolean\n}\n\nexport default class NewsletterEdit extends React.Component<any, State> {\n\n    constructor(props: any) {\n        super(props);\n\n        this.state = {\n            loading: true,\n            saving: false,\n            releasing: false,\n            title: '',\n            content: '',\n            newsletter: new Newsletter(),\n            email: '',\n            sendingEmail: false\n        }\n    }\n\n    public componentDidMount() {\n        const { match: { params } } = this.props;\n\n        newsletterService.get<Newsletter>(params.id)\n            .then((newsLetter: Newsletter) =>\n                this.setState({\n                    newsletter: newsLetter,\n                    title: newsLetter.title,\n                    content: newsLetter.content,\n                    loading: false\n                })\n            )\n            .catch( err => window.alert('unable to load newsletter'))\n    }\n\n    private release = (): void => { //TODO: add testing\n        this.setState({releasing: true});\n        newsletterService.release(this.state.newsletter.id)\n            .then((resp: any) => {\n                if(resp.count === 0) {\n                    window.alert('no emails found');\n                    return;\n                } else {\n                    if(!window.confirm(`You are about to send ${resp.count} emails.\\n\\nContinue?`)) {\n                        this.setState({releasing: false});\n                        return;\n                    }\n                    newsletterService.release(this.state.newsletter.id, true)\n                        .then((resp: any) => {\n                            window.alert(`${resp.count} emails sent`);\n                            const newsletter: Newsletter = this.state.newsletter;\n                            newsletter.release_date = 'a';\n                            this.setState({newsletter});\n                        })\n                        .catch( err => window.alert('unable to release newsletter'))\n                        .then(() => this.setState({releasing: false}))\n                }\n            })\n            .catch( err => window.alert('unable to release newsletter'))\n    }\n\n    private saveNewsletter = (): void => {\n        this.setState({saving: true});\n\n        const newsletter: Newsletter = this.state.newsletter;\n        newsletter.title = this.state.title;\n        newsletter.content = this.state.content;\n        newsletterService.update<Newsletter>(newsletter)\n            .then((nl: Newsletter) => {\n                this.setState({\n                    newsletter: nl,\n                    title: nl.title,\n                    content: nl.content,\n                    saving: false\n                })\n            })\n            .catch( err => window.alert('unable to update newsletter'))\n    }\n\n    private sendTestEmail = (): void => {\n        if (this.state.email === '') {\n            window.alert('Enter an email address');\n            return;\n        }\n        this.setState({sendingEmail: true});\n        newsletterService.sendEmailSample(this.state.newsletter.id, this.state.email)\n            .then((resp: any) => window.alert('sample mail sent'))\n            .catch( err => window.alert('unable to send sample'))\n            .finally(() => this.setState({sendingEmail: false}))\n    }\n\n    public render() {\n        if (this.state.loading)\n            return <LoadingOverlay />\n\n        const saveDisabled: boolean = (this.state.title === this.state.newsletter.title &&\n                                            this.state.content === this.state.newsletter.content) ||\n                                                this.state.saving || this.state.releasing\n\n        const titlePresent: boolean = this.state.content.indexOf('newsletter__email_title') !== -1\n        const contentPresent: boolean = this.state.content.indexOf('newsletter__email_content') !== -1\n\n        return (\n            <div className={'row newsletter_edit justify-content-center'}>\n                <div className={'col-12 col-md-5'}>\n                    <div className={'row'}>\n                        <div className={'col-12'}>\n                            <h3>edit newsletter</h3>\n                            <hr/>\n                        </div>\n                        <div className={'col-12 basic_form__label'}>\n                            title: <br/>\n                            <input\n                                value={this.state.title}\n                                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                                            this.setState({title: e.target.value})}\n                                className={'form-control newsletter_edit__title_input'}\n                                disabled={this.state.saving}\n                                />\n                        </div>\n                        <div className={'col-12 newsletter_edit__content basic_form__label mt-2'}>\n                            content:\n                            <textarea\n                                className={'form-control newsletter_edit__content_input'}\n                                value={this.state.content}\n                                rows={10}\n                                onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\n                                    this.setState({content: e.target.value})}\n                                disabled={this.state.saving}\n                                />\n                            ({this.state.content.length} characters)\n                            <LoadingIconButton\n                                label='save'\n                                onClick={this.saveNewsletter}\n                                busy={this.state.saving}\n                                btnClass='btn btn-sm btn-outline-success'\n                                outerClass='newsletter_edit__control_btn newsletter_edit__save_btn mt-2'\n                                disabled={saveDisabled}\n                                />\n                            {(this.state.newsletter.release_date === null && !(!saveDisabled || !titlePresent || !contentPresent)) &&\n                                <LoadingIconButton\n                                    label='release'\n                                    onClick={this.release}\n                                    busy={this.state.releasing}\n                                    btnClass='btn btn-sm btn-outline-warning'\n                                    outerClass='newsletter_edit__control_btn mt-2 mr-2'\n                                    />\n                            }\n                        </div>\n                        <div className={'col-12'}>\n                            { !titlePresent &&\n                                <div className={'newsletter_edit__error'}>\n                                    missing 'newsletter__email_title' class\n                                </div>\n                            }\n                            { !contentPresent &&\n                                <div className={'newsletter_edit__error'}>\n                                    missing 'newsletter__email_content' class\n                                </div>\n                            }\n                            { !saveDisabled &&\n                                <div className={'newsletter_edit__error'}>\n                                    save updates\n                                </div>\n                            }\n                        </div>\n                        <div className={'col-12 newsletter_edit_controls mt-3'}>\n                            <div className={'row'}>\n                                <div className={'col-12'}>\n                                    <h5>test email</h5>\n                                    <input\n                                        className={'form-control newsletter_edit_controls__email_input'}\n                                        placeholder={'enter email address'}\n                                        type={'email'}\n                                        value={this.state.email}\n                                        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                                            this.setState({email: e.target.value})}\n                                        disabled={!saveDisabled || this.state.sendingEmail}\n                                           />\n                                    <LoadingIconButton\n                                        label='send email test'\n                                        onClick={this.sendTestEmail}\n                                        busy={this.state.sendingEmail}\n                                        disabled={!saveDisabled || this.state.sendingEmail}\n                                        btnClass='btn btn-sm btn-outline-success'\n                                        outerClass='mt-2 newsletter_edit_controls__email_btn'\n                                        />\n\n                                    <Link\n                                        className={'btn btn-sm btn-outline-info newsletter_edit__control_btn mt-2 mr-2'}\n                                        to={'/dashboard/newsletter'}\n                                        >return to newsletters</Link>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","\nexport const months: string[] = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\nexport const days: string[] = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nexport const pythonDays: string[] = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\nexport const activityTypes: string[] = ['', 'Pick-Up', 'ASAP Delivery', 'Future Delivery'];\n\ntype state = {\n    name: string,\n    code: string\n}\nexport const states: state[] = [\n    {name: 'Alabama', code: 'AL'},\n    {name: 'Alaska', code: 'AK'},\n    {name: 'Arizona', code: 'AZ'},\n    {name: 'Arkansas', code: 'AR'},\n    {name: 'California', code: 'CA'},\n    {name: 'Colorado', code: 'CO'},\n    {name: 'Connecticut', code: 'CT'},\n    {name: 'Delaware', code: 'DE'},\n    {name: 'Florida', code: 'FL'},\n    {name: 'Georgia', code: 'GA'},\n    {name: 'Hawaii', code: 'HI'},\n    {name: 'Idaho', code: 'ID'},\n    {name: 'Illinois', code: 'IL'},\n    {name: 'Indiana', code: 'IN'},\n    {name: 'Iowa', code: 'IA'},\n    {name: 'Kansas', code: 'KS'},\n    {name: 'Kentucky', code: 'KY'},\n    {name: 'Louisiana', code: 'LA'},\n    {name: 'Maine', code: 'ME'},\n    {name: 'Maryland', code: 'MD'},\n    {name: 'Massachusetts', code: 'MA'},\n    {name: 'Michigan', code: 'MI'},\n    {name: 'Minnesota', code: 'MN'},\n    {name: 'Mississippi', code: 'MS'},\n    {name: 'Missouri', code: 'MO'},\n    {name: 'Montana', code: 'MT'},\n    {name: 'Nebraska', code: 'NE'},\n    {name: 'Nevada', code: 'NV'},\n    {name: 'New Hampshire', code: 'NH'},\n    {name: 'New Jersey', code: 'NH'},\n    {name: 'New Mexico', code: 'NM'},\n    {name: 'New York', code: 'NY'},\n    {name: 'North Carolina', code: 'NC'},\n    {name: 'North Dakota', code: 'ND'},\n    {name: 'Ohio', code: 'OH'},\n    {name: 'Oklahoma', code: 'OK'},\n    {name: 'Oregon', code: 'OR'},\n    {name: 'Pennsylvania', code: 'PA'},\n    {name: 'Rhode Island', code: 'RI'},\n    {name: 'South Carolina', code: 'SC'},\n    {name: 'South Dakota', code: 'SD'},\n    {name: 'Tennessee', code: 'TN'},\n    {name: 'Texas', code: 'TX'},\n    {name: 'Utah', code: 'UT'},\n    {name: 'Vermont', code: 'VT'},\n    {name: 'Virginia', code: 'VA'},\n    {name: 'Washington', code: 'WA'},\n    {name: 'West Virginia', code: 'WV'},\n    {name: 'Wisconsin', code: 'WI'},\n    {name: 'Wyoming', code: 'WY'}\n]","import Service from './Service';\nimport {DeliveryWindowWithCountsDTO} from \"../models/DeliveryWindowModel\";\nimport Order from \"../models/OrderModel\";\nimport moment from 'moment';\nimport DeliveryRouteDTO from \"../dto/DeliveryRouteDTO\";\nimport Route from \"../models/RouteModel\";\nimport MomentHelper from \"../helpers/MomentHelper\";\nimport momentHelper from \"../helpers/MomentHelper\";\n\nclass DeliveryWindowService extends Service {\n    appName = 'dashboard';\n    view = 'delivery_window';\n\n    public generateProductionBoard = (windowId: number, date: Date): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${windowId}/generate_production_board_pdf/?target_date=${momentHelper.asDateSlug(date, true)}`);\n    }\n\n    public generateDeliveryTags = (windowId: number, date: Date): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${windowId}/generate_delivery_tags_pdf/?target_date=${momentHelper.asDateSlug(date, true)}`);\n    }\n\n    public generateOrdersTSV = (windowId: number, date: Date): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${windowId}/generate_orders_tsv/?target_date=${momentHelper.asDateSlug(date, true)}`);\n    }\n\n    public generateShoppingList = (windowId: number, date: Date): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${windowId}/generate_shopping_list_pdf/?target_date=${momentHelper.asDateSlug(date, true)}`);\n    }\n\n    public generateOrderingSpreadsheet = (windowId: number, date: Date): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/${windowId}/generate_ordering_list_tsv/?target_date=${momentHelper.asDateSlug(date, true)}`);\n    }\n\n    public listWithCounts = (targetDate: string): Promise<DeliveryWindowWithCountsDTO[]> => {\n        return this._get(`${this.appName}/${this.view}/list_with_counts/?target_date=${targetDate}`);\n    }\n\n    public retrieveOrders = (deliveryWindowId: number, targetDate: Date): Promise<Order[]> => {\n        return this._get(`${this.appName}/${this.view}/${deliveryWindowId}/retrieve_orders/?target_date=${\n            moment(targetDate).utc().format('YYYY-MM-DD')}`)\n    }\n\n    public retrieveRoute = (deliveryWindowId: number, targetDate: Date): Promise<Route> => {\n        return this._get(`${this.appName}/${this.view}/${deliveryWindowId}/retrieve_route/?target_date=${\n            moment(targetDate).utc().format('YYYY-MM-DD')}`)\n    }\n\n    public addZone = (deliveryWindowId: number, zoneId: number): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/add_zone/${deliveryWindowId}/${zoneId}/`);\n    }\n\n    public removeZone = (deliveryWindowId: number, zoneId: number): Promise<any> => {\n        return this._get(`${this.appName}/${this.view}/remove_zone/${deliveryWindowId}/${zoneId}/`);\n    }\n}\n\nexport default new DeliveryWindowService()","import React, {useEffect, useState, Fragment} from 'react';\nimport DeliveryWindow, {DeliveryWindowWithCountsDTO} from \"../../models/DeliveryWindowModel\";\nimport deliveryWindowService from '../../services/DeliveryWindowService';\n\nimport './browser.scss';\nimport { useHistory } from 'react-router-dom';\nimport momentHelper from '../../helpers/MomentHelper';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\n\ninterface Props {\n    date: Date\n}\n\nexport const BrowserDay = (props: Props): React.ReactElement => {\n    const [countsData, setCountsData] = useState<DeliveryWindowWithCountsDTO[] | string>([]);\n    const [loading, setLoading] = useState(true);\n    const history = useHistory();\n\n    useEffect(() => {\n        deliveryWindowService.listWithCounts(momentHelper.asDateSlug(props.date))\n            .then((countsData: DeliveryWindowWithCountsDTO[]) => {\n                setCountsData(countsData);\n            })\n            .catch( err => window.alert(`unable to load date: ${props.date.toISOString().slice(0,10)}`))\n            .then(() => setLoading(false))\n\n    }, []);\n\n    if (loading)\n        return <LoadingOverlay />\n\n    const today: string = momentHelper.asDateSlug(new Date());\n    let hasWindows: boolean = false\n    let deliveryCount: number = 0;\n    let dishCount: number = 0;\n\n    // check if the day has any delivery windows\n    if (typeof countsData === 'object'){\n        hasWindows = true;\n        countsData?.forEach((dto: DeliveryWindowWithCountsDTO) => {\n            deliveryCount += dto.order_count;\n            dishCount += dto.dish_count\n        })\n    }\n\n    return(\n        <div\n            className={'browser_day'}\n        >\n            <div className={'nopadding'}>\n                <div className={`browser_day__date ${momentHelper.asDateSlug(props.date) === today ? 'browser_day__date--today' : ''}`}\n                     onClick={() => history.push({pathname: `/dashboard/browser/day/${momentHelper.asDateSlug(props.date)}`})}\n                >\n                    {props.date.getDate()}\n                </div>\n                <div className='browser_day__data'>\n                    {(hasWindows && deliveryCount === 0) &&\n                            <div className='browser_day__no_orders'>\n                                <span className='d-none d-md-inline'>\n                                    no orders\n                                </span>\n                                <br/>\n                                &nbsp;\n                            </div>\n                    }\n                    {(hasWindows && deliveryCount > 0) &&\n                        <Fragment>\n                            <div className='browser_day__delivery_count'><span className='d-none d-md-inline'>deliveries: </span>{deliveryCount}</div>\n                            <div className='browser_day__dish_count'><span className='d-none d-md-inline'>dishes: </span>{dishCount}</div>\n                        </Fragment>\n                    }\n                    {!hasWindows &&\n                        <div>&nbsp;<br/>&nbsp;</div>\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}","import React from 'react';\n\nimport {months} from '../../constants';\nimport './browser.scss';\nimport {BrowserDay} from \"./BrowserDay\";\nimport { RouteComponentProps } from 'react-router-dom';\n\ninterface Props extends RouteComponentProps {\n    match: any\n}\n\ninterface State {\n    month: number,\n    year: number,\n    viewDay: number\n}\n\nexport default class BrowserTool extends React.Component<Props, State>{\n\n    today: Date = new Date();\n\n    state = {\n        month: this.today.getMonth(),\n        year: this.today.getFullYear(),\n        viewDay: 0\n    }\n\n    public componentDidMount() {\n        let month: number = new Date().getMonth();\n        let year: number = new Date().getFullYear();\n\n        const { match: { params } } = this.props;\n\n        // sets URL to include the month and year of they are not in the path\n        if ('month' in params || 'year' in params) {\n            if ('month' in params)\n                month = parseInt(params['month']);\n            if ('year' in params)\n                year = parseInt(params['year']);\n        } else {\n            this.props.history.push({pathname: `/dashboard/browser/${month}/${year}`});\n        }\n\n        this.setState({month, year});\n    }\n\n    private changeMonth = (add: number): void => {\n        let month: number = this.state.month;\n        let year: number = this.state.year;\n\n        month += add;\n\n        if (month > 11){\n            month = 0;\n            year ++;\n        } else if (month < 0) {\n            month = 11;\n            year --;\n        }\n        this.props.history.push({pathname: `/dashboard/browser/${month}/${year}`});\n        this.setState({month, year});\n    }\n\n    public render(){\n\n        const startDate: Date = new Date(this.state.year, this.state.month, 1);\n        const daysInMonth: number = new Date(this.state.year, this.state.month + 1, 0).getDate();\n        let dateNdx: number = -startDate.getDay() + 1;\n\n        let weeks: any = []\n        let week: any;\n        while (dateNdx <= daysInMonth) {\n            week = [];\n            for (let x: number = 0; x < 7; x ++) {\n                if (dateNdx >= 1 && dateNdx <= daysInMonth) {\n                    week.push(<BrowserDay date={new Date(this.state.year, this.state.month, dateNdx)} />)\n                } else {\n                    week.push(<div></div>) // TODO: Update this to show last and next month days faded\n                }\n                dateNdx ++;\n            }\n            weeks.push(week);\n        }\n\n        return(\n            <div className={'row browser_tool'}>\n                <div className={`col-12 browser_tool__calendar`}>\n                    <div className='row justify-content-center'>\n                        <div className={'col-12 col-md-8 browser_tool_calendar__month_nav'}>\n                            <div\n                                className={'month_nav__arrow month_nav__item'}\n                                id={'month_nav__last_month'}\n                                onClick={() => this.changeMonth(-1)}\n                            >&lt;&lt;</div>\n                            <div className={'month_nav__date month_nav__item'}>{months[this.state.month]}  {this.state.year}</div>\n                            <div\n                                className={'month_nav__arrow month_nav__item'}\n                                id={'month_nav__next_month'}\n                                onClick={() => this.changeMonth(1)}\n                            >&gt;&gt;</div>\n                        </div>\n                        <div className={'col-12 text-center'}>\n                            <table className={''}>\n                                <thead>\n                                    <tr>\n                                        <th>Sun</th>\n                                        <th>Mon</th>\n                                        <th>Tue</th>\n                                        <th>Wed</th>\n                                        <th>Thu</th>\n                                        <th>Fri</th>\n                                        <th>Sat</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                {\n                                    weeks.map((week: any, index: number) =>\n                                        <tr key={`week_${index.toString()}`}>\n                                            {\n                                                week.map((day: any) =>\n                                                    <td key={Math.random()}>{day}</td>\n                                                )\n                                            }\n                                        </tr>\n                                    )\n                                }\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, {Fragment} from 'react';\nimport {DeliveryWindowWithCountsDTO} from \"../../models/DeliveryWindowModel\";\nimport OrderItem from \"../../models/OrderItemModel\";\nimport helpers from \"../../helpers/helpers\";\nimport Order from \"../../models/OrderModel\";\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\n\nimport './browser.scss';\nimport moment from \"moment\";\nimport {EmailWidget} from \"../widgets/email_widget/EmailWidget\";\nimport momentHelper from \"../../helpers/MomentHelper\";\nimport printHelper from '../../helpers/PrintHelper';\n\ninterface Props extends RouteComponentProps {\n    dto: DeliveryWindowWithCountsDTO,\n    date: Date,\n    printDocument: (component: React.ReactElement) => void\n}\n\ninterface State {\n    showLoading: boolean,\n    orders: Order[],\n    sendingEmail: boolean\n}\n\ninterface SpreadSheetColumn {\n    title: string,\n    slug: string\n}\n\nclass BrowserWindowTools extends React.Component<Props, State>{\n\n    constructor(props: any) {\n        super(props);\n\n        this.state = {\n            showLoading: true,\n            orders: [],\n            sendingEmail: false\n        }\n    }\n\n    public componentDidMount() {\n        deliveryWindowService.retrieveOrders(this.props.dto.window.id, this.props.date)\n            .then((orders: Order[]) => this.setState({orders, showLoading: false}))\n            .catch( err => window.alert('unable to load data'))\n    }\n\n\n    private downloadDeliveryTags = (): void => {\n        deliveryWindowService.generateDeliveryTags(this.props.dto.window.id, this.props.date)\n            .then((pdf: any) => printHelper.download('delivery_tags.pdf', pdf))\n            .catch(() => window.alert('unable to download prep board'))\n\n        // this.print('delivery_tags');\n    }\n\n    private downloadOrdersSpreadsheet = (): void => {\n        deliveryWindowService.generateOrdersTSV(this.props.dto.window.id, this.props.date)\n            .then((tsv: string) => printHelper.download(`orders_${momentHelper.asDateSlug(this.props.date)}.tsv`, tsv))\n            .catch(() => window.alert('unable to download prep board'))\n    }\n\n    private downloadPrepBoard = (): void => {\n        deliveryWindowService.generateProductionBoard(this.props.dto.window.id, this.props.date)\n            .then((pdf: any) => printHelper.download('prepboard.pdf', pdf))\n            .catch(() => window.alert('unable to download prep board'))\n    }\n\n    private downloadShoppingList = (): void => {\n        deliveryWindowService.generateShoppingList(this.props.dto.window.id, this.props.date)\n            .then((pdf: any) => printHelper.download('shopping_list.pdf', pdf))\n            .catch(() => window.alert('unable to download shopping list'))\n    }\n\n    private downloadOrderingSheet = (): void => {\n        deliveryWindowService.generateOrderingSpreadsheet(this.props.dto.window.id, this.props.date)\n            .then((pdf: any) => printHelper.download(`ordering_sheet_${momentHelper.asDateSlug(this.props.date)}.tsv`, pdf))\n            .catch(() => window.alert('unable to download ordering sheet'))\n    }\n\n    private emailingComplete = (): void => {\n        this.setState({sendingEmail: false})\n\n    }\n\n    private print = (pullType: string): void => {\n        let orderItems: OrderItem[] = [];\n        for (let x: number = 0; x < this.state.orders.length; x ++)\n            for (let y: number = 0; y < this.state.orders[x].items.length; y ++)\n                if (this.state.orders[x].items[y].cart_item.delivery_date === moment(this.props.date).utc().format('YYYY-MM-DD'))\n                    orderItems.push(this.state.orders[x].items[y])\n\n        switch(pullType) {\n            case 'prep': this.props.printDocument(<PrepDisplay orderItems={orderItems} date={this.props.date} />); break;\n            case 'delivery_tags': this.props.printDocument(\n                <DeliveryTagsDisplay orders={this.state.orders} date={this.props.date} />\n                ); break;\n        }\n    }\n\n    public render() {\n        if (this.state.showLoading)\n            return( <LoadingOverlay /> );\n\n        return(\n            <div className={'row browser_window_tools mb-2'}>\n                <div className={'col-12 browser_window_tools__inner'}>\n                    <div className={'row'}>\n                        <div className={'col-12'}>{this.props.dto.window.name}</div>\n                        <div className={'col-6 mt-2'}>Deliveries: {this.props.dto.order_count}</div>\n                        <div className={'col-6 mt-2'}>Dishes: {this.props.dto.dish_count}</div>\n                        <div className={'col-12'}><hr/></div>\n                        <div className={'d-none d-md-block col-md-12 browser_window_tools__controls mt-2'}>\n                                <button className={'btn btn-sm btn-outline-success'} onClick={() => this.downloadPrepBoard()}\n                                disabled={this.state.orders.length === 0}>print prep list</button>\n                                <button className={'btn btn-sm btn-outline-success ml-2'} onClick={() => this.downloadDeliveryTags()}\n                                disabled={this.state.orders.length === 0}>print delivery tags</button>\n                        </div>\n                        <div className='col-12 mt-2'>\n                            <button className={'btn-btn btn-sm btn-outline-success'} onClick={() => this.downloadOrdersSpreadsheet()}\n                                disabled={this.state.orders.length === 0}>download orders spreadsheet</button>\n                        </div>\n                        <div className='col-12 mt-2'>\n                            <button className={'btn-btn btn-sm btn-outline-success'} onClick={() => this.downloadShoppingList()}\n                                disabled={this.state.orders.length === 0}>download shopping list</button>\n                            <button className={'btn-btn btn-sm btn-outline-success ml-2'} onClick={() => this.downloadOrderingSheet()}\n                                disabled={this.state.orders.length === 0}>download ordering sheet</button>\n                        </div>\n                        <div className={'col-12 mt-2'}>\n                            <button className={'btn btn-sm btn-outline-success'}\n                                    onClick={() => this.props.history.push({\n                                        pathname:`/dashboard/delivery_planner/${this.props.dto.window.id}/${moment(this.props.date).utc().format('YYYY-MM-DD')}`})}\n                                    disabled={this.state.orders.length === 0}>\n                                route planner</button>\n                        </div>\n                        <div className='col-12 mt-2'>\n                            <button\n                                className={'btn btn-sm btn-info'}\n                                onClick={() => this.setState({sendingEmail: true})}\n                                disabled={this.state.orders.length === 0}>\n                                send mail</button>\n                        </div>\n                    </div>\n\n                    {this.state.sendingEmail &&\n                        <div className='browser_window_tools__emailer'>\n                            <EmailWidget\n                                finished={this.emailingComplete}\n                                prompt='send email to all deliveries'\n                                config={{\n                                    email_type: 'deliveries_email',\n                                    entity_id: this.props.dto.window.id,\n                                    target_date: momentHelper.asDateSlug(this.props.date, true)\n                                }}\n                            />\n                        </div>\n                    }\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(BrowserWindowTools);\n\ninterface DeliveryTagsDisplayProps {\n    orders: Order[],\n    date: Date\n}\n\nexport const DeliveryTagsDisplay = (props: DeliveryTagsDisplayProps): React.ReactElement => {\n    const target_date: string = moment(props.date).utc().format('YYYY-MM-DD');\n    return (\n        <div className='delivery_tags'>\n            {\n                props.orders.map((order: Order) => {\n                    const orderItems: OrderItem[] = order.items.filter((orderItem: OrderItem) => orderItem.cart_item.delivery_date === target_date)\n\n                    return (\n                        <div className='quarter_print_page' key={`order_${order.id}`}>\n                            <span className=\"contact-info\">{order.contact_name}</span>\n                            <span className=\"street-address\">{order.street_address} {order.unit}</span>\n                            <span className=\"street-address\">{order.city} {order.zip}</span>\n                            <span className=\"contact-info\">{order.phone_number}</span>\n                            <b>Items:</b>\n                            <div className=\"delivery-tag-items\">\n                                {\n                                    orderItems.map((orderItem: OrderItem) => {\n\n                                        return(\n                                            <div className=\"delivery-tag-item\" key={`oi_${orderItem.id}`}>\n                                                {orderItem.cart_item.quantity.toString() + \" \" + helpers.extractCartItemDescription(orderItem.cart_item)}\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                            {order.notes &&\n                                <div className=\"delivery-instructions\">\n                                    <br/>\n                                    _______________________________\n                                    <h4>Delivery Instructions:</h4>\n                                    <div className=\"delivery_instructions_text\">\n                                        {order.notes}\n                                    </div>\n                                </div>\n                            }\n                        </div>\n                    )\n                    })\n            }\n        </div>\n    )\n}\n\ninterface PrepDisplayProps {\n    orderItems: OrderItem[],\n    date: Date\n}\n\nexport const PrepDisplay = (props: PrepDisplayProps): React.ReactElement => {\n\n    type CondensedListItems = {count: number, dish: string, protein: string, spicy_text:string};\n\n    const spicy: string[] = ['No', 'mild', 'spicy'];\n    let condensedList: {[key: string]: CondensedListItems} = {};\n    let key: string = \"\";\n    let dish: string = \"\";\n    let protein: string = \"\";\n    let spicy_text: string = \"\";\n    let dishCount: number = 0;\n\n    props.orderItems.forEach((orderItem: OrderItem) => {\n        dish = orderItem.cart_item.menu_item.name;\n        protein = (orderItem.cart_item.protein !== \"\") ?\n                    orderItem.cart_item.protein : \"\";\n        spicy_text = (orderItem.cart_item.menu_item.spicy) ? spicy[orderItem.cart_item.spicy] : \"\";\n\n        key = `${dish}:${protein}:${spicy_text}`;\n        if (!(key in condensedList))\n            condensedList[key] = {count: 0, dish, protein, spicy_text};\n\n        condensedList[key].count += orderItem.cart_item.quantity;\n        dishCount += orderItem.cart_item.quantity;\n    });\n\n    return (\n        <div className={'prep_list'}>\n            <span className='prep_list__header'>{moment(props.date).utc().format('YYYY-MM-DD')} &nbsp;&nbsp;:&nbsp;&nbsp;{dishCount} items</span>\n            <table className='prep_list__list'>\n                <thead>\n                    <tr>\n                        <td>#</td>\n                        <td>Dish</td>\n                        <td>Protein</td>\n                        <td>Spicy</td>\n                        <td>L</td>\n                        <td>P</td>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        Object.keys(condensedList).sort().map((key: string, index: number) => {\n                            return (\n                                <tr className={`${index % 2 ? '' : 'print-row-dark'}`} key={key}>\n                                    <td>{condensedList[key].count}</td>\n                                    <td>{condensedList[key].dish}</td>\n                                    <td>{condensedList[key].protein}</td>\n                                    <td>{condensedList[key].spicy_text}</td>\n                                    <td></td>\n                                    <td></td>\n                                </tr>\n                            )\n                        })\n                    }\n                </tbody>\n            </table>\n        </div>\n    )\n}","import React from 'react';\nimport momentHelper from '../../helpers/MomentHelper';\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport {DeliveryWindowWithCountsDTO} from \"../../models/DeliveryWindowModel\";\nimport {RouteComponentProps} from 'react-router-dom';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport BrowserWindowTools, {PrepDisplay} from \"./BrowserWindowTools\";\n\nimport './browser.scss';\n\ninterface Props extends RouteComponentProps {\n    match: any;\n}\n\ninterface State {\n    loading: boolean,\n    targetDate: Date,\n    counts: DeliveryWindowWithCountsDTO[],\n    documentToPrint: any\n}\n\nexport default class BrowserFullDay extends React.Component<Props, State> {\n\n    state = {\n        loading: true,\n        targetDate: new Date(),\n        counts: [],\n        documentToPrint: null\n    }\n\n    public componentDidMount() {\n        const { match: { params } } = this.props;\n\n        deliveryWindowService.listWithCounts(params.targetDate)\n            .then((counts: DeliveryWindowWithCountsDTO[]) => this.setState({counts, targetDate: new Date(new Date(params.targetDate).toUTCString())}))\n            .catch( err => console)\n            .then(() => this.setState({loading: false}))\n    }\n\n    private printDocument = (documentToPrint: any): void => {\n        this.setState({documentToPrint}, () => window.print())\n    }\n\n    public render() {\n        if (this.state.loading)\n            return(<LoadingOverlay />)\n\n        return(\n            <div className={'row browser_full_day justify-content-center'}>\n                <div className='col-12 text-center'>\n                    <h5>\n                        {momentHelper.asFullDate(this.state.targetDate)}\n                    </h5>\n                </div>\n                <div className={'col-12 col-md-7'}>\n                    <div className={'row'}>\n                        <div className={'col-12'}>\n                            <div className={'col-12 text-center'}>\n                                <button\n                                    className={'btn btn-outline-info mt-2'}\n                                    onClick={() => this.props.history.goBack()}\n                                    >return to calendar</button>\n\n                                <button\n                                    className={'btn btn-outline-primary ml-2 mt-2'}\n                                    onClick={() => this.props.history.push({pathname: '/dashboard/delivery_window'})}\n                                    >create delivery window</button>\n                            </div>\n                            <div className={'row mt-2 justify-content-center'}>\n                                {this.state.counts.length > 0 &&\n                                    this.state.counts.map((dto:DeliveryWindowWithCountsDTO) =>\n                                        <div className={'col-12 col-md-6'} key={`dto_${dto.window.id}`}>\n                                            <BrowserWindowTools\n                                                dto={dto}\n                                                date={this.state.targetDate}\n                                                key={`dto_${dto.window.id}`}\n                                                printDocument={this.printDocument} />\n                                        </div>\n                                    )\n                                }\n                                {this.state.counts.length === 0 &&\n                                    <div className='col-12 text-center'>\n                                        delivery windows define the days and times of day you will be delivering\n                                    </div>\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"col-12 print_sheet\">\n                    {this.state.documentToPrint}\n                </div>\n            </div>\n        )\n    }\n}","import ModelBase from \"./ModelBase\";\nimport Zone from \"./ZoneModel\";\n\nexport const DELIVERY_WINDOW_TYPES = {\n    'standard': 0,\n    'pickup': 1,\n    'delivery': 2,\n    'futureDelivery': 3\n}\n\nexport class DeliveryWindowDTO {\n    public date!: string;\n    public window!: DeliveryWindow};\n\nexport default class DeliveryWindow extends ModelBase {\n\n    public name!: string;\n    public active!: boolean;\n    public start_time!: string;\n    public end_time!: string;\n    public day!:number; // 0 = Monday\n    public start_date: string | null;\n    public end_date!: string | null;\n    public zones!: Zone[];\n    public type!: number;\n\n    constructor(id?: number, name?: string, start_time?: string, end_time?: string, day?: number, active?: boolean,\n                start_date?: string | null, end_date?: string | null, type: number = 0) {\n        super();\n        this.name = name || '';\n        this.start_time = start_time || \"1\";\n        this.end_time = end_time || \"\";\n        this.day = day || 0;\n        this.id = id || -1;\n        this.active = active === undefined ? false : active;\n        this.start_date = start_date || null;\n        this.end_date = end_date || null;\n        this.type = type;\n    }\n}\n\nexport class DeliveryWindowWithCountsDTO {\n    public dish_count!: number;\n    public order_count!: number;\n    public window!: DeliveryWindow;\n}","import React from 'react';\nimport {pythonDays} from \"../../constants\";\nimport { useHistory } from 'react-router-dom';\nimport DeliveryWindow from \"../../models/DeliveryWindowModel\";\nimport momentHelper from '../../helpers/MomentHelper';\nimport moment from 'moment';\n\ninterface Props {\n    window: DeliveryWindow\n}\nexport const DeliveryWindowsWindow = (props: Props): React.ReactElement => {\n    const history = useHistory();\n\n    let runText: string = 'recurring';\n    switch (true) {\n        case (props.window.end_date && new Date(props.window.end_date) < new Date(moment().utc().format('YYYY-DD-MM'))): runText = 'expired'; break;\n        case (props.window.start_date !== null && props.window.end_date !== null):\n            runText = `${momentHelper.asShortDate(new Date(props.window.start_date || ''))} - ${momentHelper.asShortDate(new Date(props.window.end_date || ''))}`\n            break;\n    }\n\n    return (\n        <tr\n            key={`dw_${props.window.id}`}\n            className={`delivery_windows__window ${props.window.active ? '' : 'delivery_windows__window-inactive'}`}\n            onClick={() => history.push({pathname: `/dashboard/delivery_window/edit/${props.window.id}`})}\n        >\n            <td className='d-none d-md-table-cell'>{props.window.name}</td>\n            <td>{pythonDays[props.window.day]}</td>\n            <td>\n                <div>{moment(props.window.start_time, 'HH:mm:ss').format('h:mm a')} -</div>\n                <div>{moment(props.window.end_time, 'HH:mm:ss').format('h:mm a')}</div>\n\n            </td>\n            <td>{runText}</td>\n        </tr>\n    )\n}","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport DeliveryWindow from '../../models/DeliveryWindowModel';\nimport deliveryWindowService from '../../services/DeliveryWindowService';\n\nimport './delivery_windows.scss';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport { DeliveryWindowsWindow } from './DeliveryWindowsWindow';\n\nimport { useHistory, Link } from 'react-router-dom';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\ninterface Props {\n}\n\nexport const DeliveryWindows = (props: Props): React.ReactElement => {\n    const [showLoading, setShowLoading] = useState(true);\n    const [deliveryWindows, setDeliveryWindows] = useState<DeliveryWindow[]>([])\n    const [newWindow, setNewWindow] = useState('');\n    const [addingWindow, setAddingWindow] = useState(false);\n\n    const history = useHistory()\n\n    useEffect(() => {\n        deliveryWindowService.get<DeliveryWindow[]>()\n            .then((deliveryWindows: DeliveryWindow[]) => {\n                setShowLoading(false);\n                setDeliveryWindows(deliveryWindows);\n            })\n            .catch( err => window.alert('Unable to load delivery windows'))\n    }, [])\n\n    const addWindow = (): void => {\n        setAddingWindow(true)\n        deliveryWindowService.add(new DeliveryWindow(\n            -1, newWindow, '17:00:00', '19:00:00', 0, false\n        ))\n            .then((window: DeliveryWindow) => history.push({pathname: `/dashboard/delivery_window/edit/${window.id}`}))\n            .catch(() => window.alert('unable to create window'))\n            .then(() => setAddingWindow(false))\n    }\n\n    if (showLoading)\n        return(<LoadingOverlay />)\n\n    return (\n        <div className=\"row delivery_windows\">\n            <div className='col-12'>\n                <h3>delivery windows</h3>\n                <hr/>\n            </div>\n            <div className={'col-12'}>\n                <div className='row'>\n                    <div className='col-8 col-md-3'>\n                        <input type='text' className='form-control'placeholder='new delivery window name'\n                               onChange={(e:ChangeEvent<HTMLInputElement>) => setNewWindow(e.target.value)}\n                        />\n                    </div>\n                    <div className='col-2'>\n                        <LoadingIconButton label={'add window'} onClick={addWindow} busy={addingWindow}\n                                           btnClass='btn btn-sm btn-outline-success' disabled={newWindow === ''}\n                        />\n                    </div>\n                </div>\n            </div>\n            <div className={'col-12 mt-2'}>\n                <table className={'table'}>\n                    <thead>\n                        <tr>\n                            <th className='d-none d-md-table-cell'>name</th>\n                            <th>day</th>\n                            <th>time</th>\n                            <th>run</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {\n                        deliveryWindows.map((window: DeliveryWindow) =>\n                            <DeliveryWindowsWindow window={window}/>\n                        )\n                    }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}\n\nconst DeliveryWindowContainer = (props: {deliveryWindow: DeliveryWindow, windowSelected: (deliveryWindow: DeliveryWindow) => void}): any => {\n    return (\n        <div className=\"delivery-window-container\" onDoubleClick={()=>{props.windowSelected(props.deliveryWindow)}}>\n            {props.deliveryWindow.name}\n        </div>\n    )\n}","import Service from './Service';\nimport Zipcode from \"../models/ZipcodeModel\";\nimport Zone from \"../models/ZoneModel\";\n\nclass ZoneService extends Service {\n    appName='dashboard';\n    view='zone';\n\n    public searchZipDb = (pageNumber?: number, city?: string): Promise<{id: number, name: string}> => {\n        return this._get(`${this.viewPath}/search_zip_db/?city=${city}`);\n    }\n\n    public import_zip_codes = (zone: Zone, search_by: string, id: string | number): Promise<Zipcode[]> => {\n        return this._post(`${this.viewPath}/${zone.id}/import_zip_codes/`, {search_by, id})\n    }\n}\n\nexport default new ZoneService();","import React, {ChangeEvent, useEffect, useState, Fragment} from 'react';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport zoneService from '../../services/ZoneService';\nimport { useParams, useHistory } from 'react-router-dom';\nimport DeliveryWindow, {DELIVERY_WINDOW_TYPES} from \"../../models/DeliveryWindowModel\";\nimport Zone from \"../../models/ZoneModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport {EmailWidget} from \"../widgets/email_widget/EmailWidget\";\nimport {AppState} from \"../../store/store\";\nimport { useSelector } from 'react-redux';\nimport {OPERATOR_TYPES} from \"../../models/OperatorModel\";\n\n\nexport const DeliveryWindowEdit = (): React.ReactElement => {\n    const history = useHistory();\n    const params: any = useParams();\n    const [showLoading, setShowLoading] = useState<boolean>(true);\n    const [deliveryWindow, setWindow] = useState<DeliveryWindow>(new DeliveryWindow());\n    const [disabled, setDisabled] = useState<boolean>(false);\n    const [zones, setZones] = useState<Zone[]>([]);\n    const [selectedZone, setSelectedZone] = useState<number>(-1)\n    const [saving, setSaving] = useState(false);\n    const [deleting, setDeleting] = useState(false);\n    const [sendEmail, setSendEmail] = useState(false);\n    const isRestaurant = useSelector((state: AppState) => state.operatorReducer).settings?.type === OPERATOR_TYPES.restaurant;\n\n    useEffect(() => {\n        if (params.id === undefined) {\n            zoneService.get<Zone[]>()\n                .then((zones: Zone[]) => setZones(zones))\n                .catch(() => window.alert('unable to load zones'))\n                .then(() => setShowLoading(false));\n        } else {\n            Promise.all([\n                deliveryWindowService.get<DeliveryWindow>(params.id),\n                zoneService.get<Zone[]>()\n            ])\n                .then((values) => {\n                    let deliveryWindow: DeliveryWindow = values[0];\n                    setWindow(deliveryWindow);\n                    setZones(values[1]);\n                    if (values[1].length > 0) setSelectedZone(values[1][0].id);\n                    setShowLoading(false);\n                })\n                .catch( err => window.alert('unable to load window'));\n        }\n    }, []);\n\n    const addZone = (): void => {\n        if (zones.length === 0) {\n            history.push({pathname: '/dashboard/zone'})\n        } else {\n            deliveryWindowService.addZone(deliveryWindow.id, selectedZone)\n                .then((deliveryWindow: DeliveryWindow) => setWindow(deliveryWindow))\n                .catch(() => window.alert('unable to add zone'))\n        }\n    }\n\n    const deleteWindow = (): void => {\n        if (!window.confirm('are you sure you want to delete this window? \\n\\nWARNING:\\nthis cannot be reversed.')) return;\n\n        setDeleting(true)\n        deliveryWindowService.delete(deliveryWindow.id)\n            .then(() => history.goBack())\n            .catch(err => window.alert('unable to delete'))\n            .then(() => setDeleting(false))\n    }\n    const removeZone = (zone: Zone): void => {\n        if (!window.confirm(`Are you sure you want to remove '${zone.name}'?`)) return\n\n        deliveryWindowService.removeZone(deliveryWindow.id, zone.id)\n            .then((deliveryWindow: DeliveryWindow) => setWindow(deliveryWindow))\n            .catch(() => window.alert('unable to remove zone'))\n    }\n\n    const saveWindow = (): void => {\n        setDisabled(true);\n        setSaving(true);\n\n        deliveryWindowService.update<DeliveryWindow>(deliveryWindow)\n                .then(() => history.goBack())\n                .catch( err => window.alert('unable to update window'))\n    }\n\n    const updateData = (e: ChangeEvent<HTMLInputElement | HTMLSelectElement>): void => {\n        setWindow({...deliveryWindow, [e.target.id]: e.target.value});\n    }\n\n    if (showLoading)\n        return(<LoadingOverlay />)\n\n    return (\n        <div className={'row delivery_window_edit justify-content-center'}>\n            <div className='col-12 col-md-6'>\n                <div className='row'>\n                    <div className='col-12'>\n                        <h3>Edit Delivery Window</h3>\n                        <hr/>\n                    </div>\n                    <div className='col-12 text-right'>\n                        <button\n                            onClick={() => history.goBack()}\n                            className={'btn btn-sm btn-outline-info ml-2 delivery_window_edit__go_back'}\n                            disabled={disabled}\n                        >\n                            go back\n                        </button>\n                        <LoadingIconButton label='save updates' onClick={saveWindow} busy={saving} disabled={disabled}\n                                           btnClass={'btn btn-sm btn-outline-success'}\n                        />\n                        <LoadingIconButton label='delete' onClick={deleteWindow} busy={deleting} disabled={disabled}\n                                           btnClass={'btn btn-sm btn-outline-danger'} outerClass={'ml-2'}\n                        />\n                        {!isRestaurant &&\n                            <button\n                                onClick={() => {setSendEmail(!sendEmail)}}\n                                className={`btn btn-sm btn-outline-${sendEmail? 'warning' : 'primary'} ml-2`}\n                            >\n                                { sendEmail ? 'cancel email' : 'send email' }\n                            </button>\n                        }\n                        <hr/>\n                    </div>\n                    <div className={'col-12 mt-2'}>\n                        <div className={'row'}>\n                            <div className={'col-12'}>\n                                <div className={'delivery_window_edit__prompt'}>name:</div>\n                                <input className={'form-control'} type={'text'} id={'name'}\n                                       value={deliveryWindow.name}\n                                       onChange={updateData} />\n                            </div>\n                            {\n                                !isRestaurant ?\n                                    <div className={'col-6 mt-2'}>\n                                        <div className={'delivery_window_edit__prompt'}>day:</div>\n                                        <select className={'form-control'} id={'day'}\n                                                value={deliveryWindow.day}\n                                                onChange={updateData}\n                                        >\n                                            <option value={6}>sunday</option>\n                                            <option value={0}>monday</option>\n                                            <option value={1}>tuesday</option>\n                                            <option value={2}>wednesday</option>\n                                            <option value={3}>thursday</option>\n                                            <option value={4}>friday</option>\n                                            <option value={5}>saturday</option>\n                                        </select>\n                                    </div>\n                                    :\n                                    <div className='col-6 mt-2'>\n                                        <div className={'delivery_window_edit__prompt'}>type:</div>\n                                        <select className={'form-control'} id={'type'}\n                                                value={deliveryWindow.type}\n                                                onChange={updateData}\n                                        >\n                                            <option value={DELIVERY_WINDOW_TYPES.pickup}>pickup</option>\n                                            <option value={DELIVERY_WINDOW_TYPES.delivery}>deliver ASAP</option>\n                                            <option value={DELIVERY_WINDOW_TYPES.futureDelivery}>future delivery</option>\n                                        </select>\n                                    </div>\n                            }\n                            <div className={'col-6'}>\n                                <div className={'delivery_window_edit__prompt'}>active:</div>\n                                <input type='checkbox' className={''} id={'active'}\n                                       checked={deliveryWindow.active}\n                                       onChange={() => setWindow({...deliveryWindow, active: !deliveryWindow.active})}\n                                />\n                            </div>\n                            <div className={'col-6 mt-2'}>\n                                <div className={'delivery_window_edit__prompt'}>start time:</div>\n                                <input type={'time'} className={'form-control'} id={'start_time'}\n                                value={deliveryWindow.start_time}\n                                onChange={updateData}/>\n                            </div>\n                            <div className={'col-6 mt-2'}>\n                                <div className={'delivery_window_edit__prompt'}>end time:</div>\n                                <input type={'time'} className={'form-control'} id={'end_time'}\n                                value={deliveryWindow.end_time} onChange={updateData}/>\n                            </div>\n                            {!isRestaurant &&\n                                <Fragment>\n                                    <div className={'col-9 mt-2'}>\n                                        <div className={'delivery_window_edit__prompt'}>start date:</div>\n                                        <input type={'date'} className={'form-control'} id={'start_date'}\n                                               value={deliveryWindow.start_date || ''} onChange={updateData}/>\n                                    </div>\n                                    <div className={'col-2 mt-4'}>\n                                        <button className={'btn btn-sm btn-outline-danger'}\n                                                onClick={() => setWindow({...deliveryWindow, start_date: null})}\n                                        >clear</button>\n                                    </div>\n                                    <div className={'col-9 mt-2'}>\n                                        <div className={'delivery_window_edit__prompt'}>end date:</div>\n                                        <input type={'date'} className={'form-control'} id={'end_date'}\n                                               value={deliveryWindow.end_date || ''} onChange={updateData} />\n                                    </div>\n                                    <div className={'col-2 mt-4'}>\n                                        <button className={'btn btn-sm btn-outline-danger'}\n                                                onClick={() => setWindow({...deliveryWindow, end_date: null})}>clear</button>\n                                    </div>\n                                </Fragment>\n                            }\n                        </div>\n                    </div>\n                    <div className='col-12'>\n                        <hr/>\n                    </div>\n                    <div className='col-12 col-md-5 dwe_zones'>\n                        <h5>zones</h5>\n                        <div className='row'>\n                            <div className='col-9'>\n                                {\n                                    zones.length > 0 ?\n                                        <select className='form-control'\n                                                onChange={(e: ChangeEvent<HTMLSelectElement>) => setSelectedZone(parseInt(e.target.value))}>\n                                            {\n                                                zones.map((zone: Zone) =>\n                                                    <option key={`zone_${zone.id}`} value={zone.id}>{zone.name}</option>\n                                                )\n                                            }\n                                        </select>\n                                        :\n                                        <div className='dwe__no_zones_message'>\n                                            no zones available\n                                        </div>\n                                }\n                            </div>\n                            <div className='col-2'>\n                                <button className='btn btn-sm btn-outline-success' onClick={addZone}>\n                                    add zone\n                                </button>\n                            </div>\n                        </div>\n                        <hr/>\n                        <div className='dwe_zones__zones'>\n                            {deliveryWindow.zones &&\n                                deliveryWindow.zones.map((zone: Zone) =>\n                                    <div className='row dwe_zones__zone mt-1'>\n                                        <div className='col-9'>{zone.name}</div>\n                                        <div className='col-2'>\n                                            <button className='btn btn-sm btn-outline-danger' onClick={()=>removeZone(zone)}>X</button>\n                                        </div>\n                                    </div>\n                                )\n                            }\n                        </div>\n                    </div>\n                    {sendEmail &&\n                        <div className='col-12 delivery_window_edit__emailer'>\n                            <div className='row justify-content-center'>\n                                <div className='col-12 col-md-6'>\n                                    <EmailWidget\n                                        finished={() => setSendEmail(false)}\n                                        prompt={'this email will be sent to anyone in your mailing list who can order during this delivery window'}\n                                        config={{\n                                            email_type: 'delivery_window',\n                                            entity_id: deliveryWindow.id\n                                        }}\n                                        />\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}","import ModelBase from './ModelBase';\nimport Zipcode from \"./ZipcodeModel\";\n\nexport default class Zone extends ModelBase {\n\n    public name!: string;\n    public zip_codes!: Zipcode[];\n\n    public jdel_min!: number;\n    public jdel_del_charge!: number;\n    public jdel_free_del_min!: number;\n    public jdel_tax!: number;\n\n    public fdel_min!: number;\n    public fdel_del_charge!: number;\n    public fdel_free_del_min!: number;\n    public fdel_tax!: number;\n\n    public ship_min!: number;\n    public ship_del_charge!: number;\n    public ship_free_del_min!: number;\n    public ship_tax!: number;\n\n    constructor(\n        id: number = -1,\n        name: string = '',\n        zip_codes: Zipcode[] = []\n    ) {\n        super();\n        this.id = id;\n        this.name = name;\n        this.zip_codes = zip_codes;\n    }\n}","import ModelBase from \"./ModelBase\";\nimport Zone from \"./ZoneModel\";\n\nexport default class Zipcode extends ModelBase {\n\n    public code!: string;\n    public zone!: Zone | number;\n\n    constructor(id?: number, code?: string, zone?: Zone | number) {\n        super();\n\n        this.id = id || -1;\n        this.code = code || '';\n        this.zone = zone || new Zone();\n    }\n}","import React from 'react';\nimport Zipcode from \"../../models/ZipcodeModel\";\n\nimport './zone.scss';\n\ninterface Props {\n    code: Zipcode,\n    removeCode: (code: Zipcode) => void\n}\n\nexport const ZoneCode = (props: Props): React.ReactElement => {\n\n    return (\n        <div className={'zone_code'} onClick={() => props.removeCode(props.code)}>\n            <div className={'zone_code__code'}>\n                {props.code.code}\n            </div>\n        </div>\n    )\n}","import Service from './Service';\n\nclass ZipService extends Service {\n    appName = 'dashboard';\n    view = 'zipcode';\n}\n\nexport default new ZipService();","import React, {ChangeEvent, useState} from 'react';\nimport Zone from \"../../models/ZoneModel\";\nimport './zone.scss';\nimport Zipcode from \"../../models/ZipcodeModel\";\nimport {ZoneCode} from \"./ZoneCode\";\nimport zipService from '../../services/ZipService';\nimport zoneService from '../../services/ZoneService';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport { states } from '../../constants';\nimport SearchWidget from \"../widgets/searchWidget/SearchWidget\";\n\ninterface Props {\n    zone: Zone,\n    deleteZone: (zone: Zone) => void;\n}\n\nexport const ZoneTool = (props: Props): React.ReactElement => {\n\n    const [codes, setCodes] = useState<Zipcode[]>(props.zone.zip_codes);\n    const [newCode, updateNewCode] = useState('');\n    const [searchCity, updateSearchCity] = useState('');\n    const [addState, updateAddState] = useState(states[0].code);\n    const [addingCode, setAddingCode] = useState(0);\n    const [updating, setUpdating] = useState(false);\n    const [tZone, setTZone] = useState(props.zone);\n    const [zone, setZone] = useState(props.zone);\n\n\n    const removeCode = (code: Zipcode): void => {\n        if (!window.confirm(`Are you sure you want to remove: ${code.code}?`)) return\n        zipService.delete<Zipcode>(code.id)\n            .then(() => setCodes(codes.filter((tcode: Zipcode) => tcode.code !== code.code)))\n            .catch(() => window.alert('unable to remove code'))\n    }\n\n    const addCode = (action: number, value: string | number): void => {\n        setAddingCode(action);\n\n        if (codes.filter((code: Zipcode) => code.code === newCode).length > 0) {\n            alert('that code already exists');\n            return;\n        }\n\n        if (action === 1) {\n            zipService.add<Zipcode>(new Zipcode(-1, newCode, props.zone.id))\n            .then((code: Zipcode) => {\n                setCodes([...codes, code]);\n                updateNewCode('');\n            })\n            .catch(() => window.alert('unable to add code'))\n            .finally(() => setAddingCode(0))\n\n        } else {\n            zoneService.import_zip_codes(\n                props.zone,\n                ['city', 'state'][action - 2],\n                value\n                )\n                .then((cs: Zipcode[]) => setCodes([...codes, ...cs]))\n                .catch( err => window.alert('unable to import zip codes'))\n                .finally(() => setAddingCode(0))\n        }\n    }\n\n    const updateZone = (): void => {\n        setUpdating(true)\n        zoneService.update<Zone>(tZone)\n            .then((z: Zone) => {\n                setUpdating(false);\n                setZone(z);\n                setTZone(z);\n            })\n    }\n\n    let hasUnsavedChanges: boolean =\n        tZone.name !== zone.name ||\n\n        tZone.fdel_tax !== zone.fdel_tax ||\n        tZone.fdel_free_del_min !== zone.fdel_free_del_min ||\n        tZone.fdel_del_charge !== zone.fdel_del_charge ||\n        tZone.fdel_min !== zone.fdel_min ||\n\n        tZone.jdel_tax !== zone.jdel_tax ||\n        tZone.jdel_free_del_min !== zone.jdel_free_del_min ||\n        tZone.jdel_del_charge !== zone.jdel_del_charge ||\n        tZone.jdel_min !== zone.jdel_min ||\n\n        tZone.ship_tax !== zone.ship_tax ||\n        tZone.ship_free_del_min !== zone.ship_free_del_min ||\n        tZone.ship_del_charge !== zone.ship_del_charge ||\n        tZone.ship_min !== zone.ship_min\n\n    return (\n        <div className={'row zone_tool'}>\n            <div className={'col-6'}>\n                <h4>zone name:</h4>\n                <input\n                    className={'form-control zone_tool__name'}\n                    placeholder='zone name'\n                    type={'text'}\n                    value={tZone.name}\n                    disabled={updating}\n                    onChange={(e:ChangeEvent<HTMLInputElement>) => setTZone({...tZone, name: e.target.value})}\n                />\n            </div>\n            <div className='col-12 mt-4'>\n                <fieldset disabled={updating}>\n                    <h4>fees and taxes:</h4>\n                    <div className='row'>\n                        <div className='col-4'>\n\n                        </div>\n                        <div className='col-2'>\n                            <small>minimum order</small>\n                        </div>\n                        <div className='col-2'>\n                            <small>delivery charge</small>\n                        </div>\n                        <div className='col-2'>\n                            <small>free delivery min.</small>\n                        </div>\n                        <div className='col-2'>\n                            <small>tax rate</small>\n                        </div>\n                    </div>\n                    <div className='row'>\n                        <div className='col-4'>\n                            <strong>delivery:</strong>\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='number'\n                                value={tZone.jdel_min || ''}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, jdel_min: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.jdel_del_charge || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, jdel_del_charge: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.jdel_free_del_min || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, jdel_free_del_min: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.jdel_tax || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, jdel_tax: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                    </div>\n                    <div className='row mt-2'>\n                        <div className='col-4'>\n                            <strong>planned-meal delivery:</strong>\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.fdel_min || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, fdel_min: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.fdel_del_charge || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, fdel_del_charge: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.fdel_free_del_min || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, fdel_free_del_min: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.fdel_tax || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, fdel_tax: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                    </div>\n                    <div className='row mt-2'>\n                        <div className='col-4'>\n                            <strong>shipping:</strong>\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.ship_min || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, ship_min: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.ship_del_charge || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, ship_del_charge: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.ship_free_del_min || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, ship_free_del_min: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                        <div className='col-2'>\n                            <input\n                                className='form-control'\n                                type='numeric'\n                                value={tZone.ship_tax || 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => setTZone({...tZone, ship_tax: parseFloat(e.target.value)})}\n                                />\n                        </div>\n                    </div>\n                </fieldset>\n            </div>\n            <div className='col-12 text-right mt-2'>\n                <button\n                    className='btn btn-sm btn-outline-danger mr-2'\n                    onClick={() => props.deleteZone(zone)}\n                    disabled={updating}\n                >delete</button>\n                <LoadingIconButton\n                    btnClass='btn btn-sm btn-outline-success'\n                    label='save updates'\n                    onClick={updateZone}\n                    busy={updating}\n                    disabled={!hasUnsavedChanges}\n                    />\n                <hr/>\n            </div>\n            <div className='col-12 mt-4'>\n                <h4>zipcode management:</h4>\n                <div className='row'>\n                    <div className={'col-6'}>\n                        <div className={'zone_tool__note'}>select code to remove</div>\n                        <div className={'zone_tool__codes'}>\n                            {\n                                codes.sort(\n                                    (a: Zipcode, b:Zipcode) => a.code > b.code ? 1 : a.code < b.code ? -1 : 0\n                                ).map((code: Zipcode) =>\n                                    <ZoneCode\n                                        code={code}\n                                        removeCode={removeCode}\n                                        key={code.code}\n                                    />)\n                            }\n                        </div>\n                    </div>\n                    <div className={'col-6 text-right mt-3'}>\n                        <fieldset disabled={addingCode !== 0}>\n                            <div className='row'>\n                                <div className='col-12'>\n                                    <input\n                                        className={'form-control'}\n                                        placeholder={'new code'}\n                                        value={newCode}\n                                        onChange={(e:ChangeEvent<HTMLInputElement>) => updateNewCode(e.target.value)}\n                                    />\n                                    <LoadingIconButton\n                                        label='add code'\n                                        outerClass='mt-2'\n                                        btnClass='btn btn-sm btn-outline-success'\n                                        onClick={() => addCode(1, newCode)}\n                                        busy={addingCode === 1}\n                                        disabled={newCode.length === 0 || addingCode !== 0}\n                                        />\n                                    <hr/>\n                                </div>\n                                <div className='col-12'>\n                                    <SearchWidget\n                                        placeholder={'add by city'}\n                                        serviceFunction={zoneService.searchZipDb}\n                                        itemSelected={(item: any) => {\n                                            if (typeof item !== 'string')\n                                                addCode(2, item.id)\n\n                                        }}\n                                        />\n                                    <LoadingIconButton\n                                        label='remove codes'\n                                        outerClass='mt-2 mr-2'\n                                        btnClass='btn btn-sm btn-outline-danger'\n                                        onClick={() => addCode(1, newCode)}\n                                        busy={addingCode === 1}\n                                        disabled={addingCode !== 0}\n                                        />\n                                    <LoadingIconButton\n                                        label='add codes'\n                                        outerClass='mt-2'\n                                        btnClass='btn btn-sm btn-outline-success'\n                                        onClick={() => addCode(2, searchCity)}\n                                        busy={addingCode === 2}\n                                        disabled={addingCode !== 0}\n                                        />\n                                    <hr/>\n                                </div>\n                                <div className='col-12'>\n                                    <small>add by state</small>\n                                    <select\n                                        className='form-control'\n                                        value={addState}\n                                        onChange={(e:ChangeEvent<HTMLSelectElement>) => updateAddState(e.target.value)}\n                                        >\n                                        {\n                                            states.map( state =>\n                                                <option\n                                                    key={state.code}\n                                                    value={state.code}\n                                                >{state.name}</option>\n\n                                            )\n                                        }\n                                    </select>\n                                    <LoadingIconButton\n                                        label='remove codes'\n                                        outerClass='mt-2 mr-2'\n                                        btnClass='btn btn-sm btn-outline-danger'\n                                        onClick={() => addCode(1, newCode)}\n                                        busy={addingCode === 1}\n                                        disabled={newCode.length === 0 || addingCode !== 0}\n                                        />\n                                    <LoadingIconButton\n                                        label='add codes'\n                                        outerClass='mt-2'\n                                        btnClass='btn btn-sm btn-outline-success'\n                                        onClick={() => addCode(3, addState)}\n                                        busy={addingCode === 3}\n                                        disabled={addingCode !== 0}\n                                        />\n                                    <hr/>\n                                </div>\n                            </div>\n                        </fieldset>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport Zone from \"../../models/ZoneModel\";\nimport zoneService from '../../services/ZoneService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport { ZoneTool } from './ZoneTool';\nimport './zone.scss';\nimport { useHistory } from 'react-router-dom';\n\nexport const Zones = (): React.ReactElement => {\n\n    const history = useHistory();\n    const [zones, setZones] = useState<Zone[]>([]);\n    const [showLoading, setShowLoading] = useState<boolean>(true);\n    const [newZone, setNewZone] = useState<string>('');\n\n    useEffect(() => {\n        zoneService.get<Zone[]>()\n            .then((zones:Zone[]) => {\n                setZones(zones);\n                setShowLoading(false)\n            })\n            .catch( err => window.alert('unable to load zones'))\n    }, [])\n\n    const addZone = (): void => {\n        zoneService.add<Zone>(new Zone(-1, newZone))\n            .then((zone: Zone) => {\n                setZones([...zones, zone]);\n                setNewZone('');\n            })\n            .catch(() => window.alert('unable to create new zone'))\n    }\n\n    const deleteZone = (zone: Zone): void => {\n        if (!window.confirm(`Are you sure you want to delete the following zone?\\n\\n${zone.name}`)) return;\n        zoneService.delete(zone.id)\n            .then(() => {\n                setZones(zones.filter((z: Zone) => z.id !== zone.id))\n            })\n            .catch( err => window.alert('unable to delete zone'))\n    }\n\n    if (showLoading)\n        return( <LoadingOverlay /> )\n\n    return (\n        <div className={'row zones justify-content-center'}>\n            <div className={'col-12 col-md-7'}>\n                <div className={'row'}>\n                    <div className={'col-12'}>\n                        <h3>zones</h3>\n                        <hr/>\n                    </div>\n                    <div className='col-2'>\n                        <button\n                            className='btn btn-sm btn-outline-info'\n                            onClick={() => history.goBack()}\n                            >back</button>\n                    </div>\n                    <div className='col-7 col-md-5'>\n                        <input type='text' className='form-control' value={newZone} placeholder='new zone name'\n                               onChange={(e:ChangeEvent<HTMLInputElement>) => setNewZone(e.target.value)}\n                        />\n                    </div>\n                    <div className='col-2'>\n                        <button className='btn btn-outline-success' onClick={addZone}>add</button>\n                    </div>\n                    <div className='col-12'>\n                        <hr/>\n                    </div>\n                    {\n                        zones.length > 0 ?\n                            zones.sort(\n                                (a: Zone, b: Zone) => a.id > b.id ? -1 : a.id < b.id ? 1 : 0\n                            ).map((zone: Zone) => {\n                                return(\n                                        <div className={'col-12 zones__zone_wrapper'} key={`zone_${zone.id}`}>\n                                            <ZoneTool zone={zone} deleteZone={deleteZone}/>\n                                        </div>\n                                    )\n                            })\n                            :\n                            <div className='col-12'>\n                                <p>\n                                    Delivery zones are defined by a collection of zip codes. Once you creat a zone, you will be ready to create your first Delivery Window.\n                                </p>\n                            </div>\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}","import ModelBase from \"./ModelBase\";\nimport DeliveryWindow from \"./DeliveryWindowModel\";\nimport RouteStop from \"./RouteStopModel\";\n\nexport default class Route extends ModelBase {\n    public delivery_date!: string;\n    public delivery_window!: DeliveryWindow\n    public stops!: RouteStop[];\n    public route_status!: number;\n    public started_at!: string;\n    public finished_at!: string;\n\n    /*\n    ROUTE_STATUS = (\n    (0, \"uncommitted\"),\n    (1, \"committed\"),\n    (2, \"in_progress\"),\n    (3, \"completed\")\n)\n     */\n\n    constructor(\n        id?: number,\n        delivery_date?: string,\n        delivery_window?: DeliveryWindow,\n        stops?: RouteStop[],\n        route_status?: number,\n        started_at?: string,\n        finished_at?: string\n    )\n    {\n        super();\n        this.id = id || -1;\n        this.delivery_date = delivery_date || '';\n        this.delivery_window = delivery_window || new DeliveryWindow();\n        this.stops = stops || [];\n        this.route_status = route_status || 0;\n        this.started_at = started_at || '';\n        this.finished_at = finished_at || '';\n    }\n}","import Service from \"./Service\";\nimport RouteStop from \"../models/RouteStopModel\";\nimport Route from \"../models/RouteModel\";\n\nclass RouteStopService extends Service {\n    appName = 'dashboard';\n    view = 'route_stop';\n\n    public at_stop = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/at_stop/`);\n    }\n\n    public alertDelivery = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/delivery_alert/`);\n    }\n\n    public cancel = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/cancel/`);\n    }\n\n    public delivered = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/delivered/`);\n    }\n\n    public en_route = (stop: RouteStop): Promise<RouteStop> => {\n        return this._get(`${this.appName}/${this.view}/${stop.id}/en_route/`);\n    }\n}\n\nexport default new RouteStopService();","import React, {useState, Fragment} from 'react';\nimport routeStopService from '../../services/RouteStopService';\n\nimport './delivery_planner.scss';\nimport RouteStop from \"../../models/RouteStopModel\";\nimport moment from \"moment\";\nimport Route from \"../../models/RouteModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport MomentHelper from \"../../helpers/MomentHelper\";\n\ninterface Props {\n    stop: RouteStop,\n    route: Route,\n    moveStop: (stop: RouteStop, direction: string) => void,\n    canMoveUp: boolean,\n    canMoveDown: boolean\n}\n\nexport const RouteOrganizerEntry = (props: Props): React.ReactElement => {\n\n    const [stop, setStop] = useState(props.stop);\n    const [loadButtonActive, setLoadButtonActive] = useState('');\n\n    const atStop = (): void => {\n        setLoadButtonActive('at_stop');\n        routeStopService.at_stop(props.stop)\n            .then((stop:RouteStop) => setStop(stop))\n            .catch(() => window.alert('unable to at_stop'))\n            .then(() => setLoadButtonActive(''))\n    }\n\n    const cancelDelivery = (): void => {\n        if (!window.confirm('are you sure you want to cancel this stop? \\n\\nThis cannot be reversed.')) return;\n\n        setLoadButtonActive('canceling_delivery');\n        routeStopService.cancel(props.stop)\n            .then((stop:RouteStop) => setStop(stop))\n            .catch(() => window.alert('unable to cancel'))\n            .then(() => setLoadButtonActive(''))\n    }\n\n    const completeDelivery = (): void => {\n        setLoadButtonActive('completing_delivery');\n        routeStopService.delivered(props.stop)\n            .then((s: RouteStop) => {setStop(s)})\n            .catch(() => window.alert('unable to complete'))\n            .then(() => setLoadButtonActive('canceling_delivery'))\n    }\n\n    const navigate = (): void => {\n        openMap();\n        routeStopService.en_route(props.stop)\n            .then((stop:RouteStop) => setStop(stop))\n            .catch(() => window.alert('unable to en_route'))\n    }\n\n    const openMap = (): void => {\n        window.open(`http://maps.google.com/?q=${stop.order.street_address} ${props.stop.order.zip}`, '_blank');\n    }\n\n    return (\n        <div className='row route_organizer_entry'>\n            <div className='col-12'>\n                <div className='row organizer_entry__inner'>\n                    <div className='col-12'>\n\n                        <div className='organizer_entry__address'>\n                            { stop.current_index > -1 ? (stop.current_index + 1).toString() : ''} &nbsp;\n                            {stop.order.street_address}\n                        </div>\n                        {(props.route.route_status > 0 && props.route.route_status < 4) &&\n                            <div className='organizer_entry__time'>\n                                {`${moment(props.route.delivery_window.start_time, 'HH:mm:ss')\n                                    .add(stop.eta, 'seconds')\n                                    .subtract(10, 'minutes')\n                                    .format('HH:mm')} - \n                                    ${moment(props.route.delivery_window.start_time, 'HH:mm:ss')\n                                        .add(stop.eta, 'seconds')\n                                        .subtract(10, 'minutes')\n                                        .add(20, 'minutes')\n                                        .format('HH:mm')}`}\n                            </div>\n                        }\n                    </div>\n                    <div className='col-12 organizer_entry__notes'>\n                        {stop.order.notes}\n                    </div>\n                    <div className='col-12 text-center'>\n                            {stop.stop_status === 3 && // delivery completed\n                                <Fragment>\n                                    {\n                                        <Fragment>\n                                            delivered: {MomentHelper.asShortDateTime(stop.delivered_at)}\n                                        </Fragment>\n                                    }\n\n                                </Fragment>\n                            }\n                            {(props.route.route_status === 3 && stop.stop_status !== 3) && // route completed\n                                <Fragment>\n                                    there was no delivery time recorded\n                                </Fragment>\n                            }\n                            {stop.stop_status === 4 &&\n                                <Fragment>\n                                    canceled\n                                </Fragment>\n                            }\n\n                            {stop.stop_status < 3 &&\n                                <Fragment>\n                                    <div className='col-12 organizer_entry__delivery_controls'>\n                                        {(props.route.route_status === 2 && stop.stop_status === 0) &&\n                                            <button className='btn btn-sm btn-outline-success delivery_controls__navigate mr-2' onClick={() => navigate()}>navigate</button>\n                                        }\n                                        {(props.route.route_status === 2 && stop.stop_status !== 0) &&\n                                            <Fragment>\n                                                {stop.stop_status === 1 &&\n                                                    <LoadingIconButton\n                                                        busy={loadButtonActive ==='at_stop'}\n                                                        outerClass='mr-2 delivery_controls__arrive'\n                                                        btnClass={'btn btn-sm btn-outline-info'}\n                                                        label={'arrive'}\n                                                        onClick={atStop} />\n                                                }\n                                                {stop.stop_status === 2 &&\n                                                    <LoadingIconButton\n                                                        busy={loadButtonActive ==='completing_delivery'}\n                                                        outerClass='mr-2 delivery_controls__finished'\n                                                        btnClass={'btn btn-sm btn-outline-success'}\n                                                        label={'finished'}\n                                                        onClick={completeDelivery} />\n                                                }\n                                            </Fragment>\n                                        }\n                                        {props.route.route_status === 2 &&\n                                            <LoadingIconButton\n                                                busy={loadButtonActive ==='canceling_delivery'}\n                                                outerClass='mr-2 organizer_entry__cancel'\n                                                btnClass={'btn btn-sm btn-outline-danger'}\n                                                label={'cancel'}\n                                                onClick={cancelDelivery} />\n                                        }\n                                    </div>\n                                    {props.route.route_status === 0 && // non commited\n                                        <div className='col-12 organizer_entry__plan_controls'>\n                                            <button className='btn btn-sm btn-outline-success plan_controls__up_btn mr-2' disabled={!props.canMoveUp}\n                                                    onClick={() => props.moveStop(stop, 'up')}\n                                            >up</button>\n                                            <button className='btn btn-sm btn-outline-success plan_controls__down_btn mr-2' disabled={!props.canMoveDown}\n                                                    onClick={() => props.moveStop(stop, 'down')}\n                                            >down</button>\n                                            <button className='btn btn-sm btn-outline-success plan_controls__top_btn mr-2' disabled={!props.canMoveUp}\n                                                    onClick={() => props.moveStop(stop, 'top')}\n                                            >first</button>\n                                            <button className='btn btn-sm btn-outline-success plan_controls__bottom_btn' disabled={!props.canMoveDown}\n                                                    onClick={() => props.moveStop(stop, 'bottom')}\n                                            >last</button>\n\n                                        </div>\n                                    }\n                                </Fragment>\n                            }\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    )\n}","import Service from \"./Service\";\nimport Route from \"../models/RouteModel\";\n\nclass RouteService extends Service {\n    appName = 'dashboard';\n    view = 'route';\n\n    public commitRoute = (route: Route): Promise<Route> => {\n        return this._get(`${this.appName}/${this.view}/${route.id}/commit`);\n    }\n\n    public completeRoute = (route: Route): Promise<Route> => {\n        return this._get(`${this.appName}/${this.view}/${route.id}/complete_route`);\n    }\n\n    public startRoute = (route: Route): Promise<Route> => {\n        return this._get(`${this.appName}/${this.view}/${route.id}/start_route`);\n    }\n\n    public updateStopOrder = (route: Route, stopIds: number[]): Promise<Route> => {\n        return this._post(`${this.appName}/${this.view}/${route.id}/update_stop_order/`, {\n            stop_ids: JSON.stringify(stopIds)\n        })\n    }\n}\n\nexport default new RouteService();","import React, {Fragment} from 'react';\nimport Route from \"../../models/RouteModel\";\n\nimport './delivery_planner.scss';\nimport {RouteOrganizerEntry} from \"./RouteOrganizerEntry\";\nimport RouteStop from \"../../models/RouteStopModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport routeService from '../../services/RouteService';\nimport MomentHelper from \"../../helpers/MomentHelper\";\n\ninterface Props {\n    route: Route,\n    updateRoute: (route: Route) => void\n}\n\ninterface State {\n    mode: string,\n    route: Route,\n    routeUpdated: boolean,\n    loading: boolean,\n    stops: RouteStop[],\n    loadingButtonInUse: string\n}\n\nexport default class RouteOrganizer extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            mode: 'plan',\n            route: props.route,\n            routeUpdated: false,\n            loading: true,\n            stops: this.extractStopsFromRoute(props.route),\n            loadingButtonInUse: ''\n        }\n    }\n\n    private commitRoute = (): void => {\n        if (!window.confirm('Once you commit a route, it cannot be changed.')) return;\n\n        this.setState({loadingButtonInUse: 'committing'});\n\n        routeService.commitRoute(this.state.route)\n            .then((route: Route) => this.setState({route, stops: this.extractStopsFromRoute(route)}))\n            .catch(() => window.alert('cannot commit route'))\n            .then(() => this.setState({loadingButtonInUse: ''}))\n    }\n\n    private completeRoute = (): void => {\n        if (!window.confirm('Are you sure you are done?')) return;\n\n        this.setState({loadingButtonInUse: 'completing_route'})\n        routeService.completeRoute(this.state.route)\n            .then((route: Route) => this.setState({route, stops: this.extractStopsFromRoute(route)}))\n            .catch(() => window.alert('unable to complete route'))\n            .then(() => this.setState({loadingButtonInUse: ''}))\n    }\n\n    private moveEntry = (stop: RouteStop, direction: string) => {\n        let currentNdx: number = -1;\n        this.state.stops.forEach((e: RouteStop, index: number) => {\n            if (e.id === stop.id) currentNdx = index;\n        })\n\n        let stops: RouteStop[] = this.state.stops;\n        stops.splice(currentNdx, 1); // remove\n\n        // add\n        switch(direction) {\n            case 'up': currentNdx --; break;\n            case 'down': currentNdx ++; break;\n            case 'top': currentNdx = 0; break;\n            case 'bottom': currentNdx = stops.length; break;\n        }\n        stops.splice(currentNdx, 0, stop)\n\n        for (let x: number = 0; x < stops.length; x ++)\n            stops[x].current_index = x\n\n        this.setState({stops, routeUpdated: true});\n    }\n\n    private optimize = (): void => {\n        this.setState({\n            loadingButtonInUse: 'optimizing',\n            stops: this.state.stops.sort((a,b) => (a.index > b.index) ? 1 : ((b.index > a.index) ? -1 : 0))\n        }, () => this.saveChanges())\n    }\n\n    private saveChanges = (): void => {\n        routeService.updateStopOrder(this.state.route, this.state.stops.map((stop: RouteStop) => stop.id))\n            .then((route: Route) => this.props.updateRoute(route))\n            .catch(() => window.alert('unable to save changes'))\n            .then(() => this.setState({loadingButtonInUse: ''}))\n    }\n\n    private extractStopsFromRoute = (route: Route): RouteStop[] => {\n        return route.stops.sort((a,b) => (a.current_index > b.current_index) ? 1 : ((b.current_index > a.current_index) ? -1 : 0))\n    }\n\n    private startRoute = (): void => {\n        if (!window.confirm('Are you sure you want to start the route?')) return;\n\n        this.setState({loadingButtonInUse: 'starting_route'})\n        routeService.startRoute(this.state.route)\n            .then((route: Route) => this.setState({route}))\n            .catch(() => window.alert('unable to start route'))\n            .then(() => this.setState({loadingButtonInUse: ''}))\n    }\n\n    public render() {\n        const routeStatus: string[] = ['uncommitted', 'committed', 'in progress', 'completed', 'waiting for cutoff'];\n        let canOptimize: boolean = false;\n        this.state.stops.forEach((stop: RouteStop, index: number) => {\n            if (stop.index !== stop.current_index) canOptimize = true;\n        })\n\n        return (\n            <div className='row route_organizer'>\n                <div className='col-12 route_organizer__status mb-2'>\n                    status:\n                    <span className={`route_organizer__status--${this.state.route.route_status} ml-2`}>\n                        {routeStatus[this.state.route.route_status]}\n                    </span>\n                </div>\n                {this.state.route.route_status === 3 && //completed\n                    <Fragment>\n                        <div className='col-12'>started: {MomentHelper.asShortDateTime(this.state.route.started_at)}</div>\n                        <div className='col-12'>completed: {MomentHelper.asShortDateTime(this.state.route.finished_at)}</div>\n                    </Fragment>\n                }\n                <div className='col-12'>\n                    {this.state.route.route_status === 0 && //uncommitted\n                        <Fragment>\n                            {this.state.routeUpdated &&\n                                <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='saving_changes'}\n                                    btnClass={'btn btn-outline-success route_organizer__optimize_btn'}\n                                    label={'save changes'}\n                                    onClick={() => {\n                                        this.setState({loadingButtonInUse: 'saving_changes'});\n                                        this.saveChanges();\n                                    }} />\n                            }\n                            {(!this.state.routeUpdated) &&\n                                <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='committing'}\n                                    btnClass='btn btn-outline-success'\n                                    label={'commit route'}\n                                    onClick={this.commitRoute} />\n                            }\n                            {canOptimize &&\n                                <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='at_stop'}\n                                    btnClass='btn btn-outline-info'\n                                    label={'optimize'}\n                                    onClick={this.optimize} />\n                            }\n                        </Fragment>\n                    }\n                    {this.state.route.route_status === 1 &&  //committed\n                        <Fragment>\n                            <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='starting_route'}\n                                    btnClass='btn btn-outline-info'\n                                    label={'start route'}\n                                    onClick={this.startRoute} />\n                        </Fragment>\n                    }\n                    {this.state.route.route_status === 2 &&  //in progress\n                        <Fragment>\n                            <LoadingIconButton\n                                    outerClass='mr-2'\n                                    busy={this.state.loadingButtonInUse ==='completing_route'}\n                                    btnClass='btn btn-outline-success'\n                                    label={'completed'}\n                                    onClick={this.completeRoute} />\n                        </Fragment>\n                    }\n                </div>\n                <div className='col-12 route_organizer__stops mt-2'>\n                    <div className='row'>\n                        {\n                            this.state.stops.map((stop: RouteStop, index: number) =>\n                                <div className='col-12'key={`route_${Math.random()}`}>\n                                    <RouteOrganizerEntry\n                                        stop={stop}\n                                        route={this.state.route}\n                                        moveStop={this.moveEntry}\n                                        canMoveDown={index + 1  < this.state.stops.length}\n                                        canMoveUp={index > 0}\n                                    />\n                                </div>\n                            )\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, {useEffect, useState} from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport GoogleMapReact, {Maps} from 'google-map-react';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport Route from \"../../models/RouteModel\";\n\nimport './delivery_planner.scss';\nimport RouteOrganizer from \"./RouteOrganizer\";\nimport RouteStop from \"../../models/RouteStopModel\";\nimport MomentHelper from \"../../helpers/MomentHelper\";\nimport moment from \"moment\";\n\nexport const DeliveryPlanner = (props: any): React.ReactElement => {\n    const params: any = useParams();\n    const history = useHistory();\n    const [route, setRoute] = useState<Route>(new Route());\n    const [loading, setLoading] = useState<boolean>(true);\n\n    let map: any;\n    let maps: any;\n    let markers: any[] = [];\n\n    useEffect(() => {\n        deliveryWindowService.retrieveRoute(params.delivery_window, new Date(moment(params.target_date).format('YYYY-MM-DD')))\n            .then((route: Route) => {\n                setRoute(route);\n                setLoading(false);\n                firstBuild();\n            })\n            .catch(() => window.alert('unable to load route'))\n    }, [])\n\n    const handleApiLoaded = (imap: any, imaps: Maps) => {\n      map = imap;\n      maps = imaps;\n      firstBuild();\n    };\n\n    const firstBuild = (): void => {\n        return;\n        if (route.id === -1 || map === undefined) return;\n        updateStops(route.stops);\n    }\n\n    const createMapOptions = (maps: any): any => {\n      return {\n        zoomControlOptions: {\n          position: maps.ControlPosition.RIGHT_CENTER,\n          style: maps.ZoomControlStyle.SMALL\n        },\n        mapTypeControlOptions: {\n          position: maps.ControlPosition.TOP_RIGHT\n        },\n        mapTypeControl: true\n      };\n    }\n\n    const updateStops = (stops: RouteStop[]): void => {\n        if (map !== undefined) {\n\n            // clear old markers\n            markers.forEach((marker: any) => marker.setMap(null));\n            markers = [];\n\n            // add new markers\n            stops.forEach((stop: RouteStop, index: number) => {\n                markers.push(\n                    new maps.Marker({\n                        position: JSON.parse(stop.leg).end_location,\n                        map,\n                        title: stop.order.street_address,\n                        label: {\n                            color: '#00ff00',\n                            fontWeight: 'bold',\n                            fontSize: '3em',\n                            text: (index + 1).toString()\n                        },\n                        icon: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png',\n                    })\n                )\n            })\n        }\n    }\n\n    if (loading)\n        return <LoadingOverlay />\n\n     return (\n        <div className='row delivery_planner justify-content-center'>\n            <div className='col-12'>\n                <h3>route planner</h3>\n                <b>{MomentHelper.asShortDate(route.delivery_date)}</b>\n                <button\n                    className='btn btn-sm btn-outline-info delivery_planner__back_btn'\n                    onClick={() => history.goBack()}\n                >\n                    back to tools\n                </button>\n                <hr/>\n            </div>\n            <div className={`d-none ${route.route_status !== 0 ? 'd-md-none' : 'd-md-block'}  col-md-8 delivery_planner__map_div`}>\n                {route.route_status === 0 &&\n                    <GoogleMapReact\n                        key={Math.random()}\n                        bootstrapURLKeys={{key: 'AIzaSyC0yq5uGlMfHp98X-L452J-dzR2HX5FEP8'}}\n                        center={{lat: 37.804363, lng:-122.271111}}\n                        zoom={10}\n                        yesIWantToUseGoogleMapApiInternals={true}\n                        options={createMapOptions}\n                        onGoogleApiLoaded={({map, maps}) => handleApiLoaded(map, maps)}\n                    >\n                        {\n                            route.stops.sort((a, b) => (a.current_index > b.current_index) ? 1 : ((b.current_index > a.current_index) ? -1 : 0)).map((stop: RouteStop, index: number) => {\n                                    let leg: any = stop.leg !== '' ? JSON.parse(stop.leg) : {end_location : {\n                                            lat: 37.804363,\n                                            lng: -122.271111\n                                        }};\n                                    return (\n                                        <Marker\n                                            key={Math.random()}\n                                            lat={leg.end_location.lat}\n                                            lng={leg.end_location.lng}\n                                            text={(index += 1).toString()}\n                                        />)\n                                }\n                            )\n                        }\n                    </GoogleMapReact>\n                }\n            </div>\n            <div className='col-12 col-md-4'>\n                <RouteOrganizer\n                    key={Math.random()}\n                    route={route}\n                    updateRoute={(route: Route) => setRoute(route)}\n                />\n            </div>\n        </div>\n    )\n}\n\ninterface MarkerProps {\n    lat: number,\n    lng: number,\n    text: string\n}\nexport const Marker = (props: MarkerProps): React.ReactElement =>\n    <div style={{fontSize: '2em', color: 'red', fontWeight: 'bold'}}>{props.text}</div>","import Service from './Service'\nimport Operator from \"../models/OperatorModel\";\nimport OperatorSettingsDTO from \"../dto/OperatorSettingsDTO\";\n\nclass OperatorService extends Service {\n    appName = 'dashboard';\n    view = 'operator';\n\n    public getMe = (): Promise<Operator> => {\n        return this._get<any>(`${this.appName}/${this.view}/get_me`);\n    }\n\n    public get_settings = (): Promise<OperatorSettingsDTO> => {\n        return this._get<OperatorSettingsDTO>(`${this.appName}/${this.view}/get_settings/`);\n    }\n}\n\nexport default new OperatorService();","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport operatorService from '../../services/OperatorService';\nimport './profile.scss';\nimport Operator from \"../../models/OperatorModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport authService from '../../services/AuthService';\nimport actionsService from '../../services/APIActionService';\n\nexport const Profile = (): React.ReactElement => {\n    const [operator, setOperator] = useState<Operator>(new Operator());\n    const [savedOperator, setSavedOperator] = useState(new Operator());\n    const [errors, setErrors] = useState<string[]>([]);\n    const [hasUpdates, setHasUpdates] = useState(false);\n    const [saving, setSaving] = useState(false);\n    const [timeZones, setTimeZones] = useState<string[]>([]);\n\n    const [updatingPassword, setUpdatingPassword] = useState(false);\n    const [currentPassword, setCurrentPassword] = useState('');\n    const [newPassword, setNewPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [savingPassword, setSavingPassword] = useState(false);\n\n    useEffect(() => {\n        if (operator.id === -1) {\n            Promise.all([\n                operatorService.getMe(),\n                actionsService.getTimeZones()\n            ])\n                .then((values) => {\n                    updateOperator(values[0]);\n                    setSavedOperator(values[0]);\n                    setTimeZones(values[1]);\n                })\n                .catch(() => window.alert('unable to load page'))\n        } else {\n            checkForUpdates()\n        }\n    }, )\n\n    const checkForUpdates = (): void => {\n        let updated: boolean = false;\n\n        Object.keys(operator).forEach( key => {\n            // @ts-ignore\n            if (operator[key] !== savedOperator[key]) {\n                updated = true;\n            }\n        })\n\n        setHasUpdates(updated);\n    }\n\n    const savePassword = (): void => {\n        setSavingPassword(true);\n        authService.updatePassword(operator.user, currentPassword, newPassword)\n            .then(() => {\n                setUpdatingPassword(false);\n                setCurrentPassword('');\n                setNewPassword('');\n                setConfirmPassword('');\n                alert('password updated');\n            })\n            .catch(() => window.alert('unable to update password.\\n\\nCheck that the current password is correct'))\n            .then(() => setSavingPassword(false))\n    }\n\n    const saveUpdates = (): void => {\n        setSaving(true);\n        operatorService.update(operator)\n            .then((op: Operator) => {\n                setSavedOperator(op);\n                updateOperator(op);\n            })\n            .catch((err) => window.alert(JSON.stringify(err.response.data)))\n            .then(() => {\n                setSaving(false)\n            })\n    }\n\n    const updateOperator = (op: Operator): void =>  {\n        let errors: string[] = [];\n\n        // each to check fields\n        (['zip_code', 'city', 'street_address', 'name', 'phone', 'page_name', 'support_email', 'state', 'timezone',\n            'ordering_cutoff_time'\n        ]).forEach((field: any) => {\n            // @ts-ignore\n            if (op[field] === '')\n                errors.push(field);\n        })\n\n        // fields with more checking\n        if (op.self_hosted &&\n            (op.domain === '' || op.domain.indexOf('https://') !== 0)\n        ) errors.push('domain');\n\n        if (op.auto_notify_upcoming_deliveries && op.upcoming_delivery_notification_time < 1)\n            errors.push('upcoming_delivery_notification_time');\n\n        if (!op.self_hosted && op.storefront_template === '')\n            errors.push('storefront_template');\n\n        if (op.ordering_cutoff_time < 1)\n            errors.push('ordering_cutoff_time');\n\n        if (op.upcoming_delivery_days_notification_time < 1)\n            errors.push('upcoming_delivery_days_notification_time');\n\n        if (op.max_future_delivery_windows_time < 1)\n            errors.push('max_future_delivery_windows_time');\n\n        if (op.tax_rate > .99)\n            errors.push('tax_rate');\n\n        if (op.delivery_minimum < 10)\n            errors.push('delivery_minimum');\n\n        setErrors(errors);\n        setOperator(op);\n    }\n\n    let passwordErrors: string[] = [];\n    if (updatingPassword) {\n        if (currentPassword === '') passwordErrors.push('current_password');\n        if (newPassword === '') passwordErrors.push('new_password');\n        if (confirmPassword === '' || confirmPassword !== newPassword) passwordErrors.push('confirm_password');\n    }\n\n    return (\n        <div className='row profile justify-content-center'>\n            <div className='col-12 col-md-7'>\n                <h3>profile</h3>\n                <hr/>\n            </div>\n            <div className='col-12 col-md-7'>\n                <fieldset disabled={saving}>\n                    <div className=\"accordion\" id=\"myAccordion\">\n                        <div className=\"card\">\n                            <div className=\"card-header\" id=\"headingOne\">\n                                <h2 className=\"mb-0\">\n                                    <button type=\"button\" className=\"btn btn-link\" data-toggle=\"collapse\"\n                                            data-target=\"#collapseOne\">contact info\n                                    </button>\n                                </h2>\n                            </div>\n                            <div id=\"collapseOne\" className=\"collapse show\" aria-labelledby=\"headingOne\"\n                                 data-parent=\"#myAccordion\">\n                                <div className=\"card-body\">\n                                    <div className='row'>\n                                        <div className='col-12 col-md-6'>\n                                            full name:\n                                            <input className={`form-control ${errors.indexOf('name') > -1 ? 'profile__error_border' : ''}`} value={operator.name}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, name: e.target.value})\n                                                   }\n                                            />\n                                        </div>\n                                        <div className='col-12 col-md-6 mt-1'>\n                                            contact email:\n                                            <h6>{operator.user.email}</h6>\n                                            <span className='profile__prompt_note'>for emails regarding your account. contact admin to change</span>\n                                        </div>\n                                        <div className='col-12 col-md-6 mt-1'>\n                                            phone number:\n                                            <input className={`form-control ${errors.indexOf('phone') > -1 ? 'profile__error_border' : ''}`} type='email' value={operator.phone}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, phone: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-12 col-md-6 text-center'>\n                                            <button className={`btn btn-sm btn-${\n                                                updatingPassword ? 'warning' : 'outline-info'\n                                                } mt-4`}\n                                                    onClick={() => {\n                                                        setUpdatingPassword(!updatingPassword);\n                                                    }}\n                                            >\n                                                {\n                                                    updatingPassword ? 'cancel update password' : 'update password'\n                                                }\n                                            </button>\n                                        </div>\n                                        {updatingPassword &&\n                                            <div className='col-12'>\n                                                <hr/>\n                                                <h5>update password:</h5>\n                                                <div className='row'>\n                                                    <div className='col-12 col-md-6 mt-1'>\n                                                        current password:\n                                                        <input className={`form-control ${passwordErrors.indexOf('current_password') > -1 ? 'profile__error_border' : ''}`}\n                                                               type='password'\n                                                               value={currentPassword}\n                                                               onChange={(e:ChangeEvent<HTMLInputElement>) => setCurrentPassword(e.target.value)}\n                                                        />\n                                                    </div>\n                                                    <div className='col-12 col-md-6 mt-1'>\n                                                        new password:\n                                                        <input className={`form-control ${passwordErrors.indexOf('new_password') > -1 ? 'profile__error_border' : ''}`}\n                                                               type='password'\n                                                               value={newPassword}\n                                                               onChange={(e:ChangeEvent<HTMLInputElement>) => setNewPassword(e.target.value)}\n                                                        />\n                                                    </div>\n                                                    <div className='col-12 col-md-6 mt-1'>\n                                                        confirm password:\n                                                        <input className={`form-control ${passwordErrors.indexOf('confirm_password') > -1 ? 'profile__error_border' : ''}`}\n                                                               type='password'\n                                                               value={confirmPassword}\n                                                               onChange={(e:ChangeEvent<HTMLInputElement>) => setConfirmPassword(e.target.value)}\n                                                        />\n                                                    </div>\n                                                    <div className='col-12 mt-1 text-center'>\n                                                        <LoadingIconButton\n                                                            label='save password'\n                                                            btnClass='btn btn-sm btn-success'\n                                                            disabledBtnClass='btn btn-sm btn-outline-secondary'\n                                                            onClick={savePassword}\n                                                            busy={savingPassword}\n                                                            disabled={passwordErrors.length > 0}\n                                                            />\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        }\n                                        <div className='col-12'>asfsadf\n                                            <LoadingIconButton\n                                                key={Math.random()}\n                                                busy={saving}\n                                                label={'save updates'}\n                                                onClick={saveUpdates}\n                                                btnClass={'btn btn-sm btn-success'}\n                                                disabledBtnClass={'btn btn-sm btn-outline-secondary'}\n                                                outerClass={'float-right'}\n                                                disabled={!hasUpdates || errors.length !== 0}\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"card\">\n                            <div className=\"card-header\" id=\"headingTwo\">\n                                <h2 className=\"mb-0\">\n                                    <button type=\"button\" className=\"btn btn-link collapsed\" data-toggle=\"collapse\"\n                                            data-target=\"#collapseTwo\">business info\n                                    </button>\n                                </h2>\n                            </div>\n                            <div id=\"collapseTwo\" className=\"collapse\" aria-labelledby=\"headingTwo\"\n                                 data-parent=\"#myAccordion\">\n                                <div className=\"card-body\">\n                                    <div className='row'>\n                                        <div className='col-12 col-md-6'>\n                                            business name:\n                                            <input className={`form-control ${errors.indexOf('page_name') > -1 ? 'profile__error_border' : ''}`} value={operator.page_name}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, page_name: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-12 col-md-6'>\n                                            time zone:\n                                            <select className={`form-control ${errors.indexOf('timezone') > -1 ? 'profile__error_border' : ''}`}\n                                                    value={operator.timezone}\n                                                    onChange={(e:ChangeEvent<HTMLSelectElement>) =>\n                                                       updateOperator({...operator, timezone: e.target.value})\n                                                   }\n                                            >\n                                                <option value={''}>choose</option>\n                                                {\n                                                    timeZones.map((zone: string) =>\n                                                        <option value={zone} key={zone}>{zone}</option>\n                                                    )\n                                                }\n                                            </select>\n                                        </div>\n                                        <div className='col-12 col-md-6 mt-2'>\n                                            contact email:\n                                            <input className={`form-control ${errors.indexOf('support_email') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='email' value={operator.support_email}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, support_email: e.target.value})\n                                                   }/>\n                                            <span className='profile__prompt_note'>for messages from your customers and alerts</span>\n                                        </div>\n                                        <div className='col-12 mt-2'>\n                                            street address:\n                                            <input className={`form-control ${errors.indexOf('street_address') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='text' value={operator.street_address}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, street_address: e.target.value})\n                                                   }/>\n                                            <span className='profile__prompt_note'>this should be the location deliveries will start from</span>\n                                        </div>\n                                        <div className='col-md-3 mt-2'>\n                                            unit:\n                                            <input className={`form-control`}\n                                                   type='text' value={operator.unit}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, unit: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-md-3 mt-2'>\n                                            city:\n                                            <input className={`form-control ${errors.indexOf('city') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='text' value={operator.city}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, city: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-md-3 mt-2'>\n                                            state:\n                                            <input className={`form-control ${errors.indexOf('state') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='text' value={operator.state}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, state: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-md-3 mt-2'>\n                                            zip code:\n                                            <input className={`form-control ${errors.indexOf('zip_code') > -1 ? 'profile__error_border' : ''}`}\n                                                   type='text' value={operator.zip_code}\n                                                   onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                       updateOperator({...operator, zip_code: e.target.value})\n                                                   }/>\n                                        </div>\n                                        <div className='col-12 mt-2'>\n                                            <hr/>\n                                            <h5>store front hosting</h5>\n                                            <p>\n                                                You can host the store front application on your own website or host it on our platform.\n                                                The implementation is simple HTML that requires no plugins or javascript.\n                                            </p>\n                                            <input type='checkbox' checked={operator.self_hosted}\n                                                   onChange={()=> updateOperator({...operator, self_hosted: !operator.self_hosted})}\n                                            />\n                                            &nbsp;&nbsp;&nbsp;\n                                            host on my own server\n                                        </div>\n                                        {operator.self_hosted &&\n                                            <div className='col-12 mt-2'>\n                                                <input type='text' placeholder='url to  your website'\n                                                       className={`form-control ${errors.indexOf('domain') > -1 ? 'profile__error_border' : ''}`}\n                                                       value={operator.domain}\n                                                       onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                           updateOperator({...operator, domain: e.target.value})\n                                                       }/>\n                                                <span className='profile__prompt_note'>\n                                                    this needs to be a full URL to your website. ex; <strong>http://www.example.com</strong>.\n                                                </span>\n                                                <p>\n\n                                                </p>\n                                                <a href='/static/files/implement_sample.html' target='_blank'>Click for an example on how to add the store front app to your website </a>\n                                            </div>\n                                        }\n                                        {!operator.self_hosted &&\n                                            <div className='col-12 mt-2'>\n                                                Copy and paste your HTML below:\n                                                <ul>\n                                                    <li>you need to provide hosting for your own images</li>\n                                                    <li>do not include any tags that belong in the &lt;head&gt; tag</li>\n                                                </ul>\n                                                <textarea\n                                                    className={`form-control ${errors.indexOf('storefront_template') > -1 ? 'profile__error_border' : ''}`}\n                                                    value={operator.storefront_template}\n                                                    onChange={(e:ChangeEvent<HTMLTextAreaElement>) =>\n                                                       updateOperator({...operator, storefront_template: e.target.value})\n                                                   }\n                                                ></textarea>\n                                            </div>\n\n                                        }\n                                        <div className='col-12'>asfsadf\n                                            <LoadingIconButton\n                                                key={Math.random()}\n                                                busy={saving}\n                                                label={'save updates'}\n                                                onClick={saveUpdates}\n                                                btnClass={'btn btn-sm btn-success'}\n                                                disabledBtnClass={'btn btn-sm btn-outline-secondary'}\n                                                outerClass={'float-right'}\n                                                disabled={!hasUpdates || errors.length !== 0}\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"card\">\n                            <div className=\"card-header\" id=\"headingThree\">\n                                <h2 className=\"mb-0\">\n                                    <button type=\"button\" className=\"btn btn-link collapsed\" data-toggle=\"collapse\"\n                                            data-target=\"#collapseThree\">settings\n                                    </button>\n                                </h2>\n                            </div>\n                            <div id=\"collapseThree\" className=\"collapse\" aria-labelledby=\"headingThree\"\n                                 data-parent=\"#myAccordion\">\n                                <div className=\"card-body\">\n                                    <table className='table'>\n                                        <tbody>\n                                            <tr>\n                                                <td colSpan={2}>\n                                                    <h5>customer ordering</h5>\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>How many <strong>days</strong> before delivery day should ordering be disabled?</td>\n                                                <td>\n                                                    <input\n                                                        type='number'\n                                                        min={1}\n                                                        className={`form-control ${errors.indexOf('ordering_cutoff_time') > -1 ? 'profile__error_border' : ''}`}\n                                                        value={operator.ordering_cutoff_time > 0 ? operator.ordering_cutoff_time : ''}\n                                                        onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                           updateOperator({...operator, ordering_cutoff_time: parseInt(e.target.value) || 0})\n                                                        }\n                                                    />\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>How many <strong>days</strong> out should delivery windows be shown?</td>\n                                                <td>\n                                                    <input type='number'\n                                                           min={1}\n                                                           className={`form-control ${errors.indexOf('max_future_delivery_windows_time') > -1 ? 'profile__error_border' : ''}`}\n                                                           value={operator.max_future_delivery_windows_time > 0 ? operator.max_future_delivery_windows_time : ''}\n                                                           onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                               updateOperator({...operator, max_future_delivery_windows_time: parseInt(e.target.value) || 0})\n                                                           }\n                                                    />\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>What is the minimum per delivery?</td>\n                                                <td>\n                                                    <input type='number'\n                                                           min={10}\n                                                           className={`form-control ${errors.indexOf('delivery_minimum') > -1 ? 'profile__error_border' : ''}`}\n                                                           value={operator.delivery_minimum > 0 ? operator.delivery_minimum : ''}\n                                                           onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                               updateOperator({...operator, delivery_minimum: parseFloat(e.target.value) || 0})\n                                                           }\n                                                    />\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>Customer must be present to receive order?</td>\n                                                <td>\n                                                    <input type='checkbox' checked={operator.customer_must_be_present}\n                                                       onChange={()=> updateOperator({...operator, customer_must_be_present: !operator.customer_must_be_present})}\n                                                    />\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td colSpan={2}>\n                                                    <h5>notifications</h5>\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>How many <b>days</b> before an upcoming delivery day should the customer be notified?</td>\n                                                <td>\n                                                    <input\n                                                        type='number'\n                                                        min={1}\n                                                        className={`form-control ${errors.indexOf('upcoming_delivery_days_notification_time') > -1 ? 'profile__error_border' : ''}`}\n                                                        value={operator.upcoming_delivery_days_notification_time > 0 ? operator.upcoming_delivery_days_notification_time : ''}\n                                                        onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                               updateOperator({...operator, upcoming_delivery_days_notification_time: parseInt(e.target.value) || 0})\n                                                           }\n                                                    />\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>Automatically notify customers of their upcoming delivery</td>\n                                                <td>\n                                                    <input type='checkbox' checked={operator.auto_notify_upcoming_deliveries}\n                                                       onChange={()=> updateOperator({...operator, auto_notify_upcoming_deliveries: !operator.auto_notify_upcoming_deliveries})}\n                                                    />\n                                                </td>\n                                            </tr>\n                                            {operator.auto_notify_upcoming_deliveries &&\n                                                <tr>\n                                                    <td>How many <strong>days</strong> before a delivery should the customer be notified?</td>\n                                                    <td>\n                                                        <input\n                                                            type='number'\n                                                            min={1}\n                                                            className={`form-control ${errors.indexOf('upcoming_delivery_notification_time') > -1 ? 'profile__error_border' : ''}`}\n                                                            value={operator.upcoming_delivery_notification_time > 0 ? operator.upcoming_delivery_notification_time : ''}\n                                                            onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                                   updateOperator({...operator, upcoming_delivery_notification_time: parseInt(e.target.value) || 0})\n                                                               }\n                                                        />\n                                                    </td>\n                                                </tr>\n                                            }\n                                            <tr>\n                                                <td colSpan={2}>\n                                                    <h5>fees and tips</h5>\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>Allow tipping?</td>\n                                                <td>\n                                                    <input type='checkbox' checked={operator.allow_tipping}\n                                                       onChange={()=> updateOperator({...operator, allow_tipping: !operator.allow_tipping})}\n                                                    />\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>What fee would  you  like to charge for each delivery?</td>\n                                                    <td>\n                                                        <input\n                                                            type='number'\n                                                            min={1}\n                                                            className={`form-control ${errors.indexOf('delivery_fee') > -1 ? 'profile__error_border' : ''}`}\n                                                            value={operator.delivery_fee}\n                                                            onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                                   updateOperator({...operator, delivery_fee: parseFloat(e.target.value) || 0})\n                                                               }\n                                                        />\n                                                    </td>\n                                            </tr>\n                                            <tr>\n                                                <td>What is the minimum order required for free delivery?</td>\n                                                    <td>\n                                                        <input\n                                                            type='number'\n                                                            min={1}\n                                                            className={`form-control ${errors.indexOf('free_delivery_minimum') > -1 ? 'profile__error_border' : ''}`}\n                                                            value={operator.free_delivery_minimum}\n                                                            onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                                   updateOperator({...operator, free_delivery_minimum: parseFloat(e.target.value) || 0})\n                                                               }\n                                                        />\n                                                    </td>\n                                            </tr>\n                                            <tr>\n                                                <td colSpan={2}><h5>tax</h5></td>\n                                            </tr>\n                                            <tr>\n                                                <td>tax rate (enter as a percentage)</td>\n                                                <td>\n                                                    <input\n                                                        type='number'\n                                                        step='0.01'\n                                                        min={0}\n                                                        max='0.99'\n                                                        className={`form-control ${errors.indexOf('tax_rate') > -1 ? 'profile__error_border' : ''}`}\n                                                        value={operator.tax_rate}\n                                                        onChange={(e:ChangeEvent<HTMLInputElement>) =>\n                                                               updateOperator({...operator, tax_rate: parseFloat(e.target.value) || 0})\n                                                           }\n                                                    />\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>Tax tips?</td>\n                                                <td>\n                                                    <input type='checkbox' checked={operator.tax_tips}\n                                                       onChange={()=> updateOperator({...operator, tax_tips: !operator.tax_tips})}\n                                                    />\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td>Tax delivery fee?</td>\n                                                <td>\n                                                    <input type='checkbox' checked={operator.tax_delivery_fee}\n                                                       onChange={()=> updateOperator({...operator, tax_delivery_fee: !operator.tax_delivery_fee})}\n                                                    />\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                    <div className='col-12'>asfsadf\n                                        <LoadingIconButton\n                                            key={Math.random()}\n                                            busy={saving}\n                                            label={'save updates'}\n                                            onClick={saveUpdates}\n                                            btnClass={'btn btn-sm btn-success'}\n                                            disabledBtnClass={'btn btn-sm btn-outline-secondary'}\n                                            outerClass={'float-right'}\n                                            disabled={!hasUpdates || errors.length !== 0}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </fieldset>\n            </div>\n        </div>\n    )\n}","import Service from './Service';\nimport Recipe from \"../models/RecipeModel\";\nimport RecipeIngredient from \"../models/RecipeIngredientModel\";\n\n\nclass RecipeService extends Service {\n    appName = 'dashboard';\n    view = 'recipe';\n\n    public attachIngredient = (recipe: Recipe, recipeIngredient: RecipeIngredient): Promise<RecipeIngredient> => {\n        return this._post(`${this.appName}/${this.view}/${recipe.id}/attach_ingredient/`, recipeIngredient);\n    }\n}\n\nexport default new RecipeService();","import ModelBase from \"./ModelBase\";\nimport RecipeIngredient from \"./RecipeIngredientModel\";\nimport RecipeNote from \"./RecipeNoteModel\";\n\nexport default class Recipe extends ModelBase {\n    public name!: string;\n    public description!: string;\n    public instructions!: string;\n    public is_vegan!: boolean;\n    public ingredients!: RecipeIngredient[];\n    public servings!: number;\n    public notes!: RecipeNote[];\n    public yld!: number;\n\n    constructor(\n        name: string = '',\n        description: string = '',\n        instructions: string = '',\n        is_vegan: boolean = false,\n        ingredients: RecipeIngredient[] = [],\n        servings: number = 1\n    ) {\n        super();\n        this.name = name;\n        this.description = description;\n        this.instructions = instructions;\n        this.is_vegan = is_vegan;\n        this.ingredients = ingredients;\n        this.servings = servings;\n    }\n}","import React, {useEffect, useState} from 'react';\nimport recipeService from '../../services/RecipeService';\nimport Recipe from '../../models/RecipeModel';\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport InputWidget from \"../widgets/inputWidget/InputWidget\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport { useHistory } from 'react-router-dom';\nimport './recipe.scss';\n\nexport const Recipes = (): React.ReactElement => {\n    const history = useHistory();\n    const [loading, setLoading] = useState(false);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [dto, setDTO] = useState<PagedResultsDTO>(new PagedResultsDTO());\n    const [newRecipe, setNewRecipe] = useState('');\n    const [addingRecipe, setAddingRecipe] = useState(false);\n\n    useEffect(() => {\n        loadPage(1);\n    }, [])\n\n    const addRecipe = (): void => {\n        setAddingRecipe(true);\n        recipeService.add<Recipe>(new Recipe(newRecipe))\n            .then((recipe: Recipe) => history.push({pathname: `/dashboard/recipe/edit/${recipe.id}`}))\n            .catch(() => window.alert('unable to create recipe'))\n            .then(() => setAddingRecipe(false))\n    }\n\n    const loadPage = (pageNumber: number, searchPattern?: string): void => {\n        setLoading(true);\n        setCurrentPage(pageNumber);\n\n        recipeService.pagedSearchResults(pageNumber, searchPattern)\n            .then((dto: PagedResultsDTO) => setDTO(dto))\n            .catch(() => window.alert('unable to load recipes'))\n            .then(() => setLoading(false))\n    }\n\n    return (\n        <div className='row recipes'>\n            <div className='col-12'>\n                <h3>recipes</h3>\n                <hr/>\n            </div>\n            <div className='col-12'>\n                <div className='row mb-2'>\n                    <div className='col-10 col-md-5'>\n                        <InputWidget\n                            id='new_ingredient_input'\n                            type='text'\n                            placeholder='enter name to add or search'\n                            onUpdate={(id: string, searchPattern: string) => {\n                                setNewRecipe(searchPattern);\n                                loadPage(1, searchPattern)\n                            }}\n                            />\n                    </div>\n                    <div className='col-2'>\n                        <LoadingIconButton\n                            label={'add'}\n                            onClick={addRecipe}\n                            busy={addingRecipe}\n                            disabled={addingRecipe || newRecipe.length === 0}\n                            btnClass='btn btn-sm btn-outline-success'\n                            />\n                    </div>\n                </div>\n            </div>\n            <div className='col-12 text-right'>\n                <PageSelector\n                    numItems={dto.count}\n                    currentPage={currentPage}\n                    gotoPage={loadPage}\n                    />\n            </div>\n            <div className='col-12'>\n                {loading &&\n                    <LoadingOverlay />\n                }\n                {(!loading && dto.results.length === 0) &&\n                    <div>\n                        <hr/>\n                        add recipes for your menu items\n                    </div>\n                }\n                {(!loading && dto.results.length > 0) &&\n                    <table className='table'>\n                        <thead>\n                            <tr>\n                                <th>name</th>\n                                <th>vegan</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        {\n                            (dto.results as Recipe[]).map((recipe: Recipe) =>\n                                <tr\n                                    key={`recipe_list_${recipe.id}`}\n                                    className='recipes__recipe'\n                                    onClick={() => history.push({pathname: `/dashboard/recipe/edit/${recipe.id}`})}\n                                >\n                                    <td>{recipe.name}</td>\n                                    <td>\n                                        {\n                                            recipe.is_vegan ? 'yes' : 'no'\n                                        }\n                                    </td>\n                                </tr>\n                            )\n                        }\n                        </tbody>\n                    </table>\n                }\n            </div>\n        </div>\n    )\n}\n\n","import Service from \"./Service\";\n\nclass IngredientService extends Service {\n    appName = 'dashboard';\n    view = 'ingredient';\n}\n\nexport default new IngredientService()","import ModelBase from \"./ModelBase\";\nimport Allergen from \"./AllergenModel\";\n\nexport default class Ingredient extends ModelBase {\n    public name!: string;\n    public description!: string;\n    public allergens!: Allergen[];\n    public allergens_ids!: number[];\n\n    constructor(\n        name: string = '',\n        description: string = '',\n        allergens: Allergen[] = [],\n        allergens_ids: number[] = []\n    ) {\n        super();\n        this.name = name;\n        this.description = description;\n        this.allergens = allergens;\n        this.allergens_ids = allergens_ids;\n    }\n}\n","import React, {useEffect, useState} from 'react';\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport ingredientService from '../../services/IngredientService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport Ingredient from \"../../models/IngredientModel\";\nimport Allergen from \"../../models/AllergenModel\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport { useHistory } from 'react-router-dom';\nimport InputWidget from \"../widgets/inputWidget/InputWidget\";\nimport './ingredient.scss';\n\nexport const Ingredients = (): React.ReactElement => {\n    const [loading, setLoading] = useState(true);\n    const [dto, setDTO] = useState<PagedResultsDTO>(new PagedResultsDTO());\n    const [currentPage, setCurrentPage] = useState(1);\n    const [addingIngredient, setAddingIngredient] = useState(false);\n    const [newIngredient, setNewIngredient] = useState('');\n\n    const history = useHistory();\n\n    useEffect(() => {\n        loadPage(1);\n    }, [])\n\n    const addIngredient = (edit: boolean = false): void => {\n        setAddingIngredient(true);\n\n        ingredientService.add(new Ingredient(newIngredient))\n            .then((ingredient: Ingredient) => {\n                if (edit) {\n                    history.push({pathname: `/dashboard/ingredient/edit/${ingredient.id}`});\n                } else {\n                    setNewIngredient('');\n                    loadPage(1);\n                }\n            })\n            .catch(() => window.alert('unable to create ingredient'))\n            .then(() => setAddingIngredient(false))\n    }\n\n    const loadPage = (page: number, searchPattern?: string): void => {\n        setLoading(true);\n        setCurrentPage(page);\n\n        ingredientService.pagedSearchResults(page, searchPattern)\n            .then((dto: PagedResultsDTO) => setDTO(dto))\n            .catch(() => window.alert('unable to load ingredients'))\n            .then(() => setLoading(false))\n    }\n\n    return (\n        <div className='row ingredients'>\n            <div className='col-12'>\n                <h3>ingredients</h3>\n                <hr/>\n            </div>\n            <div className='col-12'>\n                <div className='row mb-2'>\n                    <div className='col-10 col-md-5'>\n                        <InputWidget\n                            id='new_ingredient_input'\n                            type='text'\n                            placeholder='enter name to add or search'\n                            onUpdate={(id: string, searchPattern: string) => {\n                                setNewIngredient(searchPattern);\n                                loadPage(1, searchPattern)\n                            }}\n                            />\n                    </div>\n                    <div className='col-2'>\n                        <LoadingIconButton\n                            label={'add'}\n                            onClick={() => addIngredient(false)}\n                            busy={addingIngredient}\n                            disabled={addingIngredient || newIngredient.length === 0}\n                            btnClass='btn btn-sm btn-outline-success'\n                            />\n\n                        <LoadingIconButton\n                            label={'add and edit'}\n                            onClick={() => addIngredient(true)}\n                            busy={addingIngredient}\n                            disabled={addingIngredient || newIngredient.length === 0}\n                            btnClass='btn btn-sm btn-outline-success'\n                            outerClass='ml-2'\n                            />\n                    </div>\n                </div>\n            </div>\n            <div className='col-12 text-right'>\n                <PageSelector\n                    numItems={dto.count}\n                    currentPage={currentPage}\n                    gotoPage={loadPage}\n                    />\n            </div>\n            <div className='col-12'>\n                {loading &&\n                    <LoadingOverlay />\n                }\n                {(!loading && dto.results.length === 0) &&\n                    <div>\n                        <hr/>\n                        add ingredients for your recipes\n                    </div>\n                }\n                {(!loading && dto.results.length > 0) &&\n                    <table className='table'>\n                        <thead>\n                            <tr>\n                                <th>name</th>\n                                <th>allergens</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        {\n                            (dto.results as Ingredient[]).map((ingredient: Ingredient) =>\n                                <tr\n                                    key={`ingredient_${ingredient.id}`}\n                                    className='ingredients__ingredient'\n                                    onClick={() => history.push({pathname: `/dashboard/ingredient/edit/${ingredient.id}`})}\n                                >\n                                    <td>{ingredient.name}</td>\n                                    <td>\n                                        {\n                                            (ingredient.allergens as Allergen[]).map((allergen: Allergen, index: number) =>\n                                                `${allergen.name}${index < ingredient.allergens.length -1 ? ', ' : ''}`\n                                            )\n                                        }\n                                    </td>\n                                </tr>\n                            )\n                        }\n                        </tbody>\n                    </table>\n                }\n            </div>\n        </div>\n    )\n}","import Service from \"./Service\";\n\nclass AllergenService extends Service {\n    appName = 'dashboard';\n    view = 'allergen';\n}\n\nexport default new AllergenService();","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport Allergen from \"../../models/AllergenModel\";\nimport Ingredient from \"../../models/IngredientModel\";\nimport allergenService from '../../services/AllergenService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport ingredientService from '../../services/IngredientService';\nimport { useParams, useHistory } from 'react-router-dom';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\n\nexport const IngredientEdit = (): React.ReactElement => {\n    const params: any = useParams();\n    const history = useHistory();\n    const [loading, setLoading] = useState(true);\n    const [allergens, setAllergens] = useState<Allergen[]>([]);\n    const [ingredient, setIngredient] = useState(new Ingredient());\n    const [updated, setUpdated] = useState(false);\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        Promise.all([\n            allergenService.get<Allergen[]>(),\n            ingredientService.get<Ingredient>(params.id)\n        ])\n            .then((values: any) => {\n                setAllergens(values[0]);\n                setIngredient(values[1]);\n                setLoading(false);\n            })\n            .catch(() => window.alert('unable to load data'))\n    }, [])\n\n    const save = (): void => {\n        setSaving(true);\n        ingredientService.update(ingredient)\n            .then((ingredient: Ingredient) => history.goBack())\n    }\n\n    if (loading)\n        return <LoadingOverlay />\n\n    return (\n        <div className='row ingredient_edit'>\n            <div className='col-12'>\n                <h3>edit ingredient</h3>\n                <hr/>\n            </div>\n            <div className='col-12'>\n                <button\n                    className='btn btn-sm btn-outline-info float-left'\n                    onClick={() => history.goBack()}\n                    >back</button>\n                <LoadingIconButton\n                    btnClass={`btn btn-sm btn-outline-${updated ? 'success' : 'secondary'} float-right`}\n                    outerClass='float-right'\n                    label='save'\n                    onClick={save}\n                    busy={saving}\n                    disabled={!updated}\n                    />\n            </div>\n            <div className='col-12'>\n                <hr/>\n            </div>\n            <div className='col-12 col-md-6 mb-2'>\n                <h5>name</h5>\n                <input\n                    className='form-control'\n                    type='text'\n                    value={ingredient.name}\n                    onChange={(e:ChangeEvent<HTMLInputElement>) => {\n                        setUpdated(true);\n                        setIngredient({...ingredient, name: e.target.value})\n                    }}\n                    />\n            </div>\n            <div className='col-12 col-md-6 mp-2'>\n                <h5>allergens</h5>\n                {\n                    allergens.map((allergen: Allergen) =>\n                        <div className='checkbox_selector' key={`allergen_${allergen.id}`}>\n                            <input\n                                type='checkbox'\n                                checked={ingredient.allergens_ids.indexOf(allergen.id) > -1}\n                                onChange={() => {\n                                    let allergens: number[] = ingredient.allergens_ids;\n                                    if (allergens.indexOf(allergen.id) > -1 ) {\n                                        allergens = allergens.filter((al: number) => al !== allergen.id)\n                                    } else {\n                                        allergens.push(allergen.id);\n                                    }\n                                    setIngredient({...ingredient, allergens_ids: allergens});\n                                    setUpdated(true);\n                                }}\n                                />\n                            <span>{allergen.name}</span>\n                        </div>\n                    )\n                }\n            </div>\n            <div className='col-12'>\n                <h5>description</h5>\n                <textarea\n                    className='form-control'\n                    value={ingredient.description}\n                    onChange={(e:ChangeEvent<HTMLTextAreaElement>) => {\n                        setUpdated(true);\n                        setIngredient({...ingredient, description: e.target.value})\n                    }}\n                    />\n            </div>\n        </div>\n    )\n}","import Service from './Service'\n\nclass RecipeIngredientService extends Service {\n    appName = 'dashboard';\n    view = 'recipe_ingredient';\n}\n\nexport default new RecipeIngredientService();","import React, {ChangeEvent, Fragment, useState} from 'react';\nimport RecipeIngredient, {INGREDIENT_UNIT} from \"../../models/RecipeIngredientModel\";\nimport Ingredient from \"../../models/IngredientModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport recipeIngredientService from '../../services/RecipeIngredientService';\nimport RecipeHelper from \"../../helpers/RecipeHelper\";\nimport { useHistory } from 'react-router-dom';\n\ninterface Props {\n    recipeIngredient: RecipeIngredient,\n    removeIngredient: (id: number) => void,\n    servings: number,\n    scale_to: number,\n    yield: number\n}\n\nexport const RecipeIngredientPanel = (props: Props): React.ReactElement => {\n    const history = useHistory();\n    const [recipeIngredient, setRecipeIngredient] = useState(props.recipeIngredient);\n    const [saving, setSaving] = useState(false);\n    const [updated, setUpdated] = useState(false);\n    const [deleteing, setDeleting] = useState(false);\n\n    const deleteMe = (): void => {\n        if (!window.confirm('are you sure you want to delete this ingredient?')) return;\n\n        setDeleting(true);\n\n        recipeIngredientService.delete(recipeIngredient.id)\n            .then(() => props.removeIngredient(recipeIngredient.id))\n            .catch(() => window.alert('unable to delete ingredient'))\n    }\n\n    const save = (): void => {\n        setSaving(true);\n        recipeIngredientService.update<RecipeIngredient>({...recipeIngredient, ingredient: (recipeIngredient.ingredient as Ingredient).id})\n            .then((rec: RecipeIngredient) => {\n                setRecipeIngredient(rec);\n                setSaving(false);\n                setUpdated(false);\n            })\n    }\n\n\n    return (\n        <div className='row recipe_edit__ingredient'>\n            <div className='col-12 col-md-4 ingredient__title'>\n                {(props.recipeIngredient.ingredient as Ingredient).name}\n            </div>\n\n            {props.scale_to === 0 &&\n                <div className='col-12 col-md-8'>\n                    <div className='row'>\n                        <div className='col-12 col-md-3'>\n                            <input\n                                type='number'\n                                placeholder='qty'\n                                className='form-control col-4 float-left'\n                                value={recipeIngredient.quantity || ''}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => {\n                                    setRecipeIngredient({...recipeIngredient, quantity: parseFloat(e.target.value)});\n                                    setUpdated(true);\n                                }}\n                                />\n                            <select\n                                className='form-control col-4 float-left ml-2'\n                                value={recipeIngredient.unit}\n                                onChange={(e: ChangeEvent<HTMLSelectElement>) => {\n                                    setRecipeIngredient({...recipeIngredient, unit: parseInt(e.target.value)});\n                                    setUpdated(true);\n                                }}\n                            >\n                                {\n                                    INGREDIENT_UNIT.map((unit: string, index: number) =>\n                                        <option value={index} key={`opt_${unit}`}>{unit}</option>\n                                    )\n                                }\n                            </select>\n                        </div>\n                        <div className='col-12 col-md-3 ingredient__allergens'>\n                            <strong>allergens:&nbsp;</strong>\n                            { RecipeHelper.createStringListOfAllergensFromIngredient(props.recipeIngredient.ingredient as Ingredient)}\n                        </div>\n                        <div className='col-12 col-md-6 mt-2 mt-md-0 text-center'>\n                            <LoadingIconButton\n                                btnClass={`btn btn-${updated ? 'success' : 'outline-secondary'}`}\n                                label='save'\n                                onClick={save}\n                                busy={saving}\n                                disabled={!updated}\n                                />\n                            <LoadingIconButton\n                                outerClass='ml-2'\n                                btnClass={`btn btn-outline-danger`}\n                                label='X'\n                                onClick={deleteMe}\n                                busy={false}\n                                disabled={saving}\n                                />\n                            <button\n                                className='btn btn-sm btn-outline-primary ml-2'\n                                onClick={() => history.push({pathname: `/dashboard/ingredient/edit/${(props.recipeIngredient.ingredient as Ingredient).id}`})}\n                                >goto ingredient</button>\n                        </div>\n                    </div>\n                </div>\n            }\n            {props.scale_to > 0 &&\n                <div className='col-12 col-md-6'>\n                    {\n                        RecipeHelper.scaleRecipeIngredient(recipeIngredient, props.servings, props.scale_to, props.yield)\n                    }\n                    <span className='ml-5'>\n                        <strong>allergens:&nbsp;</strong>\n                        { RecipeHelper.createStringListOfAllergensFromIngredient(props.recipeIngredient.ingredient as Ingredient)}\n                    </span>\n                </div>\n            }\n        </div>\n    )\n}","import React from 'react';\nimport Recipe from \"../../models/RecipeModel\";\nimport './recipe.scss';\nimport RecipeIngredient from \"../../models/RecipeIngredientModel\";\nimport Ingredient from \"../../models/IngredientModel\";\nimport recipeHelper from '../../helpers/RecipeHelper';\n\ninterface Props {\n    recipe: Recipe,\n    count: number\n}\n\nexport const RecipePrintout = (props: Props): React.ReactElement => {\n    return (\n        <div className='recipe_printout'>\n            <div className='recipe_printout__name'>\n                <h1>{props.recipe.name}</h1>\n                <h3>{props.count} servings</h3>\n            </div>\n            <table className='table'>\n                <thead>\n                    <tr>\n                        <td>ingredient</td>\n                        <td>quantity</td>\n                        <td>allergens</td>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        props.recipe.ingredients.map((recipeIngredient: RecipeIngredient) => {\n                            const ingredient: Ingredient = recipeIngredient.ingredient as Ingredient\n                            return (\n                                <tr className='recipe_printout__ingredient'>\n                                    <td>{ingredient.name}</td>\n                                    <td>{recipeHelper.scaleRecipeIngredient(\n                                        recipeIngredient,\n                                        props.recipe.servings,\n                                        props.count,\n                                        props.recipe.yld)}\n                                    </td>\n                                    <td>\n                                        {\n                                            ingredient.allergens.length === 0 ?\n                                                <span>none</span>\n                                                :\n                                                recipeHelper.createStringListOfAllergensFromIngredient(ingredient)\n                                        }\n                                    </td>\n                                </tr>\n                            )\n                        })\n                    }\n                </tbody>\n            </table>\n            {props.recipe.instructions !== '' &&\n                <div className='mt-2'>\n                    <h3>instructions:</h3>\n                    <p>{props.recipe.instructions}</p>\n                </div>\n            }\n        </div>\n    )\n}","import React, {ChangeEvent, useEffect, useState, Fragment} from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport recipeService from '../../services/RecipeService';\nimport Recipe from \"../../models/RecipeModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport ingredientService from '../../services/IngredientService';\nimport SearchWidget from \"../widgets/searchWidget/SearchWidget\";\nimport Ingredient from \"../../models/IngredientModel\";\nimport RecipeIngredient, {INGREDIENT_UNIT} from \"../../models/RecipeIngredientModel\";\nimport printIcon from '../../assets/print_icon.png';\nimport {RecipeIngredientPanel} from \"./RecipeIngredientPanel\";\nimport {RecipePrintout} from \"./RecipePrintout\";\n\n\nexport const RecipeEdit = (): React.ReactElement => {\n    const params: any = useParams();\n    const history = useHistory();\n    const [loading, setLoading] = useState(true);\n    const [recipe, setRecipe] = useState(new Recipe());\n    const [updated, setUpdated] = useState(false);\n    const [saving, setSaving] = useState(false);\n    const [newIngredient, setNewIngredient] = useState(new Ingredient());\n    const [qty, setQty] = useState(0);\n    const [unit, setUnit] = useState(0);\n    const [addingIngredient, setAddingIngredient] = useState(false);\n    const [isNewIngredient, setIsNewIngredient] = useState(false);\n    const [creatingIngredient, setCreatingIngredient] = useState(false);\n    const [showScaling, setShowScaling] = useState(false);\n    const [scale, setScale] = useState(1);\n    const [documentToPrint, setDocumentToPrint] = useState<any>('');\n\n    //let documentToPrint: any = '';\n\n    useEffect(() => {\n        recipeService.get<Recipe>(params.id)\n            .then((recipe: Recipe) => setRecipe(recipe))\n            .catch(() => {\n                window.alert('unable to load recipe');\n                history.goBack();\n            })\n            .then(() => setLoading(false))\n    }, [])\n\n    const addIngredient = (): void => {\n        setAddingIngredient(true);\n\n        recipeService.attachIngredient(\n            recipe,\n            new RecipeIngredient(qty, unit, 1, newIngredient.id, recipe.id)\n        )\n            .then((recipeIngredient: RecipeIngredient) =>\n                setRecipe({...recipe, ingredients: [recipeIngredient, ...recipe.ingredients]}))\n            .catch(() => window.alert('unable to add ingredient to recipe'))\n            .then(() => setAddingIngredient(false))\n    }\n\n    const addIngredientToDb = (): void => {\n        setCreatingIngredient(true);\n\n        ingredientService.add<Ingredient>(newIngredient)\n            .then((ingredient: Ingredient) => history.push({pathname: `/dashboard/ingredient/edit/${ingredient.id}`}))\n            .catch(() => window.alert('unable to add new ingredient to database'))\n            .then(() => setCreatingIngredient(false))\n    }\n\n    function printRecipe(): void {\n        setDocumentToPrint(\n            <RecipePrintout\n                recipe={recipe}\n                count={showScaling ? scale : recipe.servings}\n            />);\n        setTimeout(function () {\n            window.print();\n        }, 500);\n    }\n\n    const removeIngredient = (id: number): void => {\n        setRecipe({\n            ...recipe,\n            ingredients: recipe.ingredients.filter((ing: RecipeIngredient) => ing.id !== id)\n        })\n    }\n\n    const save = (): void => {\n        setSaving(true);\n\n        recipeService.update<Recipe>(recipe)\n            .then((r: Recipe) => {\n                setRecipe(r);\n                setUpdated(false);\n            })\n            .catch(() => window.alert('unable to update recipe'))\n            .then(() => setSaving(false))\n    }\n\n    const handleSearchResult = (searchResult: Ingredient | string): void => {\n        if (typeof searchResult === 'string') {\n            setIsNewIngredient(true);\n            setNewIngredient(new Ingredient(searchResult));\n        } else {\n            setIsNewIngredient(false);\n            setNewIngredient(searchResult);\n        }\n    }\n\n    if (loading)\n        return (<LoadingOverlay />)\n\n    const canAddIngredient: boolean = newIngredient.id !== -1 && qty > 0\n\n    return (\n        <Fragment>\n            <div className='row recipe_edit'>\n                <div className='col-12'>\n                    <h3>edit recipe</h3>\n                    <hr/>\n                </div>\n                <div className='col-12 align-self-center'>\n                    <button\n                        className='btn btn-sm btn-md-md btn-outline-info'\n                        onClick={() => history.goBack()}\n                        >back</button>\n                    <img\n                        className='recipe_scale__print float-right ml-2 d-none d-md-block'\n                        src={printIcon}\n                        alt='print scaled recipe'\n                        onClick={printRecipe}\n                    />\n                    <button\n                        className={`btn btn-sm btn-outline-${showScaling ? 'danger' : 'primary'} float-right ml-2`}\n                        onClick={() => setShowScaling(!showScaling)}\n                    >{showScaling ? 'edit' : 'scale'}</button>\n                    <button\n                        className='btn btn-sm btn-outline-primary float-right'\n                        onClick={() => history.push({pathname: `/dashboard/recipe/notes/${recipe.id}`})}\n                        >notes {recipe.notes.length > 0 ? `: ${recipe.notes.length}` : ''}</button>\n                    <LoadingIconButton\n                        btnClass={`btn btn-sm btn-outline-${updated ? 'success' : 'secondary'}`}\n                        outerClass='float-right mr-2'\n                        label='save'\n                        disabled={!updated}\n                        onClick={save}\n                        busy={saving}\n                        />\n                </div>\n                <div className='col-12'>\n                    <hr/>\n                </div>\n                <div className='col-12 col-md-6'>\n                    <h5>name</h5>\n                    <input\n                        className='form-control'\n                        type='text'\n                        value={recipe.name}\n                        onChange={(e:ChangeEvent<HTMLInputElement>) => {\n                            setUpdated(true);\n                            setRecipe({...recipe, name: e.target.value})\n                        }}\n                        />\n                </div>\n                <div className='col-12 col-md-6 mt-2'>\n                    <div className='row'>\n                        <div className='col-4 col-md-2'>\n                            is vegan\n                            <br/>\n                            <input\n                                type='checkbox'\n                                checked={recipe.is_vegan}\n                                onChange={() => {\n                                    setRecipe({...recipe, is_vegan: !recipe.is_vegan});\n                                    setUpdated(true);\n                                }}\n                                />\n                        </div>\n                        <div className='col-4 col-md-2'>\n                            servings\n                            <input\n                                type='number'\n                                className='form-control'\n                                value={recipe.servings}\n                                min={1}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => {\n                                    setRecipe({...recipe, servings: parseInt(e.target.value)});\n                                    setUpdated(true);\n                                }}\n                                />\n                        </div>\n                        <div className='col-4 col-md-2'>\n                            yield\n                            <br/>\n                            <input\n                                type='number'\n                                className='form-control'\n                                value={recipe.yld}\n                                max='100'\n                                step='0.1'\n                                min='0.1'\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => {\n                                    setRecipe({...recipe, yld: parseFloat(e.target.value)});\n                                    setUpdated(true);\n                                }}\n                                />\n                        </div>\n                    </div>\n\n                </div>\n                <div className='col-12 col-md-6 mt-2'>\n                    <h5>description</h5>\n                    <textarea\n                        className='form-control'\n                        value={recipe.description}\n                        onChange={(e: ChangeEvent<HTMLTextAreaElement>) => {\n                            setRecipe({...recipe, description: e.target.value});\n                            setUpdated(true);\n                        }}\n                        />\n                </div>\n                <div className='col-12 col-md-6 mt-2'>\n                    <h5>instructions</h5>\n                    <textarea\n                        className='form-control'\n                        value={recipe.instructions}\n                        onChange={(e: ChangeEvent<HTMLTextAreaElement>) => {\n                            setRecipe({...recipe, instructions: e.target.value});\n                            setUpdated(true);\n                        }}\n                        />\n                </div>\n                <div className='col-12 mt-2'>\n                    <hr/>\n                    {!showScaling &&\n                        <div className='row'>\n                        <div className='col-12'>\n                            <h5>ingredients</h5>\n                        </div>\n                        <div className='col-12 col-md-6'>\n                            <SearchWidget\n                                placeholder='ingredient name to add or create'\n                                serviceFunction={ingredientService.pagedSearchResults}\n                                itemSelected={handleSearchResult}\n                                />\n                        </div>\n                        <div className='col-12 col-md-6 mt-2 mt-md-0'>\n                            {!showScaling &&\n                            <div className='row justify-content-center'>\n                                {\n                                    isNewIngredient ?\n                                        <div>\n                                            <LoadingIconButton\n                                                btnClass='btn btn-sm btn-outline-success'\n                                                label='add ingredient to database'\n                                                onClick={addIngredientToDb}\n                                                busy={creatingIngredient}\n                                                />\n                                        </div>\n                                        :\n                                        newIngredient.id === -1 ?\n                                            <div> </div>\n                                            :\n                                            <Fragment>\n                                                <div className='col-4'>\n                                                    <input\n                                                        type='number'\n                                                        placeholder='qty'\n                                                        className='form-control'\n                                                        value={qty || ''}\n                                                        onChange={(e: ChangeEvent<HTMLInputElement>) => setQty(parseFloat(e.target.value))}\n                                                        />\n                                                </div>\n                                                <div className='col-4'>\n                                                    <select\n                                                        className='form-control'\n                                                        value={unit}\n                                                        onChange={(e: ChangeEvent<HTMLSelectElement>) => setUnit(parseInt(e.target.value))}\n                                                    >\n                                                        {\n                                                            INGREDIENT_UNIT.map((unit: string, index: number) =>\n                                                                <option value={index} key={`opt_${unit}`}>{unit}</option>\n                                                            )\n                                                        }\n                                                    </select>\n                                                </div>\n                                                <div className='col-4'>\n                                                    <LoadingIconButton\n                                                        label='add ingredient'\n                                                        btnClass={`btn btn-sm btn-outline-${canAddIngredient ? 'success' : 'secondary'}`}\n                                                        onClick={addIngredient}\n                                                        busy={addingIngredient}\n                                                        disabled={!canAddIngredient}\n                                                        />\n                                                </div>\n                                            </Fragment>\n                                }\n                            </div>\n                            }\n                        </div>\n                    </div>\n                    }\n                    {showScaling &&\n                        <div className='row recipe_scale'>\n                            <div className='col-6 col-md-2 float-left'>\n                                <h5>scale recipe</h5>\n                                scaled to servings:\n                                <input\n                                    className='form-control'\n                                    type='number'\n                                    min={1}\n                                    value={scale}\n                                    onChange={(e: ChangeEvent<HTMLInputElement>) => setScale(parseFloat(e.target.value))}\n                                    />\n                            </div>\n                        </div>\n                    }\n                    <hr/>\n                </div>\n                <div className='col-12 recipe_edit__ingredients'>\n                    {\n                        recipe.ingredients.map((ingredient: RecipeIngredient) =>\n                            <RecipeIngredientPanel\n                                key={`rip_${ingredient.id}`}\n                                recipeIngredient={ingredient}\n                                removeIngredient={removeIngredient}\n                                servings={recipe.servings}\n                                scale_to={showScaling ? scale : 0}\n                                yield={recipe.yld}\n                            />\n                        )\n                    }\n                </div>\n            </div>\n            <div className=\"col-12 print_sheet\">\n                {documentToPrint}\n            </div>\n        </Fragment>\n    )\n}","import Service from \"./Service\";\n\nclass RecipeNoteService extends Service {\n    appName = 'dashboard';\n    view = 'recipe_note';\n}\n\nexport default new RecipeNoteService();","import ModelBase from \"./ModelBase\";\nimport Recipe from \"./RecipeModel\";\n\nexport default class RecipeNote extends ModelBase {\n    public text!: string;\n    public recipe!: Recipe | number;\n\n    constructor(\n        id: number = -1,\n        text: string = '',\n        recipe: Recipe | number = -1\n    ) {\n        super();\n\n        this.id = id;\n        this.text = text;\n        this.recipe = recipe;\n    }\n}","import React, {ChangeEvent, useEffect, useState} from 'react';\nimport recipeNoteService from '../../services/RecipeNoteService';\nimport recipeService from '../../services/RecipeService';\nimport { useHistory, useParams } from 'react-router-dom';\nimport RecipeNote from \"../../models/RecipeNoteModel\";\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport Recipe from \"../../models/RecipeModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport MomentHelper from \"../../helpers/MomentHelper\";\n\nexport const RecipeNotes = (): React.ReactElement => {\n    const params: any = useParams();\n    const history = useHistory();\n    const [loading, setLoading] = useState(true);\n    const [recipe, setRecipe] = useState(new Recipe());\n    const [showAdd, setShowAdd] = useState(false);\n    const [newNote, setNewNote] = useState('');\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        recipeService.get<Recipe>(params.id)\n            .then((recipe: Recipe) => {\n                setRecipe(recipe);\n                setLoading(false);\n            })\n            .catch(() => {\n                window.alert('unable to load notes');\n                history.goBack();\n            })\n    }, [])\n    if (loading)\n        return <LoadingOverlay />\n\n    const save = (): void => {\n        setSaving(true);\n\n        recipeNoteService.add<RecipeNote>(new RecipeNote(-1, newNote, recipe.id))\n            .then((note: RecipeNote) => {\n                setRecipe({\n                    ...recipe,\n                    notes: [note, ...recipe.notes]\n                });\n                setNewNote('');\n                setShowAdd(false);\n            })\n            .catch(() => window.alert('unable to save note'))\n            .then(() => {\n                setSaving(false);\n            })\n    }\n\n    return (\n        <div className='row recipe_notes'>\n            <div className='col-12'>\n                <h3>recipe notes</h3>\n                {recipe.name}\n                <hr/>\n            </div>\n            <div className='col-12'>\n                <button\n                    className='btn btn-sm btn-outline-info'\n                    onClick={() => history.goBack()}\n                    >back</button>\n                <button\n                    className={`btn btn-sm btn-outline-${showAdd ? 'warning' : 'primary'} float-right`}\n                    onClick={() => {\n                        setShowAdd(!showAdd);\n                        setNewNote('');\n                    }}\n                    >{showAdd ? 'cancel' : 'add'} note</button>\n            </div>\n            <div className='col-12'>\n                <hr/>\n            </div>\n            {showAdd &&\n                <div className='col-12'>\n                    <div className='row justify-content-center'>\n                        <div className='col-12 col-md-7 recipe_notes_add'>\n                            <h5>note</h5>\n                            <textarea\n                                value={newNote}\n                                onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setNewNote(e.target.value)}\n                                className='form-control'\n                                />\n                            <LoadingIconButton\n                                outerClass='float-right mt-2'\n                                btnClass={`btn btn-sm btn-outline-${newNote.length === 0 ? 'secondary' : 'success'}`}\n                                label='save'\n                                onClick={save}\n                                busy={saving}\n                                disabled={newNote.length === 0}\n                                />\n                        </div>\n                    </div>\n                    <hr/>\n                </div>\n            }\n            {\n                recipe.notes.sort((a: RecipeNote, b: RecipeNote) => a.id > b.id ? -1 : a.id < b.id ? 1 : 0).map((note: RecipeNote) =>\n                    <div className='col-12'>\n                        <strong>{MomentHelper.asShortDateTime(note.created_at)}</strong>\n                        <p className='mt-2'>{note.text}</p>\n                        <hr/>\n                    </div>\n                )\n            }\n        </div>\n    )\n}","import React, {ChangeEvent, useState} from 'react';\nimport deliveryDayService from '../../services/DeliveryDayService';\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\nimport DeliveryDay from \"../../models/DeliveryDayModel\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport {PageSelector} from \"../widgets/page_selector/PageSelector\";\nimport { useHistory } from 'react-router-dom';\nimport momentHelper from \"../../helpers/MomentHelper\";\nimport { Fragment } from 'react';\n\nexport const RestaurantMenuManager = (): React.ReactElement => {\n\n    const history = useHistory();\n    const [currentPage, setCurrentPage] = useState(0);\n    const [loading, setLoading] = useState(true);\n    const [deliveryDays, setDeliveryDays] = useState<DeliveryDay[]>([]);\n    const [paginationCount, setPaginationCount] = useState(0);\n    const [startDate, updateStartDate] = useState('');\n    const [endDate, updateEndDate] = useState('');\n    const [creatingDeliveryDay, setCreatingDeliveryDay] = useState(false);\n    const [isPerpetual, setIsPerpetual] = useState(false);\n    const [newMenuName, updateNewMenuName] = useState('');\n\n\n\n    React.useEffect(() => {\n        changePages(1);\n    }, [])\n\n    const changePages = (pageNumber: number): void => {\n        setCurrentPage(pageNumber);\n        setLoading(true);\n\n        deliveryDayService.pagedSearchResults(pageNumber)\n            .then((dto: PagedResultsDTO) => {\n                setDeliveryDays(dto.results as DeliveryDay[])\n                setLoading(false);\n                setPaginationCount(dto.count);\n                }\n            )\n            .catch( err => console.log(err))\n    }\n\n    const createDeliveryDay = (): void => {\n        if (startDate > endDate ||\n            (!isPerpetual &&\n                (startDate === '' || endDate === ''))) {\n            window.alert('invalid dates');\n            return;\n        }\n\n        if (newMenuName === '') {\n            window.alert('enter a name for this menu');\n            return;\n        }\n\n        setCreatingDeliveryDay(true);\n        deliveryDayService.add<DeliveryDay>(new DeliveryDay(\n            startDate !== '' ? startDate : '1970-01-01',\n            -1,\n            endDate !== '' ? endDate : '1970-01-01',\n            [],\n            isPerpetual,\n            newMenuName)\n        )\n            .then((deliveryDay: DeliveryDay) => console.log() )//history.push(`rest/menu/edit/${deliveryDay.id}`))\n            .catch( err => {\n                window.alert(\"Unable to create week\");\n                setCreatingDeliveryDay(false);\n            })\n    }\n\n    return (\n        <div className='row restaurant_menu_manager justify-content-center'>\n            <div className='col-12 col-md-7'>\n                <div className='row'>\n                    <div className='col-12'>\n                        <h3>menu manager</h3>\n                        <hr/>\n                    </div>\n                    <div className=\"col-12\">\n                        <h5>create delivery menu</h5>\n                        <div className='row'>\n                            <div className='col-12 mb-2'>\n                                <input\n                                    className='form-control'\n                                    placeholder='menu name'\n                                    value={newMenuName}\n                                    onChange={(e: ChangeEvent<HTMLInputElement>) => updateNewMenuName(e.target.value)}\n                                    />\n                            </div>\n                            <div className='col-6 col-md-3'>\n                                <div className=\"checkbox_selector\">\n                                    <input\n                                        type='checkbox'\n                                        checked={isPerpetual}\n                                        onClick={() => setIsPerpetual(!isPerpetual)}\n                                        />\n                                    <span>perpetual</span>\n                                </div>\n                            </div>\n                            <div className='col-6 col-md-9 text-right'>\n                                <LoadingIconButton\n                                    label='create'\n                                    busy={creatingDeliveryDay}\n                                    btnClass=\"btn btn-sm btn-outline-success\"\n                                    outerClass='ml-2 mt-2 mt-m-0'\n                                    onClick={createDeliveryDay}\n                                    disabled={creatingDeliveryDay}\n                                    />\n                            </div>\n                            {!isPerpetual &&\n                                <Fragment>\n                                    <div className='col-12 col-md-6'>\n                                        <small>start date:</small>\n                                        <br/>\n                                        <input\n                                            type=\"date\"\n                                            id=\"startDate\"\n                                            value={startDate}\n                                            disabled={creatingDeliveryDay || isPerpetual}\n                                            onChange={(e: ChangeEvent<HTMLInputElement>) => updateStartDate(e.target.value)} />\n                                    </div>\n                                    <div className='col-12 col-md-6'>\n                                        <small>end date:</small>\n                                        <br/>\n                                        <input\n                                            type=\"date\"\n                                            id=\"endDate\"\n                                            value={endDate}\n                                            disabled={creatingDeliveryDay || isPerpetual}\n                                            onChange={(e: ChangeEvent<HTMLInputElement>) => updateEndDate(e.target.value)} />\n                                    </div>\n                                </Fragment>\n                            }\n                        </div>\n                        <PageSelector numItems={paginationCount} currentPage={currentPage} gotoPage={changePages} />\n                        <hr/>\n                    </div>\n                    <div className='col-12 restaurant_menu_manager__menus'>\n                        <table className='table'>\n                            <thead>\n                                <th>menu name</th>\n                                <td><small>click on menu to edit</small></td>\n                                <th>active</th>\n                            </thead>\n                            <tbody>\n                                {\n                                    deliveryDays.map((deliveryDay: DeliveryDay) =>\n                                        <tr\n                                            key={`delday_${deliveryDay.id}`}\n                                            onClick={() => history.push({pathname: `/dashboard/rest/menu/edit/${deliveryDay.id}`})}\n                                        >\n                                            <td>{deliveryDay.name}</td>\n                                            <td>\n                                                {\n                                                    deliveryDay.is_perpetual ?\n                                                        <div\n                                                            className='col-12'\n                                                            >\n                                                            perpetual\n                                                        </div>\n                                                        :\n                                                        <Fragment>\n                                                            <div className=\"col-12 delivery_days__date\">\n                                                                {momentHelper.asShortDate(deliveryDay.date)} -\n                                                            </div>\n                                                            <div className=\"col-12 col-md-6 delivery_days__end_date\">\n                                                                {momentHelper.asShortDate(deliveryDay.end_date)}\n                                                            </div>\n                                                        </Fragment>\n                                                }\n                                            </td>\n                                            <td>\n                                                {\n                                                    deliveryDay.is_active ? 'yes' : 'no'\n                                                }\n                                            </td>\n                                        </tr>\n                                    )\n                                }\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}","import React, { useState } from 'react';\nimport './restaurant_delivery.scss';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport DeliveryWindow from \"../../models/DeliveryWindowModel\";\nimport deliveryWindowService from '../../services/DeliveryWindowService';\nimport { useHistory } from 'react-router-dom';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport moment from \"moment\";\nimport { pythonDays} from \"../../constants\";\n\nexport const RestaurantDelivery = (): React.ReactElement => {\n\n    const history = useHistory();\n    const [loading, setLoading] = useState(true);\n    const [creatingWindow, setCreatingWindow] = useState(false);\n    const [deliveryWindows, setDeliveryWindows] = useState<DeliveryWindow[][]>([])\n\n    const windowTypes: string[] = ['', 'pick-up', 'deliver ASAP', 'future delivery'];\n\n    React.useEffect(() => {\n        deliveryWindowService.get<DeliveryWindow[]>()\n            .then((deliveryWindows: DeliveryWindow[]) => {\n                let sortedWindows: DeliveryWindow[][] = [[], [], [], [], [], [], []];\n                deliveryWindows.forEach((window: DeliveryWindow) => sortedWindows[window.day].push(window))\n                setDeliveryWindows(sortedWindows);\n                setLoading(false);\n            })\n    }, [])\n\n    const createWindow = (day: number): void => {\n        setCreatingWindow(true);\n        deliveryWindowService.add<DeliveryWindow>(new DeliveryWindow(\n            -1, '', '17:00:00', '21:00:00', day, true, null, null, 1\n        ))\n            .then((deliveryWindow: DeliveryWindow) => history.push({pathname: `/dashboard/delivery_window/edit/${deliveryWindow.id}/`}))\n            .catch( err=> window.alert('unable to create window'))\n    }\n\n    const deleteWindow = (deliveryWindow: DeliveryWindow): void => {\n        if (!window.confirm('Are you sure you want to remove this window?')) return;\n\n        deliveryWindowService.delete(deliveryWindow.id)\n            .then(() => {\n                let delWindows: DeliveryWindow[][] = deliveryWindows;\n                delWindows[deliveryWindow.day] = delWindows[deliveryWindow.day].filter((dw: DeliveryWindow) => dw.id !== deliveryWindow.id)\n                setDeliveryWindows(delWindows);\n            })\n            .catch( err => window.alert('unable to delete window'))\n    }\n\n    if (loading)\n        return <LoadingOverlay />\n\n    return(\n        <div className='row restaurant_delivery justify-content-center'>\n            <div className='col-12 col-md-6'>\n                <div className='row'>\n                    <div className='col-12'>\n                        <h3>activity windows</h3>\n                        <hr/>\n                    </div>\n                    {\n                        pythonDays.map((day: string, index: number) =>\n                            <div className='col-12' key={day}>\n                                <div className='row restaurant_delivery__day'>\n                                    <div className='col-6 day_name'>\n                                        {day}\n                                    </div>\n                                    <div className='col-6 text-right'>\n                                        <LoadingIconButton\n                                            label='add window'\n                                            btnClass='btn btn-sm btn-outline-success'\n                                            onClick={() => createWindow(index)}\n                                            busy={creatingWindow}\n                                            />\n                                    </div>\n                                    {\n                                        deliveryWindows[index].map((window: DeliveryWindow) =>\n                                            <div className='col-12 col-md-6' key={`window_${window.id}`}>\n                                                <div className='row restaurant_delivery__window_inner'>\n                                                    {!window.active &&\n                                                        <div className='col-12 text-center restaurant_delivery--disabled'>\n                                                            disabled\n                                                        </div>\n                                                    }\n                                                    <div className='col-12'>\n                                                        <strong>\n                                                            {window.name || <div>&nbsp;</div>}\n                                                        </strong>\n                                                    </div>\n                                                    <div className='col-12'>\n                                                        {windowTypes[window.type]}\n                                                    </div>\n                                                    <div className='col-12'>\n                                                        {moment(window.start_time, 'HH:mm:ss').format('h:mm a')} -&nbsp;\n                                                        {moment(window.end_time, 'HH:mm:ss').format('h:mm a')}\n                                                    </div>\n                                                    <div className='col-12 text-right'>\n                                                        <button\n                                                            className='btn btn-sm btn-outline-primary mr-1'\n                                                            onClick={() => history.push({pathname: `/dashboard/delivery_window/edit/${window.id}/`})}\n                                                            >edit</button>\n                                                        <button\n                                                            className='btn btn-sm btn-outline-danger'\n                                                            onClick={() => deleteWindow(window)}\n                                                            >delete</button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )\n                                    }\n                                    <div className='col-12'>\n                                        <hr/>\n                                    </div>\n                                </div>\n                            </div>\n                        )\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}","import React from 'react';\nimport {activityTypes} from \"../../constants\";\n\ninterface Props {\n    orders_type: number\n}\n\nexport const RestaurantDashboardPanel = (props: Props): React.ReactElement => {\n\n\n\n    return(\n        <div className='row rest_dashboard_panel'>\n            <div className='col-12'>\n                <h3>{activityTypes[props.orders_type]}</h3>\n            </div>\n        </div>\n    )\n}","import React, {ChangeEvent, useState, Fragment} from 'react';\nimport './create_order.scss';\nimport {addOverlay} from \"../../store/helpersReducer\";\nimport { useDispatch } from 'react-redux';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport mailingListService from '../../services/MailingListService';\nimport { useHistory } from 'react-router-dom';\n\nexport const RouteOrder = (): React.ReactElement => {\n\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const [mode, setMode] = useState('landing');\n    const [zip, updateZip] = useState('');\n    const [checkingZip, setCheckingZip] = useState(0); //1 = Delivery ASAP, 2 = Future Delivery\n    const [email, updateEmail] = useState('');\n    const [savingEmail, setSavingEmail] = useState(false);\n\n    const checkZip = (deliveryChoice: number): void => {\n        setCheckingZip(deliveryChoice);\n\n        mailingListService.confirmZipCode(zip)\n            .then( resp => {\n                    if (resp === 'OK') {\n                        gotoCreateOrder(deliveryChoice === 1 ? 'asap' : 'future');\n                    } else {\n                        setCheckingZip(0);\n                        setMode('collect_email')\n                    }\n                }\n            )\n            .catch( resp => window.alert('unable to confirm zip'))\n    }\n\n    const closeMe = (): void => {\n        dispatch(addOverlay(null));\n    }\n\n    const gotoCreateOrder = (action: string): void => {\n        history.push({pathname: `/dashboard/create_order/${action}/${zip !== '' ? zip : '_'}`});\n        closeMe()\n    }\n\n    const saveEmail = (): void => {\n        setSavingEmail(true);\n\n        mailingListService.add({email: email, code: zip})\n            .then(closeMe)\n            .catch( err => window.alert('unable to save email address'));\n    }\n\n    return (\n        <div className='row route_order justify-content-center'>\n            {\n                mode === 'landing' ?\n                    <Fragment>\n                        <div className='col-12 text-center'>\n                            <button\n                                className='btn btn-outline-success'\n                                onClick={() => gotoCreateOrder('pickup')}\n                                >Pick-Up Order</button>\n                        </div>\n                        <div className='col-12'>\n                            <hr/>\n                        </div>\n                        <div className='col-12 text-center'>\n                            <h3>Delivery</h3>\n                        </div>\n                        <div className='col-2 text-center'>\n                            <input\n                                className='form-control'\n                                placeholder='zipcode'\n                                disabled={checkingZip !== 0}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => updateZip(e.target.value)}\n                                />\n                        </div>\n                        <div className='col-12 text-center'>\n                            <LoadingIconButton\n                                btnClass='btn btn-outline-primary mr-2'\n                                label='Deliver ASAP'\n                                onClick={() => checkZip(1)}\n                                busy={checkingZip === 1}\n                                disabled={checkingZip === 2 || zip === ''}\n                                />\n\n                            <LoadingIconButton\n                                btnClass='btn btn-outline-primary mr-2'\n                                label='Future Delivery'\n                                onClick={() => checkZip(2)}\n                                busy={checkingZip === 2}\n                                disabled={checkingZip === 1 || zip === ''}\n                                />\n                        </div>\n                   </Fragment>\n                :\n                    <Fragment>\n                        <div className='col-12 text-center'>\n                            <p>\n                                \"I'm sorry, but we do not currently deliver to your area.\"\n                            </p>\n                            <p>\n                                \"If I can get your email address, we will let you know when we begin delivering to your area!\"\n                            </p>\n                        </div>\n                        <div className='col-5 text-center'>\n                            <input\n                                className='form-control'\n                                disabled={savingEmail}\n                                value={email}\n                                onChange={(e: ChangeEvent<HTMLInputElement>) => updateEmail(e.target.value)}\n                                />\n\n                            <LoadingIconButton\n                                label='Save Email Address'\n                                btnClass='btn btn-outline-success'\n                                outerClass='mt-2'\n                                onClick={saveEmail}\n                                busy={savingEmail}\n                                disabled={email === '' || savingEmail}\n                                />\n                        </div>\n                    </Fragment>\n            }\n\n            <div\n                className='route_order__close theme__warning'\n                onClick={() => dispatch(addOverlay(null))}\n            >\n                X\n            </div>\n        </div>\n    )\n}","import React from 'react';\nimport {RestaurantDashboardPanel} from \"./RestaurantDashboardPanel\";\nimport {ORDER_TYPES} from \"../../models/OrderModel\";\nimport './restaurant_dashboard.scss';\nimport { useDispatch } from 'react-redux';\nimport {addOverlay} from \"../../store/helpersReducer\";\nimport {RouteOrder} from \"../create_order/RouteOrder\";\n\nexport const RestaurantDashboard = (): React.ReactElement => {\n\n    const dispatch = useDispatch();\n\n    return (\n        <div className='row rest_dashboard'>\n            <div className='col-12'>\n                <h3>Dashboard</h3>\n                <hr/>\n            </div>\n            <div className='col-12 text-center'>\n                <button\n                    className='btn btn-outline-info'\n                    onClick={() => {\n                        dispatch(\n                            addOverlay(\n                                <RouteOrder />\n                            )\n                        )\n                    }}\n                    >create order</button>\n            </div>\n            <div className='col-12'>\n                <hr/>\n            </div>\n            <div className='col-12 col-md-4'>\n                <RestaurantDashboardPanel\n                    orders_type={ORDER_TYPES.pickUp}\n                    />\n            </div>\n            <div className='col-12 col-md-4'>\n                <RestaurantDashboardPanel\n                    orders_type={ORDER_TYPES.jit_delivery}\n                    />\n            </div>\n            <div className='col-12 col-md-4'>\n                <RestaurantDashboardPanel\n                    orders_type={ORDER_TYPES.future_delivery}\n                    />\n            </div>\n        </div>\n    )\n}","import React from 'react';\n\nexport const CreateOrder = (): React.ReactElement => {\n\n    return (\n        <div className='row create_order'>\n            create order\n        </div>\n    )\n}","import ModelBase from \"./ModelBase\";\nimport MenuCategoryItem from \"./MenuCategoryItemModel\";\n\nexport class MenuCategory extends ModelBase {\n    public name!: string;\n    public index!: number;\n    public enabled!: boolean;\n    public items!: MenuCategoryItem[]\n\n    constructor(\n        name: string = '',\n        index: number = 0,\n        enabled: boolean = true,\n        items: MenuCategoryItem[] = []\n    ) {\n        super();\n\n        this.name = name;\n        this.index = index;\n        this.enabled = enabled;\n        this.items = items;\n    }\n}","import React, {ChangeEvent, useState} from 'react';\nimport './rest_menu_manager.scss';\nimport { useHistory } from 'react-router-dom';\nimport {config} from \"../../config\";\nimport DeliveryDayItem from \"../../models/DeliveryDayItemModel\";\nimport deliveryDayItemService from '../../services/DeliveryDayItemService';\n\ninterface Props {\n    menuItem: DeliveryDayItem,\n    deleteMenuItem: (item: DeliveryDayItem) => void,\n    categoryItemUpdated: (item: DeliveryDayItem) => void\n}\n\nexport const RestaurantMenuItem = (props: Props): React.ReactElement => {\n\n    let history = useHistory();\n    const [menuItem, setCategoryItem] = useState(props.menuItem);\n\n    const deleteMe = (): void => {\n        if (window.confirm(`Are you sure you want to remove \"${props.menuItem.menu_item.name}\"?`))\n            props.deleteMenuItem(props.menuItem);\n    }\n\n    const soldOut = (): void => {\n        let item: DeliveryDayItem = menuItem;\n        \n        if (menuItem.sold_out) {\n            item.sold_out = false;\n        } else {\n            if (!window.confirm(`Do you want to mark \"${menuItem.menu_item.name}\" as SOLD OUT?\\n\\nMarking item sold out will exclude it from pick-up and delivery orders only.`)) return;\n            item.sold_out = true;\n        }\n\n        deliveryDayItemService.update<DeliveryDayItem>(item)\n            .then((mi: DeliveryDayItem) => {\n                setCategoryItem(mi);\n                props.categoryItemUpdated(mi);\n            })\n            .catch( err => window.alert('unable to update sold out status'))\n    }\n\n    const updatePrice = (): void => {\n    }\n\n    return (\n        <div\n            className='row restaurant_menu_item'\n        >\n            <div className={`col-12 ${menuItem.sold_out? \"restaurant_menu_item--error\" : \"\"} restaurant_menu_item__header`}>\n                <div className='row'>\n                    <div className='col-9'>\n                        {menuItem.menu_item.name}\n                    </div>\n                    <div className={`col-3 ${menuItem.price === 0 ? \"restaurant_menu_item--error\" : \"\"}`}>\n                        ${menuItem.price.toFixed(2)}\n                    </div>\n                </div>\n            </div>\n            <div className={`col-${menuItem.menu_item.image ? '7' : '12'} restaurant_menu_item__description`}>\n                {menuItem.menu_item.description}\n            </div>\n            {menuItem.menu_item.image &&\n                <div className='col-5 restaurant_menu_item__image'>\n                    <img src={config.API_URL + config.UPLOADS_PATH + '/' + menuItem.menu_item.image} />\n                </div>\n            }\n            <div className='col-12'>\n                <div className='row'>\n                    <div className='col-6 text-center'>\n                        <input\n                            className='form-control'\n                            type='number'\n                            value={menuItem.price}\n                            onChange={(e:ChangeEvent<HTMLInputElement>) => setCategoryItem({...menuItem, price: parseFloat(e.target.value)})}\n                            onBlur={updatePrice}\n                            />\n                            <small>price</small>\n                    </div>\n                    <div className='col-6 text-right'>\n                        <button\n                            className={`btn btn-sm btn-${menuItem.sold_out ? 'danger' : 'outline-secondary'} mr-1`}\n                            onClick={soldOut}\n                        >sold out</button>\n                    </div>\n                </div>\n            </div>\n            <div className='col-12 text-right mt-1'>\n                <button\n                    className='btn btn-sm btn-outline-primary mr-1'\n                    onClick={() => history.push({pathname: `/dashboard/menu/edit/${menuItem.menu_item.id}/`})}\n                    >edit</button>\n                <button\n                    className='btn btn-sm btn-outline-danger'\n                    onClick={deleteMe}\n                >delete</button>\n            </div>\n        </div>\n    )\n}","import React, {useState, Fragment, ChangeEvent} from 'react';\n\nimport './rest_menu_manager.scss';\nimport MenuItem from \"../../models/MenuItemModel\";\nimport {RestaurantMenuItem} from \"./RestaurantMenuItem\";\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport deliveryDayItemService from '../../services/DeliveryDayItemService';\nimport { useHistory } from 'react-router-dom';\nimport menuItemService from '../../services/MenuItemService';\nimport DeliveryDayMenuCategory from \"../../models/DeliveryDayMenuCategory\";\nimport deliveryDayService from '../../services/DeliveryDayItemService';\nimport DeliveryDayItem, {DeliveryDayItemDTO} from \"../../models/DeliveryDayItemModel\";\nimport SearchWidget from \"../widgets/searchWidget/SearchWidget\";\nimport DeliveryDay from \"../../models/DeliveryDayModel\";\n\ninterface Props {\n    deliveryDay: DeliveryDay,\n    category: DeliveryDayMenuCategory,\n    move: (direction: number, category: DeliveryDayMenuCategory) => void,\n    canMoveUp: boolean,\n    canMoveDown: boolean,\n    isOpen: boolean,\n    categorySelected: (category: DeliveryDayMenuCategory | null) => void;\n}\n\nexport const RestaurantMenuCategory = (props: Props): React.ReactElement => {\n\n    const history = useHistory();\n    const [creatingMenuItem, setCreatingMenuItem] = useState(false);\n    const [category, setCategory] = useState<DeliveryDayMenuCategory>(props.category);\n    const [menuItem, setMenuItem] = useState<MenuItem | string>('');\n\n    const createMenuItem = (): void => {\n        setCreatingMenuItem(true);\n\n        if (typeof menuItem === 'string') {\n            menuItemService.add<MenuItem>({name: menuItem, delivery_category: category.id} as any)\n                .then((menuItem: MenuItem) => completeCreateMenuItem(menuItem, true))\n                .catch( err => window.alert('unable to create menu item'))\n        } else {\n            completeCreateMenuItem(menuItem);\n        }\n    }\n\n    const completeCreateMenuItem = (menuItem: MenuItem, isNew: boolean = false): void => {\n        deliveryDayItemService.add<DeliveryDayItem>(\n                {\n                    delivery_day: props.deliveryDay.id,\n                    menu_item: menuItem.id,\n                    delivery_category: category.id\n                } as any\n            )\n            .then((item: DeliveryDayItem) => {\n                if (isNew) { // new menu item, go edit\n                    history.push({pathname: `/dashboard/menu/edit/${menuItem.id}/`})\n                } else { // existing menu item, no edit\n                    setMenuItem('');\n                    setCategory({\n                        ...category,\n                        delivery_day_items: [...category.delivery_day_items, item as any]\n                    })\n                }\n            })\n            .catch( err => window.alert('unable to add menu item'))\n            .finally(() => setCreatingMenuItem(false))\n    }\n\n    const deleteDeliveryDayItem = (item: DeliveryDayItem): void => {\n        deliveryDayService.delete(item.id)\n            .then(() => setCategory({\n                ...category,\n                delivery_day_items: category.delivery_day_items.filter((i: DeliveryDayItem) => i.id !== item.id)\n            }))\n            .catch( err => window.alert('unable to delete menu item'))\n    }\n/*\n    const updateCategory = (): void => {\n        menuCategoryService.update<MenuCategory>(category)\n            .then((cat: MenuCategory) => setCategory(cat))\n            .catch( err => window.alert('unable to update category name'))\n    }\n\n */\n\n    const categoryItemUpdated = (menuItem: DeliveryDayItem): void => {\n        setCategory({\n            ...category,\n            delivery_day_items: category.delivery_day_items.map((item: DeliveryDayItem) => item.id === menuItem.id ? menuItem : item)\n        })\n    }\n\n    const menuItemSelected = (menuItem: MenuItem | string): void => {\n        setMenuItem(menuItem);\n    }\n\n    let hasSoldOut: boolean = category.delivery_day_items.filter((item: DeliveryDayItem) => item.sold_out).length > 0;\n\n    return (\n        <div className='row menu_category'>\n            <div className='col-12 menu_category__inner'>\n                <div className='row'>\n                    <div className='col-8 col-md-8 menu_category__name'>\n                        {category.menu_category.name}\n                    </div>\n                    <div className='col-4 col-md-4 menu_category__controls text-right'>\n                        <button\n                            className={`btn btn-sm btn-outline-${props.canMoveUp ? 'primary' : 'secondary'}`}\n                            disabled={!props.canMoveUp}\n                            onClick={() => props.move(-1, category)}\n                        >UP</button>\n                        <button\n                            className={`btn btn-sm btn-outline-${props.canMoveDown ? 'primary' : 'secondary'} mr-1`}\n                            disabled={!props.canMoveDown}\n                            onClick={() => props.move(1, category)}\n                        >DN</button>\n                        <button\n                            className='btn btn-sm btn-outline-info'\n                            onClick={() => props.categorySelected(props.isOpen ? null : category)}\n                        >\n                            {\n                                props.isOpen ? '-' : '+'\n                            }\n                        </button>\n                        {hasSoldOut &&\n                            <div className='menu_category__has_sold_out'>has sold out item</div>\n                        }\n                    </div>\n                </div>\n            </div>\n            {props.isOpen &&\n                <Fragment>\n                    <div className='col-7 col-md-6 mt-1'>\n                        <SearchWidget\n                            placeholder='new menu item name'\n                            serviceFunction={menuItemService.pagedSearchResults}\n                            itemSelected={menuItemSelected}\n                            />\n                    </div>\n                    <div className='col-3 col-md-3'>\n                        <LoadingIconButton\n                            btnClass='btn btn-sm btn-outline-success'\n                            outerClass='mt-1'\n                            label='+'\n                            busy={creatingMenuItem}\n                            onClick={createMenuItem}\n                        />\n                    </div>\n                    {\n                        category.delivery_day_items.map((item: DeliveryDayItem) =>\n                            <div className='col-12 col-md-6'>\n                                <RestaurantMenuItem\n                                    menuItem={item}\n                                    deleteMenuItem={deleteDeliveryDayItem}\n                                    categoryItemUpdated={categoryItemUpdated}\n                                />\n                            </div>\n                        )\n                    }\n                </Fragment>\n            }\n        </div>\n    )\n}","import React, {ChangeEvent, useState, Fragment} from 'react';\nimport {LoadingIconButton} from \"../widgets/loading_icon_button/LoadingIconButton\";\nimport menuCategoryService from '../../services/MenuCategoryService';\nimport {MenuCategory} from \"../../models/MenuCategoryModel\";\nimport {RestaurantMenuCategory} from \"./RestaurantMenuCategory\";\nimport { useParams, useHistory } from 'react-router-dom';\nimport deliveryDayService from '../../services/DeliveryDayService';\nimport DeliveryDay from \"../../models/DeliveryDayModel\";\nimport SearchWidget from \"../widgets/searchWidget/SearchWidget\";\nimport DeliveryDayMenuCategory from \"../../models/DeliveryDayMenuCategory\";\n\nexport const RestaurantMenuEdit = (): React.ReactElement => {\n    let timer: any;\n\n    const params: any = useParams();\n    const history = useHistory();\n    const [newCategory, setNewCategory] = useState<MenuCategory | string | undefined>(undefined);\n    const [addingCategory, setAddingCategory] = useState(false);\n    const [categories, setCategories] = useState<DeliveryDayMenuCategory[]>([]);\n    const [openCategory, setOpenCategory] = useState<DeliveryDayMenuCategory | null>(null);\n    const [deliveryDay, updateDeliveryDay] = useState(new DeliveryDay());\n    const [savingDeliveryDay, setSavingDeliveryDay] = useState(false);\n\n    React.useEffect(() => {\n        deliveryDayService.get<DeliveryDay>(params.id)\n            .then((deliveryDay: DeliveryDay) => {\n                updateDeliveryDay(deliveryDay);\n                setCategories(deliveryDay.categories)\n            })\n    }, [])\n\n    const addCategory = (): void => {\n        setAddingCategory(true);\n        deliveryDayService.attachCategory(deliveryDay, newCategory as any)\n            .then((category: DeliveryDayMenuCategory) => {\n                setCategories([...categories, category]);\n                setAddingCategory(false);\n                setNewCategory(new MenuCategory());\n            })\n            .catch( err => window.alert('unable to create category'))\n    }\n\n    const categorySelected = (category: MenuCategory | string): void => {\n        setNewCategory(category);\n    }\n\n    const moveCategory = (direction: number, category: DeliveryDayMenuCategory): void => {\n        let cats: DeliveryDayMenuCategory[] = categories.filter((cat: DeliveryDayMenuCategory) => cat.id !== category.id);\n        cats.splice(category.index + direction - 1, 0, category);\n        // cats.forEach((cat: MenuCategory, index: number) => cat.index = index + 1)\n        setCategories(cats);\n        console.log(cats);\n        resetTimer()\n    }\n\n    const resetTimer = (): void => {\n        clearTimeout(timer);\n        timer = setTimeout(submitUpdatedIndexes, 5000)\n    };\n\n    const submitUpdatedIndexes = (): void => {\n        clearInterval(timer);\n        console.log(categories);\n        let cats: DeliveryDayMenuCategory[] = categories.map((cat: DeliveryDayMenuCategory, index: number) => {\n            console.log(cat);\n            cat.index = index;\n            return cat;\n        })\n        menuCategoryService.updateIndexes(cats.map((cat: DeliveryDayMenuCategory) => cat.id))\n        setCategories(cats);\n    }\n\n    const saveDeliveryDay = (): void => {\n        if (deliveryDay.date > deliveryDay.end_date ||\n            (!deliveryDay.is_perpetual &&\n                (deliveryDay.date === '' || deliveryDay.end_date === ''))) {\n            window.alert('invalid dates');\n            return;\n        }\n\n        if (deliveryDay.name === '') {\n            window.alert('enter a name for this menu');\n            return;\n        }\n\n        setSavingDeliveryDay(true);\n        deliveryDayService.update<DeliveryDay>(deliveryDay)\n            .then((delDay: DeliveryDay) => {\n                updateDeliveryDay(delDay);\n                setSavingDeliveryDay(false);\n            })\n    }\n\n    return (\n        <div className='row rest_menu_manager justify-content-center'>\n            <div className='col-12 col-md-7'>\n                <div className='row'>\n                    <div className='col-12'>\n                        <h3>edit menu</h3>\n                        <hr/>\n                    </div>\n                    <div className='col-12'>\n                        <button\n                            className='btn btn-sm btn-outline-info'\n                            onClick={() => history.goBack()}\n                            >back</button>\n                        <hr/>\n                    </div>\n                    <div className='col-12'>\n                        <div className='row'>\n                            <div className='col-12 mb-2'>\n                                <input\n                                    className='form-control'\n                                    placeholder='menu name'\n                                    value={deliveryDay.name}\n                                    onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                                        updateDeliveryDay({...deliveryDay, name: e.target.value})\n                                    }\n                                    />\n                            </div>\n                            <div className='col-6 col-md-3'>\n                                <div className=\"checkbox_selector\">\n                                    <input\n                                        type='checkbox'\n                                        checked={deliveryDay.is_perpetual}\n                                        onClick={() => updateDeliveryDay({...deliveryDay, is_perpetual: !deliveryDay.is_perpetual})}\n                                        />\n                                    <span>perpetual</span>\n                                </div>\n                            </div>\n                            <div className='col-6 col-md-9 text-right'>\n                                <LoadingIconButton\n                                    label='save'\n                                    busy={savingDeliveryDay}\n                                    btnClass=\"btn btn-sm btn-outline-success\"\n                                    outerClass='ml-2 mt-2 mt-m-0'\n                                    onClick={saveDeliveryDay}\n                                    disabled={savingDeliveryDay}\n                                    />\n                            </div>\n                            {!deliveryDay.is_perpetual &&\n                                <Fragment>\n                                    <div className='col-12 col-md-6'>\n                                        <small>start date:</small>\n                                        <br/>\n                                        <input\n                                            type=\"date\"\n                                            id=\"startDate\"\n                                            value={deliveryDay.date}\n                                            disabled={savingDeliveryDay || deliveryDay.is_perpetual}\n                                            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                                                updateDeliveryDay({...deliveryDay, date: e.target.value})\n                                            } />\n                                    </div>\n                                    <div className='col-12 col-md-6'>\n                                        <small>end date:</small>\n                                        <br/>\n                                        <input\n                                            className={'ml-2'}\n                                            type=\"date\"\n                                            id=\"endDate\"\n                                            value={deliveryDay.end_date}\n                                            disabled={savingDeliveryDay || deliveryDay.is_perpetual}\n                                            onChange={(e: ChangeEvent<HTMLInputElement>) =>\n                                                updateDeliveryDay({...deliveryDay, end_date: e.target.value})\n                                            } />\n                                    </div>\n                                </Fragment>\n                            }\n                        </div>\n                        <hr/>\n                    </div>\n                    <div className='col-12'>\n                        <h6>categories</h6>\n                    </div>\n                    <div className='col-9'>\n                        <SearchWidget\n                            placeholder='add category name'\n                            serviceFunction={menuCategoryService.pagedSearchResults}\n                            itemSelected={categorySelected}\n                            />\n                    </div>\n                    <div className='col-3'>\n                        <LoadingIconButton\n                            label='+'\n                            onClick={addCategory}\n                            busy={addingCategory}\n                            btnClass='btn btn-sm btn-outline-success'\n                            disabled={newCategory === undefined}\n                            />\n                    </div>\n                    <div className='col-12 mt-2'>\n                        {\n                            categories.map((category: DeliveryDayMenuCategory) =>\n                                <RestaurantMenuCategory\n                                    deliveryDay={deliveryDay}\n                                    category={category}\n                                    move={moveCategory}\n                                    canMoveUp={category.index > 1}\n                                    canMoveDown={category.index < categories.length}\n                                    key={`category_${category.id}`}\n                                    isOpen={category.id === openCategory?.id}\n                                    categorySelected={(category: DeliveryDayMenuCategory | null) => setOpenCategory(category)}\n                                />\n                            )\n                        }\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}","import React, {useState} from 'react';\nimport menuItemService from '../../services/MenuItemService';\nimport LoadingOverlay from \"../overlays/LoadingOverlay\";\nimport {config} from \"../../config\";\nimport { Link } from 'react-router-dom';\n\nimport './rest_menu_manager.scss';\nimport MenuItem from \"../../models/MenuItemModel\";\nimport PagedResultsDTO from \"../../dto/PagedResultsDTO\";\n\nexport const RestaurantMenuItems = (): React.ReactElement => {\n\n    const [isLoading, setIsLoading] = useState(false);\n    const [dto, setDTO] = useState(new PagedResultsDTO());\n    const [currentPage, setCurrentPage] = useState(1);\n\n    React.useEffect(() => {\n        loadPage(1);\n    }, [])\n\n    const loadPage = (page: number, searchPattern?: string): void => {\n        setCurrentPage(page);\n\n        menuItemService.get<PagedResultsDTO>()\n            .then((dto: PagedResultsDTO) => {\n                setDTO(dto);\n            })\n            .catch( err => {window.alert('Unable To Load Menu Items')})\n    }\n\n    if (isLoading)\n        return <LoadingOverlay />\n\n    const sortedItems: MenuItem[] = (dto.results as any).sort((a: MenuItem, b: MenuItem) => a.name.toLowerCase() > b.name.toLowerCase() ?\n                                        1 : a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 0);\n\n    return (\n        <div className='row restaurant_menu_items'>\n            <div className='col-12'>\n                <h3>menu items</h3>\n                <hr/>\n            </div>\n            {\n                sortedItems.map((menuItem: MenuItem) =>\n                    <div className=\"col-6 col-md-3 menu_items__item\" key={`mi_${menuItem.id}`}>\n                        <Link className=\"row\" to={`/dashboard/menu/edit/${menuItem.id}/`}>\n                                <div className=\"col-12 menu_items__menuitem_name no_wrap_text\">{menuItem.name}</div>\n                                <div className=\"col-12\">\n                                    <div className='menu_items__image'>\n                                        <img\n                                            src={`${config.API_URL + config.UPLOADS_PATH}/${menuItem.image}`}\n                                            alt={menuItem.name}/>\n                                    </div>\n                                </div>\n                        </Link>\n                    </div>\n                )\n            }\n        </div>\n    )\n}","import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\n\nimport { AuthState } from './store/auth/authReducer';\nimport { AppState, AppActions } from './store/store';\nimport { dispatchLogin } from './store/auth/authActions';\nimport authService from './services/AuthService';\nimport User from './models/User';\n\nimport './App.scss';\n\nimport menuIcon from './assets/menu_icon.png';\n\nimport {Navigation} from './components/nav/Navigation';\nimport Deliveries from './components/delivery/Deliveries';\nimport DeliveryDay from './components/delivery/DeliveryDayComponent';\nimport {Menu} from './components/menu/Menu';\nimport Login from './components/authentication/Login';\nimport Orders from './components/order/Orders';\nimport Export from './components/order/Export';\nimport OrderEdit from './components/order/OrderEdit';\nimport Coupons from './components/coupon/Coupons';\nimport DeliveryDuplicate from './components/delivery/DeliveryDuplicate';\nimport CouponAdd from \"./components/coupon/CouponAdd\";\nimport OrderEmail from \"./components/order/OrderEmail\";\nimport {Mail} from \"./components/mail/Mail\";\nimport {Newsletters} from \"./components/newsletter/Newsletters\";\nimport NewsletterEdit from \"./components/newsletter/NewsletterEdit\";\nimport BrowserTool from \"./components/browser_tool/BrowserTool\";\nimport BrowserFullDay from \"./components/browser_tool/BrowserFullDay\";\nimport {DeliveryWindows} from \"./components/delivery_windows/DeliveryWindows\";\nimport {DeliveryWindowEdit} from \"./components/delivery_windows/DeliveryWindowEdit\";\nimport {Zones} from \"./components/zone/Zones\";\nimport {DeliveryPlanner} from \"./components/delivery_planner/DeliveryPlanner\";\nimport {Profile} from \"./components/profile/Profile\";\nimport {Recipes} from \"./components/recipe/Recipes\";\nimport {Ingredients} from \"./components/ingredient/Ingredients\";\nimport {IngredientEdit} from \"./components/ingredient/IngredientEdit\";\nimport {RecipeEdit} from \"./components/recipe/RecipeEdit\";\nimport {RecipeNotes} from \"./components/recipe/RecipeNotes\";\nimport logo from './assets/daisy_logo.png';\nimport operatorService from './services/OperatorService';\nimport OperatorSettingsDTO from \"./dto/OperatorSettingsDTO\";\nimport {dispatchUpdateOperatorSettings, OperatorSettings, OperatorState} from \"./store/operatorReducer\";\nimport {RestaurantMenuManager} from \"./components/restaurant_menu_manager/RestaurantMenuManager\";\nimport {RestaurantDelivery} from \"./components/restaurant_delivery/RestaurantDelivery\";\nimport {OPERATOR_TYPES} from \"./models/OperatorModel\";\nimport {RestaurantDashboard} from \"./components/restaurant_dashboard/RestaurantDashboard\";\nimport {dispatchAddOverlay, HelpersState} from \"./store/helpersReducer\";\nimport {CreateOrder} from \"./components/create_order/CreateOrder\";\nimport {RestaurantMenuEdit} from \"./components/restaurant_menu_manager/RestaurantMenuEdit\";\nimport {RestaurantMenuItems} from \"./components/restaurant_menu_manager/RestaurantMenuItems\";\n\ninterface LinkStateProps {\n    auth: AuthState,\n    operator: OperatorState,\n    helpers: HelpersState\n}\n\ninterface LinkDispatchProps {\n    login: (user: User, operator_token: string) => void,\n    updateOperatorSettings: (settings: OperatorSettings) => void,\n    setOverlay: (component: any) => void\n}\n\ntype Props = LinkStateProps & LinkDispatchProps;\n\ninterface State { \n  connecting: boolean,\n  loggedIn: boolean // temporary flag while auth login is completed\n}\n\nclass App extends React.Component<Props, State> {\n\n  state = {\n    connecting: true,\n    loggedIn: false\n  }\n\n  openNav = () => {\n      // @ts-ignore\n      document.getElementById(\"mySidenav\").style.width = \"250px\";\n    }\n\n/* Set the width of the side navigation to 0 */\n closeNav = () => {\n  // @ts-ignore\n     document.getElementById(\"mySidenav\").style.width = \"0\";\n    }\n\n  public componentDidMount = () => {\n    const refresh_token: string | null = window.localStorage.getItem('refresh_token');\n    if(refresh_token !== null) {\n        authService.validateToken(refresh_token)\n              .then((user: User) => {\n                this.props.login(user, \"\");\n                this.getSettings();\n              })\n              .catch((err: any) => {\n                this.setState({connecting: false, loggedIn: false});\n              })\n    } else {\n        this.setState({connecting: false, loggedIn: false});\n    }\n  }\n\n  public getSettings = (): void => {\n     operatorService.get_settings()\n         .then((settings: OperatorSettingsDTO) => {\n             this.props.updateOperatorSettings({\n                 type: settings.type\n             });\n             this.setState({connecting: false, loggedIn: true});\n         })\n         .catch( err => this.setState({connecting: false, loggedIn: false}))\n  }\n\n  public render() {\n    if (this.state.connecting)\n      return <div>Connecting...</div>\n\n    if (!this.props.auth.loggedIn)\n      return <Login />\n\n    const PrivateRoute = ({component, ...rest}: any) => {\n      const routeComponent = (props: any) => (\n          this.props.auth.loggedIn || this.state.loggedIn\n              ? React.createElement(component, props)\n              : <Redirect to={{pathname: '/dashboard/login'}}/>\n      );\n      return <Route {...rest} render={routeComponent}/>;\n    };\n    \n    return (\n\t\t<div className=\"container-fluid app\">\n\t\t\t{this.props.auth.loggedIn &&\n\t\t\t\t<div id=\"mySidenav\" className=\"sidenav\">\n                    <div className=\"closebtn\" onClick={this.closeNav}>x</div>\n                    <Navigation closeNav={this.closeNav} />\n                </div>\n\t\t\t}\n\t\t\t<div className='row app_header'>\n                <div className='col-12'>\n                    <div className='app_header__title'>\n                        <img src={logo} alt='daisy chef logo'/>\n                    </div>\n                    <div className='app_header__menu_toggle' onClick={this.openNav}>\n                        <img src={menuIcon} alt='open the menu'/>\n                    </div>\n                </div>\n            </div>\n\t\t\t<div className=\"row app__page\">\n\t\t\t\t<div className=\"col-12 mt-2\">\n\t\t\t\t\t<Switch>\n                        <PrivateRoute path='/dashboard/browser/day/:targetDate' component={BrowserFullDay} />\n                        <PrivateRoute path='/dashboard/browser/:month/:year' component={BrowserTool} />\n                        <PrivateRoute path='/dashboard/browser' component={BrowserTool} />\n                        <PrivateRoute path=\"/dashboard/coupon/add\" component={CouponAdd}/>\n                        <PrivateRoute path=\"/dashboard/coupons\" component={Coupons} />\n                        <PrivateRoute path='/dashboard/create_order/:type/:zip' component={CreateOrder}/>\n                        <PrivateRoute path=\"/dashboard/deliveries\" component={Deliveries} />\n                        <PrivateRoute path=\"/dashboard/delivery/edit/:id\" component={DeliveryDay} />\n                        <PrivateRoute path=\"/dashboard/delivery/duplicate/:id\" component={DeliveryDuplicate} />\n                        <PrivateRoute path='/dashboard/delivery_window/edit/:id' component={DeliveryWindowEdit} />\n                        <PrivateRoute path='/dashboard/delivery_window/add' component={DeliveryWindowEdit} />\n                        <PrivateRoute path=\"/dashboard/delivery_window\" component={DeliveryWindows} />\n                        <PrivateRoute path='/dashboard/delivery_planner/:delivery_window/:target_date' component={DeliveryPlanner} />\n                        <PrivateRoute path='/dashboard/ingredient/edit/:id' component={IngredientEdit} />\n                        <PrivateRoute path='/dashboard/ingredient' component={Ingredients} />\n                        <PrivateRoute path=\"/dashboard/mail\" component={Mail} />\n                        <PrivateRoute path=\"/dashboard/menu\" component={Menu} />\n                        <PrivateRoute path='/dashboard/newsletter/edit/:id' component={NewsletterEdit} />\n                        <PrivateRoute path='/dashboard/newsletter' component={Newsletters} />\n                        <PrivateRoute path=\"/dashboard/orders/export\" component={Export} />\n                        <PrivateRoute path=\"/dashboard/orders/edit/:id\" component={OrderEdit} />\n                        <PrivateRoute path='/dashboard/order/mail/:id' component={OrderEmail} />\n                        <PrivateRoute path=\"/dashboard/orders\" component={Orders} />\n                        <PrivateRoute path='/dashboard/profile' component={Profile} />\n                        <PrivateRoute path='/dashboard/rest/menu/edit/:id' component={RestaurantMenuEdit} />\n                        <PrivateRoute path='/dashboard/rest/menu' component={RestaurantMenuManager} />\n                        <PrivateRoute path='/dashboard/rest/menu_items' component={RestaurantMenuItems} />\n                        <PrivateRoute path='/dashboard/rest/delivery' component={RestaurantDelivery} />\n                        <PrivateRoute path='/dashboard/recipe/edit/:id' component={RecipeEdit} />\n                        <PrivateRoute path='/dashboard/recipe/notes/:id' component={RecipeNotes} />\n                        <PrivateRoute path='/dashboard/recipe' component={Recipes} />\n                        <PrivateRoute path='/dashboard/zone' component={Zones} />\n                        <PrivateRoute path='/dashboard/' component={this.props.operator.settings?.type === OPERATOR_TYPES.default ? BrowserTool : RestaurantDashboard} />\n                        <PrivateRoute path='' component={BrowserTool} />\n                        <Route path=\"/dashboard/login\" component={Login} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\n\t\t\t</div>\n            {this.props.helpers.overlayComponent != null &&\n                  <div\n                      className='app_overlay theme__overlay_background'\n                      onClick={() => this.props.setOverlay(null)}\n                  >\n                      <div\n                          className='app_overlay__inner theme__background theme__border_color'\n                          onClick={(e: React.MouseEvent) => {e.stopPropagation()}}\n                      >\n                          <div className='container'>\n                              <div className='row'>\n                                  <div className='col-12'>\n                                    {this.props.helpers.overlayComponent}\n                                  </div>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n              }\n\t\t</div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state: AppState): LinkStateProps => ({\n    auth: state.authReducer,\n    operator: state.operatorReducer,\n    helpers: state.helpersReducer\n});\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>): LinkDispatchProps => ({\n    login: bindActionCreators(dispatchLogin, dispatch),\n    updateOperatorSettings: bindActionCreators(dispatchUpdateOperatorSettings, dispatch),\n    setOverlay: bindActionCreators(dispatchAddOverlay, dispatch)\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport { store } from './store/store';\nimport { Provider } from 'react-redux';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}