(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],Array(26).concat([function(e,t,a){},function(e,t,a){},,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAmCAIAAAAwfe4wAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bpVIrDnYQcchQnSzUD8RRq1CECqFWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIk6OToouU+L+k0CLGg+N+vLv3uHsH+BsVpppdcUDVLCOdTAjZ3KoQfEUIvQhjHHGJmfqcKKbgOb7u4ePrXYxneZ/7c/QpeZMBPoF4lumGRbxBPL1p6Zz3iSOsJCnE58RjBl2Q+JHrsstvnIsO+3lmxMik54kjxEKxg+UOZiVDJZ4ijiqqRvn+rMsK5y3OaqXGWvfkLwzntZVlrtMcRhKLWIIIATJqKKMCCzFaNVJMpGk/4eEfcvwiuWRylcHIsYAqVEiOH/wPfndrFiYn3KRwAuh+se2PESC4CzTrtv19bNvNEyDwDFxpbX+1Acx8kl5va9EjoH8buLhua/IecLkDDD7pkiE5UoCmv1AA3s/om3LAwC0QWnN7a+3j9AHIUFepG+DgEBgtUva6x7t7Onv790yrvx+uvXK/9Jx3GQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+QKCw07G2K/2RMAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACi0lEQVRYw+1YP0g6cRR/p99NQ87kOIQKdLipP0M3NN1wg4IN1RI0diAJQoJBkw0V1NAQRbjoctEsRHAqODRfQ9RiDacXKKUIB0YmKNdwcTX8PPwdlxr0md6X7+PzPt/v473v44upqgo9cHNzk8vlwAoEAoH5+fme22pvCIIAFkEQBINANhgBoH6c9vb2FhcXTbBfXV0lEglrRExNTc3NzZkQcX9/34/bSKTjT8RIiUB6t6jVatVqtdPp6HuPj4+aIUmSKIom2CVJ0qnGx8e/oiLk9XoJgsAw7DO8oigHBwcOh2OQp3c4HIeHh4qiqKoKrVYrHA4PKxEbGxvv7+9YNpsNBoMAMDY2xnHc90v7OTQajVQq9fr6CgD5fB7i8bje3dQB4vLyUou7vb1te3l50RbT09ODTMTMzIxmVCqVf5fo29tbu93+URGfddGrTzw8PCwsLIRCoefn56G9oqIo3t3dAUCxWCRJcjgiGIZZXV3FcXx2dnZoNzExMXFxcYFhmM1mG5oIALDb7SM0WRmMwaZr4f9EXF9fp9NpS0RwHMcwjBkRrVbr/PzcEhFra2u/ZJ4wxtHR0fLysgn2TCaztbVljQiCIHw+nwkRBEH0Nd7hOK5Z5XJ5kCkolUqa4Xa7Ecuyp6enALC+vh6LxVwul+6nNW9LUCgU6vW6vlQU5fj4WLNZloVms7m0tGRMwfO8uaGB53lj5pWVlWazaXM6nclkMhKJDL4ootHo2dmZ0+lEAECS5MnJyebm5tPTU7fb/f6c7uzsWBJvd3eXpunvz8Lk5KTf70cIfVUHQoiiKIqifujQNE1rk+wvb1ayLN/e3ppgl2W5L7+/n5o+0uHxePb39y0J4/F4DHY/AAhV6BpaF2GMAAAAAElFTkSuQmCC"},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAlCAYAAAAA7LqSAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TRSkVETuIOGSoThZERTpqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8AoVFhmtU1AWi6baaTCTGbWxV7XhGCgAHEEZeZZcxJUgq+4+seAb7exXiW/7k/R5+atxgQEIlnmWHaxBvEM5u2wXmfOMJKskp8Tjxu0gWJH7muePzGueiywDMjZiY9TxwhFosdrHQwK5ka8TRxVNV0yheyHquctzhrlRpr3ZO/MJzXV5a5TnMESSxiCRJEKKihjApsxGjVSbGQpv2Ej3/Y9UvkUshVBiPHAqrQILt+8D/43a1VmJr0ksIJoPvFcT5GgZ5doFl3nO9jx2meAMFn4Epv+6sNIP5Jer2tRY+A/m3g4rqtKXvA5Q4w9GTIpuxKQZpCoQC8n9E35YDBWyC05vXW2sfpA5ChrlI3wMEhMFak7HWfd/d29vbvmVZ/P8oIcso1e0lyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AoCEgIouZmeeAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAANpSURBVFjD7ZnPT9tmGMc/TuIkDhVZiJuO9IDQ1k5Eg1A6pA24LlKlaodJ44A45gA5jYMPHLnzD3DgHxhoGz8ORBtElZA6YBtj2qbRaQKBQEmFtySFhMSxvQOvW4q6uy31e/TJX/t9nu/nfR6JV5IAGYgAYcAnnrlJNmABl0ANMMSzly/qA+LAA6AfuAMEXGqkBZSAX4BdQBfmkIDbsixnC4XCTqVSqVuWZbtVl5eX5v7+vj4+Pv49kAVuOx9cBjKFQmHH9pBKpVKjs7MzD2QA2Qe0Af0DAwMf4iElEomgpmk9QBpo8wFBIB4Oh4N4TKqqKoAKBH2i8isnJycvvGTCNE3W19drQBkw/KLib/n9/ntDQ0N3Q6GQz+0mbNtmeXn5fHp6+g/gW+BPSVT8u8BoJpP5IpvN3o/H42EXtl4AGo2GtbGxcTE7O/s3sAh8BRSdl/ULMx8DD0WOyC79IYbIkZ+AH4AiYEo3kj0EREW6+91aHiLVK0DDSfa3cptuHq0gcAtQXH606sA50HwTNCaAQUVRHqiq6tpir9Vqhq7rJQGMO8Dz69B4R1XV3NbW1q/1et1wM2OZpmkdHBxUcrncEyAnOqyEOE6PNjc3d70EjbquN7u7u9eBRw6itAHpvr6+Hi8Vd0dHhzw1NXVfQGPEgcZYKBSSvdap2tvbw0DM+SNN4N+jo6OKl0y0Wi3y+fwF8A/QdKAxYhjG+8PDw3cVRfG73YRpmiwsLFRnZmZ+B74BnjnQmAA+HxwcHJ2cnPwgFospboXGVqtlr62tnc/Pz/8FLABfA89v5shHwIBHoPFn4EcnR/4v2SPCnBtlCWh8Ldnfyu3QGAbaPXIfqYqJ42vQ6NwQP0mn0w9HRkaSkiS5ctJ4fHxsLC0tnYpif+rcEB0zyVQqNbW3t7dvGIbpds46PT290DTtKfAlkLwOjY+3t7d/8xI0lstlo7e39wnw+Do09qVSqXteKu5oNBqYmJh4D+h1Jo0yEA0EAgGvdapIJBIC3kHMfpvA2eHhYdlLJgzDsFdWVs6BM+Hhaho/Njb2XbFYbHihPprNpjU3N1cG8sCngOxAowp8lkwmRzVN6+nq6mpzKzRWq1VrdXX1xeLi4jMxZVwGzm5urPq52lp5ARp3udpa6W+CxoDoYl7YIV5wtYazAf4DNE+hw/CkaMsAAAAASUVORK5CYII="},function(e,t,a){e.exports=a.p+"static/media/loader.9a2c42ba.gif"},,,function(e,t,a){e.exports=a.p+"static/media/daisy_logo.8ab65235.png"},,function(e,t,a){e.exports=a(111)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),l=a(17),o=a.n(l),i=(a(68),a(62)),s=a(2),m=a(7),d=a(5),u=a(4),p=a(12),h=a(20),v=a(13),b=a(55),_=a(3),f=function e(){Object(s.a)(this,e),this.id=void 0,this.username=void 0,this.email=void 0},g={loggedIn:!1,user:new f,operator_token:""},E={overlayComponent:null,closeCallback:null,selfClose:!1},y=function(e,t,a){return{type:n.SET_OVERLAY,component:e,selfClose:t,closeCallback:a}},w=function(e,t,a){return function(n){n(y(e,t,a))}},N={settings:{type:0}},O=function(e){return function(t){t(function(e){return{type:n.OPERATOR_SETTINGS,settings:e}}(e))}};!function(e){e[e.LOGIN=0]="LOGIN",e[e.LOGOUT=1]="LOGOUT",e[e.OPERATOR_SETTINGS=2]="OPERATOR_SETTINGS",e[e.SET_OVERLAY=3]="SET_OVERLAY",e[e.SET_LOADING_OVERLAY=4]="SET_LOADING_OVERLAY"}(n||(n={}));var j=Object(h.c)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOGIN:return e.user=t.user,e.operator_token=t.operator_token,e.loggedIn=!0,Object(_.a)({},e);case n.LOGOUT:return e.loggedIn=!1,window.localStorage.removeItem("access_token"),window.localStorage.removeItem("refresh_token"),Object(_.a)({},e)}return e},operatorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.OPERATOR_SETTINGS:return Object(_.a)(Object(_.a)({},e),{},{settings:t.settings})}return e},helpersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_OVERLAY:return e.overlayComponent=t.component,e.closeCallback=t.closeCallback,e.selfClose=t.selfClose,Object(_.a)({},e);case n.SET_LOADING_OVERLAY:return Object(_.a)({},e)}return e}}),C=Object(h.d)(j,Object(h.a)(b.a)),S=function(e,t){return function(a){a(function(e,t){return{type:n.LOGIN,user:e,operator_token:t}}(e,t))}},k={API_URL:"https://www.daisychef.com",OPERATOR_TOKEN:"8500f3e1-0282-4d09-a752-6756d188f584",RESULTS_PER_PAGE:25,UPLOADS_PATH:"/uploads"},D=a(23),x=a.n(D),I=a(29),A=a(56),M=a.n(A).a.create({baseURL:k.API_URL,timeout:0,headers:{Authorization:"JWT "+window.localStorage.getItem("access_token"),"Content-Type":"application/json",accept:"application/json","operator-token":window.localStorage.getItem("operator_token")}});M.interceptors.response.use((function(e){return e}),function(){var e=Object(I.a)(x.a.mark((function e(t){var a,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,401!==t.response.status){e.next=17;break}return n=window.localStorage.getItem("refresh_token"),e.prev=3,e.next=6,M.post("/api/core/auth/token/refresh/",{refresh:n});case 6:return c=e.sent,window.localStorage.setItem("access_token",c.data.access),window.localStorage.setItem("refresh_token",c.data.refresh),M.defaults.headers.Authorization="JWT "+c.data.access,a.headers.Authorization="JWT "+c.data.access,e.abrupt("return",M(a));case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:return e.abrupt("return",Promise.reject(t));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}());var P=M,T=function(){function e(){var t=this;Object(s.a)(this,e),this._service_url=k.API_URL,this.appName="",this.view="",this.buildSearchQuery=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n="?";return""!==e&&(n+="search=".concat(e)),""!==t&&(n+="&search_field=".concat(t)),0!==a&&(n+="&page=".concat(a)),n},this.pagedSearchResults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t._get("".concat(t.appName,"/").concat(t.view,"/").concat(t.buildSearchQuery(a,n,e)))}}return Object(m.a)(e,[{key:"_get",value:function(e){var t=this;return new Promise((function(a,n){P.get("".concat(t._service_url,"/api/").concat(e)).then((function(e){a(e.data)})).catch((function(e){return n(e)}))}))}},{key:"_post",value:function(e,t,a){var n=this;return new Promise((function(c,r){P.post("".concat(n._service_url,"/api/").concat(e),t,a).then((function(e){c(e.data)})).catch((function(e){return r(e)}))}))}},{key:"_patch",value:function(e,t,a){var n=this;return new Promise((function(c,r){P.patch("".concat(n._service_url,"/api/").concat(e),t,a).then((function(e){c(e.data)})).catch((function(e){return r(e)}))}))}},{key:"_delete",value:function(e){return P.delete("".concat(this._service_url,"/api/").concat(e))}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.multipartFormPost(e):this._post("".concat(this.appName,"/").concat(this.view,"/"),e)}},{key:"delete",value:function(e){return this._delete("".concat(this.appName,"/").concat(this.view,"/").concat(e,"/"))}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!==e?this._get("".concat(this.appName,"/").concat(this.view,"/").concat(e,"/").concat(this.querizeObject(t))):this._get("".concat(this.appName,"/").concat(this.view,"/").concat(this.querizeObject(t)))}},{key:"getByDate",value:function(e){return this._get("".concat(this.appName,"/").concat(this.view,"/get_by_date/?date=").concat(e))}},{key:"getByDateRange",value:function(e,t){var a="".concat(this.appName,"/").concat(this.view,"/get_by_date_range/?");return e&&(a+="start_date=".concat(e,"&")),t&&(a+="end_date=".concat(t)),this._get(a)}},{key:"multipartFormPost",value:function(e){var t=new FormData;return Object.keys(e).forEach((function(a){t.append(a,e[a])})),console.log(t),this._post("".concat(this.appName,"/").concat(this.view,"/"),t,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"multipartFormUpdate",value:function(e,t){var a=new FormData;return Object.keys(t).forEach((function(e){a.append(e,t[e])})),console.log(a),this._patch("".concat(this.appName,"/").concat(this.view,"/").concat(e,"/"),a,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this._get("".concat(this.appName,"/").concat(this.view,"/").concat(this.buildSearchQuery(e,t,a)))}},{key:"querizeObject",value:function(e){var t=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");return t.length>0&&(t="?"+t),t}},{key:"softDelete",value:function(e){return this._get("".concat(this.appName,"/").concat(this.view,"/soft_delete/").concat(e,"/"))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.multipartFormUpdate(e.id,e):this._patch("".concat(this.appName,"/").concat(this.view,"/").concat(e.id,"/"),e)}},{key:"viewPath",get:function(){return"".concat(this.appName,"/").concat(this.view)}}]),e}(),F=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="core",e.view="auth",e.authenticate=function(t,a){return e.logout(),new Promise((function(n,c){e._post("".concat(e.viewPath,"/authenticate/"),{email:t,password:a}).then((function(e){console.log(e),null!==e.operator_token?(window.localStorage.setItem("access_token",e.access),window.localStorage.setItem("refresh_token",e.refresh),window.localStorage.setItem("operator_token",e.operator_token),n(e)):c(e)})).catch((function(e){return c(e)}))}))},e.logout=function(){window.localStorage.removeItem("access_token"),window.localStorage.removeItem("refresh_token"),window.localStorage.removeItem("user_id"),window.localStorage.removeItem("username")},e.updatePassword=function(t,a,n){return e._post("".concat(e.appName,"/").concat(e.view,"/update_password/"),{current_password:a,new_password:n,user_id:t.id})},e.validateToken=function(t){return new Promise((function(t,a){e._get("".concat(e.viewPath,"/user")).then((function(e){t(e)})).catch((function(e){return a(e)}))}))},e}return a}(T)),z=(a(91),a(57)),R=a.n(z),U=a(1),L=(a(92),function e(){Object(s.a)(this,e),this.id=-1,this.created_at=void 0}),B=0,V=1,Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",v=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",b=arguments.length>12&&void 0!==arguments[12]&&arguments[12],_=arguments.length>13&&void 0!==arguments[13]?arguments[13]:"",g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:"",E=arguments.length>15&&void 0!==arguments[15]?arguments[15]:"",y=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,w=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,N=arguments.length>18&&void 0!==arguments[18]?arguments[18]:0,O=arguments.length>19&&void 0!==arguments[19]?arguments[19]:new f,j=arguments.length>20&&void 0!==arguments[20]&&arguments[20],C=arguments.length>21&&void 0!==arguments[21]?arguments[21]:"",S=arguments.length>22&&void 0!==arguments[22]?arguments[22]:0;return Object(s.a)(this,a),(e=t.call(this)).token=void 0,e.is_active=void 0,e.name=void 0,e.phone=void 0,e.page_name=void 0,e.page_slug=void 0,e.street_address=void 0,e.unit=void 0,e.city=void 0,e.state=void 0,e.zip_code=void 0,e.self_hosted=void 0,e.domain=void 0,e.support_email=void 0,e.timezone=void 0,e.storefront_template=void 0,e.ordering_cutoff_time=void 0,e.upcoming_delivery_notification_time=void 0,e.upcoming_delivery_days_notification_time=void 0,e.auto_notify_upcoming_deliveries=void 0,e.max_future_delivery_windows_time=void 0,e.delivery_fee=void 0,e.free_delivery_minimum=void 0,e.tax_rate=void 0,e.tax_tips=void 0,e.tax_delivery_fee=void 0,e.allow_tipping=void 0,e.customer_must_be_present=void 0,e.delivery_minimum=void 0,e.user=void 0,e.id=n,e.token=c,e.is_active=r,e.name=l,e.phone=o,e.page_name=i,e.page_slug=m,e.street_address=d,e.unit=u,e.city=p,e.state=h,e.zip_code=v,e.self_hosted=b,e.domain=_,e.support_email=g,e.timezone=E,e.ordering_cutoff_time=y,e.upcoming_delivery_notification_time=w,e.upcoming_delivery_days_notification_time=N,e.user=O,e.auto_notify_upcoming_deliveries=j,e.storefront_template=C,e.max_future_delivery_windows_time=S,e}return a}(L),H=function(e){var t,a=Object(c.useState)(!1),l=Object(U.a)(a,1)[0],o=Object(c.useState)(");"),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(v.c)(),u=Object(p.g)(),h=(null===(t=Object(v.d)((function(e){return e.operatorReducer})).settings)||void 0===t?void 0:t.type)===V,b=function(t){e.closeNav(),u.push({pathname:t})};return l?r.a.createElement(p.a,{to:"/dashboard/login"}):r.a.createElement("div",{className:"navigation"},r.a.createElement("ul",{className:""},r.a.createElement("li",{onClick:function(){return b("/dashboard/")}},"dashboard"),r.a.createElement("li",{onClick:function(){return b("/dashboard/profile")}},"profile"),h?r.a.createElement("li",{onClick:function(){return m("menu")}},"menu",r.a.createElement("ul",{className:"sidenav__dropdown sidenav__dropdown--".concat("menu"===s?"open":"close")},r.a.createElement("li",{onClick:function(){return b("/dashboard/rest/menu")}},"menus"),r.a.createElement("li",{onClick:function(){return b("/dashboard/rest/menu_items")}},"menu items"))):r.a.createElement("li",{onClick:function(){return m("menu")}},"menu",r.a.createElement("ul",{className:"sidenav__dropdown sidenav__dropdown--".concat("menu"===s?"open":"close")},r.a.createElement("li",{onClick:function(){return b("/dashboard/menu/en")}},"entrees"),r.a.createElement("li",{onClick:function(){return b("/dashboard/menu/ap")}},"appetizers"),r.a.createElement("li",{onClick:function(){return b("/dashboard/menu/si")}},"sides"),r.a.createElement("li",{onClick:function(){return b("/dashboard/menu/de")}},"desserts"))),h?r.a.createElement("li",{onClick:function(){return b("/dashboard/rest/delivery")}},"activity windows"):r.a.createElement("li",{onClick:function(){return m("delivery")}},"delivery",r.a.createElement("ul",{className:"sidenav__dropdown sidenav__dropdown--".concat("delivery"===s?"open":"close")},r.a.createElement("li",{onClick:function(){return b("/dashboard/deliveries")}},"menus"),r.a.createElement("li",{onClick:function(){return b("/dashboard/delivery_window")}},"windows"),r.a.createElement("li",{onClick:function(){return b("/dashboard/zone")}},"zones"))),r.a.createElement("li",{onClick:function(){return m("recipe")}},"recipes",r.a.createElement("ul",{className:"sidenav__dropdown sidenav__dropdown--".concat("recipe"===s?"open":"close")},r.a.createElement("li",{onClick:function(){return b("/dashboard/recipe")}},"recipes"),r.a.createElement("li",{onClick:function(){return b("/dashboard/ingredient")}},"ingredients"))),r.a.createElement("li",{onClick:function(){return b("/dashboard/coupons")}},"coupons"),r.a.createElement("li",{onClick:function(){return m("mail")}},"mail",r.a.createElement("ul",{className:"sidenav__dropdown sidenav__dropdown--".concat("mail"===s?"open":"close")},r.a.createElement("li",{onClick:function(){return b("/dashboard/mail/mass_mailer")}},"mass mailer"),r.a.createElement("li",{onClick:function(){return b("/dashboard/mail/list")}},"mailing list"))),r.a.createElement("li",{onClick:function(){return b("/dashboard/newsletter")}},"newsletters"),r.a.createElement("li",{onClick:function(){return b("/dashboard/orders")}},"orders")),r.a.createElement("span",{className:"navigation__login text-center"},r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){d({type:n.LOGOUT})}},"Logout")))},q=a(14),W=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="delivery_day",e.attachCategory=function(t,a){return e._post("".concat(e.viewPath,"/").concat(t.id,"/attach_category/"),{category:"string"===typeof a?a:a.id})},e.attachDeliveryWindow=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/c/").concat(t.id,"/").concat(a.id,"/"))},e.detachDeliveryWindow=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/detach_delivery_window/").concat(t.id,"/").concat(a.id,"/"))},e.duplicateDeliveryDay=function(t,a,n){return e._get("".concat(e.appName,"/").concat(e.view,"/duplicate/?date=").concat(a,"&end_date=").concat(n,"&delivery_day=").concat(t.id))},e}return a}(T)),G=(a(26),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c,r){var l,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(s.a)(this,a),(l=t.call(this)).date=void 0,l.end_date=void 0,l.day_items=void 0,l.is_perpetual=void 0,l.is_active=void 0,l.name=void 0,l.categories=void 0,l.id=n||-1,l.date=e||"",l.end_date=c||"",l.day_items=r||[],l.is_perpetual=o,l.name=i,l}return a}(L)),Q=a(10),J=a.n(Q),K=new function e(){Object(s.a)(this,e),this.asDateSlug=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?J()(e).utc().format("YYYY-MM-DD"):J()(e).format("YYYY-MM-DD")},this.asFullDate=function(e){return J()(e).utc().format("dddd MMMM D, YYYY")},this.asFullDateTime=function(e){return J()(e).format("dddd MMMM D, YYYY h:mm a")},this.asShortDate=function(e){return J()(e).utc().format("MMM D YYYY")},this.asShortDateTime=function(e){return J()(e).format("MMM D YYYY h:mm a")}},X=a(11),Z=new(function(){function e(){var t=this;Object(s.a)(this,e),this.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.spicy=["not spicy","mild spicy","spicy"],this.proteins={pork:"Pork",chicken:"Chicken",beef:" Beef",tofu:" Tofu",veg:"Vegetable",vekan:"Vegan",shrimp:"Shrimp"},this.convertToTwelveHour=function(e){var t=e.split(":"),a=parseInt(t[0]),n=" am";return a>11&&(n=" pm",a-=a>12?12:0),0===a&&(a=12),"".concat(a.toString(),":").concat(t[1]).concat(n)},this.extractCartItemDescription=function(e){var a=e.menu_item.name;return a+=null===e.protein||""===e.protein?"":"vekan"===e.protein?" vegan":" with ".concat(e.protein),a+=e.menu_item.spicy?", ".concat(t.spicy[e.spicy]):""},this.formatDeliveryWindow=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a?"":"".concat(K.asFullDate(e.date)," ").concat(e.window.start_time!==e.window.end_time?"between ":"at ");return(n+=t.convertToTwelveHour(e.window.start_time))+(e.window.start_time!==e.window.end_time?" and ".concat(t.convertToTwelveHour(e.window.end_time)):"")},this.sortOrderItemsByDate=function(e){var t={};return e.forEach((function(e){e.cart_item.delivery_date in t||(t[e.cart_item.delivery_date]=[]),t[e.cart_item.delivery_date].push(e)})),t},this.sortDeliveryDayItemsByCategory=function(e){var t={en:[],ap:[],si:[],de:[]};return e&&e.forEach((function(e){return t[e.menu_item.category].push(e)})),[].concat(Object(X.a)(t.en),Object(X.a)(t.ap),Object(X.a)(t.si),Object(X.a)(t.de))},this.groupMenuItemsByCategory=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={en:[],ap:[],si:[],de:[]};return e.forEach((function(e){return n[e.category].push(e)})),a&&n.en.sort(t.compareMenuItemsByName),n}}return Object(m.a)(e,[{key:"compareMenuItemsByName",value:function(e,t){return e.name<t.name?-1:t.name<e.name?1:0}}]),e}()),$=function(e){var t=Object(p.g)();return r.a.createElement("div",{className:"row delivery_days",key:"days_".concat(e.deliveryDay.id)},r.a.createElement("div",{className:"delivery_days__inner"},r.a.createElement("div",{className:"col-12 delivery_days__date"},K.asFullDate(e.deliveryDay.date)," -"),r.a.createElement("div",{className:"col-12 col-md-6 delivery_days__end_date"},K.asFullDate(e.deliveryDay.end_date)),r.a.createElement("div",{className:"col-12",style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"delivery_days__menu_items"},Z.sortDeliveryDayItemsByCategory(e.deliveryDay.day_items).map((function(e){return r.a.createElement("div",{className:"delivery_days__item",key:"ddi_".concat(e.id)},r.a.createElement("small",null,e.menu_item.name),r.a.createElement("div",{className:"delivery_days__item_img"},r.a.createElement("img",{src:"".concat(k.API_URL+k.UPLOADS_PATH,"/").concat(e.menu_item.image),alt:e.menu_item.name})))})))),r.a.createElement("div",{className:"col-12 mt-3 text-center"},r.a.createElement("button",{className:"btn btn-sm btn-outline-success",onClick:function(){t.push({pathname:"/dashboard/delivery/edit/".concat(e.deliveryDay.id,"/")})}},"edit"),r.a.createElement("button",{className:"btn btn-sm btn-outline-warning ml-2",onClick:function(){t.push({pathname:"/dashboard/delivery/duplicate/".concat(e.deliveryDay.id)})}},"duplicate"))))},ee=(a(95),function(e){var t=void 0!==e.disabled&&e.disabled;return r.a.createElement("div",{className:"loading_icon_button ".concat(void 0!==e.outerClass?e.outerClass:"")},r.a.createElement("button",{className:"".concat(t&&void 0!==e.disabledBtnClass?e.disabledBtnClass:void 0!==e.btnClass?e.btnClass:""),onClick:e.onClick,disabled:t},e.label),e.busy&&r.a.createElement("div",{className:"loading_icon_button__loader_layer"},r.a.createElement("div",{className:"loading_icon_button__loader"})))}),te=a(58),ae=a.n(te),ne=(a(96),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading-overlay"},r.a.createElement("img",{src:ae.a,alt:"loadingIcon"}))}}]),a}(r.a.Component)),ce=(a(97),function(e){var t=Math.ceil(e.numItems/k.RESULTS_PER_PAGE);if(t<2)return r.a.createElement("div",null);var a=function(e,t,a){for(var n=[],c=e;c<=t;c++)n.push({text:c.toString(),type:a===c?"selected":"selectable"});return n},n=[];if(t<10)n=a(1,t,e.currentPage);else if(e.currentPage<9)(n=a(1,8,e.currentPage)).push({text:">",type:"move_forward"});else if(t-e.currentPage<9){e.currentPage;(n=a(t-7,t,e.currentPage)).unshift({text:"<",type:"move_back"})}else(n=a(e.currentPage-3,e.currentPage+3,e.currentPage)).unshift({text:"<",type:"move_back"}),n.push({text:">",type:"move_forward"});return r.a.createElement("div",{className:"page_selector"},n.map((function(a){return r.a.createElement("div",{className:"page_selector__item page_selector__item--".concat(a.type),onClick:function(){return function(a){if("selected"!==a.type){var n="selectable"===a.type?parseInt(a.text):e.currentPage;e.gotoPage("selectable"===a.type?n:"move_back"===a.type?n-8>0?n-8:1:n+8<=t?n+8:t)}}(a)}},a.text)})))}),re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,deliveryDays:[],startDate:"",endDate:"",creatingDeliveryDay:!1,editId:0,currentPage:0,paginationCount:0},e.componentDidMount=function(){e.changePages(1)},e.changePages=function(t){e.setState({currentPage:t,loading:!0}),W.pagedSearchResults(t).then((function(t){e.setState({deliveryDays:t.results,loading:!1,paginationCount:t.count})})).catch((function(e){return console.log(e)}))},e.createDeliveryDay=function(){e.state.startDate>e.state.endDate?window.alert("End date must be after start date"):(e.setState({creatingDeliveryDay:!0}),W.add(new G(e.state.startDate,-1,e.state.endDate)).then((function(t){e.setState({editId:t.id,startDate:"",creatingDeliveryDay:!1})})).catch((function(e){return window.alert("Unable to create week")})).then((function(){return e.setState({creatingDeliveryDay:!1})})))},e.updateData=function(t){e.setState(Object(q.a)({},t.target.id,t.target.value))},e}return Object(m.a)(a,[{key:"render",value:function(){if(this.state.loading)return r.a.createElement(ne,null);if(0!==this.state.editId)return r.a.createElement(p.a,{to:"delivery/edit/".concat(this.state.editId)});var e=this.state.deliveryDays;return e.sort((function(e,t){return e.date>t.date?-1:t.date>e.date?1:0})),r.a.createElement("div",{className:"row weeks"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"delivery menus"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",null,"create delivery menu"),r.a.createElement("input",{type:"date",id:"startDate",value:this.state.startDate,disabled:this.state.creatingDeliveryDay,onChange:this.updateData}),r.a.createElement("input",{className:"ml-2",type:"date",id:"endDate",value:this.state.endDate,disabled:this.state.creatingDeliveryDay,onChange:this.updateData}),r.a.createElement(ee,{label:"create",busy:this.state.creatingDeliveryDay,btnClass:"btn btn-sm btn-outline-success",outerClass:"ml-2 mt-2 mt-m-0",onClick:this.createDeliveryDay,disabled:this.state.creatingDeliveryDay}),r.a.createElement(ce,{numItems:this.state.paginationCount,currentPage:this.state.currentPage,gotoPage:this.changePages}),r.a.createElement("hr",null)),e.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6 deliveries__delivery_days",key:"dd_".concat(e.id)},r.a.createElement($,{deliveryDay:e,key:"dd_".concat(e.id)}))})))}}]),a}(r.a.Component),le=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="menu_item",e.attachComponent=function(t,a){return e._post("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/attach_component/"),a)},e.deleteComponent=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/delete_component/?component_id=").concat(a,"&is_add_on=").concat(n.toString()))},e.generatePlatingSheet=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/generate_plating_sheet"))},e}return a}(T)),oe=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="delivery_day_item",e}return a}(T)),ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).timer=void 0,n.lastSavedValue=null,n.handleOnKeyPress=function(e){13===e.keyCode&&n.sendUpdate()},n.updateValue=function(e){n.setState({value:e.target.value}),n.resetTimer()},n.sendUpdate=function(){if(n.lastSavedValue!==n.state.value){n.lastSavedValue=n.state.value;var e=""!==n.props.defaultUpdateValue&&""===n.props.initialValue?n.props.defaultUpdateValue:n.state.value;n.props.onUpdate(n.props.id,e),clearInterval(n.timer)}},n.resetTimer=function(){clearTimeout(n.timer),n.timer=setTimeout(n.sendUpdate,750)},n.state={value:e.initialValue?e.initialValue:"",lastSavedValue:""},n.lastSavedValue=e.initialValue,n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return"textarea"===this.props.type?r.a.createElement("div",{className:"row input_widget_textarea"},r.a.createElement("div",{className:"col-12"},r.a.createElement("textarea",{className:"form-control iw",id:this.props.id,value:this.state.value,onBlur:function(){return e.sendUpdate()},onChange:function(t){return e.updateValue(t)},onKeyDown:function(t){return e.handleOnKeyPress(t)},required:!!this.props.required&&this.props.required}))):r.a.createElement("div",{className:"row input_widget_input"},r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{className:"form-control iw",id:this.props.id,placeholder:this.props.placeholder,value:this.state.value,onBlur:function(){return e.sendUpdate()},onChange:function(t){return e.updateValue(t)},onKeyDown:function(t){return e.handleOnKeyPress(t)},autoComplete:"off"})))}}]),a}(c.Component);ie.getDerivedStateFromProps=function(e,t){return e.initialValue!==t.lastSavedValue?{value:e.initialValue,lastSavedValue:e.initialValue}:null};a(50);var se,me=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(s.a)(this,e),this.count=void 0,this.next=void 0,this.previous=void 0,this.results=void 0,this.count=t,this.results=a},de=function(e){return r.a.createElement("div",{className:"row search_widget_default_display"},r.a.createElement("div",{key:"search_result_".concat(e.item.id),className:"row search_widget__result",onClick:function(){return e.itemSelected(e.item)}},r.a.createElement("div",{className:"col-12 result__name"},e.item.name)))},ue=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).itemSelected=function(e){n.setState({showChoices:!1,currentValue:e.name}),n.props.itemSelected(e)},n.doSearch=function(e,t){n.setState({currentValue:t}),""!==t?n.props.serviceFunction(1,t).then((function(e){n.setState({dto:e,showChoices:e.count>0}),n.props.itemSelected(t)})).catch((function(){return window.alert("unable to search")})):n.setState({showChoices:!1})},n.state={dto:new me,showChoices:!1,currentValue:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row search_widget",onBlur:function(){return e.setState({showChoices:!1,currentValue:""})}},r.a.createElement("div",{className:"col-12"},r.a.createElement(ie,{key:Math.random(),id:"search_widget__InputWidget",type:"",initialValue:this.state.currentValue,onUpdate:this.doSearch,placeholder:this.props.placeholder||"",defaultUpdateValue:""})),r.a.createElement("div",{className:"col-12 search_widget_results--".concat(this.state.showChoices?"show":"hide")},r.a.createElement("div",{className:"search_widget_results__content"},this.state.dto.results.map((function(t){return r.a.createElement(de,{key:"swdd_".concat(t.id),item:t,itemSelected:function(){return e.itemSelected(t)}})})))))}}]),a}(r.a.Component),pe=1,he=2,ve=3,be=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Object(s.a)(this,e),this.id=void 0,this.name="",this.description="",this.proteins="",this.allergens="",this.price=0,this.image="",this.active=void 0,this.spicy=void 0,this.category="en",this.components=void 0,this.add_ons=void 0,this.spiciness=void 0,this.note=void 0,this.id=t,this.name=a,this.description=n,this.category=c,this.price=r,this.proteins=l,this.allergens=o,this.spicy=i},_e=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c,r){var l;return Object(s.a)(this,a),(l=t.call(this)).sold_out=!1,l.price=0,l.menu_item=void 0,l.delivery_day=void 0,l.delivery_category=void 0,l.delivery_day=e,l.menu_item=n,l.sold_out=c,l.price=r,l}return a}(L),fe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c,r){var l;return Object(s.a)(this,a),(l=t.call(this)).sold_out=!1,l.price=0,l.menu_item=void 0,l.delivery_day=void 0,l.delivery_category=void 0,l.getDTOxxx=function(){return new _e(l.delivery_day.id,l.menu_item.id,l.sold_out,l.price)},l.delivery_day=e||new G,l.menu_item=n||new be,l.sold_out=c||!1,l.price=r||0,l}return a}(L),ge=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).remove=function(){window.confirm("Are you sure you want to remove this menu item?")&&(n.setState({saving:!0}),oe.delete(n.state.deliveryDayItem.id).then((function(e){return n.setState({deliveryDayItem:new fe(n.state.deliveryDayItem.delivery_day,n.state.deliveryDayItem.menu_item,!1,0),active:!1,saving:!1},(function(){return n.props.refreshItems()}))})).catch((function(e){return window.alert("Unable to deactivate")})))},n.save=function(){n.setState({saving:!0}),oe.update(n.state.deliveryDayItem).then((function(e){return n.setState({deliveryDayItem:e,saving:!1})})).catch((function(e){return window.alert("Unable to update")}))},n.updateData=function(e){var t=n.state.deliveryDayItem;switch(e.target.id){case"active":n.setState({active:!n.state.active});break;case"sold_out":t.sold_out=!t.sold_out;break;case"price":t.price=parseFloat(e.target.value)}n.setState({deliveryDayItem:t})},n.state={deliveryDayItem:e.deliveryDayItem,saving:!1,active:!!e.deliveryDayItem.id},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"row delivery_item_options"},r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-4"},r.a.createElement("input",{type:"number",id:"price",value:this.state.deliveryDayItem.price,onChange:this.updateData,disabled:this.state.saving||!this.state.active,className:"form-control delivery_item_options__price"})),r.a.createElement("div",{className:" col-8 mt-3"},r.a.createElement("span",{className:"mr-2"},"Sold Out:"),r.a.createElement("input",{id:"sold_out",checked:this.state.deliveryDayItem.sold_out,onChange:this.updateData,disabled:this.state.saving||!this.state.active,type:"checkbox"})),r.a.createElement("div",{className:"col-12 text-center mt-3"},r.a.createElement(ee,{label:"save",onClick:this.save,busy:this.state.saving,btnClass:"btn btn-sm btn-outline-success",disabled:this.state.saving||!this.state.active}),r.a.createElement("button",{className:"btn btn-sm btn-danger ml-3",disabled:this.state.saving,onClick:this.remove},"Remove")))}}]),a}(r.a.Component),Ee=function(e){return r.a.createElement("div",{className:"row delivery_day_item"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row delivery_day_item__inner"},r.a.createElement("div",{className:"col-12 delivery_day_item__name"},e.item.menu_item.name),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"delivery_day_item__img"},r.a.createElement("img",{src:"".concat(k.API_URL+k.UPLOADS_PATH,"/").concat(e.item.menu_item.image),alt:e.item.menu_item.name}))),r.a.createElement("div",{className:"col-12"},r.a.createElement(ge,{deliveryDayItem:e.item,refreshItems:Object(I.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.refreshItems());case 1:case"end":return t.stop()}}),t)})))})))))},ye=a(8),we=(a(98),new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).getTimeZones=function(){return e._get("dashboard/get_time_zones/")},e.searchRecipesAndIngredients=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e._get("dashboard/search_recipes_and_ingredients?search_pattern=".concat(t))},e.sendWeeklyEmails=function(){return e._get("dashboard/send_weekly_email/")},e.sendSupportEmail=function(t,a,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r={to:t,subject:a,body:n};return null!==c&&(r.order_id=c.id),e._post("dashboard/send_support_email/",r)},e.sendMassMail=function(t){return e._post("dashboard/send_mass_email/",t)},e}return a}(T))),Ne=function(e){var t=Object(c.useState)(""),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(!1),i=Object(U.a)(o,2),s=i[0],m=i[1],d=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(!0),we.sendMassMail(Object(_.a)(Object(_.a)({},e.config),{message:n,send_email:t}))};return r.a.createElement("div",{className:"row email_widget"},r.a.createElement("div",{className:"col-12"},e.prompt),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("textarea",{className:"form-control",value:n,placeholder:"enter message",disabled:s,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"col-12 text-center mt-2"},r.a.createElement(ee,{label:"send",onClick:function(){d().then((function(t){window.confirm("You are about to send ".concat(t.length," emails."))?d(!0).then((function(){window.alert("emails have been sent"),e.finished()})).catch((function(){return window.alert("unable to send emails")})).then((function(){return m(!1)})):m(!1)})).catch((function(){return window.alert("unable to send message")}))},disabled:""===n,busy:s,btnClass:"btn btn-sm btn-outline-success"}),r.a.createElement("button",{className:"btn btn-sm btn-outline-info ml-2",onClick:function(){window.confirm("do you want to cancel this email?")&&e.finished()},disabled:s},"cancel")))},Oe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,menuItems:[],deliveryDay:new G(""),deliveryWindows:[],deleting:!1,sendEmail:!1},e.componentDidMount=function(){var t=e.props.match.params;e.refreshDay(t.id)},e.delete=function(){window.confirm("are you sure you want to delete this delivery menu?")&&(e.setState({deleting:!0}),W.delete(e.state.deliveryDay.id).then((function(){return e.props.history.push({pathname:"/dashboard/deliveries"})})).catch((function(){return window.alert("unable to delete")})).then((function(){return e.setState({deleting:!1})})))},e.itemSelected=function(t){"string"!==typeof t&&oe.add(new _e(e.state.deliveryDay.id,t.id,!1,t.price)).then((function(t){var a=e.state.deliveryDay;a.day_items.unshift(t),e.setState({deliveryDay:a})})).catch((function(e){return window.alert("unable to add menu item")}))},e.refreshDay=function(t){W.get(t).then((function(t){e.setState({deliveryDay:t,loading:!1})})).catch((function(e){return window.alert("Unable to load week")}))},e.search=function(e,t){le.pagedSearchResults(1,e).then((function(e){var a=[];e.results.forEach((function(e){return a.push({text:e.name,object:e})})),t(a)})).catch((function(){return window.alert("unable to search menu items")}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"row delivery_day_component"},r.a.createElement("div",{className:"col-12 delivery_day_component__header"},r.a.createElement("h3",null,"delivery menu"),r.a.createElement("div",{className:"delivery_day_component__date"},K.asFullDate(this.state.deliveryDay.date)," -\xa0"),r.a.createElement("div",{className:"delivery_day_component__date"},K.asFullDate(this.state.deliveryDay.end_date)),r.a.createElement("div",{className:"clear_both"}),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 mb-2"},r.a.createElement(ye.b,{className:"btn btn-sm btn-outline-info",to:"/dashboard/deliveries"},"go back"),r.a.createElement("button",{className:"btn btn-sm btn-outline-primary float-right ml-2"},"send email"),r.a.createElement(ee,{label:"delete",onClick:this.delete,busy:this.state.deleting,btnClass:"btn btn-sm btn-outline-danger",outerClass:"float-right"}),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 delivery_day_component__search_widget mb-2"},r.a.createElement(ue,{serviceFunction:le.pagedSearchResults,itemSelected:this.itemSelected})),this.state.deliveryDay.day_items.map((function(t){return r.a.createElement("div",{className:"col-12 col-md-3",key:"dd_".concat(t.id)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(Ee,{item:t,refreshItems:function(){return e.refreshDay(e.state.deliveryDay.id)}}))))})),this.state.sendEmail&&r.a.createElement("div",{className:"col-12 delivery_window_edit__emailer"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement(Ne,{finished:function(){return e.setState({sendEmail:!1})},prompt:"this email will be sent to all customers who have ordered from this delivery menu",config:{email_type:"delivery_day",entity_id:this.state.deliveryDay.id}})))))}}]),a}(r.a.Component),je=(a(33),function(){var e=Object(c.useState)(""),t=Object(U.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)("en"),o=Object(U.a)(l,2),i=o[0],s=o[1],m=Object(c.useState)(!1),d=Object(U.a)(m,2),u=d[0],h=d[1],v=Object(p.g)();return r.a.createElement("div",{className:"row new_menu_item mt-3"},!1===u?r.a.createElement("div",{className:"col-12 new_menu_item__add_link",onClick:function(){return h(!0)}},"+ add new menu item"):r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"text",className:"form-control",id:"new_menu_item__name",value:a,placeholder:"New Menu Item Name",onChange:function(e){return n(e.target.value)}})),r.a.createElement("div",{className:"col-12 mt-1"},r.a.createElement("select",{className:"form-control",defaultValue:i,onChange:function(e){return s(e.target.value)}},r.a.createElement("option",{value:"en"},"Entree"),r.a.createElement("option",{value:"ap"},"Appetizer"),r.a.createElement("option",{value:"si"},"Side Item"),r.a.createElement("option",{value:"de"},"Dessert"))),r.a.createElement("div",{className:"col-12 mt-1 text-center"},r.a.createElement("button",{className:"btn btn-outline-success new_menu_item__submit",disabled:""===a,onClick:function(){le.add({name:a,category:i}).then((function(e){v.push({pathname:"/dashboard/menu/edit/".concat(e.id,"/")}),n(""),s("en")})).catch((function(e){return window.alert("unable to add new menu item")}))}},"Add New Item"))))});!function(e){e[e.menu=0]="menu",e[e.deliveryDay=1]="deliveryDay"}(se||(se={}));var Ce,Se=function(){var e=Object(p.h)(),t=Object(c.useState)(new me),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(1),i=Object(U.a)(o,2),s=i[0],m=i[1];Object(c.useEffect)((function(){d(1)}),[e.category]);var d=function(t,a){m(t),le.search(e.category,"category",t).then((function(e){l(e)})).catch((function(e){window.alert("Unable To Load Menu Items")}))},u=n.results.sort((function(e,t){return e.name>t.name?1:-1})),h="en"===e.category?"entree":"ap"===e.category?"appetizer":"si"===e.category?"side":"dessert";return r.a.createElement("div",{className:"row menu_items mt-3"},r.a.createElement("div",{className:"col-12 menu__title"},r.a.createElement("h3",null,h,"s"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(je,{key:Math.random().toString()})),r.a.createElement("div",{className:"d-none d-md-block col-md-8"}),r.a.createElement("div",{className:"col-12 text-right"},r.a.createElement(ce,{numItems:n.count,currentPage:s,gotoPage:d})),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),u.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0})).map((function(e){return r.a.createElement("div",{className:"col-6 col-md-3 menu_items__item",key:"mi_".concat(e.id)},r.a.createElement(ye.b,{className:"row",to:"/dashboard/menu/edit/".concat(e.id,"/")},r.a.createElement("div",{className:"col-12 menu_items__menuitem_name no_wrap_text"},e.name),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"menu_items__image"},r.a.createElement("img",{src:"".concat(k.API_URL+k.UPLOADS_PATH,"/").concat(e.image),alt:e.name})))))})))},ke=(a(99),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).fileElement=null,n.reloadAttempted=!0,n.componentDidMount=function(){n.props.imageURL&&n.loadImage(n.props.imageURL)},n.componentDidUpdate=function(e){},n.clearImage=function(e){n.props.disabled||(e.preventDefault(),n.setState({hasImage:!1}),n.props.newImageLoaded(null))},n.loadImage=function(e){n.toDataURL(e).then((function(e){window.document.getElementById(n.props.id).src=e,n.setState({loadingImage:!1})})).catch((function(t){window.setTimeout((function(){n.reloadAttempted?n.setState({loadingImage:!1,hasImage:!1}):(n.reloadAttempted=!0,n.loadImage(e))}),3e3)}))},n.onInputChanged=function(e){e.target.files&&e.target.files[0]&&n.readFile(e.target.files[0]).then((function(e){console.log(e.file.size);var t=n.props.maximumSizeInMb?n.props.maximumSizeInMb:2;e.file.size>1048576*t?window.alert("Maximum File Size is ".concat(t,"Mb")):(window.document.getElementById(n.props.id).src=e.result,n.setState({currentImage:e.dataURL,hasImage:!0}),n.props.newImageLoaded(e.file))}))},n.open=function(){var e;n.props.disabled||null===(e=n.fileElement)||void 0===e||e.click()},n.readFile=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(a){var n=a.target.result;n=n.replace(";base64",";name=".concat(e.name,";base64")),t({file:e,dataURL:n,result:a.target.result})},n.readAsDataURL(e)}))},n.state={hasImage:""!==e.imageURL&&null!==e.imageURL,currentImage:null,loadingImage:""!==e.imageURL&&null!==e.imageURL},n}return Object(m.a)(a,[{key:"toDataURL",value:function(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.onload=function(){if("text/html"!==n.response.type){var e=new FileReader;e.onloadend=function(){var a;t(null===(a=e.result)||void 0===a?void 0:a.toString())},e.readAsDataURL(n.response)}else a()},n.open("GET",e),n.responseType="blob",n.send()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"image_uploader ".concat(this.props.disabled?"":"image_uploader--active")},r.a.createElement("div",{className:"inner",onClick:this.open},r.a.createElement("img",{src:"",alt:"question",id:this.props.id,className:this.state.hasImage?"":"hidden"}),r.a.createElement("input",{type:"file",id:"xxx",ref:function(t){return e.fileElement=t},onChange:this.onInputChanged,accept:this.props.allowedFileTypes?this.props.allowedFileTypes:""}),!this.state.hasImage&&!this.props.disabled&&r.a.createElement("div",{className:"no-image image_uploader-overlay"},r.a.createElement("span",null,this.props.uploadPrompt||"Click to  Upload Image"))),this.state.hasImage&&!this.props.disabled&&r.a.createElement("div",{className:"remove-btn",onClick:this.clearImage},"X"),this.state.loadingImage&&r.a.createElement("div",{className:"loading-image image_uploader-overlay"},r.a.createElement("span",null,"Loading Image...")))}}]),a}(r.a.Component)),De=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).itemSelected=function(e){n.setState({showChoices:!1,currentValue:e.item.name}),n.props.itemSelected(e)},n.doSearch=function(e,t){n.setState({currentValue:t}),""!==t?we.searchRecipesAndIngredients(t).then((function(e){n.setState({results:e,showChoices:!0}),n.props.itemSelected(t)})).catch((function(){return window.alert("unable to search")})):n.setState({showChoices:!1})},n.state={results:[],showChoices:!1,currentValue:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("fieldset",{disabled:this.props.disabled},r.a.createElement("div",{className:"row search_widget",onBlur:function(){return e.setState({showChoices:!1,currentValue:""})}},r.a.createElement("div",{className:"col-12"},r.a.createElement(ie,{key:Math.random(),id:"search_widget__InputWidget",type:"",initialValue:this.state.currentValue,onUpdate:this.doSearch,placeholder:"name of ingredient or recipe to add",defaultUpdateValue:""})),r.a.createElement("div",{className:"col-12 search_widget_results--".concat(this.state.showChoices?"show":"hide")},r.a.createElement("div",{className:"search_widget_results__content"},this.state.results.map((function(t){return r.a.createElement("div",{key:"search_result_".concat(t.item.id.toString()+t.item.name),className:"row search_widget_default_display"},r.a.createElement("div",{className:"row search_widget__result",onClick:function(){return e.itemSelected(t)}},r.a.createElement("div",{className:"col-12 result__name"},t.item.name)))}))))))}}]),a}(r.a.Component),xe=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;Object(s.a)(this,e),this.item_type=void 0,this.item_id=void 0,this.component_quantity=void 0,this.component_unit=void 0,this.is_add_on=void 0,this.add_on_name=void 0,this.add_on_price=void 0,this.item_type=t,this.item_id=a,this.component_quantity=n,this.component_unit=c,this.is_add_on=r,this.add_on_name=l,this.add_on_price=o},Ie=["oz","lb","g","kg","fl oz","cup","pint","qt","gal","ml","l","ea"],Ae=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;return Object(s.a)(this,a),(e=t.call(this)).quantity=void 0,e.unit=void 0,e.yld=void 0,e.ingredient=void 0,e.recipe=void 0,e.scale=function(){return e.quantity},e.quantity=n,e.unit=c,e.yld=r,e.ingredient=l,e.recipe=o,e}return a}(L),Me=function(e){var t=Object(c.useState)(null),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(!1),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)(0),u=Object(U.a)(d,2),p=u[0],h=u[1],v=Object(c.useState)(""),b=Object(U.a)(v,2),_=b[0],f=b[1],g=Object(c.useState)(0),E=Object(U.a)(g,2),y=E[0],w=E[1],N=Object(c.useState)(0),O=Object(U.a)(N,2),j=O[0],C=O[1],S=Object(c.useState)(!1),k=Object(U.a)(S,2),D=k[0],x=k[1],I=Object(c.useState)(!1),A=Object(U.a)(I,2),M=A[0],P=A[1],T=null!==n&&"string"!==typeof n&&(!s||s&&""!==_)||s&&M;return r.a.createElement("fieldset",{disabled:D},r.a.createElement("div",{className:"row menu_component_add"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",{className:"float-left"},"add component"),r.a.createElement(ee,{outerClass:"float-right",btnClass:"btn btn-sm btn-outline-".concat(T?"success":"secondary"),label:"save",disabled:!T,onClick:function(){x(!0),le.attachComponent(e.menuItem,new xe(n?n.type:"name",n?n.item.id:0,y,j,s,_,p)).then((function(t){return e.addComponent(t)})).catch((function(){return window.alert("unable to add component")})).then((function(){return x(!1)}))},busy:D})),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement(De,{itemSelected:function(e){return l(e)},disabled:s&&M})),r.a.createElement("div",{className:"col-12"},r.a.createElement("fieldset",{disabled:D||M},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 col-md-2 mt-2"},r.a.createElement("h6",null,"quantity"),r.a.createElement("input",{type:"number",className:"form-control",value:y,onChange:function(e){return w(parseFloat(e.target.value))}})),r.a.createElement("div",{className:"col-6 col-md-2 mt-2"},r.a.createElement("h6",null,"unit"),r.a.createElement("select",{className:"form-control",value:j,onChange:function(e){return C(parseInt(e.target.value))}},Ie.map((function(e,t){return r.a.createElement("option",{value:t,key:"opt_".concat(e)},e)}))))))),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("div",{className:"checkbox_selector"},r.a.createElement("input",{type:"checkbox",checked:s,onChange:function(){return m(!s)}}),r.a.createElement("span",null,"is add-on"))),s&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("div",{className:"checkbox_selector"},r.a.createElement("input",{type:"checkbox",checked:M,onChange:function(){return P(!M)}}),r.a.createElement("span",null,"name only"))),r.a.createElement("div",{className:"col-6 mt-2"},r.a.createElement("h6",null,"display name"),r.a.createElement("input",{className:"form-control",value:_,onChange:function(e){return f(e.target.value)}})),r.a.createElement("div",{className:"col-6 mt-2"},r.a.createElement("h6",null,"price"),r.a.createElement("input",{type:"number",className:"form-control",value:p,onChange:function(e){return h(parseFloat(e.target.value))}})))))},Pe=new function e(){Object(s.a)(this,e),this.createStringListOfAllergensFromIngredient=function(e){var t="";return e.allergens.forEach((function(a,n){t+=a.name,n<e.allergens.length-1&&(t+=", ")})),t},this.extractAllergensFromMenuItemComponent=function(e){var t=[];return e.ingredient?t=e.ingredient.allergens.map((function(e){return e.name})):e.recipe&&e.recipe.ingredients.forEach((function(e){e.ingredient.allergens.forEach((function(e){t.indexOf(e.name)<0&&t.push(e.name)}))})),t},this.scaleRecipeIngredient=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=e.quantity/t*a/e.yld/n,r=e.unit;return 0===r&&c>15&&(c/=16,r=1),2===r&&c>99&&(c/=1e3,r=3),4===r&&c>5&&(c/=6,r=6),5===r&&c>1&&(c/=2,r=6),6===r&&c>7&&(c/=8,r=7),7===r&&c>1&&(c/=2,r=8),8===r&&c>1&&(c/=2,r=9),9===r&&c>3&&(c/=4,r=10),11===r&&c>999&&(c/=1e3,r=12),"".concat(c.toFixed(2)," ").concat(Ie[r])}},Te=function(e){var t=Object(p.g)(),a=Pe.extractAllergensFromMenuItemComponent(e.item);return r.a.createElement("div",{className:"row menu_component mt-2"},r.a.createElement("div",{className:"col-12 menu_component__title"},"price"in e.item?e.item.name:e.item.ingredient?e.item.ingredient.name:e.item.recipe.name),r.a.createElement("div",{className:"col-12 menu_component__portion"},"".concat(e.item.quantity," ").concat(Ie[e.item.unit])),r.a.createElement("div",{className:"col-12"},e.item.ingredient?r.a.createElement(c.Fragment,null,r.a.createElement("strong",null,"ingredient:")," ",e.item.ingredient.name):e.item.recipe?r.a.createElement(c.Fragment,null,r.a.createElement("strong",null,"recipe:")," ",e.item.recipe.name):"","price"in e.item?r.a.createElement(c.Fragment,null,"\xa0\xa0\xa0",r.a.createElement("strong",null,"price:")," ",e.item.price):""),a.length>0?r.a.createElement("div",{className:"col-12 menu_component__allergens"},r.a.createElement("strong",null,"allergens: "),a.map((function(e,t){return e+(t<a.length-1?",":"")}))):r.a.createElement("div",null,"\xa0"),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("button",{className:"btn btn-sm btn-outline-danger float-right",onClick:function(){return e.deleteComponent(e.item)}},"X"),(null!=e.item.ingredient||null!=e.item.recipe)&&r.a.createElement("button",{className:"btn btn-sm btn-outline-primary float-right mr-2",onClick:function(){return t.push({pathname:"/dashboard/".concat(e.item.ingredient?"ingredient":"recipe","/edit/").concat(e.item.ingredient?e.item.ingredient.id:e.item.recipe.id)})}},e.item.ingredient?r.a.createElement(c.Fragment,null,"goto ingredient"):e.item.recipe?r.a.createElement(c.Fragment,null,"goto recipe"):"")))},Fe=a(31),ze=a.n(Fe),Re=(a(100),function(e){return r.a.createElement("div",{className:"print_button"},r.a.createElement("img",{src:ze.a,alt:"print ".concat(e.prompt)}))}),Ue=new function e(){Object(s.a)(this,e),this.download=function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},this.print=function(e){}},Le=function(e){var t=Object(c.useState)(e.menuItem.components),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(e.menuItem.add_ons),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)(!1),u=Object(U.a)(d,2),p=u[0],h=u[1],v=Object(c.useState)(""),b=Object(U.a)(v,2),_=b[0],f=(b[1],e.menuItem),g=function(t){var a="price"in t;window.confirm("are you sure you want to remove this ".concat(a?"add-on":"component","?"))&&le.deleteComponent(e.menuItem,t.id,a).then((function(){a?(f.add_ons=s.filter((function(e){return e.id!==t.id})),m(f.add_ons)):(f.components=n.filter((function(e){return e.id!==t.id})),l(f.components))})).catch((function(){return window.alert("unable to delete component")}))};return r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"menu_components row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"float-left"},"components"),r.a.createElement("div",{className:"d-none d-md-block float-right",onClick:function(){le.generatePlatingSheet(e.menuItem).then((function(e){return Ue.download("plating_sheet.pdf",e)})).catch((function(){return window.alert("unable to download plating sheet")}))}},r.a.createElement(Re,{prompt:"sheet"})),r.a.createElement("button",{className:"btn btn-sm btn-outline-".concat(p?"warning":"primary"," float-right"),onClick:function(){return h(!p)}},p?"cancel ":"","add")),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),p&&r.a.createElement("div",{className:"col-12"},r.a.createElement(Me,{menuItem:e.menuItem,addComponent:function(e){h(!1),"price"in e?(f.add_ons=[e].concat(Object(X.a)(s)),m(f.add_ons)):(f.components=[e].concat(Object(X.a)(n)),l(f.components))}}),r.a.createElement("hr",null)),s.length>0&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 menu_components__components_type"},"add-ons"),s.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6",key:"addon_".concat(Math.random())},r.a.createElement(Te,{item:e,deleteComponent:g}))}))),n.length>0&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 menu_components__components_type mt-2"},"components"),n.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6",key:"comp_".concat(Math.random())},r.a.createElement(Te,{item:e,deleteComponent:g}))})))),r.a.createElement("div",{className:"print_sheet"},_))},Be=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="menu_category",e.updateIndexes=function(t){return e._post("".concat(e.viewPath,"/update_indexes/"),t)},e}return a}(T));!function(e){e[e.add=0]="add",e[e.edit=1]="edit",e[e.view=2]="view",e[e.deliveryDay=3]="deliveryDay"}(Ce||(Ce={}));var Ve=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).temporaryImage=null,e.state={menuItem:new be,loaded:!1,saving:!1,viewingServings:!1,hasBeenUpdated:!1,menuCategories:[]},e.allergenSelected=function(t){var a=e.state.menuItem;a.allergens=e.checkboxesToString(a.allergens,t.target.id),e.setState({menuItem:a,hasBeenUpdated:!0})},e.componentDidMount=function(){var t,a=e.props.match.params;le.get(a.id).then((function(t){e.setState({menuItem:t,loaded:!0})})).catch((function(e){return window.alert("Unable to load menu item")})),(null===(t=e.props.operator.settings)||void 0===t?void 0:t.type)===V&&Be.get().then((function(t){e.setState({menuCategories:t})})).catch((function(e){return window.alert("unable to load categories")}))},e.checkboxesToString=function(e,t){null===e&&(e="");var a=e.split(":");console.log(a,e),-1!==a.indexOf(t)?a.splice(a.indexOf(t),1):a.push(t);var n=a.join(":");return":"===n.substr(0,1)?n.substr(1):n},e.onNewImageLoaded=function(t){if(e.temporaryImage=t,null===t){var a=e.state.menuItem;a.image=null,e.setState({menuItem:a})}e.setState({hasBeenUpdated:!0})},e.proteinSelected=function(t){var a=e.state.menuItem;a.proteins=e.checkboxesToString(a.proteins,t.target.id),e.setState({menuItem:a,hasBeenUpdated:!0})},e.save=function(){e.setState({saving:!0});var t=e.state.menuItem;e.temporaryImage?t.image=e.temporaryImage:"string"===typeof t.image&&delete t.image,le.update(t,null!==t.image&&"string"!==typeof t.image).then((function(a){e.setState({menuItem:t,saving:!1,hasBeenUpdated:!1})}))},e.updateMenuItem=function(t){var a=e.state.menuItem;a[t.target.name]=t.target.value,e.setState({menuItem:a,hasBeenUpdated:!0})},e.updateOptions=function(t){var a=e.state.menuItem;switch(t.target.id){case"spicy":a.spicy=!a.spicy,e.setState({menuItem:a,hasBeenUpdated:!0});break;case"price":a.price=parseFloat(t.target.value),e.setState({menuItem:a,hasBeenUpdated:!0})}},e}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this;if(!this.state.loaded)return r.a.createElement(ne,null);var a=(null===(e=this.props.operator.settings)||void 0===e?void 0:e.type)===V;return r.a.createElement("div",{className:"row menuedititem justify-content-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"edit menu item"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-sm btn-outline-info",onClick:function(){return t.props.history.goBack()}},"back"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",null,"name"),r.a.createElement("input",{id:"menuedititem__name",type:"text",className:"form-control",placeholder:"Meal Name",name:"name",value:this.state.menuItem.name,onChange:this.updateMenuItem,disabled:!1})),r.a.createElement("div",{className:"col-12 col-md-8 mt-2"},r.a.createElement("h5",null,"description"),r.a.createElement("textarea",{className:"form-control",rows:2,placeholder:"Description",name:"description",value:this.state.menuItem.description,onChange:this.updateMenuItem,disabled:!1})),r.a.createElement("div",{className:"col-12 col-md-4 menuedititem__imagearea menuedititem__area mt-2"},r.a.createElement(ke,{id:"image_uploader__menuItem-".concat(this.state.menuItem.id),imageURL:null!==this.state.menuItem.image?k.API_URL+k.UPLOADS_PATH+"/"+this.state.menuItem.image:"",newImageLoaded:this.onNewImageLoaded,maximumSizeInMb:100,allowedFileTypes:".jpg,.png,.jpeg",disabled:!1})),r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-6 mt-2"},r.a.createElement("h5",null,"category"),r.a.createElement("select",{name:"".concat(a?"menu_category":"category"),className:"form-control",defaultValue:this.state.menuItem.category,disabled:!1,onChange:this.updateMenuItem},a?r.a.createElement("div",null):r.a.createElement(c.Fragment,null,r.a.createElement("option",{value:"en"},"Entree"),r.a.createElement("option",{value:"ap"},"Appetizer"),r.a.createElement("option",{value:"si"},"Side Item"),r.a.createElement("option",{value:"de"},"Dessert")))),r.a.createElement("div",{className:"col-6 mt-2"},r.a.createElement("h5",null,"price"),r.a.createElement("input",{type:"text",name:"price",className:"form-control",value:this.state.menuItem.price,disabled:!1,onChange:this.updateMenuItem}))),r.a.createElement("div",{className:"col-3 mt-2"},r.a.createElement("div",{className:"checkbox_selector"},r.a.createElement("input",{type:"checkbox",id:"spicy",checked:this.state.menuItem.spicy,onChange:this.updateOptions}),r.a.createElement("span",null,"Spicy"))),this.state.menuItem.spicy&&r.a.createElement("div",{className:"col-9 mt-2"},r.a.createElement("select",{name:"spiciness",className:"form-control",defaultValue:this.state.menuItem.spiciness,disabled:!1,onChange:this.updateMenuItem},r.a.createElement("option",{value:pe},"spicy only"),r.a.createElement("option",{value:ve},"mild, med, spicy"),r.a.createElement("option",{value:he},"not spicy, mild, med, spicy"))),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("h5",null,"allergens"),[{name:"Dairy",code:"milk"},{name:"Soy",code:"soy"},{name:"Shellfish",code:"shell"},{name:"Egg",code:"egg"},{name:"Fish",code:"fish"},{name:"Nuts",code:"nuts"},{name:"Peanuts",code:"peanut"},{name:"Wheat",code:"wheat"}].map((function(e){return r.a.createElement("div",{className:"checkbox_selector",key:e.code},r.a.createElement("input",{type:"checkbox",id:e.code,checked:-1!==t.state.menuItem.allergens.indexOf(e.code),onChange:t.allergenSelected}),r.a.createElement("span",null,e.name))}))),r.a.createElement("div",{className:"col-12 text-right"},r.a.createElement(ee,{outerClass:"float-right",btnClass:"btn btn-outline-".concat(this.state.hasBeenUpdated?"success":"secondary"),label:"save",onClick:this.save,busy:this.state.saving,disabled:!this.state.hasBeenUpdated})))),r.a.createElement("div",{className:"col-12 d-block d-md-none"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 col-md-6 mt-2 mb-2 mt-md-0"},r.a.createElement(Le,{menuItem:this.state.menuItem})))))}}]),a}(r.a.Component),Ye=Object(v.b)((function(e){return{operator:e.operatorReducer}}))(Ve),He=function(){return r.a.createElement("div",{className:"row menu"},r.a.createElement("div",{className:"col-12"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/dashboard/menu/edit/:id/",component:Ye}),r.a.createElement(p.b,{path:"/dashboard/menu/:category/",component:Se}))))},qe=(a(101),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:"",loggingIn:!1},e.updateData=function(t){e.setState(Object(q.a)({},t.target.id,t.target.value))},e.login=function(){""!==e.state.email&&""!==e.state.password&&F.authenticate(e.state.email,e.state.password).then((function(t){console.log(t),e.props.login(t.user,t.operator_token)})).catch((function(e){window.alert("Invalid Credentials")}))},e}return Object(m.a)(a,[{key:"render",value:function(){return this.props.auth.loggedIn?r.a.createElement(p.a,{to:"/dashboard/menu"}):r.a.createElement("div",{className:"row justify-content-center",id:"login-panel"},r.a.createElement("div",{className:"class-12 class-md-6"},r.a.createElement("div",{className:"wrapper fadeInDown"},r.a.createElement("div",{id:"formContent"},r.a.createElement("div",{className:"fadeIn first"},r.a.createElement("h5",null,"Welcome to the Operator Dashboard!")),r.a.createElement("form",null,r.a.createElement("input",{type:"text",className:"fadeIn second",id:"email",placeholder:"email",value:this.state.email,onChange:this.updateData}),r.a.createElement("input",{type:"password",className:"fadeIn third",id:"password",placeholder:"password",value:this.state.password,onChange:this.updateData}),r.a.createElement("input",{type:"button",className:"fadeIn fourth",value:"Log In",onClick:this.login})),r.a.createElement("div",{id:"formFooter"},r.a.createElement("a",{className:"underlineHover",href:"/"},"Forgot Password?"))))))}}]),a}(r.a.Component)),We=Object(v.b)((function(e){return{auth:e.authReducer}}),(function(e){return{login:Object(h.b)(S,e)}}))(qe),Ge=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="order",e.getCompletedOrders=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/get_completed/?date=").concat(t))},e}return a}(T)),Qe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loading:!1,orders:[],editId:0,startDate:"",endDate:"",currentPage:0,paginationCount:0},e.orderStatuses=["canceled","pending","paid"],e.componentDidMount=function(){e.changePage(1)},e.changePage=function(t,a){e.setState({loading:!0,currentPage:t}),Ge.pagedSearchResults(t,a).then((function(t){e.setState({orders:t.results,loading:!1,paginationCount:t.count})}))},e.updateData=function(t){e.setState(Object(q.a)({},t.target.id,t.target.value))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return this.state.editId>0?r.a.createElement(p.a,{to:"/dashboard/orders/edit/".concat(this.state.editId)}):r.a.createElement("div",{className:"row orders"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(ie,{id:"orders_search_input",type:"text",onUpdate:function(t,a){return e.changePage(e.state.currentPage,a)}}),r.a.createElement(ce,{numItems:this.state.paginationCount,currentPage:this.state.currentPage,gotoPage:this.changePage}))),this.state.loading&&r.a.createElement(ne,null),this.state.loading||0!==this.state.orders.length?r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"d-none d-md-block"},"Order ID"),r.a.createElement("th",null,"Contact"),r.a.createElement("th",{className:"d-none d-md-block"},"Date"),r.a.createElement("th",null,"Status"))),r.a.createElement("tbody",null,this.state.orders.map((function(t,a){var n=[];return t.items.forEach((function(e){e.cart_item.quantity,e.cart_item.quantity*e.cart_item.price,-1===n.indexOf(e.cart_item.delivery_date)&&n.push(e.cart_item.delivery_date)})),r.a.createElement("tr",{key:t.id,className:a%2?"":"orders-line-highlight",onClick:function(){return e.setState({editId:t.id})}},r.a.createElement("td",null,t.contact_name),r.a.createElement("td",{className:"d-none d-md-block"},t.public_id),r.a.createElement("td",null,t.email,r.a.createElement("br",null),t.phone_number),r.a.createElement("td",{className:"d-none d-md-block"},K.asFullDate(t.created_at)),r.a.createElement("td",{className:"order-status-".concat(t.order_status)},e.orderStatuses[t.order_status]))})))):r.a.createElement("div",null,"No Orders Found")))}}]),a}(r.a.Component),Je=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="order_item",e.getCompleted=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/get_completed/?date=").concat(t))},e}return a}(T)),Ke=(a(102),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={pullDate:"",orderItems:[],pullType:"route",orders:[]},e.componentDidMount=function(){},e.loadData=function(){"prep"===e.state.pullType?e.loadOrderItems():e.loadOrders()},e.loadOrderItems=function(){Je.getCompleted(e.state.pullDate).then((function(t){0!==t.length?e.setState({orderItems:t},(function(){return window.print()})):window.alert("There are not items for this day")})).catch((function(e){return window.alert("Unable to display")}))},e.loadOrders=function(){Ge.getCompletedOrders(e.state.pullDate).then((function(t){if(0!==t.length)if("route"===e.state.pullType){var a="Address line 1\tAddress line 2\tCity\tState\tZip\tName\tEmail Address\tPhone Number\tExternal ID\tOrder Count\tDriver\n",n=[];t.forEach((function(t){(n=t.items.filter((function(t){return t.cart_item.delivery_date===e.state.pullDate}))).length>0&&(a+="".concat(t.street_address,"\t").concat(t.unit,"\t").concat(t.city,"\tCA\t").concat(t.zip,"\t").concat(t.contact_name,"\t").concat(t.email,"\t").concat(t.phone_number,"\t").concat(t.public_id,"\t").concat(n.length,"\tLee\n"))}));var c=new Blob([a],{type:"text/plain"}),r=document.createElement("a");r.download="delivery_route_".concat(e.state.pullDate,".tsv"),r.href=window.URL.createObjectURL(c),r.click()}else e.setState({orders:t},(function(){return window.print()}));else window.alert("There are not items for this day")})).catch((function(e){return window.alert(e)}))},e.updateData=function(t){e.setState(Object(q.a)({},t.target.id,t.target.value))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6 export-panel"},r.a.createElement("select",{id:"pullType",className:"control-form",onChange:this.updateData,defaultValue:this.state.pullType},r.a.createElement("option",{value:"prep"},"Prep List"),r.a.createElement("option",{value:"delivery_tags"},"Delivery Tags"),r.a.createElement("option",{value:"route"},"Route CSV")),r.a.createElement("br",null),r.a.createElement("br",null),"Select a date:",r.a.createElement("input",{type:"date",id:"pullDate",className:"form-control",value:this.state.pullDate,onChange:this.updateData}),r.a.createElement("button",{className:"btn btn-outline-success mt-2",onClick:this.loadData},"Print")),this.state.orderItems.length+this.state.orders.length>0&&r.a.createElement("div",{className:"col-12 print_sheet"},"prep"===this.state.pullType?r.a.createElement(Ze,{orderItems:this.state.orderItems,date:this.state.pullDate}):r.a.createElement(Xe,{orders:this.state.orders,date:this.state.pullDate})))}}]),a}(r.a.Component));function Xe(e){return r.a.createElement("div",{className:"delivery_tags_print"},e.orders.map((function(t){var a=t.items.filter((function(t){return t.cart_item.delivery_date===e.date}));return r.a.createElement(c.Fragment,{key:"order_".concat(t.id)},r.a.createElement("div",{className:"quarter-page"},r.a.createElement("span",{className:"contact-info"},t.contact_name),r.a.createElement("span",{className:"street-address"},t.street_address," ",t.unit),r.a.createElement("span",{className:"street-address"},t.city," ",t.zip),r.a.createElement("span",{className:"contact-info"},t.phone_number),r.a.createElement("b",null,"Items:"),r.a.createElement("div",{className:"delivery-tag-items"},a.map((function(e){return r.a.createElement("div",{className:"delivery-tag-item",key:"oi_".concat(e.id)},e.cart_item.quantity.toString()+" "+Z.extractCartItemDescription(e.cart_item))}))),t.notes&&r.a.createElement("div",{className:"delivery-instructions"},r.a.createElement("br",null),"_______________________________",r.a.createElement("h4",null,"Delivery Instructions:"),r.a.createElement("div",{className:"delivery_instructions_text"},t.notes))))})))}function Ze(e){var t=["No","mild","spicy"],a={},n="",l="",o="",i="",s=0;return e.orderItems.forEach((function(e){l=e.cart_item.menu_item.name,o=e.cart_item.menu_item.proteins.split(":").length>1&&""!==e.cart_item.protein?e.cart_item.protein:"",i=e.cart_item.menu_item.spicy?t[e.cart_item.spicy]:"",(n="".concat(l,":").concat(o,":").concat(i))in a||(a[n]={count:0,dish:l,protein:o,spicy_text:i}),a[n].count+=e.cart_item.quantity,s+=e.cart_item.quantity})),r.a.createElement(c.Fragment,null,r.a.createElement("span",{className:"print_sheet__header"},e.date," \xa0\xa0:\xa0\xa0",s," items"),r.a.createElement("table",{className:"prep-sheet"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"#"),r.a.createElement("td",null,"Dish"),r.a.createElement("td",null,"Protein"),r.a.createElement("td",null,"Spicy"),r.a.createElement("td",null,"L"),r.a.createElement("td",null,"P"))),r.a.createElement("tbody",null,Object.keys(a).sort().map((function(e,t){return r.a.createElement("tr",{className:"".concat(t%2?"":"print-row-dark"),key:e},r.a.createElement("td",null,a[e].count),r.a.createElement("td",null,a[e].dish),r.a.createElement("td",null,a[e].protein),r.a.createElement("td",null,a[e].spicy_text),r.a.createElement("td",null),r.a.createElement("td",null))})))))}var $e=1,et=2,tt=3,at=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[],v=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",b=arguments.length>12&&void 0!==arguments[12]?arguments[12]:"",_=arguments.length>13&&void 0!==arguments[13]?arguments[13]:"",f=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0;return Object(s.a)(this,a),(e=t.call(this)).order_status=void 0,e.square_payment=void 0,e.contact_name=void 0,e.phone_number=void 0,e.email=void 0,e.unit=void 0,e.street_address=void 0,e.city=void 0,e.zip=void 0,e.notes=void 0,e.items=void 0,e.uuid=void 0,e.public_id=void 0,e.nonce=void 0,e.tip=void 0,e.order_type=void 0,e.id=n,e.order_status=c,e.contact_name=r,e.phone_number=l,e.email=o,e.unit=i,e.street_address=m,e.city=d,e.zip=u,e.notes=p,e.items=h,e.uuid=v,e.public_id=b,e.nonce=_,e.tip=f,e}return a}(L),nt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this)).order_status=void 0,n.contact_name=void 0,n.phone_number=void 0,n.email=void 0,n.unit=void 0,n.street_address=void 0,n.city=void 0,n.zip=void 0,n.cart_items=void 0,n.notes=void 0,n.nonce=void 0,n.tip=void 0,n.coupon=void 0,n.id=e.id,n.order_status=e.order_status,n.contact_name=e.contact_name,n.phone_number=e.phone_number,n.email=e.email,n.unit=e.unit,n.street_address=e.street_address,n.city=e.city,n.zip=e.zip,n.notes=e.notes,n.nonce=e.nonce,n.tip=e.tip,n}return a}(L),ct=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).submit=function(){n.setState({submitting:!0}),we.sendSupportEmail(n.props.order.email,n.state.subject,n.state.body,n.state.include_order?n.props.order:null).then((function(){window.alert("Email Sent"),n.setState({subject:"",body:"",include_order:!0})})).catch((function(e){return window.alert("unable to send email")})).then((function(){return n.setState({submitting:!1})}))},n.toggleIncludeOrder=function(){console.log(n.state.include_order),n.setState({include_order:!n.state.include_order})},n.updateData=function(e){n.setState(Object(q.a)({},e.target.id,e.target.value))},n.state={subject:"Order ".concat(e.order.public_id),body:"",include_order:!0,submitting:!1},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"row order_email"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("label",null,"subject:"),r.a.createElement("input",{className:"form-control order_email__subject",id:"subject",value:this.state.subject,onChange:this.updateData,disabled:this.state.submitting})),r.a.createElement("div",{className:"col-12 mt-3"},r.a.createElement("label",null,"Message"),r.a.createElement("textarea",{className:"form-control order_email__body",id:"body",value:this.state.body,onChange:this.updateData,disabled:this.state.submitting,rows:8})),r.a.createElement("div",{className:"col-12 mt-3"},"Include Order: \xa0\xa0",r.a.createElement("input",{className:"order_email__include_order",type:"checkbox",id:"include_order",checked:this.state.include_order,onChange:this.toggleIncludeOrder,disabled:this.state.submitting})),r.a.createElement("div",{className:"col-12 mt-3"},r.a.createElement("button",{className:"btn btn-outline-success order_email__submit",disabled:""===this.state.subject||""===this.state.body||this.state.submitting,onClick:this.submit},"Send Email")))}}]),a}(r.a.Component),rt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,order:new at,updating:!1,updatesPending:!1,returnToOrders:!1},e.componentDidMount=function(){var t=e.props.match.params;Ge.get(t.id).then((function(t){return e.setState({order:t,loading:!1})})).catch((function(e){return window.alert(e)}))},e.saveUpdates=function(){e.setState({updating:!0}),Ge.update(new nt(e.state.order)).then((function(t){return e.setState({order:t,updating:!1,updatesPending:!1,returnToOrders:!0})})).catch((function(e){return window.alert(e)}))},e.updateData=function(t){var a=e.state.order;a[t.target.id]=t.target.value,e.setState({order:a,updatesPending:!0})},e}return Object(m.a)(a,[{key:"render",value:function(){if(this.state.loading)return r.a.createElement("div",null,"Loading...");if(this.state.returnToOrders)return r.a.createElement(p.a,{to:"/dashboard/orders"});var e=Z.sortOrderItemsByDate(this.state.order.items);return r.a.createElement("div",{className:"row edit_order"},r.a.createElement("div",{className:"col-12"},r.a.createElement(ye.b,{to:"/dashboard/orders"},"<<< Return to Orders"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",null,"Order ID: ",this.state.order.public_id),r.a.createElement("select",{id:"order_status",defaultValue:this.state.order.order_status,className:"order_status order_status--".concat(this.state.order.order_status),onChange:this.updateData,disabled:this.state.updating},r.a.createElement("option",{value:"0"},"Canceled"),r.a.createElement("option",{value:"1"},"Pending"),r.a.createElement("option",{value:"2"},"Paid"))),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"form-group mt-2"},r.a.createElement("label",{htmlFor:"contact_name"},"contact name"),r.a.createElement("input",{id:"contact_name",type:"text",className:"form-control",disabled:this.state.updating,value:this.state.order.contact_name,onChange:this.updateData})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"phone_number"},"phone number"),r.a.createElement("input",{id:"phone_number",type:"text",className:"form-control",disabled:this.state.updating,value:this.state.order.phone_number,onChange:this.updateData})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"city"},"city"),r.a.createElement("input",{id:"city",type:"text",className:"form-control",disabled:this.state.updating,value:this.state.order.city,onChange:this.updateData})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"zip"},"zip"),r.a.createElement("input",{id:"zip",type:"text",className:"form-control",disabled:this.state.updating,value:this.state.order.zip,onChange:this.updateData}))),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{id:"email",type:"email",className:"form-control",disabled:this.state.updating,value:this.state.order.email,onChange:this.updateData})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"street_address"},"Street Address"),r.a.createElement("input",{id:"street_address",type:"text",className:"form-control",disabled:this.state.updating,value:this.state.order.street_address,onChange:this.updateData})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"unit"},"unit"),r.a.createElement("input",{id:"unit",type:"text",className:"form-control",disabled:this.state.updating,value:this.state.order.unit,onChange:this.updateData})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"notes"},"delivery notes"),r.a.createElement("textarea",{id:"notes",className:"form-control",disabled:this.state.updating,value:this.state.order.notes,onChange:this.updateData}))),r.a.createElement("div",{className:"col-2"},r.a.createElement("pre",null,r.a.createElement("code",{className:"prettyprint"},JSON.stringify(this.state.order.square_payment,null,4)))),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-outline-success",onClick:this.saveUpdates,disabled:!this.state.updatesPending||this.state.updating},"Save Updates")),r.a.createElement("div",{className:"col-12 edit_order_deliveries"},r.a.createElement("hr",null),r.a.createElement("h5",null,"Deliveries:"),Object.keys(e).sort().map((function(t){return r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("b",null,K.asFullDate(t)),e[t].map((function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},"\xa0\xa0\xa0",e.cart_item.quantity,"\xa0",Z.extractCartItemDescription(e.cart_item)))}))))}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null),r.a.createElement("h5",null,"Email Customer:"),r.a.createElement(ct,{order:this.state.order})))}}]),a}(r.a.Component),lt=a(113),ot=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c,r,l,o,i,m,d,u){var p;Object(s.a)(this,a),(p=t.call(this)).code=void 0,p.mode=void 0,p.calculation_type=void 0,p.expire=void 0,p.start_value=void 0,p.current_value=void 0,p.remaining_uses=void 0,p.email=void 0,p.active=void 0;var h=new Date;return h.setDate(h.getDate()+60),p.id=e||-1,p.code=n||"",p.active=!1!==c,p.mode=r||0,p.calculation_type=l||0,p.expire=o||Object(lt.a)(h,"yyyy-mm-dd"),p.start_value=i||0,p.current_value=m||0,p.remaining_uses=d||0,p.email=u||"",p}return a}(L),it=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="coupon",e}return a}(T)),st=(a(51),function(e){var t=Object(c.useState)(e.coupon),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(!1),i=Object(U.a)(o,2),s=i[0],m=i[1];return r.a.createElement("tr",{className:"coupon ".concat(e.coupon.active?"":"coupon--inactive")},r.a.createElement("td",null,n.active&&r.a.createElement("button",{className:"btn btn-outline-danger coupon__deactivate",disabled:s,onClick:function(){window.confirm("Are you sure you want to deactivate:\n".concat(n.code,"\n\nCoupons cannot be reactivated!"))&&(m(!0),n.active=!1,it.update(n).then((function(t){l(t),e.couponUpdated(t)})).catch((function(e){return console.log(e)})))}},"X")),r.a.createElement("td",{className:"coupon__code"},n.code),r.a.createElement("td",{className:"coupon__mode d-none d-md-table-cell"},["standard","one off"][n.mode]),r.a.createElement("td",{className:"coupon__mode d-none d-md-table-cell"},["percentage","fixed"][n.calculation_type]),r.a.createElement("td",{className:"coupon__uses"},n.remaining_uses),r.a.createElement("td",{className:"coupon__start_value d-none d-md-table-cell"},0===e.coupon.calculation_type?"".concat(100*n.start_value,"%"):"$".concat(n.start_value.toFixed(2))),r.a.createElement("td",{className:"coupon__end_value d-none d-md-table-cell"},0===n.calculation_type?"":"$".concat(n.current_value.toFixed(2))),r.a.createElement("td",{className:"coupon__expire"},K.asFullDate(n.expire)),r.a.createElement("td",{className:"coupon__email d-none d-md-table-cell"},n.email))}),mt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,coupons:[],addingCoupon:!1,currentPage:0,paginationCount:0},e.componentDidMount=function(){e.changePages(1)},e.changePages=function(t){e.setState({currentPage:t,loading:!0}),it.pagedSearchResults(t).then((function(t){e.setState({coupons:t.results,loading:!1,paginationCount:t.count})})).catch((function(e){return console.log(e)}))},e.couponUpdated=function(t){e.setState({coupons:e.state.coupons.map((function(e){return e.id===t.id?t:e}))})},e.addCoupon=function(){e.setState({addingCoupon:!0}),it.add(new ot).then((function(t){e.props.history.push({pathname:"/dashboard/coupon/edit/".concat(t.id)})})).catch((function(e){return window.alert("Unable to create coupon")}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement(ne,null);var t=this.state.coupons.sort((function(e,t){return e.active<t.active?1:e.active>t.active?-1:0}));return r.a.createElement("div",{className:"row coupons"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"coupons"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"add_coupon",onClick:function(){return e.props.history.push({pathname:"/dashboard/coupon/add"})}},this.state.addingCoupon?"Creating coupon...":"+ Add Coupon"),r.a.createElement(ce,{numItems:this.state.paginationCount,currentPage:this.state.currentPage,gotoPage:this.changePages})),r.a.createElement("div",{className:"col-12 mt-3"},t.length>0?r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"code"),r.a.createElement("th",{className:"yes "},"mode"),r.a.createElement("th",{className:"d-none d-md-table-cell"},"calculation"),r.a.createElement("th",null,"uses"),r.a.createElement("th",{className:"d-none d-md-table-cell"},"start value"),r.a.createElement("th",{className:"d-none d-md-table-cell"},"current value"),r.a.createElement("th",null,"expire"),r.a.createElement("th",{className:"d-none d-md-table-cell"},"email"))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement(st,{coupon:t,key:"c_".concat(t.id),couponUpdated:e.couponUpdated})})))):r.a.createElement("p",null,"Coupons can be used for ad campaigns, rewarding great customers or an option to refunding")))}}]),a}(r.a.Component),dt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loaded:!1,deliveryDay:new G,startDate:"",endDate:"",duplicating:!1},e.componentDidMount=function(){var t=e.props.match.params;W.get(t.id).then((function(t){e.setState({deliveryDay:t,loaded:!0})}))},e.datesAreValid=function(){return""!==e.state.startDate&&""!==e.state.endDate&&e.state.endDate>e.state.startDate},e.duplicate=function(){window.confirm("Are you sure you want duplicate: ".concat(e.state.startDate," to ").concat(e.state.endDate))&&W.duplicateDeliveryDay(e.state.deliveryDay,e.state.startDate,e.state.endDate).then((function(t){e.props.history.push({pathname:"/dashboard/delivery/edit/".concat(t.id)})})).catch((function(e){return window.alert("Unable to duplicate")}))},e.updateData=function(t){e.setState(Object(q.a)({},t.target.id,t.target.value))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return this.state.loaded?r.a.createElement("div",{className:"row delivery_duplicate"},r.a.createElement("div",{className:"col-12 delivery_duplicate__dates"},r.a.createElement("h3",null,"duplicate delivery menu"),K.asFullDate(this.state.deliveryDay.date)," - ",K.asFullDate(this.state.deliveryDay.end_date),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},"Duplicate to:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-2 delivery_duplicate__date"},r.a.createElement("small",null,"start date"),r.a.createElement("br",null),r.a.createElement("input",{type:"date",id:"startDate",value:this.state.startDate,disabled:this.state.duplicating,onChange:this.updateData})),r.a.createElement("div",{className:"col-12 col-md-2 delivery_duplicate__date"},r.a.createElement("small",null,"end date"),r.a.createElement("br",null),r.a.createElement("input",{type:"date",id:"endDate",value:this.state.endDate,disabled:this.state.duplicating,onChange:this.updateData})))),r.a.createElement("div",{className:"col-12 mt-3"},r.a.createElement("button",{className:"btn btn-outline-success duplicate_btn",disabled:!this.datesAreValid(),onClick:this.duplicate},"Duplicate"),r.a.createElement("button",{className:"btn btn-default ml-3",onClick:function(){return e.props.history.push({pathname:"/dashboard/deliveries"})}},"Cancel")),r.a.createElement("div",{className:"col-12 delivery_duplicate_items"},r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},this.state.deliveryDay.day_items.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-3 delivery_duplicate_items__item",key:"di_".concat(e.id)},e.menu_item.name,r.a.createElement("div",{className:"delivery_duplicate_items__item_image"},r.a.createElement("img",{src:"".concat(k.API_URL+k.UPLOADS_PATH,"/").concat(e.menu_item.image),alt:e.menu_item.name})))}))))):r.a.createElement(ne,null)}}]),a}(r.a.Component),ut=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={saving:!1,coupon:new ot},e.cancel=function(){window.confirm("Are you sure you want to cancel?")&&e.props.history.push("/dashboard/coupons")},e.save=function(){e.setState({saving:!0});var t=e.state.coupon;0===t.calculation_type&&t.start_value>1&&(t.start_value=.01*t.start_value),it.add(e.state.coupon).then((function(){})).catch((function(e){return alert("unable to add coupon")})).finally((function(){return e.setState({saving:!1})}))},e.updateData=function(t){var a=e.state.coupon;a[t.target.id]=t.target.value,e.setState({coupon:a})},e}return Object(m.a)(a,[{key:"render",value:function(){return this.state.saving?r.a.createElement(ne,null):r.a.createElement("div",{className:"row justify-content-center edit_coupon"},r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement("h3",null,"Add Coupon"),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-6 mt-3"},"Mode:",r.a.createElement("select",{id:"mode",className:"form-control edit_coupon__mode",value:this.state.coupon.mode,onChange:this.updateData},r.a.createElement("option",{value:0},"standard"),r.a.createElement("option",{value:1},"one off"))),r.a.createElement("div",{className:"col-12 col-6 mt-3"},"Calculation:",r.a.createElement("select",{id:"calculation_type",className:"form-control edit_coupon__calculation_type",value:this.state.coupon.calculation_type,onChange:this.updateData},r.a.createElement("option",{value:0},"percentage"),r.a.createElement("option",{value:1},"fixed value"))),r.a.createElement("div",{className:"col-12 col-6 mt-3 edit_coupon__start_value"},"value:",r.a.createElement("input",{id:"start_value",value:this.state.coupon.start_value||"",onChange:this.updateData,className:"form-control"})),r.a.createElement("div",{className:"col-12 col-6 mt-3 edit_coupon__email"},"uses:",r.a.createElement("input",{id:"remaining_uses",type:"number",value:this.state.coupon.remaining_uses,onChange:this.updateData,className:"form-control"})),r.a.createElement("div",{className:"col-12 col-6 mt-3 edit_coupon__email"},"expire:",r.a.createElement("input",{id:"expire",value:this.state.coupon.expire,onChange:this.updateData,type:"date",className:"form-control"})),r.a.createElement("div",{className:"col-12 col-6 mt-3 edit_coupon__email"},"email:",r.a.createElement("input",{id:"email",value:this.state.coupon.email,onChange:this.updateData,className:"form-control"})),r.a.createElement("div",{className:"col-12 mt-3"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-success mr-3",onClick:this.save},"save"),r.a.createElement("button",{className:"btn btn-outline-default edit_coupon__cancel",onClick:this.cancel},"cancel"))))),this.state.saving&&r.a.createElement(ne,null))}}]),a}(r.a.Component),pt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Object(s.a)(this,a),(e=t.call(this)).email=void 0,e.code=void 0,e.active=void 0,e.id=n,e.email=c,e.code=r,e.active=l,e}return a}(L),ht=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="mailing_list",e.addUnserivcedZipcode=function(t,a){return e._post("".concat(e.appName,"/").concat(e.view,"/add_unserviced_zipcode"),{code:t,email:a})},e.confirmZipCode=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/confirm_zip_code/?zip_code=").concat(t))},e}return a}(T)),vt=function(e){var t=e.dto,a=Object(c.useState)(t.code),n=Object(U.a)(a,2),l=n[0],o=n[1],i=Object(c.useState)(t.active),s=Object(U.a)(i,2),m=s[0],d=s[1],u=Object(c.useState)(t.email),p=Object(U.a)(u,2),h=p[0],v=p[1],b=Object(c.useState)(!1),_=Object(U.a)(b,2),f=_[0],g=_[1],E=l===t.code&&m===t.active&&h===t.email;return r.a.createElement("tr",null,r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("input",{className:"form-control mailing_list__code",value:l,type:"text",onChange:function(e){return o(e.target.value)}})),r.a.createElement("td",null,r.a.createElement("input",{className:"form-control mailing_list__email",value:h,type:"email",onChange:function(e){return v(e.target.value)}})),r.a.createElement("td",null,r.a.createElement("input",{className:"mailing_list__active",type:"checkbox",checked:m,onChange:function(){return d(!m)}})),r.a.createElement("td",null,r.a.createElement(ee,{label:"save",onClick:function(){g(!0),ht.update(new pt(t.id,h,l,m)).then((function(e){t=e,g(!1)})).catch((function(e){return window.alert("unable to update entry")}))},busy:f,btnClass:"btn btn-outline-success",outerClass:"mailing_list__save_btn",disabled:E})))},bt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).addNewEntry=function(){ht.add(new pt(-1,n.state.newEmail,n.state.newCode,!0)).then((function(e){return n.setState(Object(_.a)(Object(_.a)({},n.state),{},{mailingList:[].concat(Object(X.a)(n.state.mailingList),[e]),newCode:"",newEmail:""}))})).catch((function(e){return window.alert("unable to add email \n\n this email address may already exist")}))},n.componentDidMount=function(){n.changePage(1)},n.changePage=function(e,t){n.setState({loading:!0,currentPage:e}),ht.pagedSearchResults(e,t).then((function(e){n.setState({mailingList:e.results,loading:!1,paginationCount:e.count})}))},n.state={mailingList:[],loading:!0,newCode:"",newEmail:"",currentPage:0,paginationCount:0},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row mailing_list"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"mailing list"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement(ie,{id:"search_widget",type:"text",onUpdate:function(t,a){return e.changePage(e.state.currentPage,a)}}),r.a.createElement(ce,{numItems:this.state.paginationCount,currentPage:this.state.currentPage,gotoPage:this.changePage})),r.a.createElement("div",{className:"col-12 mb-2"},r.a.createElement("h5",null,"add email address"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-3"},r.a.createElement("input",{type:"text",placeholder:"zip",value:this.state.newCode,onChange:function(t){return e.setState(Object(_.a)(Object(_.a)({},e.state),{},{newCode:t.target.value.toString()}))}})),r.a.createElement("div",{className:"col-12 col-md-3"},r.a.createElement("input",{type:"email",placeholder:"email",value:this.state.newEmail,onChange:function(t){return e.setState(Object(_.a)(Object(_.a)({},e.state),{},{newEmail:t.target.value.toString()}))}})),r.a.createElement("div",{className:"col-12 col-md-3"},r.a.createElement("button",{className:"btn btn-outline-success",onClick:this.addNewEntry},"add")))),r.a.createElement("div",{className:"col-12"},this.state.loading&&r.a.createElement(ne,null),!this.state.loading&&r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"mailing_list__zip_header d-none d-md-table-cell"},"zip"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"active"),r.a.createElement("th",null))),0===this.state.mailingList.length?r.a.createElement("div",null,"no results found"):r.a.createElement("tbody",null,this.state.mailingList.sort((function(e,t){return e.code>t.code?1:t.code>e.code?-1:0})).map((function(e){return r.a.createElement(vt,{dto:e,key:e.email})}))))))}}]),a}(r.a.Component),_t=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="mail_template",e.get_template_by_slug=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/get_template_by_slug/?slug=").concat(t))},e}return a}(T)),ft=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c){var r;return Object(s.a)(this,a),(r=t.call(this)).slug=void 0,r.text=void 0,r.options=void 0,r.slug=e||"",r.text=n||"",r.options=c||{},r}return a}(L),gt=(a(103),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).saveUpdates=function(){n.setState({updating:!0});var e=n.state.template;e.text=n.state.text,e.id<0?(e.slug=n.props.templateSlug,e.options="",_t.add(e).then((function(){return n.setState({originalText:n.state.text})})).catch((function(e){return window.alert("unable to save")})).then((function(){return n.setState({updating:!1})}))):_t.update(e).then((function(){return n.setState({originalText:n.state.text})})).catch((function(e){return window.alert("unable to update")})).then((function(){return n.setState({updating:!1})}))},n.state={loading:!0,updating:!1,template:new ft,text:"",originalText:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;_t.get_template_by_slug(this.props.templateSlug).then((function(t){e.setState({text:t.text,originalText:t.text,template:t,loading:!1})})).catch((function(){})).then((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(ne,null):r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"row mail_template"},r.a.createElement("div",{className:"col-12"},this.props.templateSlug.replace(/-/g," ")),r.a.createElement("div",{className:"col-12 "},r.a.createElement("textarea",{className:"mail_template__body",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})},disabled:this.state.updating}),"(",this.state.text.length," characters)"),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-".concat(this.state.updating||this.state.text===this.state.originalText?"default":"success"),onClick:function(){return e.saveUpdates()},disabled:this.state.updating||this.state.text===this.state.originalText},"Update"))))}}]),a}(r.a.Component)),Et=function(){return r.a.createElement("div",{className:"row mail_template"},r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("h3",null,"mass mail templates"),r.a.createElement("hr",null)),["upcoming_delivery","upcoming_delivery_day","newsletter"].map((function(e){return r.a.createElement(gt,{templateSlug:e,key:e})})))},yt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={who:"all_customers",deliveryDays:[],deliveryWindows:[],message:"",deliveryWindowId:0,deliveryDate:"",deliveryDay:new G,includeSamples:!1},e.componentDidMount=function(){},e.goodToSend=function(){var t=e.state.who;return""!==e.state.message&&("all_customers"==t||"delivery_window"==t||"upcoming_delivery_days"==t||"upcoming_delivery"==t&&""!==e.state.deliveryDate)},e.sendMail=function(){var t="Send to all customers",a={};switch(e.state.includeSamples&&(a.include_menu_sample=!0),e.state.who){case"delivery_window":t="Send to customers in the selected delivery window.",a.delivery_window=e.state.deliveryWindowId;break;case"upcoming_delivery":t="Send to customers receiving a delivery on: ".concat(e.state.deliveryDate),a.delivery_date=e.state.deliveryDate;break;case"upcoming_delivery_days":t="Send to customers in the delivery days ".concat(e.state.deliveryDay.date," to ").concat(e.state.deliveryDay.end_date);break;default:a.all_customers=!0}window.confirm("You about to initiate the following: \n\n".concat(t,"\n\nContinue?"))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row mass_mailer justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"mass mailer"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("label",null,"message:"),r.a.createElement("textarea",{className:"mass_mailer__message form-control",value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}}),"(",this.state.message.length," characters)"),r.a.createElement("div",{className:"col-12 mt-3 mass_mailer_send_to"},"send to:",r.a.createElement("br",null),r.a.createElement("div",{className:"mass_mailer_send_to__option"},r.a.createElement("input",{type:"radio",name:"to",id:"all_customers",checked:"all_customers"===this.state.who,onChange:function(){return e.setState({who:"all_customers"})}})," all customers",r.a.createElement("br",null),r.a.createElement("span",null,"anyone who has completed an order")),r.a.createElement("div",{className:"mass_mailer_send_to__option"},r.a.createElement("input",{type:"radio",name:"to",id:"delivery_window",disabled:0===this.state.deliveryWindows.length,checked:"delivery_window"===this.state.who,onChange:function(){return e.setState({who:"delivery_window"})}})," delivery window",r.a.createElement("br",null),r.a.createElement("span",null,"customers in the window selected below")),r.a.createElement("div",{className:"mass_mailer_send_to__option"},r.a.createElement("input",{type:"radio",name:"to",id:"upcoming_delivery",checked:"upcoming_delivery"===this.state.who,onChange:function(){return e.setState({who:"upcoming_delivery"})}})," upcoming delivery",r.a.createElement("br",null),r.a.createElement("span",null,"customers receiving a delivery on the date selected below")),r.a.createElement("div",{className:"mass_mailer_send_to__option"},r.a.createElement("input",{type:"radio",name:"to",id:"upcoming_delivery_days",disabled:0===this.state.deliveryDays.length,checked:"upcoming_delivery_days"===this.state.who,onChange:function(){return e.setState({who:"upcoming_delivery_days"})}})," upcoming delivery days",r.a.createElement("br",null),r.a.createElement("span",null,"customers receiving an order during the deliver days selected below"))),r.a.createElement("div",{className:"col-12 mt-3 mass_mailer__options"},"upcoming_delivery"===this.state.who&&r.a.createElement(c.Fragment,null,"select a delivery day:",r.a.createElement("input",{type:"date",value:this.state.deliveryDate,onChange:function(t){return e.setState({deliveryDate:t.target.value})},className:"form-control options__upcoming_delivery"})),"upcoming_delivery_days"===this.state.who&&r.a.createElement(c.Fragment,null,"select delivery days:",r.a.createElement("select",{className:"form-control options__upcoming_delivery_days"},this.state.deliveryDays.map((function(e){return r.a.createElement("option",{key:"dd_".concat(e.id)},"".concat(e.date," to ").concat(e.end_date))})))),"delivery_window"===this.state.who&&r.a.createElement(c.Fragment,null,"select delivery window:",r.a.createElement("select",{className:"form-control options__delivery_windows",onChange:function(t){return e.setState({deliveryWindowId:parseInt(t.target.value)})}},this.state.deliveryWindows.map((function(e){return r.a.createElement("option",{key:"wi_".concat(e.id),value:e.id},e.name)}))))),r.a.createElement("div",{className:"col-12 mt-3 mass_mailer__includes"},"upcoming_delivery_days"!==this.state.who&&r.a.createElement(c.Fragment,null,r.a.createElement("input",{type:"checkbox",className:"includes__include_samples",checked:this.state.includeSamples,onChange:function(t){return e.setState({includeSamples:!e.state.includeSamples})}})," \xa0\xa0Include Upcoming Menu Samples")),r.a.createElement("div",{className:"col-12 mt-3 mass_mailer__buttons text-center"},r.a.createElement("button",{className:"btn btn-outline-success buttons__send",disabled:!this.goodToSend(),onClick:this.sendMail},"Send Mass Mail")))))}}]),a}(r.a.Component),wt=function(){return r.a.createElement("div",{className:"row mail"},r.a.createElement("div",{className:"col-12"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/dashboard/mail/list/",component:bt}),r.a.createElement(p.b,{path:"/dashboard/mail/template",component:Et}),r.a.createElement(p.b,{path:"/dashboard/mail/mass_mailer/:mail_type/:option",component:yt}),r.a.createElement(p.b,{path:"/dashboard/mail/mass_mailer",component:yt}),r.a.createElement(p.b,{path:"/dashboard/mail/",component:Et}))))},Nt=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="newsletter",e.release=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/release/?send_email=").concat(a))},e.sendEmailSample=function(t,a,n){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/send_email_sample/?email=").concat(a))},e}return a}(T)),Ot=(a(52),function(e){var t=Object(p.g)();return r.a.createElement("tr",{className:"newsletters_newsletter"},r.a.createElement("td",null,e.newsletter.title),r.a.createElement("td",null,null!==e.newsletter.release_date&&void 0!==e.newsletter.release_date?K.asFullDate(e.newsletter.release_date):r.a.createElement("span",null,"click 'Edit' to release")),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-success",onClick:function(){return t.push({pathname:"/dashboard/newsletter/edit/".concat(e.newsletter.id)})}},"Edit")))}),jt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c,r){var l;return Object(s.a)(this,a),(l=t.call(this)).title=void 0,l.content=void 0,l.release_date=void 0,l.id=e||-1,l.title=n||"",l.content=c||"",l.release_date=r||null,l}return a}(L),Ct=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={title:"",creating:!1},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row newsletter_add"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",null,"create newsletter"),r.a.createElement("input",{placeholder:"title",value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}}),r.a.createElement("button",{className:"btn btn-outline-success ml-2",disabled:""===this.state.title||this.state.creating,onClick:function(){e.setState({creating:!0}),Nt.add(new jt(-1,e.state.title,"")).then((function(t){return e.props.history.push({pathname:"/dashboard/newsletter/edit/".concat(t.id)})})).catch((function(e){console.log(e),window.alert("unable to create newsletter")}))}},"create")))}}]),a}(r.a.Component),St=Object(p.i)(Ct),kt=function(){var e=Object(c.useState)([]),t=Object(U.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)(!0),o=Object(U.a)(l,2),i=o[0],s=o[1];return Object(c.useEffect)((function(){Nt.get().then((function(e){n(e),s(!1)})).catch((function(e){return window.alert("unable to load newsletters")}))}),[]),i?r.a.createElement(ne,null):r.a.createElement("div",{className:"row newsletters"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"newsletters"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 mb-2"},r.a.createElement(St,null)),r.a.createElement("div",{className:"col-12"},a.length>0?r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"title"),r.a.createElement("th",null,"release"),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement(Ot,{newsletter:e,key:"nl_".concat(e.id)})})))):r.a.createElement("p",null,"Newsletters are a great way to keep your customers updated about new menu items and your success")))},Dt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).release=function(){n.setState({releasing:!0}),Nt.release(n.state.newsletter.id).then((function(e){0!==e.count?window.confirm("You are about to send ".concat(e.count," emails.\n\nContinue?"))?Nt.release(n.state.newsletter.id,!0).then((function(e){window.alert("".concat(e.count," emails sent"));var t=n.state.newsletter;t.release_date="a",n.setState({newsletter:t})})).catch((function(e){return window.alert("unable to release newsletter")})).then((function(){return n.setState({releasing:!1})})):n.setState({releasing:!1}):window.alert("no emails found")})).catch((function(e){return window.alert("unable to release newsletter")}))},n.saveNewsletter=function(){n.setState({saving:!0});var e=n.state.newsletter;e.title=n.state.title,e.content=n.state.content,Nt.update(e).then((function(e){n.setState({newsletter:e,title:e.title,content:e.content,saving:!1})})).catch((function(e){return window.alert("unable to update newsletter")}))},n.sendTestEmail=function(){""!==n.state.email?(n.setState({sendingEmail:!0}),Nt.sendEmailSample(n.state.newsletter.id,n.state.email).then((function(e){return window.alert("sample mail sent")})).catch((function(e){return window.alert("unable to send sample")})).finally((function(){return n.setState({sendingEmail:!1})}))):window.alert("Enter an email address")},n.state={loading:!0,saving:!1,releasing:!1,title:"",content:"",newsletter:new jt,email:"",sendingEmail:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;Nt.get(t.id).then((function(t){return e.setState({newsletter:t,title:t.title,content:t.content,loading:!1})})).catch((function(e){return window.alert("unable to load newsletter")}))}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement(ne,null);var t=this.state.title===this.state.newsletter.title&&this.state.content===this.state.newsletter.content||this.state.saving||this.state.releasing,a=-1!==this.state.content.indexOf("newsletter__email_title"),n=-1!==this.state.content.indexOf("newsletter__email_content");return r.a.createElement("div",{className:"row newsletter_edit justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"edit newsletter"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 basic_form__label"},"title: ",r.a.createElement("br",null),r.a.createElement("input",{value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})},className:"form-control newsletter_edit__title_input",disabled:this.state.saving})),r.a.createElement("div",{className:"col-12 newsletter_edit__content basic_form__label mt-2"},"content:",r.a.createElement("textarea",{className:"form-control newsletter_edit__content_input",value:this.state.content,rows:10,onChange:function(t){return e.setState({content:t.target.value})},disabled:this.state.saving}),"(",this.state.content.length," characters)",r.a.createElement(ee,{label:"save",onClick:this.saveNewsletter,busy:this.state.saving,btnClass:"btn btn-sm btn-outline-success",outerClass:"newsletter_edit__control_btn newsletter_edit__save_btn mt-2",disabled:t}),null===this.state.newsletter.release_date&&!(!t||!a||!n)&&r.a.createElement(ee,{label:"release",onClick:this.release,busy:this.state.releasing,btnClass:"btn btn-sm btn-outline-warning",outerClass:"newsletter_edit__control_btn mt-2 mr-2"})),r.a.createElement("div",{className:"col-12"},!a&&r.a.createElement("div",{className:"newsletter_edit__error"},"missing 'newsletter__email_title' class"),!n&&r.a.createElement("div",{className:"newsletter_edit__error"},"missing 'newsletter__email_content' class"),!t&&r.a.createElement("div",{className:"newsletter_edit__error"},"save updates")),r.a.createElement("div",{className:"col-12 newsletter_edit_controls mt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",null,"test email"),r.a.createElement("input",{className:"form-control newsletter_edit_controls__email_input",placeholder:"enter email address",type:"email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},disabled:!t||this.state.sendingEmail}),r.a.createElement(ee,{label:"send email test",onClick:this.sendTestEmail,busy:this.state.sendingEmail,disabled:!t||this.state.sendingEmail,btnClass:"btn btn-sm btn-outline-success",outerClass:"mt-2 newsletter_edit_controls__email_btn"}),r.a.createElement(ye.b,{className:"btn btn-sm btn-outline-info newsletter_edit__control_btn mt-2 mr-2",to:"/dashboard/newsletter"},"return to newsletters")))))))}}]),a}(r.a.Component),xt=["January","February","March","April","May","June","July","August","September","October","November","December"],It=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],At=["","Pick-Up","ASAP Delivery","Future Delivery"],Mt=[{name:"Alabama",code:"AL"},{name:"Alaska",code:"AK"},{name:"Arizona",code:"AZ"},{name:"Arkansas",code:"AR"},{name:"California",code:"CA"},{name:"Colorado",code:"CO"},{name:"Connecticut",code:"CT"},{name:"Delaware",code:"DE"},{name:"Florida",code:"FL"},{name:"Georgia",code:"GA"},{name:"Hawaii",code:"HI"},{name:"Idaho",code:"ID"},{name:"Illinois",code:"IL"},{name:"Indiana",code:"IN"},{name:"Iowa",code:"IA"},{name:"Kansas",code:"KS"},{name:"Kentucky",code:"KY"},{name:"Louisiana",code:"LA"},{name:"Maine",code:"ME"},{name:"Maryland",code:"MD"},{name:"Massachusetts",code:"MA"},{name:"Michigan",code:"MI"},{name:"Minnesota",code:"MN"},{name:"Mississippi",code:"MS"},{name:"Missouri",code:"MO"},{name:"Montana",code:"MT"},{name:"Nebraska",code:"NE"},{name:"Nevada",code:"NV"},{name:"New Hampshire",code:"NH"},{name:"New Jersey",code:"NH"},{name:"New Mexico",code:"NM"},{name:"New York",code:"NY"},{name:"North Carolina",code:"NC"},{name:"North Dakota",code:"ND"},{name:"Ohio",code:"OH"},{name:"Oklahoma",code:"OK"},{name:"Oregon",code:"OR"},{name:"Pennsylvania",code:"PA"},{name:"Rhode Island",code:"RI"},{name:"South Carolina",code:"SC"},{name:"South Dakota",code:"SD"},{name:"Tennessee",code:"TN"},{name:"Texas",code:"TX"},{name:"Utah",code:"UT"},{name:"Vermont",code:"VT"},{name:"Virginia",code:"VA"},{name:"Washington",code:"WA"},{name:"West Virginia",code:"WV"},{name:"Wisconsin",code:"WI"},{name:"Wyoming",code:"WY"}],Pt=(a(27),new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="delivery_window",e.generateProductionBoard=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/generate_production_board_pdf/?target_date=").concat(K.asDateSlug(a,!0)))},e.generateDeliveryTags=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/generate_delivery_tags_pdf/?target_date=").concat(K.asDateSlug(a,!0)))},e.generateOrdersTSV=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/generate_orders_tsv/?target_date=").concat(K.asDateSlug(a,!0)))},e.generateShoppingList=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/generate_shopping_list_pdf/?target_date=").concat(K.asDateSlug(a,!0)))},e.generateOrderingSpreadsheet=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/generate_ordering_list_tsv/?target_date=").concat(K.asDateSlug(a,!0)))},e.listWithCounts=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/list_with_counts/?target_date=").concat(t))},e.retrieveOrders=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/retrieve_orders/?target_date=").concat(J()(a).utc().format("YYYY-MM-DD")))},e.retrieveRoute=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t,"/retrieve_route/?target_date=").concat(J()(a).utc().format("YYYY-MM-DD")))},e.addZone=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/add_zone/").concat(t,"/").concat(a,"/"))},e.removeZone=function(t,a){return e._get("".concat(e.appName,"/").concat(e.view,"/remove_zone/").concat(t,"/").concat(a,"/"))},e}return a}(T))),Tt=function(e){var t=Object(c.useState)([]),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(!0),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(p.g)();if(Object(c.useEffect)((function(){Pt.listWithCounts(K.asDateSlug(e.date)).then((function(e){l(e)})).catch((function(t){return window.alert("unable to load date: ".concat(e.date.toISOString().slice(0,10)))})).then((function(){return m(!1)}))}),[]),s)return r.a.createElement(ne,null);var u=K.asDateSlug(new Date),h=!1,v=0,b=0;return"object"===typeof n&&(h=!0,null===n||void 0===n||n.forEach((function(e){v+=e.order_count,b+=e.dish_count}))),r.a.createElement("div",{className:"browser_day"},r.a.createElement("div",{className:"nopadding"},r.a.createElement("div",{className:"browser_day__date ".concat(K.asDateSlug(e.date)===u?"browser_day__date--today":""),onClick:function(){return d.push({pathname:"/dashboard/browser/day/".concat(K.asDateSlug(e.date))})}},e.date.getDate()),r.a.createElement("div",{className:"browser_day__data"},h&&0===v&&r.a.createElement("div",{className:"browser_day__no_orders"},r.a.createElement("span",{className:"d-none d-md-inline"},"no orders"),r.a.createElement("br",null),"\xa0"),h&&v>0&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"browser_day__delivery_count"},r.a.createElement("span",{className:"d-none d-md-inline"},"deliveries: "),v),r.a.createElement("div",{className:"browser_day__dish_count"},r.a.createElement("span",{className:"d-none d-md-inline"},"dishes: "),b)),!h&&r.a.createElement("div",null,"\xa0",r.a.createElement("br",null),"\xa0"))))},Ft=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).today=new Date,e.state={month:e.today.getMonth(),year:e.today.getFullYear(),viewDay:0},e.changeMonth=function(t){var a=e.state.month,n=e.state.year;(a+=t)>11?(a=0,n++):a<0&&(a=11,n--),e.props.history.push({pathname:"/dashboard/browser/".concat(a,"/").concat(n)}),e.setState({month:a,year:n})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=(new Date).getMonth(),t=(new Date).getFullYear(),a=this.props.match.params;"month"in a||"year"in a?("month"in a&&(e=parseInt(a.month)),"year"in a&&(t=parseInt(a.year))):this.props.history.push({pathname:"/dashboard/browser/".concat(e,"/").concat(t)}),this.setState({month:e,year:t})}},{key:"render",value:function(){for(var e,t=this,a=new Date(this.state.year,this.state.month,1),n=new Date(this.state.year,this.state.month+1,0).getDate(),c=1-a.getDay(),l=[];c<=n;){e=[];for(var o=0;o<7;o++)c>=1&&c<=n?e.push(r.a.createElement(Tt,{date:new Date(this.state.year,this.state.month,c)})):e.push(r.a.createElement("div",null)),c++;l.push(e)}return r.a.createElement("div",{className:"row browser_tool"},r.a.createElement("div",{className:"col-12 browser_tool__calendar"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-8 browser_tool_calendar__month_nav"},r.a.createElement("div",{className:"month_nav__arrow month_nav__item",id:"month_nav__last_month",onClick:function(){return t.changeMonth(-1)}},"<<"),r.a.createElement("div",{className:"month_nav__date month_nav__item"},xt[this.state.month],"  ",this.state.year),r.a.createElement("div",{className:"month_nav__arrow month_nav__item",id:"month_nav__next_month",onClick:function(){return t.changeMonth(1)}},">>")),r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("table",{className:""},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sun"),r.a.createElement("th",null,"Mon"),r.a.createElement("th",null,"Tue"),r.a.createElement("th",null,"Wed"),r.a.createElement("th",null,"Thu"),r.a.createElement("th",null,"Fri"),r.a.createElement("th",null,"Sat"))),r.a.createElement("tbody",null,l.map((function(e,t){return r.a.createElement("tr",{key:"week_".concat(t.toString())},e.map((function(e){return r.a.createElement("td",{key:Math.random()},e)})))}))))))))}}]),a}(r.a.Component),zt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).downloadDeliveryTags=function(){Pt.generateDeliveryTags(n.props.dto.window.id,n.props.date).then((function(e){return Ue.download("delivery_tags.pdf",e)})).catch((function(){return window.alert("unable to download prep board")}))},n.downloadOrdersSpreadsheet=function(){Pt.generateOrdersTSV(n.props.dto.window.id,n.props.date).then((function(e){return Ue.download("orders_".concat(K.asDateSlug(n.props.date),".tsv"),e)})).catch((function(){return window.alert("unable to download prep board")}))},n.downloadPrepBoard=function(){Pt.generateProductionBoard(n.props.dto.window.id,n.props.date).then((function(e){return Ue.download("prepboard.pdf",e)})).catch((function(){return window.alert("unable to download prep board")}))},n.downloadShoppingList=function(){Pt.generateShoppingList(n.props.dto.window.id,n.props.date).then((function(e){return Ue.download("shopping_list.pdf",e)})).catch((function(){return window.alert("unable to download shopping list")}))},n.downloadOrderingSheet=function(){Pt.generateOrderingSpreadsheet(n.props.dto.window.id,n.props.date).then((function(e){return Ue.download("ordering_sheet_".concat(K.asDateSlug(n.props.date),".tsv"),e)})).catch((function(){return window.alert("unable to download ordering sheet")}))},n.emailingComplete=function(){n.setState({sendingEmail:!1})},n.print=function(e){for(var t=[],a=0;a<n.state.orders.length;a++)for(var c=0;c<n.state.orders[a].items.length;c++)n.state.orders[a].items[c].cart_item.delivery_date===J()(n.props.date).utc().format("YYYY-MM-DD")&&t.push(n.state.orders[a].items[c]);switch(e){case"prep":n.props.printDocument(r.a.createElement(Lt,{orderItems:t,date:n.props.date}));break;case"delivery_tags":n.props.printDocument(r.a.createElement(Ut,{orders:n.state.orders,date:n.props.date}))}},n.state={showLoading:!0,orders:[],sendingEmail:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;Pt.retrieveOrders(this.props.dto.window.id,this.props.date).then((function(t){return e.setState({orders:t,showLoading:!1})})).catch((function(e){return window.alert("unable to load data")}))}},{key:"render",value:function(){var e=this;return this.state.showLoading?r.a.createElement(ne,null):r.a.createElement("div",{className:"row browser_window_tools mb-2"},r.a.createElement("div",{className:"col-12 browser_window_tools__inner"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.dto.window.name),r.a.createElement("div",{className:"col-6 mt-2"},"Deliveries: ",this.props.dto.order_count),r.a.createElement("div",{className:"col-6 mt-2"},"Dishes: ",this.props.dto.dish_count),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"d-none d-md-block col-md-12 browser_window_tools__controls mt-2"},r.a.createElement("button",{className:"btn btn-sm btn-outline-success",onClick:function(){return e.downloadPrepBoard()},disabled:0===this.state.orders.length},"print prep list"),r.a.createElement("button",{className:"btn btn-sm btn-outline-success ml-2",onClick:function(){return e.downloadDeliveryTags()},disabled:0===this.state.orders.length},"print delivery tags")),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("button",{className:"btn-btn btn-sm btn-outline-success",onClick:function(){return e.downloadOrdersSpreadsheet()},disabled:0===this.state.orders.length},"download orders spreadsheet")),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("button",{className:"btn-btn btn-sm btn-outline-success",onClick:function(){return e.downloadShoppingList()},disabled:0===this.state.orders.length},"download shopping list"),r.a.createElement("button",{className:"btn-btn btn-sm btn-outline-success ml-2",onClick:function(){return e.downloadOrderingSheet()},disabled:0===this.state.orders.length},"download ordering sheet")),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("button",{className:"btn btn-sm btn-outline-success",onClick:function(){return e.props.history.push({pathname:"/dashboard/delivery_planner/".concat(e.props.dto.window.id,"/").concat(J()(e.props.date).utc().format("YYYY-MM-DD"))})},disabled:0===this.state.orders.length},"route planner")),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("button",{className:"btn btn-sm btn-info",onClick:function(){return e.setState({sendingEmail:!0})},disabled:0===this.state.orders.length},"send mail"))),this.state.sendingEmail&&r.a.createElement("div",{className:"browser_window_tools__emailer"},r.a.createElement(Ne,{finished:this.emailingComplete,prompt:"send email to all deliveries",config:{email_type:"deliveries_email",entity_id:this.props.dto.window.id,target_date:K.asDateSlug(this.props.date,!0)}}))))}}]),a}(r.a.Component),Rt=Object(p.i)(zt),Ut=function(e){var t=J()(e.date).utc().format("YYYY-MM-DD");return r.a.createElement("div",{className:"delivery_tags"},e.orders.map((function(e){var a=e.items.filter((function(e){return e.cart_item.delivery_date===t}));return r.a.createElement("div",{className:"quarter_print_page",key:"order_".concat(e.id)},r.a.createElement("span",{className:"contact-info"},e.contact_name),r.a.createElement("span",{className:"street-address"},e.street_address," ",e.unit),r.a.createElement("span",{className:"street-address"},e.city," ",e.zip),r.a.createElement("span",{className:"contact-info"},e.phone_number),r.a.createElement("b",null,"Items:"),r.a.createElement("div",{className:"delivery-tag-items"},a.map((function(e){return r.a.createElement("div",{className:"delivery-tag-item",key:"oi_".concat(e.id)},e.cart_item.quantity.toString()+" "+Z.extractCartItemDescription(e.cart_item))}))),e.notes&&r.a.createElement("div",{className:"delivery-instructions"},r.a.createElement("br",null),"_______________________________",r.a.createElement("h4",null,"Delivery Instructions:"),r.a.createElement("div",{className:"delivery_instructions_text"},e.notes)))})))},Lt=function(e){var t=["No","mild","spicy"],a={},n="",c="",l="",o="",i=0;return e.orderItems.forEach((function(e){c=e.cart_item.menu_item.name,l=""!==e.cart_item.protein?e.cart_item.protein:"",o=e.cart_item.menu_item.spicy?t[e.cart_item.spicy]:"",(n="".concat(c,":").concat(l,":").concat(o))in a||(a[n]={count:0,dish:c,protein:l,spicy_text:o}),a[n].count+=e.cart_item.quantity,i+=e.cart_item.quantity})),r.a.createElement("div",{className:"prep_list"},r.a.createElement("span",{className:"prep_list__header"},J()(e.date).utc().format("YYYY-MM-DD")," \xa0\xa0:\xa0\xa0",i," items"),r.a.createElement("table",{className:"prep_list__list"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"#"),r.a.createElement("td",null,"Dish"),r.a.createElement("td",null,"Protein"),r.a.createElement("td",null,"Spicy"),r.a.createElement("td",null,"L"),r.a.createElement("td",null,"P"))),r.a.createElement("tbody",null,Object.keys(a).sort().map((function(e,t){return r.a.createElement("tr",{className:"".concat(t%2?"":"print-row-dark"),key:e},r.a.createElement("td",null,a[e].count),r.a.createElement("td",null,a[e].dish),r.a.createElement("td",null,a[e].protein),r.a.createElement("td",null,a[e].spicy_text),r.a.createElement("td",null),r.a.createElement("td",null))})))))},Bt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,targetDate:new Date,counts:[],documentToPrint:null},e.printDocument=function(t){e.setState({documentToPrint:t},(function(){return window.print()}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;Pt.listWithCounts(t.targetDate).then((function(a){return e.setState({counts:a,targetDate:new Date(new Date(t.targetDate).toUTCString())})})).catch((function(e){return console})).then((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(ne,null):r.a.createElement("div",{className:"row browser_full_day justify-content-center"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("h5",null,K.asFullDate(this.state.targetDate))),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("button",{className:"btn btn-outline-info mt-2",onClick:function(){return e.props.history.goBack()}},"return to calendar"),r.a.createElement("button",{className:"btn btn-outline-primary ml-2 mt-2",onClick:function(){return e.props.history.push({pathname:"/dashboard/delivery_window"})}},"create delivery window")),r.a.createElement("div",{className:"row mt-2 justify-content-center"},this.state.counts.length>0&&this.state.counts.map((function(t){return r.a.createElement("div",{className:"col-12 col-md-6",key:"dto_".concat(t.window.id)},r.a.createElement(Rt,{dto:t,date:e.state.targetDate,key:"dto_".concat(t.window.id),printDocument:e.printDocument}))})),0===this.state.counts.length&&r.a.createElement("div",{className:"col-12 text-center"},"delivery windows define the days and times of day you will be delivering"))))),r.a.createElement("div",{className:"col-12 print_sheet"},this.state.documentToPrint))}}]),a}(r.a.Component),Vt=1,Yt=2,Ht=3,qt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c,r,l,o,i,m){var d,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return Object(s.a)(this,a),(d=t.call(this)).name=void 0,d.active=void 0,d.start_time=void 0,d.end_time=void 0,d.day=void 0,d.start_date=void 0,d.end_date=void 0,d.zones=void 0,d.type=void 0,d.name=n||"",d.start_time=c||"1",d.end_time=r||"",d.day=l||0,d.id=e||-1,d.active=void 0!==o&&o,d.start_date=i||null,d.end_date=m||null,d.type=u,d}return a}(L),Wt=(a(104),function(e){var t=Object(p.g)(),a="recurring";switch(!0){case e.window.end_date&&new Date(e.window.end_date)<new Date(J()().utc().format("YYYY-DD-MM")):a="expired";break;case null!==e.window.start_date&&null!==e.window.end_date:a="".concat(K.asShortDate(new Date(e.window.start_date||""))," - ").concat(K.asShortDate(new Date(e.window.end_date||"")))}return r.a.createElement("tr",{key:"dw_".concat(e.window.id),className:"delivery_windows__window ".concat(e.window.active?"":"delivery_windows__window-inactive"),onClick:function(){return t.push({pathname:"/dashboard/delivery_window/edit/".concat(e.window.id)})}},r.a.createElement("td",{className:"d-none d-md-table-cell"},e.window.name),r.a.createElement("td",null,It[e.window.day]),r.a.createElement("td",null,r.a.createElement("div",null,J()(e.window.start_time,"HH:mm:ss").format("h:mm a")," -"),r.a.createElement("div",null,J()(e.window.end_time,"HH:mm:ss").format("h:mm a"))),r.a.createElement("td",null,a))}),Gt=function(e){var t=Object(c.useState)(!0),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)([]),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)(""),u=Object(U.a)(d,2),h=u[0],v=u[1],b=Object(c.useState)(!1),_=Object(U.a)(b,2),f=_[0],g=_[1],E=Object(p.g)();Object(c.useEffect)((function(){Pt.get().then((function(e){l(!1),m(e)})).catch((function(e){return window.alert("Unable to load delivery windows")}))}),[]);return n?r.a.createElement(ne,null):r.a.createElement("div",{className:"row delivery_windows"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"delivery windows"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8 col-md-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"new delivery window name",onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",{className:"col-2"},r.a.createElement(ee,{label:"add window",onClick:function(){g(!0),Pt.add(new qt(-1,h,"17:00:00","19:00:00",0,!1)).then((function(e){return E.push({pathname:"/dashboard/delivery_window/edit/".concat(e.id)})})).catch((function(){return window.alert("unable to create window")})).then((function(){return g(!1)}))},busy:f,btnClass:"btn btn-sm btn-outline-success",disabled:""===h})))),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"d-none d-md-table-cell"},"name"),r.a.createElement("th",null,"day"),r.a.createElement("th",null,"time"),r.a.createElement("th",null,"run"))),r.a.createElement("tbody",null,s.map((function(e){return r.a.createElement(Wt,{window:e})}))))))},Qt=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="zone",e.searchZipDb=function(t,a){return e._get("".concat(e.viewPath,"/search_zip_db/?city=").concat(a))},e.import_zip_codes=function(t,a,n){return e._post("".concat(e.viewPath,"/").concat(t.id,"/import_zip_codes/"),{search_by:a,id:n})},e}return a}(T)),Jt=function(){var e,t=Object(p.g)(),a=Object(p.h)(),n=Object(c.useState)(!0),l=Object(U.a)(n,2),o=l[0],i=l[1],s=Object(c.useState)(new qt),m=Object(U.a)(s,2),d=m[0],u=m[1],h=Object(c.useState)(!1),b=Object(U.a)(h,2),f=b[0],g=b[1],E=Object(c.useState)([]),y=Object(U.a)(E,2),w=y[0],N=y[1],O=Object(c.useState)(-1),j=Object(U.a)(O,2),C=j[0],S=j[1],k=Object(c.useState)(!1),D=Object(U.a)(k,2),x=D[0],I=D[1],A=Object(c.useState)(!1),M=Object(U.a)(A,2),P=M[0],T=M[1],F=Object(c.useState)(!1),z=Object(U.a)(F,2),R=z[0],L=z[1],B=(null===(e=Object(v.d)((function(e){return e.operatorReducer})).settings)||void 0===e?void 0:e.type)===V;Object(c.useEffect)((function(){void 0===a.id?Qt.get().then((function(e){return N(e)})).catch((function(){return window.alert("unable to load zones")})).then((function(){return i(!1)})):Promise.all([Pt.get(a.id),Qt.get()]).then((function(e){var t=e[0];u(t),N(e[1]),e[1].length>0&&S(e[1][0].id),i(!1)})).catch((function(e){return window.alert("unable to load window")}))}),[]);var Y=function(e){u(Object(_.a)(Object(_.a)({},d),{},Object(q.a)({},e.target.id,e.target.value)))};return o?r.a.createElement(ne,null):r.a.createElement("div",{className:"row delivery_window_edit justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"Edit Delivery Window"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 text-right"},r.a.createElement("button",{onClick:function(){return t.goBack()},className:"btn btn-sm btn-outline-info ml-2 delivery_window_edit__go_back",disabled:f},"go back"),r.a.createElement(ee,{label:"save updates",onClick:function(){g(!0),I(!0),Pt.update(d).then((function(){return t.goBack()})).catch((function(e){return window.alert("unable to update window")}))},busy:x,disabled:f,btnClass:"btn btn-sm btn-outline-success"}),r.a.createElement(ee,{label:"delete",onClick:function(){window.confirm("are you sure you want to delete this window? \n\nWARNING:\nthis cannot be reversed.")&&(T(!0),Pt.delete(d.id).then((function(){return t.goBack()})).catch((function(e){return window.alert("unable to delete")})).then((function(){return T(!1)})))},busy:P,disabled:f,btnClass:"btn btn-sm btn-outline-danger",outerClass:"ml-2"}),!B&&r.a.createElement("button",{onClick:function(){L(!R)},className:"btn btn-sm btn-outline-".concat(R?"warning":"primary"," ml-2")},R?"cancel email":"send email"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"delivery_window_edit__prompt"},"name:"),r.a.createElement("input",{className:"form-control",type:"text",id:"name",value:d.name,onChange:Y})),B?r.a.createElement("div",{className:"col-6 mt-2"},r.a.createElement("div",{className:"delivery_window_edit__prompt"},"type:"),r.a.createElement("select",{className:"form-control",id:"type",value:d.type,onChange:Y},r.a.createElement("option",{value:Vt},"pickup"),r.a.createElement("option",{value:Yt},"deliver ASAP"),r.a.createElement("option",{value:Ht},"future delivery"))):r.a.createElement("div",{className:"col-6 mt-2"},r.a.createElement("div",{className:"delivery_window_edit__prompt"},"day:"),r.a.createElement("select",{className:"form-control",id:"day",value:d.day,onChange:Y},r.a.createElement("option",{value:6},"sunday"),r.a.createElement("option",{value:0},"monday"),r.a.createElement("option",{value:1},"tuesday"),r.a.createElement("option",{value:2},"wednesday"),r.a.createElement("option",{value:3},"thursday"),r.a.createElement("option",{value:4},"friday"),r.a.createElement("option",{value:5},"saturday"))),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"delivery_window_edit__prompt"},"active:"),r.a.createElement("input",{type:"checkbox",className:"",id:"active",checked:d.active,onChange:function(){return u(Object(_.a)(Object(_.a)({},d),{},{active:!d.active}))}})),r.a.createElement("div",{className:"col-6 mt-2"},r.a.createElement("div",{className:"delivery_window_edit__prompt"},"start time:"),r.a.createElement("input",{type:"time",className:"form-control",id:"start_time",value:d.start_time,onChange:Y})),r.a.createElement("div",{className:"col-6 mt-2"},r.a.createElement("div",{className:"delivery_window_edit__prompt"},"end time:"),r.a.createElement("input",{type:"time",className:"form-control",id:"end_time",value:d.end_time,onChange:Y})),!B&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-9 mt-2"},r.a.createElement("div",{className:"delivery_window_edit__prompt"},"start date:"),r.a.createElement("input",{type:"date",className:"form-control",id:"start_date",value:d.start_date||"",onChange:Y})),r.a.createElement("div",{className:"col-2 mt-4"},r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){return u(Object(_.a)(Object(_.a)({},d),{},{start_date:null}))}},"clear")),r.a.createElement("div",{className:"col-9 mt-2"},r.a.createElement("div",{className:"delivery_window_edit__prompt"},"end date:"),r.a.createElement("input",{type:"date",className:"form-control",id:"end_date",value:d.end_date||"",onChange:Y})),r.a.createElement("div",{className:"col-2 mt-4"},r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){return u(Object(_.a)(Object(_.a)({},d),{},{end_date:null}))}},"clear"))))),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 col-md-5 dwe_zones"},r.a.createElement("h5",null,"zones"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-9"},w.length>0?r.a.createElement("select",{className:"form-control",onChange:function(e){return S(parseInt(e.target.value))}},w.map((function(e){return r.a.createElement("option",{key:"zone_".concat(e.id),value:e.id},e.name)}))):r.a.createElement("div",{className:"dwe__no_zones_message"},"no zones available")),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-sm btn-outline-success",onClick:function(){0===w.length?t.push({pathname:"/dashboard/zone"}):Pt.addZone(d.id,C).then((function(e){return u(e)})).catch((function(){return window.alert("unable to add zone")}))}},"add zone"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"dwe_zones__zones"},d.zones&&d.zones.map((function(e){return r.a.createElement("div",{className:"row dwe_zones__zone mt-1"},r.a.createElement("div",{className:"col-9"},e.name),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){return function(e){window.confirm("Are you sure you want to remove '".concat(e.name,"'?"))&&Pt.removeZone(d.id,e.id).then((function(e){return u(e)})).catch((function(){return window.alert("unable to remove zone")}))}(e)}},"X")))})))),R&&r.a.createElement("div",{className:"col-12 delivery_window_edit__emailer"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement(Ne,{finished:function(){return L(!1)},prompt:"this email will be sent to anyone in your mailing list who can order during this delivery window",config:{email_type:"delivery_window",entity_id:d.id}})))))))},Kt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(s.a)(this,a),(e=t.call(this)).name=void 0,e.zip_codes=void 0,e.jdel_min=void 0,e.jdel_del_charge=void 0,e.jdel_free_del_min=void 0,e.jdel_tax=void 0,e.fdel_min=void 0,e.fdel_del_charge=void 0,e.fdel_free_del_min=void 0,e.fdel_tax=void 0,e.ship_min=void 0,e.ship_del_charge=void 0,e.ship_free_del_min=void 0,e.ship_tax=void 0,e.id=n,e.name=c,e.zip_codes=r,e}return a}(L),Xt=(a(34),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c){var r;return Object(s.a)(this,a),(r=t.call(this)).code=void 0,r.zone=void 0,r.id=e||-1,r.code=n||"",r.zone=c||new Kt,r}return a}(L)),Zt=function(e){return r.a.createElement("div",{className:"zone_code",onClick:function(){return e.removeCode(e.code)}},r.a.createElement("div",{className:"zone_code__code"},e.code.code))},$t=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="zipcode",e}return a}(T)),ea=function(e){var t=Object(c.useState)(e.zone.zip_codes),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(""),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)(""),u=Object(U.a)(d,2),p=u[0],h=(u[1],Object(c.useState)(Mt[0].code)),v=Object(U.a)(h,2),b=v[0],f=v[1],g=Object(c.useState)(0),E=Object(U.a)(g,2),y=E[0],w=E[1],N=Object(c.useState)(!1),O=Object(U.a)(N,2),j=O[0],C=O[1],S=Object(c.useState)(e.zone),k=Object(U.a)(S,2),D=k[0],x=k[1],I=Object(c.useState)(e.zone),A=Object(U.a)(I,2),M=A[0],P=A[1],T=function(e){window.confirm("Are you sure you want to remove: ".concat(e.code,"?"))&&$t.delete(e.id).then((function(){return l(n.filter((function(t){return t.code!==e.code})))})).catch((function(){return window.alert("unable to remove code")}))},F=function(t,a){w(t),n.filter((function(e){return e.code===s})).length>0?alert("that code already exists"):1===t?$t.add(new Xt(-1,s,e.zone.id)).then((function(e){l([].concat(Object(X.a)(n),[e])),m("")})).catch((function(){return window.alert("unable to add code")})).finally((function(){return w(0)})):Qt.import_zip_codes(e.zone,["city","state"][t-2],a).then((function(e){return l([].concat(Object(X.a)(n),Object(X.a)(e)))})).catch((function(e){return window.alert("unable to import zip codes")})).finally((function(){return w(0)}))},z=D.name!==M.name||D.fdel_tax!==M.fdel_tax||D.fdel_free_del_min!==M.fdel_free_del_min||D.fdel_del_charge!==M.fdel_del_charge||D.fdel_min!==M.fdel_min||D.jdel_tax!==M.jdel_tax||D.jdel_free_del_min!==M.jdel_free_del_min||D.jdel_del_charge!==M.jdel_del_charge||D.jdel_min!==M.jdel_min||D.ship_tax!==M.ship_tax||D.ship_free_del_min!==M.ship_free_del_min||D.ship_del_charge!==M.ship_del_charge||D.ship_min!==M.ship_min;return r.a.createElement("div",{className:"row zone_tool"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h4",null,"zone name:"),r.a.createElement("input",{className:"form-control zone_tool__name",placeholder:"zone name",type:"text",value:D.name,disabled:j,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{name:e.target.value}))}})),r.a.createElement("div",{className:"col-12 mt-4"},r.a.createElement("fieldset",{disabled:j},r.a.createElement("h4",null,"fees and taxes:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"}),r.a.createElement("div",{className:"col-2"},r.a.createElement("small",null,"minimum order")),r.a.createElement("div",{className:"col-2"},r.a.createElement("small",null,"delivery charge")),r.a.createElement("div",{className:"col-2"},r.a.createElement("small",null,"free delivery min.")),r.a.createElement("div",{className:"col-2"},r.a.createElement("small",null,"tax rate"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("strong",null,"delivery:")),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"number",value:D.jdel_min||"",onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{jdel_min:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.jdel_del_charge||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{jdel_del_charge:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.jdel_free_del_min||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{jdel_free_del_min:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.jdel_tax||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{jdel_tax:parseFloat(e.target.value)}))}}))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-4"},r.a.createElement("strong",null,"planned-meal delivery:")),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.fdel_min||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{fdel_min:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.fdel_del_charge||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{fdel_del_charge:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.fdel_free_del_min||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{fdel_free_del_min:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.fdel_tax||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{fdel_tax:parseFloat(e.target.value)}))}}))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-4"},r.a.createElement("strong",null,"shipping:")),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.ship_min||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{ship_min:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.ship_del_charge||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{ship_del_charge:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.ship_free_del_min||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{ship_free_del_min:parseFloat(e.target.value)}))}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("input",{className:"form-control",type:"numeric",value:D.ship_tax||0,onChange:function(e){return x(Object(_.a)(Object(_.a)({},D),{},{ship_tax:parseFloat(e.target.value)}))}}))))),r.a.createElement("div",{className:"col-12 text-right mt-2"},r.a.createElement("button",{className:"btn btn-sm btn-outline-danger mr-2",onClick:function(){return e.deleteZone(M)},disabled:j},"delete"),r.a.createElement(ee,{btnClass:"btn btn-sm btn-outline-success",label:"save updates",onClick:function(){C(!0),Qt.update(D).then((function(e){C(!1),P(e),x(e)}))},busy:j,disabled:!z}),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 mt-4"},r.a.createElement("h4",null,"zipcode management:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"zone_tool__note"},"select code to remove"),r.a.createElement("div",{className:"zone_tool__codes"},n.sort((function(e,t){return e.code>t.code?1:e.code<t.code?-1:0})).map((function(e){return r.a.createElement(Zt,{code:e,removeCode:T,key:e.code})})))),r.a.createElement("div",{className:"col-6 text-right mt-3"},r.a.createElement("fieldset",{disabled:0!==y},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{className:"form-control",placeholder:"new code",value:s,onChange:function(e){return m(e.target.value)}}),r.a.createElement(ee,{label:"add code",outerClass:"mt-2",btnClass:"btn btn-sm btn-outline-success",onClick:function(){return F(1,s)},busy:1===y,disabled:0===s.length||0!==y}),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement(ue,{placeholder:"add by city",serviceFunction:Qt.searchZipDb,itemSelected:function(e){"string"!==typeof e&&F(2,e.id)}}),r.a.createElement(ee,{label:"remove codes",outerClass:"mt-2 mr-2",btnClass:"btn btn-sm btn-outline-danger",onClick:function(){return F(1,s)},busy:1===y,disabled:0!==y}),r.a.createElement(ee,{label:"add codes",outerClass:"mt-2",btnClass:"btn btn-sm btn-outline-success",onClick:function(){return F(2,p)},busy:2===y,disabled:0!==y}),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("small",null,"add by state"),r.a.createElement("select",{className:"form-control",value:b,onChange:function(e){return f(e.target.value)}},Mt.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)}))),r.a.createElement(ee,{label:"remove codes",outerClass:"mt-2 mr-2",btnClass:"btn btn-sm btn-outline-danger",onClick:function(){return F(1,s)},busy:1===y,disabled:0===s.length||0!==y}),r.a.createElement(ee,{label:"add codes",outerClass:"mt-2",btnClass:"btn btn-sm btn-outline-success",onClick:function(){return F(3,b)},busy:3===y,disabled:0!==y}),r.a.createElement("hr",null))))))))},ta=function(){var e=Object(p.g)(),t=Object(c.useState)([]),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(!0),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)(""),u=Object(U.a)(d,2),h=u[0],v=u[1];Object(c.useEffect)((function(){Qt.get().then((function(e){l(e),m(!1)})).catch((function(e){return window.alert("unable to load zones")}))}),[]);var b=function(e){window.confirm("Are you sure you want to delete the following zone?\n\n".concat(e.name))&&Qt.delete(e.id).then((function(){l(n.filter((function(t){return t.id!==e.id})))})).catch((function(e){return window.alert("unable to delete zone")}))};return s?r.a.createElement(ne,null):r.a.createElement("div",{className:"row zones justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"zones"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-sm btn-outline-info",onClick:function(){return e.goBack()}},"back")),r.a.createElement("div",{className:"col-7 col-md-5"},r.a.createElement("input",{type:"text",className:"form-control",value:h,placeholder:"new zone name",onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-outline-success",onClick:function(){Qt.add(new Kt(-1,h)).then((function(e){l([].concat(Object(X.a)(n),[e])),v("")})).catch((function(){return window.alert("unable to create new zone")}))}},"add")),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),n.length>0?n.sort((function(e,t){return e.id>t.id?-1:e.id<t.id?1:0})).map((function(e){return r.a.createElement("div",{className:"col-12 zones__zone_wrapper",key:"zone_".concat(e.id)},r.a.createElement(ea,{zone:e,deleteZone:b}))})):r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Delivery zones are defined by a collection of zip codes. Once you creat a zone, you will be ready to create your first Delivery Window.")))))},aa=a(59),na=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n,c,r,l,o,i){var m;return Object(s.a)(this,a),(m=t.call(this)).delivery_date=void 0,m.delivery_window=void 0,m.stops=void 0,m.route_status=void 0,m.started_at=void 0,m.finished_at=void 0,m.id=e||-1,m.delivery_date=n||"",m.delivery_window=c||new qt,m.stops=r||[],m.route_status=l||0,m.started_at=o||"",m.finished_at=i||"",m}return a}(L),ca=(a(35),new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="route_stop",e.at_stop=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/at_stop/"))},e.alertDelivery=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/delivery_alert/"))},e.cancel=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/cancel/"))},e.delivered=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/delivered/"))},e.en_route=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/en_route/"))},e}return a}(T))),ra=function(e){var t=Object(c.useState)(e.stop),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(""),i=Object(U.a)(o,2),s=i[0],m=i[1],d=function(){window.open("http://maps.google.com/?q=".concat(n.order.street_address," ").concat(e.stop.order.zip),"_blank")};return r.a.createElement("div",{className:"row route_organizer_entry"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row organizer_entry__inner"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"organizer_entry__address"},n.current_index>-1?(n.current_index+1).toString():""," \xa0",n.order.street_address),e.route.route_status>0&&e.route.route_status<4&&r.a.createElement("div",{className:"organizer_entry__time"},"".concat(J()(e.route.delivery_window.start_time,"HH:mm:ss").add(n.eta,"seconds").subtract(10,"minutes").format("HH:mm")," - \n                                    ").concat(J()(e.route.delivery_window.start_time,"HH:mm:ss").add(n.eta,"seconds").subtract(10,"minutes").add(20,"minutes").format("HH:mm")))),r.a.createElement("div",{className:"col-12 organizer_entry__notes"},n.order.notes),r.a.createElement("div",{className:"col-12 text-center"},3===n.stop_status&&r.a.createElement(c.Fragment,null,r.a.createElement(c.Fragment,null,"delivered: ",K.asShortDateTime(n.delivered_at))),3===e.route.route_status&&3!==n.stop_status&&r.a.createElement(c.Fragment,null,"there was no delivery time recorded"),4===n.stop_status&&r.a.createElement(c.Fragment,null,"canceled"),n.stop_status<3&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 organizer_entry__delivery_controls"},2===e.route.route_status&&0===n.stop_status&&r.a.createElement("button",{className:"btn btn-sm btn-outline-success delivery_controls__navigate mr-2",onClick:function(){return d(),void ca.en_route(e.stop).then((function(e){return l(e)})).catch((function(){return window.alert("unable to en_route")}))}},"navigate"),2===e.route.route_status&&0!==n.stop_status&&r.a.createElement(c.Fragment,null,1===n.stop_status&&r.a.createElement(ee,{busy:"at_stop"===s,outerClass:"mr-2 delivery_controls__arrive",btnClass:"btn btn-sm btn-outline-info",label:"arrive",onClick:function(){m("at_stop"),ca.at_stop(e.stop).then((function(e){return l(e)})).catch((function(){return window.alert("unable to at_stop")})).then((function(){return m("")}))}}),2===n.stop_status&&r.a.createElement(ee,{busy:"completing_delivery"===s,outerClass:"mr-2 delivery_controls__finished",btnClass:"btn btn-sm btn-outline-success",label:"finished",onClick:function(){m("completing_delivery"),ca.delivered(e.stop).then((function(e){l(e)})).catch((function(){return window.alert("unable to complete")})).then((function(){return m("canceling_delivery")}))}})),2===e.route.route_status&&r.a.createElement(ee,{busy:"canceling_delivery"===s,outerClass:"mr-2 organizer_entry__cancel",btnClass:"btn btn-sm btn-outline-danger",label:"cancel",onClick:function(){window.confirm("are you sure you want to cancel this stop? \n\nThis cannot be reversed.")&&(m("canceling_delivery"),ca.cancel(e.stop).then((function(e){return l(e)})).catch((function(){return window.alert("unable to cancel")})).then((function(){return m("")})))}})),0===e.route.route_status&&r.a.createElement("div",{className:"col-12 organizer_entry__plan_controls"},r.a.createElement("button",{className:"btn btn-sm btn-outline-success plan_controls__up_btn mr-2",disabled:!e.canMoveUp,onClick:function(){return e.moveStop(n,"up")}},"up"),r.a.createElement("button",{className:"btn btn-sm btn-outline-success plan_controls__down_btn mr-2",disabled:!e.canMoveDown,onClick:function(){return e.moveStop(n,"down")}},"down"),r.a.createElement("button",{className:"btn btn-sm btn-outline-success plan_controls__top_btn mr-2",disabled:!e.canMoveUp,onClick:function(){return e.moveStop(n,"top")}},"first"),r.a.createElement("button",{className:"btn btn-sm btn-outline-success plan_controls__bottom_btn",disabled:!e.canMoveDown,onClick:function(){return e.moveStop(n,"bottom")}},"last")))))))},la=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="route",e.commitRoute=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/commit"))},e.completeRoute=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/complete_route"))},e.startRoute=function(t){return e._get("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/start_route"))},e.updateStopOrder=function(t,a){return e._post("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/update_stop_order/"),{stop_ids:JSON.stringify(a)})},e}return a}(T)),oa=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).commitRoute=function(){window.confirm("Once you commit a route, it cannot be changed.")&&(n.setState({loadingButtonInUse:"committing"}),la.commitRoute(n.state.route).then((function(e){return n.setState({route:e,stops:n.extractStopsFromRoute(e)})})).catch((function(){return window.alert("cannot commit route")})).then((function(){return n.setState({loadingButtonInUse:""})})))},n.completeRoute=function(){window.confirm("Are you sure you are done?")&&(n.setState({loadingButtonInUse:"completing_route"}),la.completeRoute(n.state.route).then((function(e){return n.setState({route:e,stops:n.extractStopsFromRoute(e)})})).catch((function(){return window.alert("unable to complete route")})).then((function(){return n.setState({loadingButtonInUse:""})})))},n.moveEntry=function(e,t){var a=-1;n.state.stops.forEach((function(t,n){t.id===e.id&&(a=n)}));var c=n.state.stops;switch(c.splice(a,1),t){case"up":a--;break;case"down":a++;break;case"top":a=0;break;case"bottom":a=c.length}c.splice(a,0,e);for(var r=0;r<c.length;r++)c[r].current_index=r;n.setState({stops:c,routeUpdated:!0})},n.optimize=function(){n.setState({loadingButtonInUse:"optimizing",stops:n.state.stops.sort((function(e,t){return e.index>t.index?1:t.index>e.index?-1:0}))},(function(){return n.saveChanges()}))},n.saveChanges=function(){la.updateStopOrder(n.state.route,n.state.stops.map((function(e){return e.id}))).then((function(e){return n.props.updateRoute(e)})).catch((function(){return window.alert("unable to save changes")})).then((function(){return n.setState({loadingButtonInUse:""})}))},n.extractStopsFromRoute=function(e){return e.stops.sort((function(e,t){return e.current_index>t.current_index?1:t.current_index>e.current_index?-1:0}))},n.startRoute=function(){window.confirm("Are you sure you want to start the route?")&&(n.setState({loadingButtonInUse:"starting_route"}),la.startRoute(n.state.route).then((function(e){return n.setState({route:e})})).catch((function(){return window.alert("unable to start route")})).then((function(){return n.setState({loadingButtonInUse:""})})))},n.state={mode:"plan",route:e.route,routeUpdated:!1,loading:!0,stops:n.extractStopsFromRoute(e.route),loadingButtonInUse:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=!1;return this.state.stops.forEach((function(e,a){e.index!==e.current_index&&(t=!0)})),r.a.createElement("div",{className:"row route_organizer"},r.a.createElement("div",{className:"col-12 route_organizer__status mb-2"},"status:",r.a.createElement("span",{className:"route_organizer__status--".concat(this.state.route.route_status," ml-2")},["uncommitted","committed","in progress","completed","waiting for cutoff"][this.state.route.route_status])),3===this.state.route.route_status&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12"},"started: ",K.asShortDateTime(this.state.route.started_at)),r.a.createElement("div",{className:"col-12"},"completed: ",K.asShortDateTime(this.state.route.finished_at))),r.a.createElement("div",{className:"col-12"},0===this.state.route.route_status&&r.a.createElement(c.Fragment,null,this.state.routeUpdated&&r.a.createElement(ee,{outerClass:"mr-2",busy:"saving_changes"===this.state.loadingButtonInUse,btnClass:"btn btn-outline-success route_organizer__optimize_btn",label:"save changes",onClick:function(){e.setState({loadingButtonInUse:"saving_changes"}),e.saveChanges()}}),!this.state.routeUpdated&&r.a.createElement(ee,{outerClass:"mr-2",busy:"committing"===this.state.loadingButtonInUse,btnClass:"btn btn-outline-success",label:"commit route",onClick:this.commitRoute}),t&&r.a.createElement(ee,{outerClass:"mr-2",busy:"at_stop"===this.state.loadingButtonInUse,btnClass:"btn btn-outline-info",label:"optimize",onClick:this.optimize})),1===this.state.route.route_status&&r.a.createElement(c.Fragment,null,r.a.createElement(ee,{outerClass:"mr-2",busy:"starting_route"===this.state.loadingButtonInUse,btnClass:"btn btn-outline-info",label:"start route",onClick:this.startRoute})),2===this.state.route.route_status&&r.a.createElement(c.Fragment,null,r.a.createElement(ee,{outerClass:"mr-2",busy:"completing_route"===this.state.loadingButtonInUse,btnClass:"btn btn-outline-success",label:"completed",onClick:this.completeRoute}))),r.a.createElement("div",{className:"col-12 route_organizer__stops mt-2"},r.a.createElement("div",{className:"row"},this.state.stops.map((function(t,a){return r.a.createElement("div",{className:"col-12",key:"route_".concat(Math.random())},r.a.createElement(ra,{stop:t,route:e.state.route,moveStop:e.moveEntry,canMoveDown:a+1<e.state.stops.length,canMoveUp:a>0}))})))))}}]),a}(r.a.Component),ia=function(e){var t=Object(p.h)(),a=Object(p.g)(),n=Object(c.useState)(new na),l=Object(U.a)(n,2),o=l[0],i=l[1],s=Object(c.useState)(!0),m=Object(U.a)(s,2),d=m[0],u=m[1];Object(c.useEffect)((function(){Pt.retrieveRoute(t.delivery_window,new Date(J()(t.target_date).format("YYYY-MM-DD"))).then((function(e){i(e),u(!1),v()})).catch((function(){return window.alert("unable to load route")}))}),[]);var h=function(e,t){e,t,v()},v=function(){};return d?r.a.createElement(ne,null):r.a.createElement("div",{className:"row delivery_planner justify-content-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"route planner"),r.a.createElement("b",null,K.asShortDate(o.delivery_date)),r.a.createElement("button",{className:"btn btn-sm btn-outline-info delivery_planner__back_btn",onClick:function(){return a.goBack()}},"back to tools"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"d-none ".concat(0!==o.route_status?"d-md-none":"d-md-block","  col-md-8 delivery_planner__map_div")},0===o.route_status&&r.a.createElement(aa.a,{key:Math.random(),bootstrapURLKeys:{key:"AIzaSyC0yq5uGlMfHp98X-L452J-dzR2HX5FEP8"},center:{lat:37.804363,lng:-122.271111},zoom:10,yesIWantToUseGoogleMapApiInternals:!0,options:function(e){return{zoomControlOptions:{position:e.ControlPosition.RIGHT_CENTER,style:e.ZoomControlStyle.SMALL},mapTypeControlOptions:{position:e.ControlPosition.TOP_RIGHT},mapTypeControl:!0}},onGoogleApiLoaded:function(e){var t=e.map,a=e.maps;return h(t,a)}},o.stops.sort((function(e,t){return e.current_index>t.current_index?1:t.current_index>e.current_index?-1:0})).map((function(e,t){var a=""!==e.leg?JSON.parse(e.leg):{end_location:{lat:37.804363,lng:-122.271111}};return r.a.createElement(sa,{key:Math.random(),lat:a.end_location.lat,lng:a.end_location.lng,text:(t+=1).toString()})})))),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(oa,{key:Math.random(),route:o,updateRoute:function(e){return i(e)}})))},sa=function(e){return r.a.createElement("div",{style:{fontSize:"2em",color:"red",fontWeight:"bold"}},e.text)},ma=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="operator",e.getMe=function(){return e._get("".concat(e.appName,"/").concat(e.view,"/get_me"))},e.get_settings=function(){return e._get("".concat(e.appName,"/").concat(e.view,"/get_settings/"))},e}return a}(T)),da=(a(106),function(){var e=Object(c.useState)(new Y),t=Object(U.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)(new Y),o=Object(U.a)(l,2),i=o[0],s=o[1],m=Object(c.useState)([]),d=Object(U.a)(m,2),u=d[0],p=d[1],h=Object(c.useState)(!1),v=Object(U.a)(h,2),b=v[0],f=v[1],g=Object(c.useState)(!1),E=Object(U.a)(g,2),y=E[0],w=E[1],N=Object(c.useState)([]),O=Object(U.a)(N,2),j=O[0],C=O[1],S=Object(c.useState)(!1),k=Object(U.a)(S,2),D=k[0],x=k[1],I=Object(c.useState)(""),A=Object(U.a)(I,2),M=A[0],P=A[1],T=Object(c.useState)(""),z=Object(U.a)(T,2),R=z[0],L=z[1],B=Object(c.useState)(""),V=Object(U.a)(B,2),H=V[0],q=V[1],W=Object(c.useState)(!1),G=Object(U.a)(W,2),Q=G[0],J=G[1];Object(c.useEffect)((function(){-1===a.id?Promise.all([ma.getMe(),we.getTimeZones()]).then((function(e){Z(e[0]),s(e[0]),C(e[1])})).catch((function(){return window.alert("unable to load page")})):K()}));var K=function(){var e=!1;Object.keys(a).forEach((function(t){a[t]!==i[t]&&(e=!0)})),f(e)},X=function(){w(!0),ma.update(a).then((function(e){s(e),Z(e)})).catch((function(e){return window.alert(JSON.stringify(e.response.data))})).then((function(){w(!1)}))},Z=function(e){var t=[];["zip_code","city","street_address","name","phone","page_name","support_email","state","timezone","ordering_cutoff_time"].forEach((function(a){""===e[a]&&t.push(a)})),!e.self_hosted||""!==e.domain&&0===e.domain.indexOf("https://")||t.push("domain"),e.auto_notify_upcoming_deliveries&&e.upcoming_delivery_notification_time<1&&t.push("upcoming_delivery_notification_time"),e.self_hosted||""!==e.storefront_template||t.push("storefront_template"),e.ordering_cutoff_time<1&&t.push("ordering_cutoff_time"),e.upcoming_delivery_days_notification_time<1&&t.push("upcoming_delivery_days_notification_time"),e.max_future_delivery_windows_time<1&&t.push("max_future_delivery_windows_time"),e.tax_rate>.99&&t.push("tax_rate"),e.delivery_minimum<10&&t.push("delivery_minimum"),p(t),n(e)},$=[];return D&&(""===M&&$.push("current_password"),""===R&&$.push("new_password"),""!==H&&H===R||$.push("confirm_password")),r.a.createElement("div",{className:"row profile justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("h3",null,"profile"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("fieldset",{disabled:y},r.a.createElement("div",{className:"accordion",id:"myAccordion"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header",id:"headingOne"},r.a.createElement("h2",{className:"mb-0"},r.a.createElement("button",{type:"button",className:"btn btn-link","data-toggle":"collapse","data-target":"#collapseOne"},"contact info"))),r.a.createElement("div",{id:"collapseOne",className:"collapse show","aria-labelledby":"headingOne","data-parent":"#myAccordion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},"full name:",r.a.createElement("input",{className:"form-control ".concat(u.indexOf("name")>-1?"profile__error_border":""),value:a.name,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{name:e.target.value}))}})),r.a.createElement("div",{className:"col-12 col-md-6 mt-1"},"contact email:",r.a.createElement("h6",null,a.user.email),r.a.createElement("span",{className:"profile__prompt_note"},"for emails regarding your account. contact admin to change")),r.a.createElement("div",{className:"col-12 col-md-6 mt-1"},"phone number:",r.a.createElement("input",{className:"form-control ".concat(u.indexOf("phone")>-1?"profile__error_border":""),type:"email",value:a.phone,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{phone:e.target.value}))}})),r.a.createElement("div",{className:"col-12 col-md-6 text-center"},r.a.createElement("button",{className:"btn btn-sm btn-".concat(D?"warning":"outline-info"," mt-4"),onClick:function(){x(!D)}},D?"cancel update password":"update password")),D&&r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null),r.a.createElement("h5",null,"update password:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6 mt-1"},"current password:",r.a.createElement("input",{className:"form-control ".concat($.indexOf("current_password")>-1?"profile__error_border":""),type:"password",value:M,onChange:function(e){return P(e.target.value)}})),r.a.createElement("div",{className:"col-12 col-md-6 mt-1"},"new password:",r.a.createElement("input",{className:"form-control ".concat($.indexOf("new_password")>-1?"profile__error_border":""),type:"password",value:R,onChange:function(e){return L(e.target.value)}})),r.a.createElement("div",{className:"col-12 col-md-6 mt-1"},"confirm password:",r.a.createElement("input",{className:"form-control ".concat($.indexOf("confirm_password")>-1?"profile__error_border":""),type:"password",value:H,onChange:function(e){return q(e.target.value)}})),r.a.createElement("div",{className:"col-12 mt-1 text-center"},r.a.createElement(ee,{label:"save password",btnClass:"btn btn-sm btn-success",disabledBtnClass:"btn btn-sm btn-outline-secondary",onClick:function(){J(!0),F.updatePassword(a.user,M,R).then((function(){x(!1),P(""),L(""),q(""),alert("password updated")})).catch((function(){return window.alert("unable to update password.\n\nCheck that the current password is correct")})).then((function(){return J(!1)}))},busy:Q,disabled:$.length>0})))),r.a.createElement("div",{className:"col-12"},"asfsadf",r.a.createElement(ee,{key:Math.random(),busy:y,label:"save updates",onClick:X,btnClass:"btn btn-sm btn-success",disabledBtnClass:"btn btn-sm btn-outline-secondary",outerClass:"float-right",disabled:!b||0!==u.length})))))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header",id:"headingTwo"},r.a.createElement("h2",{className:"mb-0"},r.a.createElement("button",{type:"button",className:"btn btn-link collapsed","data-toggle":"collapse","data-target":"#collapseTwo"},"business info"))),r.a.createElement("div",{id:"collapseTwo",className:"collapse","aria-labelledby":"headingTwo","data-parent":"#myAccordion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},"business name:",r.a.createElement("input",{className:"form-control ".concat(u.indexOf("page_name")>-1?"profile__error_border":""),value:a.page_name,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{page_name:e.target.value}))}})),r.a.createElement("div",{className:"col-12 col-md-6"},"time zone:",r.a.createElement("select",{className:"form-control ".concat(u.indexOf("timezone")>-1?"profile__error_border":""),value:a.timezone,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{timezone:e.target.value}))}},r.a.createElement("option",{value:""},"choose"),j.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement("div",{className:"col-12 col-md-6 mt-2"},"contact email:",r.a.createElement("input",{className:"form-control ".concat(u.indexOf("support_email")>-1?"profile__error_border":""),type:"email",value:a.support_email,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{support_email:e.target.value}))}}),r.a.createElement("span",{className:"profile__prompt_note"},"for messages from your customers and alerts")),r.a.createElement("div",{className:"col-12 mt-2"},"street address:",r.a.createElement("input",{className:"form-control ".concat(u.indexOf("street_address")>-1?"profile__error_border":""),type:"text",value:a.street_address,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{street_address:e.target.value}))}}),r.a.createElement("span",{className:"profile__prompt_note"},"this should be the location deliveries will start from")),r.a.createElement("div",{className:"col-md-3 mt-2"},"unit:",r.a.createElement("input",{className:"form-control",type:"text",value:a.unit,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{unit:e.target.value}))}})),r.a.createElement("div",{className:"col-md-3 mt-2"},"city:",r.a.createElement("input",{className:"form-control ".concat(u.indexOf("city")>-1?"profile__error_border":""),type:"text",value:a.city,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{city:e.target.value}))}})),r.a.createElement("div",{className:"col-md-3 mt-2"},"state:",r.a.createElement("input",{className:"form-control ".concat(u.indexOf("state")>-1?"profile__error_border":""),type:"text",value:a.state,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{state:e.target.value}))}})),r.a.createElement("div",{className:"col-md-3 mt-2"},"zip code:",r.a.createElement("input",{className:"form-control ".concat(u.indexOf("zip_code")>-1?"profile__error_border":""),type:"text",value:a.zip_code,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{zip_code:e.target.value}))}})),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("hr",null),r.a.createElement("h5",null,"store front hosting"),r.a.createElement("p",null,"You can host the store front application on your own website or host it on our platform. The implementation is simple HTML that requires no plugins or javascript."),r.a.createElement("input",{type:"checkbox",checked:a.self_hosted,onChange:function(){return Z(Object(_.a)(Object(_.a)({},a),{},{self_hosted:!a.self_hosted}))}}),"\xa0\xa0\xa0 host on my own server"),a.self_hosted&&r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("input",{type:"text",placeholder:"url to  your website",className:"form-control ".concat(u.indexOf("domain")>-1?"profile__error_border":""),value:a.domain,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{domain:e.target.value}))}}),r.a.createElement("span",{className:"profile__prompt_note"},"this needs to be a full URL to your website. ex; ",r.a.createElement("strong",null,"http://www.example.com"),"."),r.a.createElement("p",null),r.a.createElement("a",{href:"/static/files/implement_sample.html",target:"_blank"},"Click for an example on how to add the store front app to your website ")),!a.self_hosted&&r.a.createElement("div",{className:"col-12 mt-2"},"Copy and paste your HTML below:",r.a.createElement("ul",null,r.a.createElement("li",null,"you need to provide hosting for your own images"),r.a.createElement("li",null,"do not include any tags that belong in the <head> tag")),r.a.createElement("textarea",{className:"form-control ".concat(u.indexOf("storefront_template")>-1?"profile__error_border":""),value:a.storefront_template,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{storefront_template:e.target.value}))}})),r.a.createElement("div",{className:"col-12"},"asfsadf",r.a.createElement(ee,{key:Math.random(),busy:y,label:"save updates",onClick:X,btnClass:"btn btn-sm btn-success",disabledBtnClass:"btn btn-sm btn-outline-secondary",outerClass:"float-right",disabled:!b||0!==u.length})))))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header",id:"headingThree"},r.a.createElement("h2",{className:"mb-0"},r.a.createElement("button",{type:"button",className:"btn btn-link collapsed","data-toggle":"collapse","data-target":"#collapseThree"},"settings"))),r.a.createElement("div",{id:"collapseThree",className:"collapse","aria-labelledby":"headingThree","data-parent":"#myAccordion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h5",null,"customer ordering"))),r.a.createElement("tr",null,r.a.createElement("td",null,"How many ",r.a.createElement("strong",null,"days")," before delivery day should ordering be disabled?"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",min:1,className:"form-control ".concat(u.indexOf("ordering_cutoff_time")>-1?"profile__error_border":""),value:a.ordering_cutoff_time>0?a.ordering_cutoff_time:"",onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{ordering_cutoff_time:parseInt(e.target.value)||0}))}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"How many ",r.a.createElement("strong",null,"days")," out should delivery windows be shown?"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",min:1,className:"form-control ".concat(u.indexOf("max_future_delivery_windows_time")>-1?"profile__error_border":""),value:a.max_future_delivery_windows_time>0?a.max_future_delivery_windows_time:"",onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{max_future_delivery_windows_time:parseInt(e.target.value)||0}))}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"What is the minimum per delivery?"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",min:10,className:"form-control ".concat(u.indexOf("delivery_minimum")>-1?"profile__error_border":""),value:a.delivery_minimum>0?a.delivery_minimum:"",onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{delivery_minimum:parseFloat(e.target.value)||0}))}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Customer must be present to receive order?"),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:a.customer_must_be_present,onChange:function(){return Z(Object(_.a)(Object(_.a)({},a),{},{customer_must_be_present:!a.customer_must_be_present}))}}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h5",null,"notifications"))),r.a.createElement("tr",null,r.a.createElement("td",null,"How many ",r.a.createElement("b",null,"days")," before an upcoming delivery day should the customer be notified?"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",min:1,className:"form-control ".concat(u.indexOf("upcoming_delivery_days_notification_time")>-1?"profile__error_border":""),value:a.upcoming_delivery_days_notification_time>0?a.upcoming_delivery_days_notification_time:"",onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{upcoming_delivery_days_notification_time:parseInt(e.target.value)||0}))}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Automatically notify customers of their upcoming delivery"),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:a.auto_notify_upcoming_deliveries,onChange:function(){return Z(Object(_.a)(Object(_.a)({},a),{},{auto_notify_upcoming_deliveries:!a.auto_notify_upcoming_deliveries}))}}))),a.auto_notify_upcoming_deliveries&&r.a.createElement("tr",null,r.a.createElement("td",null,"How many ",r.a.createElement("strong",null,"days")," before a delivery should the customer be notified?"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",min:1,className:"form-control ".concat(u.indexOf("upcoming_delivery_notification_time")>-1?"profile__error_border":""),value:a.upcoming_delivery_notification_time>0?a.upcoming_delivery_notification_time:"",onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{upcoming_delivery_notification_time:parseInt(e.target.value)||0}))}}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h5",null,"fees and tips"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Allow tipping?"),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:a.allow_tipping,onChange:function(){return Z(Object(_.a)(Object(_.a)({},a),{},{allow_tipping:!a.allow_tipping}))}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"What fee would  you  like to charge for each delivery?"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",min:1,className:"form-control ".concat(u.indexOf("delivery_fee")>-1?"profile__error_border":""),value:a.delivery_fee,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{delivery_fee:parseFloat(e.target.value)||0}))}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"What is the minimum order required for free delivery?"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",min:1,className:"form-control ".concat(u.indexOf("free_delivery_minimum")>-1?"profile__error_border":""),value:a.free_delivery_minimum,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{free_delivery_minimum:parseFloat(e.target.value)||0}))}}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h5",null,"tax"))),r.a.createElement("tr",null,r.a.createElement("td",null,"tax rate (enter as a percentage)"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",step:"0.01",min:0,max:"0.99",className:"form-control ".concat(u.indexOf("tax_rate")>-1?"profile__error_border":""),value:a.tax_rate,onChange:function(e){return Z(Object(_.a)(Object(_.a)({},a),{},{tax_rate:parseFloat(e.target.value)||0}))}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Tax tips?"),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:a.tax_tips,onChange:function(){return Z(Object(_.a)(Object(_.a)({},a),{},{tax_tips:!a.tax_tips}))}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Tax delivery fee?"),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:a.tax_delivery_fee,onChange:function(){return Z(Object(_.a)(Object(_.a)({},a),{},{tax_delivery_fee:!a.tax_delivery_fee}))}}))))),r.a.createElement("div",{className:"col-12"},"asfsadf",r.a.createElement(ee,{key:Math.random(),busy:y,label:"save updates",onClick:X,btnClass:"btn btn-sm btn-success",disabledBtnClass:"btn btn-sm btn-outline-secondary",outerClass:"float-right",disabled:!b||0!==u.length})))))))))}),ua=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="recipe",e.attachIngredient=function(t,a){return e._post("".concat(e.appName,"/").concat(e.view,"/").concat(t.id,"/attach_ingredient/"),a)},e}return a}(T)),pa=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Object(s.a)(this,a),(e=t.call(this)).name=void 0,e.description=void 0,e.instructions=void 0,e.is_vegan=void 0,e.ingredients=void 0,e.servings=void 0,e.notes=void 0,e.yld=void 0,e.name=n,e.description=c,e.instructions=r,e.is_vegan=l,e.ingredients=o,e.servings=i,e}return a}(L),ha=(a(53),function(){var e=Object(p.g)(),t=Object(c.useState)(!1),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(1),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)(new me),u=Object(U.a)(d,2),h=u[0],v=u[1],b=Object(c.useState)(""),_=Object(U.a)(b,2),f=_[0],g=_[1],E=Object(c.useState)(!1),y=Object(U.a)(E,2),w=y[0],N=y[1];Object(c.useEffect)((function(){O(1)}),[]);var O=function(e,t){l(!0),m(e),ua.pagedSearchResults(e,t).then((function(e){return v(e)})).catch((function(){return window.alert("unable to load recipes")})).then((function(){return l(!1)}))};return r.a.createElement("div",{className:"row recipes"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"recipes"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col-10 col-md-5"},r.a.createElement(ie,{id:"new_ingredient_input",type:"text",placeholder:"enter name to add or search",onUpdate:function(e,t){g(t),O(1,t)}})),r.a.createElement("div",{className:"col-2"},r.a.createElement(ee,{label:"add",onClick:function(){N(!0),ua.add(new pa(f)).then((function(t){return e.push({pathname:"/dashboard/recipe/edit/".concat(t.id)})})).catch((function(){return window.alert("unable to create recipe")})).then((function(){return N(!1)}))},busy:w,disabled:w||0===f.length,btnClass:"btn btn-sm btn-outline-success"})))),r.a.createElement("div",{className:"col-12 text-right"},r.a.createElement(ce,{numItems:h.count,currentPage:s,gotoPage:O})),r.a.createElement("div",{className:"col-12"},n&&r.a.createElement(ne,null),!n&&0===h.results.length&&r.a.createElement("div",null,r.a.createElement("hr",null),"add recipes for your menu items"),!n&&h.results.length>0&&r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"name"),r.a.createElement("th",null,"vegan"))),r.a.createElement("tbody",null,h.results.map((function(t){return r.a.createElement("tr",{key:"recipe_list_".concat(t.id),className:"recipes__recipe",onClick:function(){return e.push({pathname:"/dashboard/recipe/edit/".concat(t.id)})}},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.is_vegan?"yes":"no"))}))))))}),va=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="ingredient",e}return a}(T)),ba=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(s.a)(this,a),(e=t.call(this)).name=void 0,e.description=void 0,e.allergens=void 0,e.allergens_ids=void 0,e.name=n,e.description=c,e.allergens=r,e.allergens_ids=l,e}return a}(L),_a=(a(107),function(){var e=Object(c.useState)(!0),t=Object(U.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)(new me),o=Object(U.a)(l,2),i=o[0],s=o[1],m=Object(c.useState)(1),d=Object(U.a)(m,2),u=d[0],h=d[1],v=Object(c.useState)(!1),b=Object(U.a)(v,2),_=b[0],f=b[1],g=Object(c.useState)(""),E=Object(U.a)(g,2),y=E[0],w=E[1],N=Object(p.g)();Object(c.useEffect)((function(){j(1)}),[]);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f(!0),va.add(new ba(y)).then((function(t){e?N.push({pathname:"/dashboard/ingredient/edit/".concat(t.id)}):(w(""),j(1))})).catch((function(){return window.alert("unable to create ingredient")})).then((function(){return f(!1)}))},j=function(e,t){n(!0),h(e),va.pagedSearchResults(e,t).then((function(e){return s(e)})).catch((function(){return window.alert("unable to load ingredients")})).then((function(){return n(!1)}))};return r.a.createElement("div",{className:"row ingredients"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"ingredients"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col-10 col-md-5"},r.a.createElement(ie,{id:"new_ingredient_input",type:"text",placeholder:"enter name to add or search",onUpdate:function(e,t){w(t),j(1,t)}})),r.a.createElement("div",{className:"col-2"},r.a.createElement(ee,{label:"add",onClick:function(){return O(!1)},busy:_,disabled:_||0===y.length,btnClass:"btn btn-sm btn-outline-success"}),r.a.createElement(ee,{label:"add and edit",onClick:function(){return O(!0)},busy:_,disabled:_||0===y.length,btnClass:"btn btn-sm btn-outline-success",outerClass:"ml-2"})))),r.a.createElement("div",{className:"col-12 text-right"},r.a.createElement(ce,{numItems:i.count,currentPage:u,gotoPage:j})),r.a.createElement("div",{className:"col-12"},a&&r.a.createElement(ne,null),!a&&0===i.results.length&&r.a.createElement("div",null,r.a.createElement("hr",null),"add ingredients for your recipes"),!a&&i.results.length>0&&r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"name"),r.a.createElement("th",null,"allergens"))),r.a.createElement("tbody",null,i.results.map((function(e){return r.a.createElement("tr",{key:"ingredient_".concat(e.id),className:"ingredients__ingredient",onClick:function(){return N.push({pathname:"/dashboard/ingredient/edit/".concat(e.id)})}},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.allergens.map((function(t,a){return"".concat(t.name).concat(a<e.allergens.length-1?", ":"")}))))}))))))}),fa=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="allergen",e}return a}(T)),ga=function(){var e=Object(p.h)(),t=Object(p.g)(),a=Object(c.useState)(!0),n=Object(U.a)(a,2),l=n[0],o=n[1],i=Object(c.useState)([]),s=Object(U.a)(i,2),m=s[0],d=s[1],u=Object(c.useState)(new ba),h=Object(U.a)(u,2),v=h[0],b=h[1],f=Object(c.useState)(!1),g=Object(U.a)(f,2),E=g[0],y=g[1],w=Object(c.useState)(!1),N=Object(U.a)(w,2),O=N[0],j=N[1];Object(c.useEffect)((function(){Promise.all([fa.get(),va.get(e.id)]).then((function(e){d(e[0]),b(e[1]),o(!1)})).catch((function(){return window.alert("unable to load data")}))}),[]);return l?r.a.createElement(ne,null):r.a.createElement("div",{className:"row ingredient_edit"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"edit ingredient"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-sm btn-outline-info float-left",onClick:function(){return t.goBack()}},"back"),r.a.createElement(ee,{btnClass:"btn btn-sm btn-outline-".concat(E?"success":"secondary"," float-right"),outerClass:"float-right",label:"save",onClick:function(){j(!0),va.update(v).then((function(e){return t.goBack()}))},busy:O,disabled:!E})),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 col-md-6 mb-2"},r.a.createElement("h5",null,"name"),r.a.createElement("input",{className:"form-control",type:"text",value:v.name,onChange:function(e){y(!0),b(Object(_.a)(Object(_.a)({},v),{},{name:e.target.value}))}})),r.a.createElement("div",{className:"col-12 col-md-6 mp-2"},r.a.createElement("h5",null,"allergens"),m.map((function(e){return r.a.createElement("div",{className:"checkbox_selector",key:"allergen_".concat(e.id)},r.a.createElement("input",{type:"checkbox",checked:v.allergens_ids.indexOf(e.id)>-1,onChange:function(){var t=v.allergens_ids;t.indexOf(e.id)>-1?t=t.filter((function(t){return t!==e.id})):t.push(e.id),b(Object(_.a)(Object(_.a)({},v),{},{allergens_ids:t})),y(!0)}}),r.a.createElement("span",null,e.name))}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",null,"description"),r.a.createElement("textarea",{className:"form-control",value:v.description,onChange:function(e){y(!0),b(Object(_.a)(Object(_.a)({},v),{},{description:e.target.value}))}})))},Ea=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="recipe_ingredient",e}return a}(T)),ya=function(e){var t=Object(p.g)(),a=Object(c.useState)(e.recipeIngredient),n=Object(U.a)(a,2),l=n[0],o=n[1],i=Object(c.useState)(!1),s=Object(U.a)(i,2),m=s[0],d=s[1],u=Object(c.useState)(!1),h=Object(U.a)(u,2),v=h[0],b=h[1],f=Object(c.useState)(!1),g=Object(U.a)(f,2),E=(g[0],g[1]);return r.a.createElement("div",{className:"row recipe_edit__ingredient"},r.a.createElement("div",{className:"col-12 col-md-4 ingredient__title"},e.recipeIngredient.ingredient.name),0===e.scale_to&&r.a.createElement("div",{className:"col-12 col-md-8"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-3"},r.a.createElement("input",{type:"number",placeholder:"qty",className:"form-control col-4 float-left",value:l.quantity||"",onChange:function(e){o(Object(_.a)(Object(_.a)({},l),{},{quantity:parseFloat(e.target.value)})),b(!0)}}),r.a.createElement("select",{className:"form-control col-4 float-left ml-2",value:l.unit,onChange:function(e){o(Object(_.a)(Object(_.a)({},l),{},{unit:parseInt(e.target.value)})),b(!0)}},Ie.map((function(e,t){return r.a.createElement("option",{value:t,key:"opt_".concat(e)},e)})))),r.a.createElement("div",{className:"col-12 col-md-3 ingredient__allergens"},r.a.createElement("strong",null,"allergens:\xa0"),Pe.createStringListOfAllergensFromIngredient(e.recipeIngredient.ingredient)),r.a.createElement("div",{className:"col-12 col-md-6 mt-2 mt-md-0 text-center"},r.a.createElement(ee,{btnClass:"btn btn-".concat(v?"success":"outline-secondary"),label:"save",onClick:function(){d(!0),Ea.update(Object(_.a)(Object(_.a)({},l),{},{ingredient:l.ingredient.id})).then((function(e){o(e),d(!1),b(!1)}))},busy:m,disabled:!v}),r.a.createElement(ee,{outerClass:"ml-2",btnClass:"btn btn-outline-danger",label:"X",onClick:function(){window.confirm("are you sure you want to delete this ingredient?")&&(E(!0),Ea.delete(l.id).then((function(){return e.removeIngredient(l.id)})).catch((function(){return window.alert("unable to delete ingredient")})))},busy:!1,disabled:m}),r.a.createElement("button",{className:"btn btn-sm btn-outline-primary ml-2",onClick:function(){return t.push({pathname:"/dashboard/ingredient/edit/".concat(e.recipeIngredient.ingredient.id)})}},"goto ingredient")))),e.scale_to>0&&r.a.createElement("div",{className:"col-12 col-md-6"},Pe.scaleRecipeIngredient(l,e.servings,e.scale_to,e.yield),r.a.createElement("span",{className:"ml-5"},r.a.createElement("strong",null,"allergens:\xa0"),Pe.createStringListOfAllergensFromIngredient(e.recipeIngredient.ingredient))))},wa=function(e){return r.a.createElement("div",{className:"recipe_printout"},r.a.createElement("div",{className:"recipe_printout__name"},r.a.createElement("h1",null,e.recipe.name),r.a.createElement("h3",null,e.count," servings")),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ingredient"),r.a.createElement("td",null,"quantity"),r.a.createElement("td",null,"allergens"))),r.a.createElement("tbody",null,e.recipe.ingredients.map((function(t){var a=t.ingredient;return r.a.createElement("tr",{className:"recipe_printout__ingredient"},r.a.createElement("td",null,a.name),r.a.createElement("td",null,Pe.scaleRecipeIngredient(t,e.recipe.servings,e.count,e.recipe.yld)),r.a.createElement("td",null,0===a.allergens.length?r.a.createElement("span",null,"none"):Pe.createStringListOfAllergensFromIngredient(a)))})))),""!==e.recipe.instructions&&r.a.createElement("div",{className:"mt-2"},r.a.createElement("h3",null,"instructions:"),r.a.createElement("p",null,e.recipe.instructions)))},Na=function(){var e=Object(p.h)(),t=Object(p.g)(),a=Object(c.useState)(!0),n=Object(U.a)(a,2),l=n[0],o=n[1],i=Object(c.useState)(new pa),s=Object(U.a)(i,2),m=s[0],d=s[1],u=Object(c.useState)(!1),h=Object(U.a)(u,2),v=h[0],b=h[1],f=Object(c.useState)(!1),g=Object(U.a)(f,2),E=g[0],y=g[1],w=Object(c.useState)(new ba),N=Object(U.a)(w,2),O=N[0],j=N[1],C=Object(c.useState)(0),S=Object(U.a)(C,2),k=S[0],D=S[1],x=Object(c.useState)(0),I=Object(U.a)(x,2),A=I[0],M=I[1],P=Object(c.useState)(!1),T=Object(U.a)(P,2),F=T[0],z=T[1],R=Object(c.useState)(!1),L=Object(U.a)(R,2),B=L[0],V=L[1],Y=Object(c.useState)(!1),H=Object(U.a)(Y,2),q=H[0],W=H[1],G=Object(c.useState)(!1),Q=Object(U.a)(G,2),J=Q[0],K=Q[1],Z=Object(c.useState)(1),$=Object(U.a)(Z,2),te=$[0],ae=$[1],ce=Object(c.useState)(""),re=Object(U.a)(ce,2),le=re[0],oe=re[1];Object(c.useEffect)((function(){ua.get(e.id).then((function(e){return d(e)})).catch((function(){window.alert("unable to load recipe"),t.goBack()})).then((function(){return o(!1)}))}),[]);var ie=function(e){d(Object(_.a)(Object(_.a)({},m),{},{ingredients:m.ingredients.filter((function(t){return t.id!==e}))}))};if(l)return r.a.createElement(ne,null);var se=-1!==O.id&&k>0;return r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"row recipe_edit"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"edit recipe"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 align-self-center"},r.a.createElement("button",{className:"btn btn-sm btn-md-md btn-outline-info",onClick:function(){return t.goBack()}},"back"),r.a.createElement("img",{className:"recipe_scale__print float-right ml-2 d-none d-md-block",src:ze.a,alt:"print scaled recipe",onClick:function(){oe(r.a.createElement(wa,{recipe:m,count:J?te:m.servings})),setTimeout((function(){window.print()}),500)}}),r.a.createElement("button",{className:"btn btn-sm btn-outline-".concat(J?"danger":"primary"," float-right ml-2"),onClick:function(){return K(!J)}},J?"edit":"scale"),r.a.createElement("button",{className:"btn btn-sm btn-outline-primary float-right",onClick:function(){return t.push({pathname:"/dashboard/recipe/notes/".concat(m.id)})}},"notes ",m.notes.length>0?": ".concat(m.notes.length):""),r.a.createElement(ee,{btnClass:"btn btn-sm btn-outline-".concat(v?"success":"secondary"),outerClass:"float-right mr-2",label:"save",disabled:!v,onClick:function(){y(!0),ua.update(m).then((function(e){d(e),b(!1)})).catch((function(){return window.alert("unable to update recipe")})).then((function(){return y(!1)}))},busy:E})),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("h5",null,"name"),r.a.createElement("input",{className:"form-control",type:"text",value:m.name,onChange:function(e){b(!0),d(Object(_.a)(Object(_.a)({},m),{},{name:e.target.value}))}})),r.a.createElement("div",{className:"col-12 col-md-6 mt-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 col-md-2"},"is vegan",r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",checked:m.is_vegan,onChange:function(){d(Object(_.a)(Object(_.a)({},m),{},{is_vegan:!m.is_vegan})),b(!0)}})),r.a.createElement("div",{className:"col-4 col-md-2"},"servings",r.a.createElement("input",{type:"number",className:"form-control",value:m.servings,min:1,onChange:function(e){d(Object(_.a)(Object(_.a)({},m),{},{servings:parseInt(e.target.value)})),b(!0)}})),r.a.createElement("div",{className:"col-4 col-md-2"},"yield",r.a.createElement("br",null),r.a.createElement("input",{type:"number",className:"form-control",value:m.yld,max:"100",step:"0.1",min:"0.1",onChange:function(e){d(Object(_.a)(Object(_.a)({},m),{},{yld:parseFloat(e.target.value)})),b(!0)}})))),r.a.createElement("div",{className:"col-12 col-md-6 mt-2"},r.a.createElement("h5",null,"description"),r.a.createElement("textarea",{className:"form-control",value:m.description,onChange:function(e){d(Object(_.a)(Object(_.a)({},m),{},{description:e.target.value})),b(!0)}})),r.a.createElement("div",{className:"col-12 col-md-6 mt-2"},r.a.createElement("h5",null,"instructions"),r.a.createElement("textarea",{className:"form-control",value:m.instructions,onChange:function(e){d(Object(_.a)(Object(_.a)({},m),{},{instructions:e.target.value})),b(!0)}})),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("hr",null),!J&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",null,"ingredients")),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement(ue,{placeholder:"ingredient name to add or create",serviceFunction:va.pagedSearchResults,itemSelected:function(e){"string"===typeof e?(V(!0),j(new ba(e))):(V(!1),j(e))}})),r.a.createElement("div",{className:"col-12 col-md-6 mt-2 mt-md-0"},!J&&r.a.createElement("div",{className:"row justify-content-center"},B?r.a.createElement("div",null,r.a.createElement(ee,{btnClass:"btn btn-sm btn-outline-success",label:"add ingredient to database",onClick:function(){W(!0),va.add(O).then((function(e){return t.push({pathname:"/dashboard/ingredient/edit/".concat(e.id)})})).catch((function(){return window.alert("unable to add new ingredient to database")})).then((function(){return W(!1)}))},busy:q})):-1===O.id?r.a.createElement("div",null," "):r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-4"},r.a.createElement("input",{type:"number",placeholder:"qty",className:"form-control",value:k||"",onChange:function(e){return D(parseFloat(e.target.value))}})),r.a.createElement("div",{className:"col-4"},r.a.createElement("select",{className:"form-control",value:A,onChange:function(e){return M(parseInt(e.target.value))}},Ie.map((function(e,t){return r.a.createElement("option",{value:t,key:"opt_".concat(e)},e)})))),r.a.createElement("div",{className:"col-4"},r.a.createElement(ee,{label:"add ingredient",btnClass:"btn btn-sm btn-outline-".concat(se?"success":"secondary"),onClick:function(){z(!0),ua.attachIngredient(m,new Ae(k,A,1,O.id,m.id)).then((function(e){return d(Object(_.a)(Object(_.a)({},m),{},{ingredients:[e].concat(Object(X.a)(m.ingredients))}))})).catch((function(){return window.alert("unable to add ingredient to recipe")})).then((function(){return z(!1)}))},busy:F,disabled:!se})))))),J&&r.a.createElement("div",{className:"row recipe_scale"},r.a.createElement("div",{className:"col-6 col-md-2 float-left"},r.a.createElement("h5",null,"scale recipe"),"scaled to servings:",r.a.createElement("input",{className:"form-control",type:"number",min:1,value:te,onChange:function(e){return ae(parseFloat(e.target.value))}}))),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 recipe_edit__ingredients"},m.ingredients.map((function(e){return r.a.createElement(ya,{key:"rip_".concat(e.id),recipeIngredient:e,removeIngredient:ie,servings:m.servings,scale_to:J?te:0,yield:m.yld})})))),r.a.createElement("div",{className:"col-12 print_sheet"},le))},Oa=new(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).appName="dashboard",e.view="recipe_note",e}return a}(T)),ja=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return Object(s.a)(this,a),(e=t.call(this)).text=void 0,e.recipe=void 0,e.id=n,e.text=c,e.recipe=r,e}return a}(L),Ca=function(){var e=Object(p.h)(),t=Object(p.g)(),a=Object(c.useState)(!0),n=Object(U.a)(a,2),l=n[0],o=n[1],i=Object(c.useState)(new pa),s=Object(U.a)(i,2),m=s[0],d=s[1],u=Object(c.useState)(!1),h=Object(U.a)(u,2),v=h[0],b=h[1],f=Object(c.useState)(""),g=Object(U.a)(f,2),E=g[0],y=g[1],w=Object(c.useState)(!1),N=Object(U.a)(w,2),O=N[0],j=N[1];if(Object(c.useEffect)((function(){ua.get(e.id).then((function(e){d(e),o(!1)})).catch((function(){window.alert("unable to load notes"),t.goBack()}))}),[]),l)return r.a.createElement(ne,null);return r.a.createElement("div",{className:"row recipe_notes"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"recipe notes"),m.name,r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-sm btn-outline-info",onClick:function(){return t.goBack()}},"back"),r.a.createElement("button",{className:"btn btn-sm btn-outline-".concat(v?"warning":"primary"," float-right"),onClick:function(){b(!v),y("")}},v?"cancel":"add"," note")),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),v&&r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-7 recipe_notes_add"},r.a.createElement("h5",null,"note"),r.a.createElement("textarea",{value:E,onChange:function(e){return y(e.target.value)},className:"form-control"}),r.a.createElement(ee,{outerClass:"float-right mt-2",btnClass:"btn btn-sm btn-outline-".concat(0===E.length?"secondary":"success"),label:"save",onClick:function(){j(!0),Oa.add(new ja(-1,E,m.id)).then((function(e){d(Object(_.a)(Object(_.a)({},m),{},{notes:[e].concat(Object(X.a)(m.notes))})),y(""),b(!1)})).catch((function(){return window.alert("unable to save note")})).then((function(){j(!1)}))},busy:O,disabled:0===E.length}))),r.a.createElement("hr",null)),m.notes.sort((function(e,t){return e.id>t.id?-1:e.id<t.id?1:0})).map((function(e){return r.a.createElement("div",{className:"col-12"},r.a.createElement("strong",null,K.asShortDateTime(e.created_at)),r.a.createElement("p",{className:"mt-2"},e.text),r.a.createElement("hr",null))})))},Sa=a(61),ka=a.n(Sa),Da=function(){var e=Object(p.g)(),t=Object(c.useState)(0),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(!0),i=Object(U.a)(o,2),s=(i[0],i[1]),m=Object(c.useState)([]),d=Object(U.a)(m,2),u=d[0],h=d[1],v=Object(c.useState)(0),b=Object(U.a)(v,2),_=b[0],f=b[1],g=Object(c.useState)(""),E=Object(U.a)(g,2),y=E[0],w=E[1],N=Object(c.useState)(""),O=Object(U.a)(N,2),j=O[0],C=O[1],S=Object(c.useState)(!1),k=Object(U.a)(S,2),D=k[0],x=k[1],I=Object(c.useState)(!1),A=Object(U.a)(I,2),M=A[0],P=A[1],T=Object(c.useState)(""),F=Object(U.a)(T,2),z=F[0],R=F[1];r.a.useEffect((function(){L(1)}),[]);var L=function(e){l(e),s(!0),W.pagedSearchResults(e).then((function(e){h(e.results),s(!1),f(e.count)})).catch((function(e){return console.log(e)}))};return r.a.createElement("div",{className:"row restaurant_menu_manager justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"menu manager"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("h5",null,"create delivery menu"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 mb-2"},r.a.createElement("input",{className:"form-control",placeholder:"menu name",value:z,onChange:function(e){return R(e.target.value)}})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement("div",{className:"checkbox_selector"},r.a.createElement("input",{type:"checkbox",checked:M,onClick:function(){return P(!M)}}),r.a.createElement("span",null,"perpetual"))),r.a.createElement("div",{className:"col-6 col-md-9 text-right"},r.a.createElement(ee,{label:"create",busy:D,btnClass:"btn btn-sm btn-outline-success",outerClass:"ml-2 mt-2 mt-m-0",onClick:function(){y>j||!(M||""!==y&&""!==j)?window.alert("invalid dates"):""!==z?(x(!0),W.add(new G(""!==y?y:"1970-01-01",-1,""!==j?j:"1970-01-01",[],M,z)).then((function(e){return console.log()})).catch((function(e){window.alert("Unable to create week"),x(!1)}))):window.alert("enter a name for this menu")},disabled:D})),!M&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("small",null,"start date:"),r.a.createElement("br",null),r.a.createElement("input",{type:"date",id:"startDate",value:y,disabled:D||M,onChange:function(e){return w(e.target.value)}})),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("small",null,"end date:"),r.a.createElement("br",null),r.a.createElement("input",{type:"date",id:"endDate",value:j,disabled:D||M,onChange:function(e){return C(e.target.value)}})))),r.a.createElement(ce,{numItems:_,currentPage:n,gotoPage:L}),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 restaurant_menu_manager__menus"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("th",null,"menu name"),r.a.createElement("td",null,r.a.createElement("small",null,"click on menu to edit")),r.a.createElement("th",null,"active")),r.a.createElement("tbody",null,u.map((function(t){return r.a.createElement("tr",{key:"delday_".concat(t.id),onClick:function(){return e.push({pathname:"/dashboard/rest/menu/edit/".concat(t.id)})}},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.is_perpetual?r.a.createElement("div",{className:"col-12"},"perpetual"):r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 delivery_days__date"},K.asShortDate(t.date)," -"),r.a.createElement("div",{className:"col-12 col-md-6 delivery_days__end_date"},K.asShortDate(t.end_date)))),r.a.createElement("td",null,t.is_active?"yes":"no"))}))))))))},xa=(a(108),function(){var e=Object(p.g)(),t=Object(c.useState)(!0),a=Object(U.a)(t,2),n=a[0],l=a[1],o=Object(c.useState)(!1),i=Object(U.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)([]),u=Object(U.a)(d,2),h=u[0],v=u[1],b=["","pick-up","deliver ASAP","future delivery"];r.a.useEffect((function(){Pt.get().then((function(e){var t=[[],[],[],[],[],[],[]];e.forEach((function(e){return t[e.day].push(e)})),v(t),l(!1)}))}),[]);var _=function(e){window.confirm("Are you sure you want to remove this window?")&&Pt.delete(e.id).then((function(){var t=h;t[e.day]=t[e.day].filter((function(t){return t.id!==e.id})),v(t)})).catch((function(e){return window.alert("unable to delete window")}))};return n?r.a.createElement(ne,null):r.a.createElement("div",{className:"row restaurant_delivery justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"activity windows"),r.a.createElement("hr",null)),It.map((function(t,a){return r.a.createElement("div",{className:"col-12",key:t},r.a.createElement("div",{className:"row restaurant_delivery__day"},r.a.createElement("div",{className:"col-6 day_name"},t),r.a.createElement("div",{className:"col-6 text-right"},r.a.createElement(ee,{label:"add window",btnClass:"btn btn-sm btn-outline-success",onClick:function(){return function(t){m(!0),Pt.add(new qt(-1,"","17:00:00","21:00:00",t,!0,null,null,1)).then((function(t){return e.push({pathname:"/dashboard/delivery_window/edit/".concat(t.id,"/")})})).catch((function(e){return window.alert("unable to create window")}))}(a)},busy:s})),h[a].map((function(t){return r.a.createElement("div",{className:"col-12 col-md-6",key:"window_".concat(t.id)},r.a.createElement("div",{className:"row restaurant_delivery__window_inner"},!t.active&&r.a.createElement("div",{className:"col-12 text-center restaurant_delivery--disabled"},"disabled"),r.a.createElement("div",{className:"col-12"},r.a.createElement("strong",null,t.name||r.a.createElement("div",null,"\xa0"))),r.a.createElement("div",{className:"col-12"},b[t.type]),r.a.createElement("div",{className:"col-12"},J()(t.start_time,"HH:mm:ss").format("h:mm a")," -\xa0",J()(t.end_time,"HH:mm:ss").format("h:mm a")),r.a.createElement("div",{className:"col-12 text-right"},r.a.createElement("button",{className:"btn btn-sm btn-outline-primary mr-1",onClick:function(){return e.push({pathname:"/dashboard/delivery_window/edit/".concat(t.id,"/")})}},"edit"),r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){return _(t)}},"delete"))))})),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null))))})))))}),Ia=function(e){return r.a.createElement("div",{className:"row rest_dashboard_panel"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,At[e.orders_type])))},Aa=(a(109),a(110),function(){var e=Object(v.c)(),t=Object(p.g)(),a=Object(c.useState)("landing"),n=Object(U.a)(a,2),l=n[0],o=n[1],i=Object(c.useState)(""),s=Object(U.a)(i,2),m=s[0],d=s[1],u=Object(c.useState)(0),h=Object(U.a)(u,2),b=h[0],_=h[1],f=Object(c.useState)(""),g=Object(U.a)(f,2),E=g[0],w=g[1],N=Object(c.useState)(!1),O=Object(U.a)(N,2),j=O[0],C=O[1],S=function(e){_(e),ht.confirmZipCode(m).then((function(t){"OK"===t?D(1===e?"asap":"future"):(_(0),o("collect_email"))})).catch((function(e){return window.alert("unable to confirm zip")}))},k=function(){e(y(null))},D=function(e){t.push({pathname:"/dashboard/create_order/".concat(e,"/").concat(""!==m?m:"_")}),k()};return r.a.createElement("div",{className:"row route_order justify-content-center"},"landing"===l?r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("button",{className:"btn btn-outline-success",onClick:function(){return D("pickup")}},"Pick-Up Order")),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("h3",null,"Delivery")),r.a.createElement("div",{className:"col-2 text-center"},r.a.createElement("input",{className:"form-control",placeholder:"zipcode",disabled:0!==b,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement(ee,{btnClass:"btn btn-outline-primary mr-2",label:"Deliver ASAP",onClick:function(){return S(1)},busy:1===b,disabled:2===b||""===m}),r.a.createElement(ee,{btnClass:"btn btn-outline-primary mr-2",label:"Future Delivery",onClick:function(){return S(2)},busy:2===b,disabled:1===b||""===m}))):r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("p",null,'"I\'m sorry, but we do not currently deliver to your area."'),r.a.createElement("p",null,'"If I can get your email address, we will let you know when we begin delivering to your area!"')),r.a.createElement("div",{className:"col-5 text-center"},r.a.createElement("input",{className:"form-control",disabled:j,value:E,onChange:function(e){return w(e.target.value)}}),r.a.createElement(ee,{label:"Save Email Address",btnClass:"btn btn-outline-success",outerClass:"mt-2",onClick:function(){C(!0),ht.add({email:E,code:m}).then(k).catch((function(e){return window.alert("unable to save email address")}))},busy:j,disabled:""===E||j}))),r.a.createElement("div",{className:"route_order__close theme__warning",onClick:function(){return e(y(null))}},"X"))}),Ma=function(){var e=Object(v.c)();return r.a.createElement("div",{className:"row rest_dashboard"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"Dashboard"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("button",{className:"btn btn-outline-info",onClick:function(){e(y(r.a.createElement(Aa,null)))}},"create order")),r.a.createElement("div",{className:"col-12"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(Ia,{orders_type:$e})),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(Ia,{orders_type:et})),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(Ia,{orders_type:tt})))},Pa=function(){return r.a.createElement("div",{className:"row create_order"},"create order")},Ta=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(s.a)(this,a),(e=t.call(this)).name=void 0,e.index=void 0,e.enabled=void 0,e.items=void 0,e.name=n,e.index=c,e.enabled=r,e.items=l,e}return a}(L),Fa=(a(36),function(e){var t=Object(p.g)(),a=Object(c.useState)(e.menuItem),n=Object(U.a)(a,2),l=n[0],o=n[1];return r.a.createElement("div",{className:"row restaurant_menu_item"},r.a.createElement("div",{className:"col-12 ".concat(l.sold_out?"restaurant_menu_item--error":""," restaurant_menu_item__header")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-9"},l.menu_item.name),r.a.createElement("div",{className:"col-3 ".concat(0===l.price?"restaurant_menu_item--error":"")},"$",l.price.toFixed(2)))),r.a.createElement("div",{className:"col-".concat(l.menu_item.image?"7":"12"," restaurant_menu_item__description")},l.menu_item.description),l.menu_item.image&&r.a.createElement("div",{className:"col-5 restaurant_menu_item__image"},r.a.createElement("img",{src:k.API_URL+k.UPLOADS_PATH+"/"+l.menu_item.image})),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 text-center"},r.a.createElement("input",{className:"form-control",type:"number",value:l.price,onChange:function(e){return o(Object(_.a)(Object(_.a)({},l),{},{price:parseFloat(e.target.value)}))},onBlur:function(){}}),r.a.createElement("small",null,"price")),r.a.createElement("div",{className:"col-6 text-right"},r.a.createElement("button",{className:"btn btn-sm btn-".concat(l.sold_out?"danger":"outline-secondary"," mr-1"),onClick:function(){var t=l;if(l.sold_out)t.sold_out=!1;else{if(!window.confirm('Do you want to mark "'.concat(l.menu_item.name,'" as SOLD OUT?\n\nMarking item sold out will exclude it from pick-up and delivery orders only.')))return;t.sold_out=!0}oe.update(t).then((function(t){o(t),e.categoryItemUpdated(t)})).catch((function(e){return window.alert("unable to update sold out status")}))}},"sold out")))),r.a.createElement("div",{className:"col-12 text-right mt-1"},r.a.createElement("button",{className:"btn btn-sm btn-outline-primary mr-1",onClick:function(){return t.push({pathname:"/dashboard/menu/edit/".concat(l.menu_item.id,"/")})}},"edit"),r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){window.confirm('Are you sure you want to remove "'.concat(e.menuItem.menu_item.name,'"?'))&&e.deleteMenuItem(e.menuItem)}},"delete")))}),za=function(e){var t=Object(p.g)(),a=Object(c.useState)(!1),n=Object(U.a)(a,2),l=n[0],o=n[1],i=Object(c.useState)(e.category),s=Object(U.a)(i,2),m=s[0],d=s[1],u=Object(c.useState)(""),h=Object(U.a)(u,2),v=h[0],b=h[1],f=function(a){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];oe.add({delivery_day:e.deliveryDay.id,menu_item:a.id,delivery_category:m.id}).then((function(e){n?t.push({pathname:"/dashboard/menu/edit/".concat(a.id,"/")}):(b(""),d(Object(_.a)(Object(_.a)({},m),{},{delivery_day_items:[].concat(Object(X.a)(m.delivery_day_items),[e])})))})).catch((function(e){return window.alert("unable to add menu item")})).finally((function(){return o(!1)}))},g=function(e){oe.delete(e.id).then((function(){return d(Object(_.a)(Object(_.a)({},m),{},{delivery_day_items:m.delivery_day_items.filter((function(t){return t.id!==e.id}))}))})).catch((function(e){return window.alert("unable to delete menu item")}))},E=function(e){d(Object(_.a)(Object(_.a)({},m),{},{delivery_day_items:m.delivery_day_items.map((function(t){return t.id===e.id?e:t}))}))},y=m.delivery_day_items.filter((function(e){return e.sold_out})).length>0;return r.a.createElement("div",{className:"row menu_category"},r.a.createElement("div",{className:"col-12 menu_category__inner"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8 col-md-8 menu_category__name"},m.menu_category.name),r.a.createElement("div",{className:"col-4 col-md-4 menu_category__controls text-right"},r.a.createElement("button",{className:"btn btn-sm btn-outline-".concat(e.canMoveUp?"primary":"secondary"),disabled:!e.canMoveUp,onClick:function(){return e.move(-1,m)}},"UP"),r.a.createElement("button",{className:"btn btn-sm btn-outline-".concat(e.canMoveDown?"primary":"secondary"," mr-1"),disabled:!e.canMoveDown,onClick:function(){return e.move(1,m)}},"DN"),r.a.createElement("button",{className:"btn btn-sm btn-outline-info",onClick:function(){return e.categorySelected(e.isOpen?null:m)}},e.isOpen?"-":"+"),y&&r.a.createElement("div",{className:"menu_category__has_sold_out"},"has sold out item")))),e.isOpen&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-7 col-md-6 mt-1"},r.a.createElement(ue,{placeholder:"new menu item name",serviceFunction:le.pagedSearchResults,itemSelected:function(e){b(e)}})),r.a.createElement("div",{className:"col-3 col-md-3"},r.a.createElement(ee,{btnClass:"btn btn-sm btn-outline-success",outerClass:"mt-1",label:"+",busy:l,onClick:function(){o(!0),"string"===typeof v?le.add({name:v,delivery_category:m.id}).then((function(e){return f(e,!0)})).catch((function(e){return window.alert("unable to create menu item")})):f(v)}})),m.delivery_day_items.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement(Fa,{menuItem:e,deleteMenuItem:g,categoryItemUpdated:E}))}))))},Ra=function(){var e,t=Object(p.h)(),a=Object(p.g)(),n=Object(c.useState)(void 0),l=Object(U.a)(n,2),o=l[0],i=l[1],s=Object(c.useState)(!1),m=Object(U.a)(s,2),d=m[0],u=m[1],h=Object(c.useState)([]),v=Object(U.a)(h,2),b=v[0],f=v[1],g=Object(c.useState)(null),E=Object(U.a)(g,2),y=E[0],w=E[1],N=Object(c.useState)(new G),O=Object(U.a)(N,2),j=O[0],C=O[1],S=Object(c.useState)(!1),k=Object(U.a)(S,2),D=k[0],x=k[1];r.a.useEffect((function(){W.get(t.id).then((function(e){C(e),f(e.categories)}))}),[]);var I=function(e,t){var a=b.filter((function(e){return e.id!==t.id}));a.splice(t.index+e-1,0,t),f(a),console.log(a),A()},A=function(){clearTimeout(e),e=setTimeout(M,5e3)},M=function(){clearInterval(e),console.log(b);var t=b.map((function(e,t){return console.log(e),e.index=t,e}));Be.updateIndexes(t.map((function(e){return e.id}))),f(t)};return r.a.createElement("div",{className:"row rest_menu_manager justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"edit menu"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-sm btn-outline-info",onClick:function(){return a.goBack()}},"back"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 mb-2"},r.a.createElement("input",{className:"form-control",placeholder:"menu name",value:j.name,onChange:function(e){return C(Object(_.a)(Object(_.a)({},j),{},{name:e.target.value}))}})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement("div",{className:"checkbox_selector"},r.a.createElement("input",{type:"checkbox",checked:j.is_perpetual,onClick:function(){return C(Object(_.a)(Object(_.a)({},j),{},{is_perpetual:!j.is_perpetual}))}}),r.a.createElement("span",null,"perpetual"))),r.a.createElement("div",{className:"col-6 col-md-9 text-right"},r.a.createElement(ee,{label:"save",busy:D,btnClass:"btn btn-sm btn-outline-success",outerClass:"ml-2 mt-2 mt-m-0",onClick:function(){j.date>j.end_date||!(j.is_perpetual||""!==j.date&&""!==j.end_date)?window.alert("invalid dates"):""!==j.name?(x(!0),W.update(j).then((function(e){C(e),x(!1)}))):window.alert("enter a name for this menu")},disabled:D})),!j.is_perpetual&&r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("small",null,"start date:"),r.a.createElement("br",null),r.a.createElement("input",{type:"date",id:"startDate",value:j.date,disabled:D||j.is_perpetual,onChange:function(e){return C(Object(_.a)(Object(_.a)({},j),{},{date:e.target.value}))}})),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("small",null,"end date:"),r.a.createElement("br",null),r.a.createElement("input",{className:"ml-2",type:"date",id:"endDate",value:j.end_date,disabled:D||j.is_perpetual,onChange:function(e){return C(Object(_.a)(Object(_.a)({},j),{},{end_date:e.target.value}))}})))),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",null,"categories")),r.a.createElement("div",{className:"col-9"},r.a.createElement(ue,{placeholder:"add category name",serviceFunction:Be.pagedSearchResults,itemSelected:function(e){i(e)}})),r.a.createElement("div",{className:"col-3"},r.a.createElement(ee,{label:"+",onClick:function(){u(!0),W.attachCategory(j,o).then((function(e){f([].concat(Object(X.a)(b),[e])),u(!1),i(new Ta)})).catch((function(e){return window.alert("unable to create category")}))},busy:d,btnClass:"btn btn-sm btn-outline-success",disabled:void 0===o})),r.a.createElement("div",{className:"col-12 mt-2"},b.map((function(e){return r.a.createElement(za,{deliveryDay:j,category:e,move:I,canMoveUp:e.index>1,canMoveDown:e.index<b.length,key:"category_".concat(e.id),isOpen:e.id===(null===y||void 0===y?void 0:y.id),categorySelected:function(e){return w(e)}})}))))))},Ua=function(){var e=Object(c.useState)(!1),t=Object(U.a)(e,2),a=t[0],n=(t[1],Object(c.useState)(new me)),l=Object(U.a)(n,2),o=l[0],i=l[1],s=Object(c.useState)(1),m=Object(U.a)(s,2),d=(m[0],m[1]);r.a.useEffect((function(){u(1)}),[]);var u=function(e,t){d(e),le.get().then((function(e){i(e)})).catch((function(e){window.alert("Unable To Load Menu Items")}))};if(a)return r.a.createElement(ne,null);var p=o.results.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0}));return r.a.createElement("div",{className:"row restaurant_menu_items"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",null,"menu items"),r.a.createElement("hr",null)),p.map((function(e){return r.a.createElement("div",{className:"col-6 col-md-3 menu_items__item",key:"mi_".concat(e.id)},r.a.createElement(ye.b,{className:"row",to:"/dashboard/menu/edit/".concat(e.id,"/")},r.a.createElement("div",{className:"col-12 menu_items__menuitem_name no_wrap_text"},e.name),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"menu_items__image"},r.a.createElement("img",{src:"".concat(k.API_URL+k.UPLOADS_PATH,"/").concat(e.image),alt:e.name})))))})))},La=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={connecting:!0,loggedIn:!1},e.openNav=function(){document.getElementById("mySidenav").style.width="250px"},e.closeNav=function(){document.getElementById("mySidenav").style.width="0"},e.componentDidMount=function(){var t=window.localStorage.getItem("refresh_token");null!==t?F.validateToken(t).then((function(t){e.props.login(t,""),e.getSettings()})).catch((function(t){e.setState({connecting:!1,loggedIn:!1})})):e.setState({connecting:!1,loggedIn:!1})},e.getSettings=function(){ma.get_settings().then((function(t){e.props.updateOperatorSettings({type:t.type}),e.setState({connecting:!1,loggedIn:!0})})).catch((function(t){return e.setState({connecting:!1,loggedIn:!1})}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this;if(this.state.connecting)return r.a.createElement("div",null,"Connecting...");if(!this.props.auth.loggedIn)return r.a.createElement(We,null);var a=function(e){var a=e.component,n=Object(i.a)(e,["component"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return t.props.auth.loggedIn||t.state.loggedIn?r.a.createElement(a,e):r.a.createElement(p.a,{to:{pathname:"/dashboard/login"}})}}))};return r.a.createElement("div",{className:"container-fluid app"},this.props.auth.loggedIn&&r.a.createElement("div",{id:"mySidenav",className:"sidenav"},r.a.createElement("div",{className:"closebtn",onClick:this.closeNav},"x"),r.a.createElement(H,{closeNav:this.closeNav})),r.a.createElement("div",{className:"row app_header"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"app_header__title"},r.a.createElement("img",{src:ka.a,alt:"daisy chef logo"})),r.a.createElement("div",{className:"app_header__menu_toggle",onClick:this.openNav},r.a.createElement("img",{src:R.a,alt:"open the menu"})))),r.a.createElement("div",{className:"row app__page"},r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement(p.d,null,r.a.createElement(a,{path:"/dashboard/browser/day/:targetDate",component:Bt}),r.a.createElement(a,{path:"/dashboard/browser/:month/:year",component:Ft}),r.a.createElement(a,{path:"/dashboard/browser",component:Ft}),r.a.createElement(a,{path:"/dashboard/coupon/add",component:ut}),r.a.createElement(a,{path:"/dashboard/coupons",component:mt}),r.a.createElement(a,{path:"/dashboard/create_order/:type/:zip",component:Pa}),r.a.createElement(a,{path:"/dashboard/deliveries",component:re}),r.a.createElement(a,{path:"/dashboard/delivery/edit/:id",component:Oe}),r.a.createElement(a,{path:"/dashboard/delivery/duplicate/:id",component:dt}),r.a.createElement(a,{path:"/dashboard/delivery_window/edit/:id",component:Jt}),r.a.createElement(a,{path:"/dashboard/delivery_window/add",component:Jt}),r.a.createElement(a,{path:"/dashboard/delivery_window",component:Gt}),r.a.createElement(a,{path:"/dashboard/delivery_planner/:delivery_window/:target_date",component:ia}),r.a.createElement(a,{path:"/dashboard/ingredient/edit/:id",component:ga}),r.a.createElement(a,{path:"/dashboard/ingredient",component:_a}),r.a.createElement(a,{path:"/dashboard/mail",component:wt}),r.a.createElement(a,{path:"/dashboard/menu",component:He}),r.a.createElement(a,{path:"/dashboard/newsletter/edit/:id",component:Dt}),r.a.createElement(a,{path:"/dashboard/newsletter",component:kt}),r.a.createElement(a,{path:"/dashboard/orders/export",component:Ke}),r.a.createElement(a,{path:"/dashboard/orders/edit/:id",component:rt}),r.a.createElement(a,{path:"/dashboard/order/mail/:id",component:ct}),r.a.createElement(a,{path:"/dashboard/orders",component:Qe}),r.a.createElement(a,{path:"/dashboard/profile",component:da}),r.a.createElement(a,{path:"/dashboard/rest/menu/edit/:id",component:Ra}),r.a.createElement(a,{path:"/dashboard/rest/menu",component:Da}),r.a.createElement(a,{path:"/dashboard/rest/menu_items",component:Ua}),r.a.createElement(a,{path:"/dashboard/rest/delivery",component:xa}),r.a.createElement(a,{path:"/dashboard/recipe/edit/:id",component:Na}),r.a.createElement(a,{path:"/dashboard/recipe/notes/:id",component:Ca}),r.a.createElement(a,{path:"/dashboard/recipe",component:ha}),r.a.createElement(a,{path:"/dashboard/zone",component:ta}),r.a.createElement(a,{path:"/dashboard/",component:(null===(e=this.props.operator.settings)||void 0===e?void 0:e.type)===B?Ft:Ma}),r.a.createElement(a,{path:"",component:Ft}),r.a.createElement(p.b,{path:"/dashboard/login",component:We})))),null!=this.props.helpers.overlayComponent&&r.a.createElement("div",{className:"app_overlay theme__overlay_background",onClick:function(){return t.props.setOverlay(null)}},r.a.createElement("div",{className:"app_overlay__inner theme__background theme__border_color",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.helpers.overlayComponent))))))}}]),a}(r.a.Component),Ba=Object(v.b)((function(e){return{auth:e.authReducer,operator:e.operatorReducer,helpers:e.helpersReducer}}),(function(e){return{login:Object(h.b)(S,e),updateOperatorSettings:Object(h.b)(O,e),setOverlay:Object(h.b)(w,e)}}))(La);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v.a,{store:C},r.a.createElement(ye.a,null,r.a.createElement(Ba,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[63,1,2]]]);
//# sourceMappingURL=main.24238eb6.chunk.js.map